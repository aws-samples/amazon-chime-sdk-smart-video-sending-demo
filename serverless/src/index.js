/*! For license information please see meeting-bundle.js.LICENSE.txt */
var app_meeting;(()=>{var __webpack_modules__={4537:e=>{"use strict";e.exports=function(e,t){for(var i=new Array(arguments.length-1),n=0,r=2,o=!0;r<arguments.length;)i[n++]=arguments[r++];return new Promise((function(r,s){i[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];r.apply(null,t)}};try{e.apply(t||null,i)}catch(e){o&&(o=!1,s(e))}}))}},7419:(e,t)=>{"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var n=new Array(64),r=new Array(123),o=0;o<64;)r[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;i.encode=function(e,t,i){for(var r,o=null,s=[],a=0,l=0;t<i;){var c=e[t++];switch(l){case 0:s[a++]=n[c>>2],r=(3&c)<<4,l=1;break;case 1:s[a++]=n[r|c>>4],r=(15&c)<<2,l=2;break;case 2:s[a++]=n[r|c>>6],s[a++]=n[63&c],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=n[r],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";i.decode=function(e,t,i){for(var n,o=i,a=0,l=0;l<e.length;){var c=e.charCodeAt(l++);if(61===c&&a>1)break;if(void 0===(c=r[c]))throw Error(s);switch(a){case 0:n=c,a=1;break;case 1:t[i++]=n<<2|(48&c)>>4,n=c,a=2;break;case 2:t[i++]=(15&n)<<4|(60&c)>>2,n=c,a=3;break;case 3:t[i++]=(3&n)<<6|c,a=0}}if(1===a)throw Error(s);return i-o},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],n=0;n<i.length;)i[n].fn===t?i.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,i)}return this}},945:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),n=128===i[3];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3]}function o(e,n,r){t[0]=e,n[r]=i[3],n[r+1]=i[2],n[r+2]=i[1],n[r+3]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],t[0]}function a(e,n){return i[3]=e[n],i[2]=e[n+1],i[1]=e[n+2],i[0]=e[n+3],t[0]}e.writeFloatLE=n?r:o,e.writeFloatBE=n?o:r,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,i,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,i,n);else if(isNaN(t))e(2143289344,i,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,i,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,i,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,i,n)}}function s(e,t,i){var n=e(t,i),r=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:r*(1/0):0===o?1401298464324817e-60*r*s:r*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,r),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),n=128===i[7];function r(e,n,r){t[0]=e,n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3],n[r+4]=i[4],n[r+5]=i[5],n[r+6]=i[6],n[r+7]=i[7]}function o(e,n,r){t[0]=e,n[r]=i[7],n[r+1]=i[6],n[r+2]=i[5],n[r+3]=i[4],n[r+4]=i[3],n[r+5]=i[2],n[r+6]=i[1],n[r+7]=i[0]}function s(e,n){return i[0]=e[n],i[1]=e[n+1],i[2]=e[n+2],i[3]=e[n+3],i[4]=e[n+4],i[5]=e[n+5],i[6]=e[n+6],i[7]=e[n+7],t[0]}function a(e,n){return i[7]=e[n],i[6]=e[n+1],i[5]=e[n+2],i[4]=e[n+3],i[3]=e[n+4],i[2]=e[n+5],i[1]=e[n+6],i[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:o,e.writeDoubleBE=n?o:r,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,i,n,r,o){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,r,o+t),e(1/n>0?0:2147483648,r,o+i);else if(isNaN(n))e(0,r,o+t),e(2146959360,r,o+i);else if(n>17976931348623157e292)e(0,r,o+t),e((s<<31|2146435072)>>>0,r,o+i);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,r,o+t),e((s<<31|a/4294967296)>>>0,r,o+i);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=n*Math.pow(2,-l))>>>0,r,o+t),e((s<<31|l+1023<<20|1048576*a&1048575)>>>0,r,o+i)}}}function s(e,t,i,n,r){var o=e(n,r+t),s=e(n,r+i),a=2*(s>>31)+1,l=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===l?c?NaN:a*(1/0):0===l?5e-324*a*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,r,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function i(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function n(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:e=>{"use strict";e.exports=function(e,t,i){var n=i||8192,r=n>>>1,o=null,s=n;return function(i){if(i<1||i>r)return e(i);s+i>n&&(o=e(n),s=0);var a=t.call(o,s,s+=i);return 7&s&&(s=1+(7|s)),a}}},4997:(e,t)=>{"use strict";var i=t;i.length=function(e){for(var t=0,i=0,n=0;n<e.length;++n)(i=e.charCodeAt(n))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},i.read=function(e,t,i){if(i-t<1)return"";for(var n,r=null,o=[],s=0;t<i;)(n=e[t++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),s=0);return r?(s&&r.push(String.fromCharCode.apply(String,o.slice(0,s))),r.join("")):String.fromCharCode.apply(String,o.slice(0,s))},i.write=function(e,t,i){for(var n,r,o=i,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[i++]=n:n<2048?(t[i++]=n>>6|192,t[i++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&r),++s,t[i++]=n>>18|240,t[i++]=n>>12&63|128,t[i++]=n>>6&63|128,t[i++]=63&n|128):(t[i++]=n>>12|224,t[i++]=n>>6&63|128,t[i++]=63&n|128);return i-o}},8320:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(3922);t.default=class{constructor(e,t,i,n=1e3,r=200){this.realtimeController=e,this.selfAttendeeId=t,this.hasBandwidthPriorityCallback=i,this.waitIntervalMs=n,this.updateIntervalMs=r,this.speakerScores={},this.speakerMuteState={},this.detectorCallbackToHandler=new Map,this.detectorCallbackToScoresTimer=new Map,this.detectorCallbackToActivityTimer=new Map,this.hasBandwidthPriority=!1,this.mostRecentUpdateTimestamp={}}needUpdate(e){return!this.activeSpeakers||0===this.speakerScores[e]&&this.activeSpeakers.includes(e)||this.speakerScores[e]>0&&!this.activeSpeakers.includes(e)}updateActiveSpeakers(e,t,i){if(!this.needUpdate(i))return;const n=[],r=Object.keys(this.speakerScores);for(let e=0;e<r.length;e++){const t=r[e];n.push({attendeeId:t,activeScore:this.speakerScores[t]})}const o=n.sort(((e,t)=>t.activeScore-e.activeScore)).filter((function(e){return e.activeScore>0})).map((function(e){return e.attendeeId}));this.activeSpeakers=o,t(o);const s=o.length>0&&o[0]===this.selfAttendeeId&&e.prioritizeVideoSendBandwidthForActiveSpeaker();this.hasBandwidthPriority!==s&&(this.hasBandwidthPriority=s,this.hasBandwidthPriorityCallback(s))}updateScore(e,t,i,n,r){const o=e.calculateScore(i,n,r);this.speakerScores[i]!==o&&(this.speakerScores[i]=o,this.mostRecentUpdateTimestamp[i]=Date.now(),this.updateActiveSpeakers(e,t,i))}subscribe(e,t,i,n){const o=(i,n)=>{if(!n)return this.speakerScores[i]=0,this.mostRecentUpdateTimestamp[i]=Date.now(),void this.updateActiveSpeakers(e,t,i);this.realtimeController.realtimeSubscribeToVolumeIndicator(i,((i,n,r,o)=>{this.mostRecentUpdateTimestamp[i]=Date.now(),null!==r&&(this.speakerMuteState[i]=r),this.updateScore(e,t,i,n,r)}))};this.detectorCallbackToHandler.set(t,o);const s=new r.default(this.updateIntervalMs);if(s.start((()=>{for(const i in this.speakerScores)Date.now()-this.mostRecentUpdateTimestamp[i]>this.waitIntervalMs&&this.updateScore(e,t,i,0,this.speakerMuteState[i])})),this.detectorCallbackToActivityTimer.set(t,s),i&&n){const e=new r.default(n);e.start((()=>{i(this.speakerScores)})),this.detectorCallbackToScoresTimer.set(t,e)}this.realtimeController.realtimeSubscribeToAttendeeIdPresence(o)}unsubscribe(e){const t=this.detectorCallbackToHandler.get(e);this.detectorCallbackToHandler.delete(e),t&&this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(t);const i=this.detectorCallbackToActivityTimer.get(e);i&&(i.stop(),this.detectorCallbackToActivityTimer.delete(e));const n=this.detectorCallbackToScoresTimer.get(e);n&&(n.stop(),this.detectorCallbackToHandler.delete(e))}destroy(){return n(this,void 0,void 0,(function*(){for(const e of this.detectorCallbackToHandler.values())this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(e);for(const e of this.detectorCallbackToActivityTimer.values())e.stop();for(const e of this.detectorCallbackToScoresTimer.values())e.stop();this.detectorCallbackToHandler.clear(),this.detectorCallbackToActivityTimer.clear(),this.detectorCallbackToScoresTimer.clear()}))}}},2363:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e=.9,t=.01,i=.2,n=.2){this.speakerWeight=e,this.cutoffThreshold=t,this.silenceThreshold=i,this.takeoverRate=n,this.volumes={}}calculateScore(e,t,i){(i||null===t)&&(t=0),this.volumes.hasOwnProperty(e)||(this.volumes[e]=0),t=t>this.silenceThreshold?1:0;const n=this.volumes[e]*this.speakerWeight+t*(1-this.speakerWeight);this.volumes[e]=n;for(const i in this.volumes)i!==e&&(this.volumes[i]=Math.max(this.volumes[i]-this.takeoverRate*t,0));return n<this.cutoffThreshold?0:n}prioritizeVideoSendBandwidthForActiveSpeaker(){return!0}}},7602:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{}},6802:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(543);t.default=class{constructor(e){this.logger=e,this.audioDevice=null,this.audioElement=null,this.audioStream=null,this.browserBehavior=new r.default}bindAudioElement(e){return n(this,void 0,void 0,(function*(){if(!e)throw new Error(`Cannot bind audio element: ${e}`);return this.audioElement=e,this.audioElement.autoplay=!0,this.bindAudioMix()}))}unbindAudioElement(){this.audioElement&&(this.audioElement.srcObject=null,this.audioElement=null)}bindAudioStream(e){return n(this,void 0,void 0,(function*(){if(e){this.audioStream=e;try{yield this.bindAudioMix()}catch(e){this.logger&&this.logger.warn(`Failed to bind audio stream: ${e}`)}}}))}bindAudioDevice(e){return n(this,void 0,void 0,(function*(){if(e&&!this.browserBehavior.supportsSetSinkId())throw new Error("Cannot select audio output device. This browser does not support setSinkId.");return this.audioDevice=e,this.bindAudioMix()}))}bindAudioMix(){var e,t;return n(this,void 0,void 0,(function*(){if(!this.audioElement)return;this.audioStream&&(this.audioElement.srcObject=this.audioStream);const i=(null===(e=this.audioDevice)||void 0===e?void 0:e.deviceId)!==this.audioElement.sinkId;if(i&&void 0===this.audioElement.sinkId)throw new Error("Cannot select audio output device. This browser does not support setSinkId.");const n=this.audioDevice?this.audioDevice.deviceId:"";if(n===this.audioElement.sinkId)return;const r=this.audioElement,o=this.audioStream;if(this.browserBehavior.hasChromiumWebRTC()&&(r.srcObject=null),i)try{yield r.setSinkId(n)}catch(e){throw null===(t=this.logger)||void 0===t||t.error(`Failed to set sinkId for audio element: ${e}`),e}this.browserBehavior.hasChromiumWebRTC()&&(r.srcObject=o)}))}}},3765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e=null){this.audioBitrateBps=e}static fullbandSpeechMono(){return new i(4e4)}static fullbandMusicMono(){return new i(64e3)}}t.default=i},1876:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.logger=null,this.browserBehavior=null,this.signalingClient=null,this.meetingSessionConfiguration=null,this.peer=null,this.previousSdpOffer=null,this.sdpOfferInit=null,this.audioVideoController=null,this.realtimeController=null,this.videoTileController=null,this.mediaStreamBroker=null,this.audioMixController=null,this.activeAudioInput=null,this.activeVideoInput=null,this.transceiverController=null,this.indexFrame=null,this.iceCandidates=[],this.iceCandidateHandler=null,this.iceGatheringStateEventHandler=null,this.sdpAnswer=null,this.turnCredentials=null,this.reconnectController=null,this.removableObservers=[],this.audioProfile=null,this.videoStreamIndex=null,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,this.lastKnownVideoAvailability=null,this.localVideoSender=null,this.localAudioSender=null,this.videoCaptureAndEncodeParameter=null,this.videosToReceive=null,this.videoSubscriptions=null,this.videosPaused=null,this.videoDuplexMode=null,this.volumeIndicatorAdapter=null,this.statsCollector=null,this.connectionMonitor=null,this.videoInputAttachedTimestampMs=0,this.audioDeviceInformation={},this.videoDeviceInformation={},this.enableSimulcast=!1,this.eventController=null,this.signalingOpenDurationMs=null,this.iceGatheringDurationMs=null,this.startAudioVideoTimestamp=null,this.attendeePresenceDurationMs=null,this.meetingStartDurationMs=null,this.poorConnectionCount=0,this.maxVideoTileCount=0,this.startTimeMs=null}}},9059:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(8320),o=i(6802),s=i(3765),a=i(543),l=i(6688),c=i(8581),u=i(3831),d=i(7086),h=i(3789),f=i(5687),p=i(5723),m=i(7500),g=i(983),v=i(7797),b=i(9678),S=i(3860),y=i(9553),w=i(3013),k=i(1208),C=i(289),I=i(9636),T=i(8358),E=i(3216),x=i(7408),M=i(5054),_=i(1129),A=i(6240),O=i(1960),P=i(6180),D=i(2748),R=i(1981),V=i(4543),N=i(8556),L=i(1209),F=i(5547),B=i(120),U=i(9560),j=i(8797),W=i(9485),$=i(7079),z=i(4833),H=i(5275),K=i(5924),G=i(250),q=i(6171),Q=i(365),J=i(5785),X=i(9354),Y=i(1133),Z=i(5185),ee=i(1508),te=i(1318),ie=i(4242),ne=i(2958),re=i(4922),oe=i(4450),se=i(4442),ae=i(9751),le=i(1876);class ce{constructor(e,t,i,n,r){this._audioProfile=new s.default,this.connectionHealthData=new l.default,this.observerQueue=new Set,this.meetingSessionContext=new le.default,this.enableSimulcast=!1,this.totalRetryCount=0,this.startAudioVideoTimestamp=0,this.destroyed=!1,this.usePromises=!0,this._logger=t,this.sessionStateController=new b.default(this._logger),this._configuration=e,this.enableSimulcast=e.enableUnifiedPlanForChromiumBasedBrowsers&&e.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(new a.default).hasChromiumWebRTC(),this._webSocketAdapter=i,this._realtimeController=new g.default,this._realtimeController.realtimeSetLocalAttendeeId(e.credentials.attendeeId,e.credentials.externalUserId),this._mediaStreamBroker=n,this._reconnectController=r,this._videoTileController=new ne.default(new re.default,this,this._logger),this._audioMixController=new o.default(this._logger),this.meetingSessionContext.logger=this._logger,this._eventController=new u.default(this)}destroy(){return n(this,void 0,void 0,(function*(){this.observerQueue.clear(),this.destroyed=!0}))}get configuration(){return this._configuration}get realtimeController(){return this._realtimeController}get activeSpeakerDetector(){return this._activeSpeakerDetector||(this._activeSpeakerDetector=new r.default(this._realtimeController,this._configuration.credentials.attendeeId,this.handleHasBandwidthPriority.bind(this))),this._activeSpeakerDetector}get videoTileController(){return this._videoTileController}get audioMixController(){return this._audioMixController}get eventController(){return this._eventController}get logger(){return this._logger}get rtcPeerConnection(){return this.meetingSessionContext&&this.meetingSessionContext.peer||null}get mediaStreamBroker(){return this._mediaStreamBroker}getRTCPeerConnectionStats(e){return this.rtcPeerConnection?this.rtcPeerConnection.getStats(e):null}setAudioProfile(e){this._audioProfile=e}addObserver(e){this.logger.info("adding meeting observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing meeting observer"),this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)v.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}initSignalingClient(){this.meetingSessionContext.signalingClient||(this.connectionHealthData.reset(),this.meetingSessionContext=new le.default,this.meetingSessionContext.logger=this.logger,this.meetingSessionContext.eventController=this.eventController,this.meetingSessionContext.browserBehavior=new a.default({enableUnifiedPlanForChromiumBasedBrowsers:this.configuration.enableUnifiedPlanForChromiumBasedBrowsers}),this.meetingSessionContext.meetingSessionConfiguration=this.configuration,this.meetingSessionContext.signalingClient=new k.default(this._webSocketAdapter,this.logger))}prestart(){return this.logger.info("Pre-connecting signaling connection."),this.createOrReuseSignalingTask().run().catch((e=>{this.logger.error(`Signaling task pre-start failed: ${e}`),this.signalingTask=void 0}))}start(e){this.startReturningPromise(e).then((()=>{this.logger.info("start completed")})).catch((e=>{this.logger.error(`start failed: ${e}`)}))}startReturningPromise(e){return!0===(null==e?void 0:e.signalingOnly)?this.prestart():(this.activeSpeakerDetector,new Promise(((e,t)=>{this.sessionStateController.perform(S.default.Connect,(()=>{this.actionConnect(!1).then(e).catch(t)}))})))}connectWithPromises(e){const t=this.meetingSessionContext,i=new R.default(t,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData).once(),n=new L.default(t).once(),r=new $.default(this.logger,"Signaling",[this.createOrReuseSignalingTask(),new D.default(t),new W.default(t),new O.default(t),new F.default(t),new U.default(t)]).once(),o=new M.default(t).once(r),s=new T.default(t).once(o,n),a=new _.default(t).once(s),l=new z.default(t).once(a),c=new A.default(t).once(l),u=new K.default(t).once(c);return new $.default(this.logger,this.wrapTaskName("AudioVideoStart"),[i,((e,t)=>new G.default(this.logger,t,e))(this.configuration.connectionTimeoutMs,new $.default(this.logger,"Peer",[u,e?new G.default(this.logger,new N.default(this.logger,"FinalizeConnection",[new q.default(t),new H.default(t)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new H.default(t)]))])}connectWithTasks(e){return new $.default(this.logger,this.wrapTaskName("AudioVideoStart"),[new R.default(this.meetingSessionContext,this.configuration.connectionHealthPolicyConfiguration,this.connectionHealthData),new L.default(this.meetingSessionContext),new G.default(this.logger,new $.default(this.logger,"Media",[new $.default(this.logger,"Signaling",[new V.default(this.meetingSessionContext),new D.default(this.meetingSessionContext),new W.default(this.meetingSessionContext),new O.default(this.meetingSessionContext),new F.default(this.meetingSessionContext),new U.default(this.meetingSessionContext)]),new $.default(this.logger,"Peer",[new M.default(this.meetingSessionContext),new T.default(this.meetingSessionContext),new _.default(this.meetingSessionContext),new z.default(this.meetingSessionContext),new A.default(this.meetingSessionContext),new K.default(this.meetingSessionContext),e?new G.default(this.logger,new N.default(this.logger,"FinalizeConnection",[new q.default(this.meetingSessionContext),new H.default(this.meetingSessionContext)]),this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs):new H.default(this.meetingSessionContext)])]),this.configuration.connectionTimeoutMs)])}actionConnect(e){return n(this,void 0,void 0,(function*(){this.initSignalingClient(),this.meetingSessionContext.mediaStreamBroker=this._mediaStreamBroker,this.meetingSessionContext.realtimeController=this._realtimeController,this.meetingSessionContext.audioMixController=this._audioMixController,this.meetingSessionContext.audioVideoController=this;const t=!!this.configuration.urls.audioHostURL;if(this.meetingSessionContext.transceiverController=t?this.enableSimulcast?new J.default(this.logger,this.meetingSessionContext.browserBehavior):new Q.default(this.logger,this.meetingSessionContext.browserBehavior):new X.default(this.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.volumeIndicatorAdapter=new ae.default(this.logger,this._realtimeController,ce.MIN_VOLUME_DECIBELS,ce.MAX_VOLUME_DECIBELS,this.configuration.credentials.attendeeId),this.meetingSessionContext.videoTileController=this._videoTileController,this.meetingSessionContext.videoDownlinkBandwidthPolicy=this.configuration.videoDownlinkBandwidthPolicy,this.meetingSessionContext.videoUplinkBandwidthPolicy=this.configuration.videoUplinkBandwidthPolicy,this.meetingSessionContext.enableSimulcast=this.enableSimulcast,this.enableSimulcast){const e=new oe.default(this.configuration.credentials.attendeeId,this.meetingSessionContext.logger);e.addObserver(this),this.meetingSessionContext.videoUplinkBandwidthPolicy=e,this.meetingSessionContext.videoStreamIndex=new ie.default(this.logger)}else this.meetingSessionContext.enableSimulcast=!1,this.meetingSessionContext.videoStreamIndex=new te.default(this.logger),this.meetingSessionContext.videoDownlinkBandwidthPolicy||(this.meetingSessionContext.videoDownlinkBandwidthPolicy=new Z.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.videoUplinkBandwidthPolicy||(this.meetingSessionContext.videoUplinkBandwidthPolicy=new se.default(this.configuration.credentials.attendeeId)),this.meetingSessionContext.audioProfile=this._audioProfile;this.meetingSessionContext.lastKnownVideoAvailability=new p.default,this.meetingSessionContext.videoCaptureAndEncodeParameter=new Y.default(0,0,0,0,!1),this.meetingSessionContext.videosToReceive=new ee.default,this.meetingSessionContext.videosPaused=new ee.default,this.meetingSessionContext.statsCollector=new I.default(this,this.logger,this.meetingSessionContext.browserBehavior),this.meetingSessionContext.connectionMonitor=new c.default(this,this._realtimeController,this._videoTileController,this.connectionHealthData,new m.default(this.meetingSessionContext.signalingClient,ce.PING_PONG_INTERVAL_MS,this.logger),this.meetingSessionContext.statsCollector),this.meetingSessionContext.reconnectController=this._reconnectController,this.meetingSessionContext.videoDeviceInformation={},e||(this.totalRetryCount=0,this._reconnectController.reset(),this.startAudioVideoTimestamp=Date.now(),this.forEachObserver((e=>{d.default.of(e.audioVideoDidStartConnecting).map((t=>t.bind(e)(!1)))})),this.eventController&&this.eventController.publishEvent("meetingStartRequested")),this.meetingSessionContext.startAudioVideoTimestamp=this.startAudioVideoTimestamp,this._reconnectController.hasStartedConnectionAttempt()?this._reconnectController.startedConnectionAttempt(!1):this._reconnectController.startedConnectionAttempt(!0);const i=t&&this.meetingSessionContext.meetingSessionConfiguration.attendeePresenceTimeoutMs>0;let r;this.logger.info("Needs to wait for attendee presence? "+i),r=this.usePromises?this.connectWithPromises(i):this.connectWithTasks(i);try{yield r.run(),this.connectionHealthData.setConnectionStartTime(),this.sessionStateController.perform(S.default.FinishConnecting,(()=>{this.eventController&&(this.meetingSessionContext.meetingStartDurationMs=Date.now()-this.startAudioVideoTimestamp,this.eventController.publishEvent("meetingStartSucceeded",{maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,poorConnectionCount:this.meetingSessionContext.poorConnectionCount,retryCount:this.totalRetryCount,signalingOpenDurationMs:this.meetingSessionContext.signalingOpenDurationMs,iceGatheringDurationMs:this.meetingSessionContext.iceGatheringDurationMs,meetingStartDurationMs:this.meetingSessionContext.meetingStartDurationMs})),this.meetingSessionContext.startTimeMs=Date.now(),this.actionFinishConnecting()}))}catch(e){this.signalingTask=void 0;const t=new h.default(this.getMeetingStatusCode(e)||f.default.TaskFailed);if(this.logger.info(`Start failed: ${t} due to error ${e}.`),this.sessionStateController.state()===y.default.NotConnected)return void this.logger.info("Start failed and not connected. Not cleaning up.");this.sessionStateController.perform(S.default.Fail,(()=>n(this,void 0,void 0,(function*(){yield this.actionDisconnect(t,!0,e),this.handleMeetingSessionStatus(t,e)||this.notifyStop(t,e)}))))}}))}createOrReuseSignalingTask(){return this.signalingTask||(this.initSignalingClient(),this.signalingTask=new G.default(this.logger,new V.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs).once()),this.signalingTask}actionFinishConnecting(){this.signalingTask=void 0,this.meetingSessionContext.videoDuplexMode=C.SdkStreamServiceType.RX,this.meetingSessionContext.enableSimulcast||this.enforceBandwidthLimitationForSender(this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0]),this.forEachObserver((e=>{d.default.of(e.audioVideoDidStart).map((t=>t.bind(e)()))})),this._reconnectController.reset()}stopReturningPromise(){var e;return this.sessionStateController.state()===y.default.NotConnected?(null===(e=this.meetingSessionContext.signalingClient)||void 0===e||e.closeConnection(),new j.default(this.meetingSessionContext).run()):new Promise(((e,t)=>{this.sessionStateController.perform(S.default.Disconnect,(()=>{this._reconnectController.disableReconnect(),this.logger.info("attendee left meeting, session will not be reconnected"),this.actionDisconnect(new h.default(f.default.Left),!1,null).then(e).catch(t)}))}))}stop(){this.stopReturningPromise()}actionDisconnect(e,t,i){return n(this,void 0,void 0,(function*(){try{yield new $.default(this.logger,this.wrapTaskName("AudioVideoStop"),[new G.default(this.logger,new P.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)]).run()}catch(e){this.logger.info("fail to stop")}try{const e=[new G.default(this.logger,new x.default(this.meetingSessionContext),this.configuration.connectionTimeoutMs)];t||e.push(new j.default(this.meetingSessionContext)),yield new $.default(this.logger,this.wrapTaskName("AudioVideoClean"),e).run()}catch(e){this.logger.info("fail to clean")}this.sessionStateController.perform(S.default.FinishDisconnecting,(()=>{t||this.notifyStop(e,i)}))}))}update(){const e=this.sessionStateController.perform(S.default.Update,(()=>{this.actionUpdate(!0)}));return e===w.default.Transitioned||e===w.default.DeferredTransition}restartLocalVideo(e){const t=()=>n(this,void 0,void 0,(function*(){this._videoTileController.hasStartedLocalVideoTile()&&(this.logger.info("stopping local video tile prior to local video restart"),this._videoTileController.stopLocalVideoTile(),this.logger.info("preparing local video restart update"),yield this.actionUpdate(!1),this.logger.info("starting local video tile for local video restart"),this._videoTileController.startLocalVideoTile()),this.logger.info("finalizing local video restart update"),yield this.actionUpdate(!0),e()})),i=this.sessionStateController.perform(S.default.Update,(()=>{t()}));return i===w.default.Transitioned||i===w.default.DeferredTransition}replaceLocalVideo(){return n(this,void 0,void 0,(function*(){let e=null;try{e=yield this.mediaStreamBroker.acquireVideoInputStream()}catch(e){throw new Error(`could not acquire video stream from mediaStreamBroker due to ${e.message}`)}if(!e||e.getVideoTracks().length<1)throw new Error("could not acquire video track");const t=e.getVideoTracks()[0];if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");if(!this.meetingSessionContext.browserBehavior.requiresUnifiedPlan())throw new Error("cannot replace track on Plan B");yield this.meetingSessionContext.transceiverController.setVideoInput(t);const i=this.meetingSessionContext.videoTileController.getLocalVideoTile();if(i){const t=i.state(),n=e.getVideoTracks()[0].getSettings();i.bindVideoStream(t.boundAttendeeId,!0,e,n.width,n.height,t.streamId,t.boundExternalUserId)}this.meetingSessionContext.activeVideoInput=e}))}restartLocalAudio(e){return n(this,void 0,void 0,(function*(){let t=null;try{t=yield this.mediaStreamBroker.acquireAudioInputStream()}catch(e){this.logger.info("could not acquire audio stream from mediaStreamBroker")}if(!t||t.getAudioTracks().length<1)throw new Error("could not acquire audio track");this.connectionHealthData.reset(),this.connectionHealthData.setConnectionStartTime();const i=t.getAudioTracks()[0];if(!this.meetingSessionContext||!this.meetingSessionContext.peer)throw new Error("no active meeting and peer connection");let n=!1;return n=this.meetingSessionContext.browserBehavior.requiresUnifiedPlan()?yield this.meetingSessionContext.transceiverController.replaceAudioTrack(i):yield Q.default.replaceAudioTrackForSender(this.meetingSessionContext.localAudioSender,i),this._realtimeController.realtimeSetLocalAudioInput(t),this.meetingSessionContext.activeAudioInput=t,e(),n?Promise.resolve():Promise.reject()}))}actionUpdate(e){return n(this,void 0,void 0,(function*(){try{yield new $.default(this.logger,this.wrapTaskName("AudioVideoUpdate"),[new B.default(this.meetingSessionContext),new G.default(this.logger,new $.default(this.logger,"UpdateSession",[new T.default(this.meetingSessionContext),new _.default(this.meetingSessionContext),new z.default(this.meetingSessionContext),new A.default(this.meetingSessionContext),new K.default(this.meetingSessionContext),new H.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),e&&this.sessionStateController.perform(S.default.FinishUpdating,(()=>{this.actionFinishUpdating()}))}catch(e){this.sessionStateController.perform(S.default.FinishUpdating,(()=>{const t=new h.default(this.getMeetingStatusCode(e)||f.default.TaskFailed);t.statusCode()!==f.default.IncompatibleSDP&&this.logger.info("failed to update audio-video session"),this.handleMeetingSessionStatus(t,e)}))}}))}notifyStop(e,t){var i;if(this.forEachObserver((t=>{d.default.of(t.audioVideoDidStop).map((i=>i.bind(t)(e)))})),this.eventController){const{signalingOpenDurationMs:n,poorConnectionCount:r,startTimeMs:o,iceGatheringDurationMs:s,attendeePresenceDurationMs:a,meetingStartDurationMs:l}=this.meetingSessionContext,c={maxVideoTileCount:this.meetingSessionContext.maxVideoTileCount,meetingDurationMs:null===o?0:Math.round(Date.now()-o),meetingStatus:f.default[e.statusCode()],signalingOpenDurationMs:n,iceGatheringDurationMs:s,attendeePresenceDurationMs:a,poorConnectionCount:r,meetingStartDurationMs:l,retryCount:this.totalRetryCount},u=t&&t.message||(null===(i=e.toString)||void 0===i?void 0:i.call(e))||"";0===c.meetingDurationMs?(c.meetingErrorMessage=u,delete c.meetingDurationMs,delete c.attendeePresenceDurationMs,delete c.meetingStartDurationMs,this.eventController.publishEvent("meetingStartFailed",c)):e.isFailure()||e.isAudioConnectionFailure()?(c.meetingErrorMessage=u,this.eventController.publishEvent("meetingFailed",c)):this.eventController.publishEvent("meetingEnded",c)}}actionFinishUpdating(){if(!this.meetingSessionContext.enableSimulcast){const e=this.meetingSessionContext.videoCaptureAndEncodeParameter.encodeBitrates()[0];this.enforceBandwidthLimitationForSender(e)}this.logger.info("updated audio-video session")}reconnect(e,t){const i=this._reconnectController.retryWithBackoff((()=>n(this,void 0,void 0,(function*(){this.sessionStateController.state()===y.default.NotConnected?this.sessionStateController.perform(S.default.Connect,(()=>{this.actionConnect(!0)})):this.sessionStateController.perform(S.default.Reconnect,(()=>{this.actionReconnect()})),this.totalRetryCount+=1}))),(()=>{this.logger.info("canceled retry")}));return i||this.sessionStateController.perform(S.default.Fail,(()=>{this.actionDisconnect(e,!1,t)})),i}actionReconnect(){return n(this,void 0,void 0,(function*(){this._reconnectController.hasStartedConnectionAttempt()||(this._reconnectController.startedConnectionAttempt(!1),this.forEachObserver((e=>{d.default.of(e.audioVideoDidStartConnecting).map((t=>t.bind(e)(!0)))}))),this.meetingSessionContext.volumeIndicatorAdapter.onReconnect(),this.connectionHealthData.reset();try{yield new $.default(this.logger,this.wrapTaskName("AudioVideoReconnect"),[new G.default(this.logger,new $.default(this.logger,"Media",[new E.default(this.meetingSessionContext),new $.default(this.logger,"Signaling",[new V.default(this.meetingSessionContext),new O.default(this.meetingSessionContext),new F.default(this.meetingSessionContext)]),new M.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs),new B.default(this.meetingSessionContext),new G.default(this.logger,new $.default(this.logger,"UpdateSession",[new T.default(this.meetingSessionContext),new _.default(this.meetingSessionContext),new z.default(this.meetingSessionContext),new A.default(this.meetingSessionContext),new K.default(this.meetingSessionContext),new H.default(this.meetingSessionContext)]),this.configuration.connectionTimeoutMs)]).run(),this.sessionStateController.perform(S.default.FinishConnecting,(()=>{this.eventController&&this.eventController.pushMeetingState("meetingReconnected"),this.actionFinishConnecting()}))}catch(e){this.sessionStateController.perform(S.default.FinishConnecting,(()=>{this.logger.info("failed to reconnect audio-video session");const t=new h.default(this.getMeetingStatusCode(e)||f.default.TaskFailed);this.handleMeetingSessionStatus(t,e)}))}this.connectionHealthData.setConnectionStartTime()}))}wrapTaskName(e){return`${e}/${this.configuration.meetingId}/${this.configuration.credentials.attendeeId}`}getMeetingStatusCode(e){const t=/the meeting status code: (\d+)/.exec(e&&e.message);return t&&t.length>1?Number.parseInt(t[1],10):null}enforceBandwidthLimitationForSender(e){return n(this,void 0,void 0,(function*(){this.meetingSessionContext.browserBehavior.requiresUnifiedPlan()?yield this.meetingSessionContext.transceiverController.setVideoSendingBitrateKbps(e):yield Q.default.setVideoSendingBitrateKbpsForSender(this.meetingSessionContext.localVideoSender,e,this.meetingSessionContext.logger)}))}handleMeetingSessionStatus(e,t){if(this.logger.info(`handling status: ${f.default[e.statusCode()]}`),e.isTerminal()||this.meetingSessionContext.statsCollector&&this.meetingSessionContext.statsCollector.logMeetingSessionStatus(e),e.statusCode()===f.default.IncompatibleSDP)return this.restartLocalVideo((()=>{this.logger.info("handled incompatible SDP by attempting to restart video")})),!0;if(e.statusCode()===f.default.VideoCallSwitchToViewOnly)return this._videoTileController.removeLocalVideoTile(),this.forEachObserver((e=>{d.default.of(e.videoSendDidBecomeUnavailable).map((t=>t.bind(e)()))})),!1;if(e.isTerminal()&&(this.logger.error("session will not be reconnected"),this.meetingSessionContext.reconnectController&&this.meetingSessionContext.reconnectController.disableReconnect()),(e.isFailure()||e.isTerminal())&&this.meetingSessionContext.reconnectController){const i=this.reconnect(e,t);return i?this.logger.warn(`will retry due to status code ${f.default[e.statusCode()]}${t?` and error: ${t.message}`:""}`):this.logger.error(`failed with status code ${f.default[e.statusCode()]}${t?` and error: ${t.message}`:""}`),i}return!1}setVideoMaxBandwidthKbps(e){this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&(this.logger.info(`video send has ideal max bandwidth ${e} kbps`),this.meetingSessionContext.videoUplinkBandwidthPolicy.setIdealMaxBandwidthKbps(e))}handleHasBandwidthPriority(e){return n(this,void 0,void 0,(function*(){if(this.meetingSessionContext&&this.meetingSessionContext.videoUplinkBandwidthPolicy&&!this.meetingSessionContext.enableSimulcast){const t=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();this.meetingSessionContext.videoUplinkBandwidthPolicy.setHasBandwidthPriority(e);const i=this.meetingSessionContext.videoUplinkBandwidthPolicy.maxBandwidthKbps();t!==i&&(this.logger.info(`video send bandwidth priority ${e} max has changed from ${t} kbps to ${i} kbps`),yield this.enforceBandwidthLimitationForSender(i))}}))}pauseReceivingStream(e){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.pause([e])}resumeReceivingStream(e){this.meetingSessionContext&&this.meetingSessionContext.signalingClient&&this.meetingSessionContext.signalingClient.resume([e])}getRemoteVideoSources(){const{videoStreamIndex:e}=this.meetingSessionContext;if(!e)return this.logger.info("meeting has not started"),[];const t=this.configuration.credentials.attendeeId;return e.allVideoSendingSourcesExcludingSelf(t)}encodingSimulcastLayersDidChange(e){this.forEachObserver((t=>{d.default.of(t.encodingSimulcastLayersDidChange).map((i=>i.bind(t)(e)))}))}}t.default=ce,ce.MIN_VOLUME_DECIBELS=-42,ce.MAX_VOLUME_DECIBELS=-14,ce.PING_PONG_INTERVAL_MS=1e4},9836:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8434),r=i(209),o=i(4015),s=i(589),a=i(8015),l=i(6057),c=i(9141),u=i(7631),d=i(9059);class h extends d.default{constructor(e){const t=new s.default;t.meetingId="",t.externalMeetingId="",t.credentials=new a.default,t.credentials.attendeeId="",t.credentials.joinToken="",t.urls=new l.default,t.urls.turnControlURL="",t.urls.audioHostURL="",t.urls.screenViewingURL="",t.urls.screenDataURL="",t.urls.screenSharingURL="wss://localhost/",t.urls.signalingURL="wss://localhost/",super(e||t,new r.default,new u.default(new r.default),new o.default,new c.default(0,new n.default(0,0,0)))}setAudioProfile(e){}start(){}stop(){}}t.default=h},8538:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(7170);t.default=class{constructor(e,t,i,n,r,o){this.audioVideoController=e,this.videoTileController=t,this.realtimeController=i,this.audioMixController=n,this.deviceController=r,this.contentShareController=o}addObserver(e){this.audioVideoController.addObserver(e),this.trace("addObserver")}removeObserver(e){this.audioVideoController.removeObserver(e),this.trace("removeObserver")}setAudioProfile(e){this.trace("setAudioProfile",e),this.audioVideoController.setAudioProfile(e)}start(e){this.audioVideoController.start(e),this.trace("start")}stop(){this.audioVideoController.stop(),this.trace("stop")}getRTCPeerConnectionStats(e){return this.trace("getRTCPeerConnectionStats",e?e.id:null),this.audioVideoController.getRTCPeerConnectionStats(e)}bindAudioElement(e){const t=this.audioMixController.bindAudioElement(e);return this.trace("bindAudioElement",e.id,t),t}unbindAudioElement(){this.audioMixController.unbindAudioElement(),this.trace("unbindAudioElement")}bindVideoElement(e,t){this.videoTileController.bindVideoElement(e,t),this.trace("bindVideoElement",{tileId:e,videoElementId:t.id})}unbindVideoElement(e){this.videoTileController.unbindVideoElement(e),this.trace("unbindVideoElement",e)}startLocalVideoTile(){const e=this.videoTileController.startLocalVideoTile();return this.trace("startLocalVideoTile",null,e),e}stopLocalVideoTile(){this.videoTileController.stopLocalVideoTile(),this.trace("stopLocalVideoTile")}hasStartedLocalVideoTile(){const e=this.videoTileController.hasStartedLocalVideoTile();return this.trace("hasStartedLocalVideoTile",null,e),e}removeLocalVideoTile(){this.videoTileController.removeLocalVideoTile(),this.trace("removeLocalVideoTile")}getLocalVideoTile(){const e=this.videoTileController.getLocalVideoTile();return this.trace("getLocalVideoTile"),e}pauseVideoTile(e){this.videoTileController.pauseVideoTile(e),this.trace("pauseVideoTile",e)}unpauseVideoTile(e){this.videoTileController.unpauseVideoTile(e),this.trace("unpauseVideoTile",e)}getVideoTile(e){const t=this.videoTileController.getVideoTile(e);return this.trace("getVideoTile",e),t}getAllRemoteVideoTiles(){const e=this.videoTileController.getAllRemoteVideoTiles();return this.trace("getAllRemoteVideoTiles"),e}getAllVideoTiles(){const e=this.videoTileController.getAllVideoTiles();return this.trace("getAllVideoTiles"),e}addVideoTile(){const e=this.videoTileController.addVideoTile();return this.trace("addVideoTile",null,e.state()),e}removeVideoTile(e){this.videoTileController.removeVideoTile(e),this.trace("removeVideoTile",e)}removeVideoTilesByAttendeeId(e){const t=this.videoTileController.removeVideoTilesByAttendeeId(e);return this.trace("removeVideoTilesByAttendeeId",e,t),t}removeAllVideoTiles(){this.videoTileController.removeAllVideoTiles(),this.trace("removeAllVideoTiles")}captureVideoTile(e){const t=this.videoTileController.captureVideoTile(e);return this.trace("captureVideoTile",e),t}realtimeSubscribeToAttendeeIdPresence(e){this.realtimeController.realtimeSubscribeToAttendeeIdPresence(e),this.trace("realtimeSubscribeToAttendeeIdPresence")}realtimeUnsubscribeToAttendeeIdPresence(e){this.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(e),this.trace("realtimeUnsubscribeToAttendeeIdPresence")}realtimeSetCanUnmuteLocalAudio(e){this.realtimeController.realtimeSetCanUnmuteLocalAudio(e),this.trace("realtimeSetCanUnmuteLocalAudio",e)}realtimeSubscribeToSetCanUnmuteLocalAudio(e){this.realtimeController.realtimeSubscribeToSetCanUnmuteLocalAudio(e),this.trace("realtimeSubscribeToSetCanUnmuteLocalAudio")}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){this.realtimeController.realtimeUnsubscribeToSetCanUnmuteLocalAudio(e)}realtimeCanUnmuteLocalAudio(){const e=this.realtimeController.realtimeCanUnmuteLocalAudio();return this.trace("realtimeCanUnmuteLocalAudio",null,e),e}realtimeMuteLocalAudio(){this.realtimeController.realtimeMuteLocalAudio(),this.trace("realtimeMuteLocalAudio")}realtimeUnmuteLocalAudio(){const e=this.realtimeController.realtimeUnmuteLocalAudio();return this.trace("realtimeUnmuteLocalAudio"),e}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){this.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(e),this.trace("realtimeSubscribeToMuteAndUnmuteLocalAudio")}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){this.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e)}realtimeIsLocalAudioMuted(){const e=this.realtimeController.realtimeIsLocalAudioMuted();return this.trace("realtimeIsLocalAudioMuted"),e}realtimeSubscribeToVolumeIndicator(e,t){this.realtimeController.realtimeSubscribeToVolumeIndicator(e,t),this.trace("realtimeSubscribeToVolumeIndicator",e)}realtimeUnsubscribeFromVolumeIndicator(e,t){this.realtimeController.realtimeUnsubscribeFromVolumeIndicator(e,t),this.trace("realtimeUnsubscribeFromVolumeIndicator",e,t)}realtimeSubscribeToLocalSignalStrengthChange(e){this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(e),this.trace("realtimeSubscribeToLocalSignalStrengthChange")}realtimeUnsubscribeToLocalSignalStrengthChange(e){this.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(e),this.trace("realtimeUnsubscribeToLocalSignalStrengthChange")}realtimeSendDataMessage(e,t,i){this.realtimeController.realtimeSendDataMessage(e,t,i),this.trace("realtimeSendDataMessage")}realtimeSubscribeToReceiveDataMessage(e,t){this.realtimeController.realtimeSubscribeToReceiveDataMessage(e,t),this.trace("realtimeSubscribeToReceiveDataMessage")}realtimeUnsubscribeFromReceiveDataMessage(e){this.realtimeController.realtimeUnsubscribeFromReceiveDataMessage(e),this.trace("realtimeUnsubscribeFromReceiveDataMessage")}realtimeSubscribeToFatalError(e){this.realtimeController.realtimeSubscribeToFatalError(e)}realtimeUnsubscribeToFatalError(e){this.realtimeController.realtimeUnsubscribeToFatalError(e)}subscribeToActiveSpeakerDetector(e,t,i,n){this.audioVideoController.activeSpeakerDetector.subscribe(e,t,i,n),this.trace("subscribeToActiveSpeakerDetector")}unsubscribeFromActiveSpeakerDetector(e){this.audioVideoController.activeSpeakerDetector.unsubscribe(e),this.trace("unsubscribeFromActiveSpeakerDetector")}listAudioInputDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.deviceController.listAudioInputDevices();return this.trace("listAudioInputDevices",null,e),e}))}listVideoInputDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.deviceController.listVideoInputDevices();return this.trace("listVideoInputDevices",null,e),e}))}listAudioOutputDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.deviceController.listAudioOutputDevices();return this.trace("listAudioOutputDevices",null,e),e}))}chooseAudioInputDevice(e){return this.trace("chooseAudioInputDevice",e),this.deviceController.chooseAudioInputDevice(e)}chooseVideoInputDevice(e){return r.isVideoTransformDevice(e)?this.trace("chooseVideoInputDevice with transform device"):this.trace("chooseVideoInputDevice",e),this.deviceController.chooseVideoInputDevice(e)}chooseAudioOutputDevice(e){const t=this.deviceController.chooseAudioOutputDevice(e);return this.trace("chooseAudioOutputDevice",e),t}addDeviceChangeObserver(e){this.deviceController.addDeviceChangeObserver(e),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(e){this.deviceController.removeDeviceChangeObserver(e),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){const e=this.deviceController.createAnalyserNodeForAudioInput();return this.trace("createAnalyserNodeForAudioInput"),e}startVideoPreviewForVideoInput(e){this.deviceController.startVideoPreviewForVideoInput(e),this.trace("startVideoPreviewForVideoInput",e.id)}stopVideoPreviewForVideoInput(e){this.deviceController.stopVideoPreviewForVideoInput(e),this.trace("stopVideoPreviewForVideoInput",e.id)}setDeviceLabelTrigger(e){this.deviceController.setDeviceLabelTrigger(e),this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(e){const t=this.deviceController.mixIntoAudioInput(e);return this.trace("mixIntoAudioInput",e.id),t}chooseVideoInputQuality(e,t,i,n){this.deviceController.chooseVideoInputQuality(e,t,i,n),this.trace("chooseVideoInputQuality",{width:e,height:t,frameRate:i,maxBandwidthKbps:n})}getVideoInputQualitySettings(){const e=this.deviceController.getVideoInputQualitySettings();return this.trace("getVideoInputQualitySettings"),e}setContentAudioProfile(e){this.trace("setContentAudioProfile",e),this.contentShareController.setContentAudioProfile(e)}startContentShare(e){const t=this.contentShareController.startContentShare(e);return this.trace("startContentShare"),t}startContentShareFromScreenCapture(e,t){const i=this.contentShareController.startContentShareFromScreenCapture(e,t);return this.trace("startContentShareFromScreenCapture"),i}pauseContentShare(){this.contentShareController.pauseContentShare(),this.trace("pauseContentShare")}unpauseContentShare(){this.contentShareController.unpauseContentShare(),this.trace("unpauseContentShare")}stopContentShare(){this.contentShareController.stopContentShare(),this.trace("stopContentShare")}addContentShareObserver(e){this.contentShareController.addContentShareObserver(e),this.trace("addContentShareObserver")}removeContentShareObserver(e){this.contentShareController.removeContentShareObserver(e),this.trace("removeContentShareObserver")}trace(e,t,i){let n=`API/DefaultAudioVideoFacade/${this.audioVideoController.configuration.meetingId}/${this.audioVideoController.configuration.credentials.attendeeId}/${e}`;void 0!==t&&(n+=` ${JSON.stringify(t)}`),void 0!==i&&(n+=` -> ${JSON.stringify(i)}`),this.audioVideoController.logger.info(n)}getRemoteVideoSources(){const e=this.audioVideoController.getRemoteVideoSources();return this.trace("getRemoteVideoSources",null,e),e}}},8434:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i){this.fixedWaitMs=e,this.shortBackoffMs=t,this.longBackoffMs=i,this.currentRetry=0,this.fixedWaitMs<0&&(this.fixedWaitMs=0),this.shortBackoffMs<0&&(this.shortBackoffMs=0),this.longBackoffMs<0&&(this.longBackoffMs=0),this.reset()}reset(){this.currentRetry=0}nextBackoffAmountMs(){const e=Math.random()*Math.min(this.longBackoffMs,this.shortBackoffMs*Math.pow(2,this.currentRetry))+this.fixedWaitMs;return this.currentRetry+=1,e}}},5640:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8434),r=i(7300);t.default=class{constructor(e,t,i){this.fixedWaitMs=e,this.shortBackoffMs=t,this.longBackoffMs=i}create(){return new n.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs)}createWithLimit(e){return new r.default(this.fixedWaitMs,this.shortBackoffMs,this.longBackoffMs,e)}}},7300:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8434);class r extends n.default{constructor(e,t,i,n){super(e,t,i),this.limit=n,this.attempts=0}nextBackoffAmountMs(){if(this.attempts++,this.attempts>this.limit)throw new Error("retry limit exceeded");return super.nextBackoffAmountMs()}}t.default=r},543:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(3631);t.default=class{constructor({enableUnifiedPlanForChromiumBasedBrowsers:e=!1,recreateAudioContextIfNeeded:t=!1}={}){this.browser=r.detect(),this.browserSupport={chrome:78,"edge-chromium":79,electron:7,firefox:60,ios:12,safari:12,opera:66,samsung:12,crios:86,fxios:23,"ios-webview":605},this.browserName={chrome:"Google Chrome","edge-chromium":"Microsoft Edge",electron:"Electron",firefox:"Mozilla Firefox",ios:"Safari iOS",safari:"Safari",opera:"Opera",samsung:"Samsung Internet",crios:"Chrome iOS",fxios:"Firefox iOS","ios-webview":"WKWebView iOS"},this.chromeLike=["chrome","edge-chromium","chromium-webview","opera","samsung"],this.webkitBrowsers=["crios","fxios","safari","ios","ios-webview"],this.enableUnifiedPlanForChromiumBasedBrowsers=e,this.recreateAudioContextIfNeeded=t}version(){return this.browser.version}majorVersion(){return parseInt(this.version().split(".")[0])}name(){return this.browser.name}hasChromiumWebRTC(){for(const e of this.chromeLike)if(e===this.browser.name)return!0;return!1}hasWebKitWebRTC(){for(const e of this.webkitBrowsers)if(e===this.browser.name)return!0;return!1}hasFirefoxWebRTC(){return this.isFirefox()}supportsCanvasCapturedStreamPlayback(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresUnifiedPlan(){let e=this.isFirefox()||this.hasWebKitWebRTC()&&this.isUnifiedPlanSupported();return this.enableUnifiedPlanForChromiumBasedBrowsers&&(e=e||this.hasChromiumWebRTC()),e}requiresResolutionAlignment(e,t){return this.isAndroid()&&this.isPixel3()?[64*Math.ceil(e/64),64*Math.ceil(t/64)]:[e,t]}requiresCheckForSdpConnectionAttributes(){return!this.isIOSSafari()&&!this.isIOSChrome()&&!this.isIOSFirefox()}requiresIceCandidateGatheringTimeoutWorkaround(){return this.hasChromiumWebRTC()}requiresUnifiedPlanMunging(){let e=this.hasWebKitWebRTC()&&this.isUnifiedPlanSupported();return this.enableUnifiedPlanForChromiumBasedBrowsers&&(e=e||this.hasChromiumWebRTC()),e}requiresSortCodecPreferencesForSdpAnswer(){return this.isFirefox()&&this.majorVersion()<=68}requiresSimulcastMunging(){return this.isSafari()}requiresBundlePolicy(){return"max-bundle"}requiresPromiseBasedWebRTCGetStats(){return!this.hasChromiumWebRTC()}requiresVideoElementWorkaround(){return this.isSafari()}requiresNoExactMediaStreamConstraints(){return this.isSamsungInternet()||this.isIOSSafari()&&("12.0.0"===this.version()||"12.1.0"===this.version())}requiresGroupIdMediaStreamConstraints(){return this.isSamsungInternet()}requiresContextRecreationForAudioWorklet(){return!!this.recreateAudioContextIfNeeded&&"chrome"in i.g&&"Mac OS"===this.browser.os&&!(!this.isChrome()&&!this.isEdge())}getDisplayMediaAudioCaptureSupport(){return this.isChrome()||this.isEdge()}supportsSenderSideBandwidthEstimation(){return this.hasChromiumWebRTC()||this.isSafari()}screenShareUnsupported(){return console.warn("This function is no longer supported."),!!this.isSafari()}isSupported(){return!(!this.browserSupport[this.browser.name]||this.majorVersion()<this.browserSupport[this.browser.name]||"firefox"===this.browser.name&&this.isAndroid())}supportString(){if(this.isAndroid())return`${this.browserName.chrome} ${this.browserSupport.chrome}+, ${this.browserName.samsung} ${this.browserSupport.samsung}+`;const e=[];for(const t in this.browserSupport)e.push(`${this.browserName[t]} ${this.browserSupport[t]}+`);return e.join(", ")}supportedVideoCodecs(){return n(this,void 0,void 0,(function*(){const e=new RTCPeerConnection;return e.addTransceiver("video",{direction:"inactive",streams:[]}),(yield e.createOffer({offerToReceiveVideo:!0})).sdp.split("\r\n").filter((e=>e.includes("a=rtpmap:"))).map((e=>e.replace(/.* /,"").replace(/\/.*/,""))).filter(((e,t,i)=>i.indexOf(e)===t)).filter((e=>"rtx"!==e&&"red"!==e&&"ulpfec"!==e))}))}supportsSetSinkId(){return"setSinkId"in HTMLAudioElement.prototype}isIOSSafari(){return"ios"===this.browser.name||"ios-webview"===this.browser.name}isSafari(){return"safari"===this.browser.name||"ios"===this.browser.name}isFirefox(){return"firefox"===this.browser.name}isIOSFirefox(){return"fxios"===this.browser.name}isIOSChrome(){return"crios"===this.browser.name}isChrome(){return"chrome"===this.browser.name}isEdge(){return"edge-chromium"===this.browser.name}isSamsungInternet(){return"samsung"===this.browser.name}isAndroid(){return/(android)/i.test(navigator.userAgent)}isPixel3(){return/( pixel 3)/i.test(navigator.userAgent)}isUnifiedPlanSupported(){return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")}}},6196:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientMetricReportDirection=void 0,function(e){e[e.UPSTREAM=0]="UPSTREAM",e[e.DOWNSTREAM=1]="DOWNSTREAM"}(i=t.ClientMetricReportDirection||(t.ClientMetricReportDirection={})),t.default=i},9496:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ClientMetricReportMediaType=void 0,function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO"}(i=t.ClientMetricReportMediaType||(t.ClientMetricReportMediaType={})),t.default=i},2770:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{}},6893:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(289),r=i(6196),o=i(9496),s=i(2306);class a{constructor(e,t,i){this.logger=e,this.videoStreamIndex=t,this.selfAttendeeId=i,this.globalMetricReport=new s.default,this.streamMetricReports={},this.currentTimestampMs=0,this.previousTimestampMs=0,this.currentSsrcs={},this.identityValue=(e,t)=>{const i=t?this.streamMetricReports[t]:this.globalMetricReport;return Number(i.currentMetrics[e])},this.decoderLossPercent=(e,t)=>{const i=t?this.streamMetricReports[t]:this.globalMetricReport,n=i.currentMetrics.googDecodingNormal-(i.previousMetrics.googDecodingNormal||0),r=i.currentMetrics.googDecodingCTN-(i.previousMetrics.googDecodingCTN||0);if(r<=0)return 0;const o=r-n;return o<=0?0:100*o/r},this.packetLossPercent=(e,t)=>{const i=t?this.streamMetricReports[t]:this.globalMetricReport,n=i.currentMetrics[e]-(i.previousMetrics[e]||0),r=i.currentMetrics.packetsLost-(i.previousMetrics.packetsLost||0),o=n+r;return o<=0||r<=0?0:100*r/o},this.countPerSecond=(e,t)=>{const i=t?this.streamMetricReports[t]:this.globalMetricReport;let n=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(n<=0)return 0;this.previousTimestampMs<=0&&(n=1);const r=i.currentMetrics[e]-(i.previousMetrics[e]||0);return r<=0?0:Math.trunc(r/n)},this.bitsPerSecond=(e,t)=>{const i=t?this.streamMetricReports[t]:this.globalMetricReport;let n=(this.currentTimestampMs-this.previousTimestampMs)/1e3;if(n<=0)return 0;this.previousTimestampMs<=0&&(n=1);const r=8*(i.currentMetrics[e]-(i.previousMetrics[e]||0));return r<=0?0:Math.trunc(r/n)},this.secondsToMilliseconds=(e,t)=>{const i=t?this.streamMetricReports[t]:this.globalMetricReport;return Number(1e3*i.currentMetrics[e])},this.globalMetricMap={googActualEncBitrate:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_ACTUAL_ENCODER_BITRATE},googAvailableSendBandwidth:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},googRetransmitBitrate:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_RETRANSMIT_BITRATE},googAvailableReceiveBandwidth:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},googTargetEncBitrate:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_TARGET_ENCODER_BITRATE},googBucketDelay:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_BUCKET_DELAY_MS},googRtt:{transform:this.identityValue,type:n.SdkMetric.Type.STUN_RTT_MS},packetsDiscardedOnSend:{transform:this.countPerSecond,type:n.SdkMetric.Type.SOCKET_DISCARDED_PPS},availableIncomingBitrate:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_AVAILABLE_RECEIVE_BANDWIDTH},availableOutgoingBitrate:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_AVAILABLE_SEND_BANDWIDTH},currentRoundTripTime:{transform:this.identityValue,type:n.SdkMetric.Type.STUN_RTT_MS}},this.audioUpstreamMetricMap={googJitterReceived:{transform:this.identityValue,type:n.SdkMetric.Type.RTC_MIC_JITTER_MS},jitter:{transform:this.secondsToMilliseconds,type:n.SdkMetric.Type.RTC_MIC_JITTER_MS},packetsSent:{transform:this.countPerSecond,type:n.SdkMetric.Type.RTC_MIC_PPS},bytesSent:{transform:this.bitsPerSecond,type:n.SdkMetric.Type.RTC_MIC_BITRATE},googRtt:{transform:this.identityValue,type:n.SdkMetric.Type.RTC_MIC_RTT_MS},packetsLost:{transform:this.packetLossPercent,type:n.SdkMetric.Type.RTC_MIC_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"}},this.audioDownstreamMetricMap={packetsReceived:{transform:this.countPerSecond,type:n.SdkMetric.Type.RTC_SPK_PPS},packetsLost:{transform:this.packetLossPercent,type:n.SdkMetric.Type.RTC_SPK_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},googJitterReceived:{transform:this.identityValue,type:n.SdkMetric.Type.RTC_SPK_JITTER_MS},jitter:{transform:this.secondsToMilliseconds,type:n.SdkMetric.Type.RTC_SPK_JITTER_MS},googDecodingCTN:{transform:this.countPerSecond},googDecodingNormal:{transform:this.decoderLossPercent,type:n.SdkMetric.Type.RTC_SPK_FRACTION_DECODER_LOSS_PERCENT,source:"googDecodingCTN"},bytesReceived:{transform:this.bitsPerSecond,type:n.SdkMetric.Type.RTC_SPK_BITRATE},googCurrentDelayMs:{transform:this.identityValue,type:n.SdkMetric.Type.RTC_SPK_CURRENT_DELAY_MS},googJitterBufferMs:{transform:this.identityValue,type:n.SdkMetric.Type.RTC_SPK_JITTER_BUFFER_MS}},this.videoUpstreamMetricMap={googRtt:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_SENT_RTT_MS},googEncodeUsagePercent:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_ENCODE_USAGE_PERCENT},googNacksReceived:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_NACKS_RECEIVED},nackCount:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_NACKS_RECEIVED},googPlisReceived:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_PLIS_RECEIVED},pliCount:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_PLIS_RECEIVED},googFirsReceived:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_FIRS_RECEIVED},firCount:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_FIRS_RECEIVED},googAvgEncodeMs:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_AVERAGE_ENCODE_MS},googFrameRateInput:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_INPUT_FPS},framesEncoded:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_ENCODE_FPS},googFrameRateSent:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_SENT_FPS},framerateMean:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_SENT_FPS},packetsSent:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_SENT_PPS},packetsLost:{transform:this.packetLossPercent,type:n.SdkMetric.Type.VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT,source:"packetsSent"},bytesSent:{transform:this.bitsPerSecond,type:n.SdkMetric.Type.VIDEO_SENT_BITRATE},droppedFrames:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_DROPPED_FPS},qpSum:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_SENT_QP_SUM},googFrameHeightSent:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},googFrameWidthSent:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_ENCODE_WIDTH},frameHeight:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_ENCODE_HEIGHT},frameWidth:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_ENCODE_WIDTH}},this.videoDownstreamMetricMap={googTargetDelayMs:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_TARGET_DELAY_MS},googDecodeMs:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_DECODE_MS},googFrameRateOutput:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_OUTPUT_FPS},packetsReceived:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_RECEIVED_PPS},packetsLost:{transform:this.packetLossPercent,type:n.SdkMetric.Type.VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT,source:"packetsReceived"},googRenderDelayMs:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_RENDER_DELAY_MS},googFrameRateReceived:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_RECEIVED_FPS},framerateMean:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_RECEIVED_FPS},framesDecoded:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_DECODE_FPS},googNacksSent:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_NACKS_SENT},nackCount:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_NACKS_SENT},googFirsSent:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_FIRS_SENT},firCount:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_FIRS_SENT},googPlisSent:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_PLIS_SENT},pliCount:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_PLIS_SENT},bytesReceived:{transform:this.bitsPerSecond,type:n.SdkMetric.Type.VIDEO_RECEIVED_BITRATE},googCurrentDelayMs:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_CURRENT_DELAY_MS},googJitterBufferMs:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_JITTER_BUFFER_MS},discardedPackets:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_DISCARDED_PPS},googJitterReceived:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},jitter:{transform:this.secondsToMilliseconds,type:n.SdkMetric.Type.VIDEO_RECEIVED_JITTER_MS},qpSum:{transform:this.countPerSecond,type:n.SdkMetric.Type.VIDEO_RECEIVED_QP_SUM},googFrameHeightReceived:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_DECODE_HEIGHT},googFrameWidthReceived:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_DECODE_WIDTH},frameHeight:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_DECODE_HEIGHT},frameWidth:{transform:this.identityValue,type:n.SdkMetric.Type.VIDEO_DECODE_WIDTH}},this.observableVideoMetricSpec={videoUpstreamBitrate:{source:"bytesSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamPacketsSent:{source:"packetsSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamFramesEncodedPerSecond:{source:"framesEncoded",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamGoogFrameHeight:{source:"googFrameHeightSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamGoogFrameWidth:{source:"googFrameWidthSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamFrameHeight:{source:"frameHeight",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoUpstreamFrameWidth:{source:"frameWidth",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoDownstreamBitrate:{source:"bytesReceived",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamPacketLossPercent:{source:"packetsLost",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamFramesDecodedPerSecond:{source:"framesDecoded",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamGoogFrameHeight:{source:"googFrameHeightReceived",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamGoogFrameWidth:{source:"googFrameWidthReceived",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamFrameHeight:{source:"frameHeight",media:o.default.VIDEO,dir:r.default.DOWNSTREAM},videoDownstreamFrameWidth:{source:"frameWidth",media:o.default.VIDEO,dir:r.default.DOWNSTREAM}},this.observableMetricSpec={audioPacketsReceived:{source:"packetsReceived",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},audioPacketsReceivedFractionLoss:{source:"packetsLost",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},audioDecoderLoss:{source:"googDecodingNormal",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},audioPacketsSent:{source:"packetsSent",media:o.default.AUDIO,dir:r.default.UPSTREAM},audioPacketLossPercent:{source:"packetsLost",media:o.default.AUDIO,dir:r.default.UPSTREAM},videoUpstreamBitrate:{source:"bytesSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},videoPacketSentPerSecond:{source:"packetsSent",media:o.default.VIDEO,dir:r.default.UPSTREAM},availableSendBandwidth:{source:"googAvailableSendBandwidth"},availableReceiveBandwidth:{source:"googAvailableReceiveBandwidth"},audioSpeakerDelayMs:{source:"googCurrentDelayMs",media:o.default.AUDIO,dir:r.default.DOWNSTREAM},availableIncomingBitrate:{source:"availableIncomingBitrate"},availableOutgoingBitrate:{source:"availableOutgoingBitrate"},nackCountReceivedPerSecond:{source:"nackCount",media:o.default.VIDEO,dir:r.default.UPSTREAM},googNackCountReceivedPerSecond:{source:"googNacksReceived",media:o.default.VIDEO,dir:r.default.UPSTREAM}}}getMetricMap(e,t){switch(e){case o.default.AUDIO:switch(t){case r.default.UPSTREAM:return this.audioUpstreamMetricMap;case r.default.DOWNSTREAM:return this.audioDownstreamMetricMap}case o.default.VIDEO:switch(t){case r.default.UPSTREAM:return this.videoUpstreamMetricMap;case r.default.DOWNSTREAM:return this.videoDownstreamMetricMap}default:return this.globalMetricMap}}getObservableMetricValue(e){const t=this.observableMetricSpec[e],i=this.getMetricMap(t.media,t.dir)[t.source],n=i.transform,r=i.source;if(!t.hasOwnProperty("media"))return n(r||t.source);for(const e in this.streamMetricReports){const i=this.streamMetricReports[e];if(t.source in i.currentMetrics&&i.direction===t.dir&&i.mediaType===t.media)return n(r||t.source,Number(e))}return 0}getObservableVideoMetricValue(e,t){const i=this.observableVideoMetricSpec[e],n=this.getMetricMap(i.media,i.dir)[i.source],r=n.transform,o=n.source,s=this.streamMetricReports[t];return s&&i.source in s.currentMetrics?r(o||i.source,t):r(o||i.source)}getObservableMetrics(){const e={};for(const t in this.observableMetricSpec)e[t]=this.getObservableMetricValue(t);return e}getObservableVideoMetrics(){const e={};if(!this.videoStreamIndex||!this.selfAttendeeId)return this.logger.error("Need to define VideoStreamIndex and selfAttendeeId if using getObservableVideoMetrics API"),e;for(const t in this.streamMetricReports)if(this.streamMetricReports[t].mediaType===o.default.VIDEO){const i={};for(const e in this.observableVideoMetricSpec)if(this.observableVideoMetricSpec[e].dir===this.streamMetricReports[t].direction){const n=this.getObservableVideoMetricValue(e,Number(t));isNaN(n)||(i[e]=n)}const n=this.streamMetricReports[t].streamId,r=n?this.videoStreamIndex.attendeeIdForStreamId(n):this.selfAttendeeId;e[r]=e[r]?e[r]:{},e[r][t]=i}return e}clone(){const e=new a(this.logger,this.videoStreamIndex,this.selfAttendeeId);return e.globalMetricReport=this.globalMetricReport,e.streamMetricReports=this.streamMetricReports,e.currentTimestampMs=this.currentTimestampMs,e.previousTimestampMs=this.previousTimestampMs,e}print(){const e={globalMetricReport:this.globalMetricReport,streamMetricReports:this.streamMetricReports,currentTimestampMs:this.currentTimestampMs,previousTimestampMs:this.previousTimestampMs};this.logger.debug((()=>`Client Metric Report: ${JSON.stringify(e)}`))}removeDestroyedSsrcs(){for(const e in this.streamMetricReports)this.currentSsrcs[e]||delete this.streamMetricReports[e]}}t.default=a},2306:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.previousMetrics={},this.currentMetrics={}}}},2811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.previousMetrics={},this.currentMetrics={}}}},3940:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.minHealth=e.minHealth,this.maxHealth=e.maxHealth,this.currentHealth=e.initialHealth,this.currentData=t.clone()}minimumHealth(){return this.minHealth}maximumHealth(){return this.maxHealth}health(){return this.maximumHealth()}update(e){this.currentData=e}getConnectionHealthData(){return this.currentData.clone()}healthy(){return this.health()>this.minimumHealth()}healthIfChanged(){const e=this.health();return e!==this.currentHealth?(this.currentHealth=e,e):null}}},6688:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}static isTimestampRecent(e,t){return Date.now()<e+t}setConnectionStartTime(){this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}reset(){this.connectionStartTimestampMs=0,this.consecutiveStatsWithNoPackets=0,this.lastPacketLossInboundTimestampMs=0,this.lastGoodSignalTimestampMs=0,this.lastWeakSignalTimestampMs=0,this.lastNoSignalTimestampMs=0,this.consecutiveMissedPongs=0,this.packetsReceivedInLastMinute=[],this.fractionPacketsLostInboundInLastMinute=[],this.audioSpeakerDelayMs=0,this.connectionStartTimestampMs=Date.now(),this.lastGoodSignalTimestampMs=Date.now()}isConnectionStartRecent(e){return i.isTimestampRecent(this.connectionStartTimestampMs,e)}isLastPacketLossRecent(e){return i.isTimestampRecent(this.lastPacketLossInboundTimestampMs,e)}isGoodSignalRecent(e){return i.isTimestampRecent(this.lastGoodSignalTimestampMs,e)}isWeakSignalRecent(e){return i.isTimestampRecent(this.lastWeakSignalTimestampMs,e)}isNoSignalRecent(e){return i.isTimestampRecent(this.lastNoSignalTimestampMs,e)}clone(){const e=new i;return e.connectionStartTimestampMs=this.connectionStartTimestampMs,e.consecutiveStatsWithNoPackets=this.consecutiveStatsWithNoPackets,e.lastPacketLossInboundTimestampMs=this.lastPacketLossInboundTimestampMs,e.lastGoodSignalTimestampMs=this.lastGoodSignalTimestampMs,e.lastWeakSignalTimestampMs=this.lastWeakSignalTimestampMs,e.lastNoSignalTimestampMs=this.lastNoSignalTimestampMs,e.consecutiveMissedPongs=this.consecutiveMissedPongs,e.packetsReceivedInLastMinute=this.packetsReceivedInLastMinute.slice(0),e.fractionPacketsLostInboundInLastMinute=this.fractionPacketsLostInboundInLastMinute.slice(0),e.audioSpeakerDelayMs=this.audioSpeakerDelayMs,e}setConsecutiveMissedPongs(e){this.consecutiveMissedPongs=e}setConsecutiveStatsWithNoPackets(e){this.consecutiveStatsWithNoPackets=e}setLastPacketLossInboundTimestampMs(e){this.lastPacketLossInboundTimestampMs=e}setLastNoSignalTimestampMs(e){this.lastNoSignalTimestampMs=e}setLastWeakSignalTimestampMs(e){this.lastWeakSignalTimestampMs=e}setLastGoodSignalTimestampMs(e){this.lastGoodSignalTimestampMs=e}setAudioSpeakerDelayMs(e){this.audioSpeakerDelayMs=e}}t.default=i},3731:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.minHealth=0,this.maxHealth=1,this.initialHealth=1,this.connectionUnhealthyThreshold=25,this.noSignalThresholdTimeMs=1e4,this.connectionWaitTimeMs=1e4,this.zeroBarsNoSignalTimeMs=5e3,this.oneBarWeakSignalTimeMs=5e3,this.twoBarsTimeMs=5e3,this.threeBarsTimeMs=1e4,this.fourBarsTimeMs=2e4,this.fiveBarsTimeMs=6e4,this.cooldownTimeMs=6e4,this.pastSamplesToConsider=15,this.goodSignalTimeMs=15e3,this.fractionalLoss=.5,this.packetsExpected=50,this.maximumTimesToWarn=2,this.missedPongsLowerThreshold=1,this.missedPongsUpperThreshold=4,this.maximumAudioDelayMs=6e4,this.maximumAudioDelayDataPoints=10}}},9708:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3940);class r extends n.default{constructor(e,t,i){super(t,i),this.logger=e,this.audioDelayPointsOverMaximum=0,r.CONNECTION_UNHEALTHY_THRESHOLD=t.connectionUnhealthyThreshold,r.CONNECTION_WAIT_TIME_MS=t.connectionWaitTimeMs,r.MISSED_PONGS_THRESHOLD=t.missedPongsUpperThreshold,r.MAXIMUM_AUDIO_DELAY_MS=t.maximumAudioDelayMs,r.MAXIMUM_AUDIO_DELAY_DATA_POINTS=t.maximumAudioDelayDataPoints}health(){if(this.currentData.isConnectionStartRecent(r.CONNECTION_WAIT_TIME_MS))return 1;const e=this.currentData.consecutiveStatsWithNoPackets>=r.CONNECTION_UNHEALTHY_THRESHOLD,t=this.currentData.consecutiveMissedPongs>=r.MISSED_PONGS_THRESHOLD;this.currentData.audioSpeakerDelayMs>r.MAXIMUM_AUDIO_DELAY_MS?this.audioDelayPointsOverMaximum+=1:this.audioDelayPointsOverMaximum=0;const i=this.audioDelayPointsOverMaximum>r.MAXIMUM_AUDIO_DELAY_DATA_POINTS;return i&&(this.audioDelayPointsOverMaximum=0),e||t||i?(this.logger.warn(`reconnection recommended due to: no packets received: ${e}, missed pongs: ${t}, bad audio delay: ${i}`),0):1}}t.default=r},1922:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3940);class r extends n.default{constructor(e,t){super(e,t),this.coolDownTimeMs=e.cooldownTimeMs,this.pastSamplesToConsider=e.pastSamplesToConsider,this.fractionalLoss=e.fractionalLoss,this.packetsExpected=e.packetsExpected,this.maximumTimesToWarn=e.maximumTimesToWarn,this.lastWarnTimestampMs=0,this.warnCount=0}calculateFractionalLoss(){if(this.currentData.packetsReceivedInLastMinute.length<this.pastSamplesToConsider)return 0;const e=this.pastSamplesToConsider,t=e*this.packetsExpected;let i=0;for(let t=0;t<e;t++)i+=this.currentData.packetsReceivedInLastMinute[t];return Math.min(Math.max(1-i/t,0),1)}health(){return Date.now()-this.lastWarnTimestampMs<this.coolDownTimeMs?this.currentHealth:this.calculateFractionalLoss()>=this.fractionalLoss?0!==this.currentHealth&&(this.lastWarnTimestampMs=Date.now(),this.warnCount++,this.warnCount>this.maximumTimesToWarn)?1:0:1}}t.default=r},8581:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(7086);t.default=class{constructor(e,t,i,n,r,o){this.audioVideoController=e,this.realtimeController=t,this.videoTileController=i,this.connectionHealthData=n,this.pingPong=r,this.statsCollector=o,this.isActive=!1,this.hasSeenValidPacketMetricsBefore=!1,this.lastAvailableSendBandwidthKbps=0,this.lastAvailableRecvBandwidthKbps=0,this.realtimeController.realtimeSubscribeToLocalSignalStrengthChange((e=>{this.isActive&&this.receiveSignalStrengthChange(e)}))}start(){this.isActive=!0,this.pingPong.addObserver(this),this.pingPong.start(),this.audioVideoController.addObserver(this)}stop(){this.isActive=!1,this.pingPong.removeObserver(this),this.pingPong.stop(),this.audioVideoController.removeObserver(this)}receiveSignalStrengthChange(e){0===e?this.connectionHealthData.setLastNoSignalTimestampMs(Date.now()):e<=.5?this.connectionHealthData.setLastWeakSignalTimestampMs(Date.now()):this.connectionHealthData.setLastGoodSignalTimestampMs(Date.now()),this.updateConnectionHealth()}didReceivePong(e,t,i){this.connectionHealthData.setConsecutiveMissedPongs(0),this.statsCollector.logLatency("ping_pong",t),this.statsCollector.logLatency("ping_pong_clock_skew",i),this.updateConnectionHealth()}didMissPongs(){this.connectionHealthData.setConsecutiveMissedPongs(this.connectionHealthData.consecutiveMissedPongs+1),this.updateConnectionHealth()}metricsDidReceive(e){let t=0,i=0;const n=e.getObservableMetrics(),r=n.audioPacketsReceived,o=n.audioPacketsReceivedFractionLoss;let s=0;const a=n.videoPacketSentPerSecond,l=n.videoUpstreamBitrate,c=n.availableSendBandwidth||n.availableOutgoingBitrate,u=n.availableReceiveBandwidth||n.availableIncomingBitrate,d=n.audioSpeakerDelayMs,h=n.nackCountReceivedPerSecond||n.googNackCountReceivedPerSecond;"number"!=typeof c||isNaN(c)||this.updateAvailableSendBandwidth(c/1e3,h),"number"!=typeof u||isNaN(u)||this.updateAvailableReceiveBandwidth(u/1e3),"number"!=typeof l||isNaN(l)||(s=l/1e3),"number"!=typeof d||isNaN(d)||this.connectionHealthData.setAudioSpeakerDelayMs(d),this.monitorVideoUplinkHealth(s,a),"number"==typeof r&&"number"==typeof o&&(t=r,i=o,t<0||i<0||(this.addToMinuteWindow(this.connectionHealthData.packetsReceivedInLastMinute,t),this.addToMinuteWindow(this.connectionHealthData.fractionPacketsLostInboundInLastMinute,i),t>0?(this.hasSeenValidPacketMetricsBefore=!0,this.connectionHealthData.setConsecutiveStatsWithNoPackets(0)):this.hasSeenValidPacketMetricsBefore&&this.connectionHealthData.setConsecutiveStatsWithNoPackets(this.connectionHealthData.consecutiveStatsWithNoPackets+1),(0===t||i>0)&&this.connectionHealthData.setLastPacketLossInboundTimestampMs(Date.now()),this.updateConnectionHealth()))}addToMinuteWindow(e,t){e.unshift(t),e.length>60&&e.pop()}updateAvailableSendBandwidth(e,t){if(e!==this.lastAvailableSendBandwidthKbps){if(0===this.lastAvailableSendBandwidthKbps)return void(this.lastAvailableSendBandwidthKbps=e);const i=this.lastAvailableSendBandwidthKbps;this.lastAvailableSendBandwidthKbps=e,this.audioVideoController.forEachObserver((r=>{n.default.of(r.videoSendBandwidthDidChange).map((n=>n.bind(r)(e,i,t)))}))}}updateAvailableReceiveBandwidth(e){if(e!==this.lastAvailableRecvBandwidthKbps){if(0===this.lastAvailableRecvBandwidthKbps)return void(this.lastAvailableRecvBandwidthKbps=e);const t=this.lastAvailableRecvBandwidthKbps;this.lastAvailableRecvBandwidthKbps=e,this.audioVideoController.forEachObserver((i=>{n.default.of(i.videoReceiveBandwidthDidChange).map((n=>n.bind(i)(e,t)))}))}}updateConnectionHealth(){this.audioVideoController.forEachObserver((e=>{n.default.of(e.connectionHealthDidChange).map((t=>t.bind(e)(this.connectionHealthData.clone())))}))}monitorVideoUplinkHealth(e,t){this.videoTileController.hasStartedLocalVideoTile()&&this.audioVideoController.forEachObserver((i=>{n.default.of(i.videoSendHealthDidChange).map((n=>n.bind(i)(e,t)))}))}}},8890:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Modality="#content"}(i||(i={})),t.default=i},8370:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(543),o=i(4142);class s{constructor(e){this.logger=e}get mediaStream(){return this._mediaStream}set mediaStream(e){this._mediaStream=e}acquireAudioInputStream(){return n(this,void 0,void 0,(function*(){return 0===this._mediaStream.getAudioTracks().length?(this.logger.info("No audio stream available. Synthesizing an audio stream."),o.default.synthesizeAudioDevice(0)):this._mediaStream}))}acquireVideoInputStream(){return n(this,void 0,void 0,(function*(){return this._mediaStream}))}releaseMediaStream(e){this.logger.warn("release media stream called")}acquireDisplayInputStream(e){return n(this,void 0,void 0,(function*(){return e&&e.video&&e.video.mandatory&&e.video.mandatory.chromeMediaSource&&e.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(e):navigator.mediaDevices.getDisplayMedia(e)}))}bindToAudioVideoController(e){throw new Error("unsupported")}acquireScreenCaptureDisplayInputStream(e,t){return n(this,void 0,void 0,(function*(){return this.acquireDisplayInputStream(this.screenCaptureDisplayMediaConstraints(e,t))}))}screenCaptureDisplayMediaConstraints(e,t){return{audio:!(e||!(new r.default).getDisplayMediaAudioCaptureSupport()),video:Object.assign(Object.assign({},!e&&{frameRate:{max:t||s.defaultFrameRate}}),e&&{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:t||s.defaultFrameRate}})}}toggleMediaStream(e){let t=!1;if(this.mediaStream)for(let i=0;i<this.mediaStream.getTracks().length;i++)this.mediaStream.getTracks()[i].enabled!==e&&(this.mediaStream.getTracks()[i].enabled=e,t=!0);return t}cleanup(){if(this.mediaStream)for(let e=0;e<this.mediaStream.getTracks().length;e++)this.mediaStream.getTracks()[e].stop();this.mediaStream=null}}t.default=s,s.defaultFrameRate=15},8023:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(7086),o=i(589),s=i(8015),a=i(214),l=i(7797),c=i(8890);t.default=class{constructor(e,t,i){this.mediaStreamBroker=e,this.contentAudioVideo=t,this.attendeeAudioVideo=i,this.observerQueue=new Set,this.destroyed=!1,this.contentAudioVideo.addObserver(this),this.setupContentShareEvents()}static createContentShareMeetingSessionConfigure(e){const t=new o.default;return t.meetingId=e.meetingId,t.externalMeetingId=e.externalMeetingId,t.urls=e.urls,t.credentials=new s.default,t.credentials.attendeeId=e.credentials.attendeeId+c.default.Modality,t.credentials.externalUserId=e.credentials.externalUserId,t.credentials.joinToken=e.credentials.joinToken+c.default.Modality,t}setContentAudioProfile(e){this.contentAudioVideo.setAudioProfile(e)}startContentShare(e){return n(this,void 0,void 0,(function*(){if(e){this.mediaStreamBroker.mediaStream=e;for(let e=0;e<this.mediaStreamBroker.mediaStream.getTracks().length;e++)this.mediaStreamBroker.mediaStream.getTracks()[e].addEventListener("ended",(()=>{this.stopContentShare()}));this.contentAudioVideo.start(),this.mediaStreamBroker.mediaStream.getVideoTracks().length>0&&this.contentAudioVideo.videoTileController.startLocalVideoTile()}}))}startContentShareFromScreenCapture(e,t){return n(this,void 0,void 0,(function*(){const i=yield this.mediaStreamBroker.acquireScreenCaptureDisplayInputStream(e,t);return yield this.startContentShare(i),i}))}pauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!1)&&this.forEachContentShareObserver((e=>{r.default.of(e.contentShareDidPause).map((t=>t.call(e)))}))}unpauseContentShare(){this.mediaStreamBroker.toggleMediaStream(!0)&&this.forEachContentShareObserver((e=>{r.default.of(e.contentShareDidUnpause).map((t=>t.call(e)))}))}destroy(){return n(this,void 0,void 0,(function*(){this.contentAudioVideo&&(this.destroyed=!0,this.contentAudioVideo.removeObserver(this),this.stopContentShare(),this.observerQueue.clear(),this.contentAudioVideo=void 0,this.attendeeAudioVideo=void 0,this.mediaStreamBroker=void 0)}))}stopContentShare(){this.contentAudioVideo.stop(),this.mediaStreamBroker.cleanup()}addContentShareObserver(e){this.observerQueue.add(e)}removeContentShareObserver(e){this.observerQueue.delete(e)}forEachContentShareObserver(e){for(const t of this.observerQueue)l.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}audioVideoDidStop(e){this.mediaStreamBroker.cleanup(),this.contentShareTile&&(this.attendeeAudioVideo.videoTileController.removeVideoTile(this.contentShareTile.id()),this.contentShareTile=null),this.forEachContentShareObserver((e=>{r.default.of(e.contentShareDidStop).map((t=>t.call(e)))}))}setupContentShareEvents(){this.attendeeAudioVideo.realtimeController.realtimeSubscribeToAttendeeIdPresence(((e,t,i,n)=>{const o=new a.default(e).hasModality(a.default.MODALITY_CONTENT),s=new a.default(e).base()===this.attendeeAudioVideo.configuration.credentials.attendeeId;if(!o||!s||!t||this.contentShareTile)return;const l=this.mediaStreamBroker.mediaStream;if(null==l?void 0:l.getVideoTracks().length){this.contentShareTile=this.attendeeAudioVideo.videoTileController.addVideoTile();const e=l.getVideoTracks()[0];let t,i;if(e.getSettings){const n=e.getSettings();t=n.width,i=n.height}else{const n=e.getCapabilities();t=n.width,i=n.height}this.contentShareTile.bindVideoStream(this.contentAudioVideo.configuration.credentials.attendeeId,!1,l,t,i,null,this.contentAudioVideo.configuration.credentials.externalUserId)}this.forEachContentShareObserver((e=>{r.default.of(e.contentShareDidStart).map((t=>t.call(e)))}))}))}}},1018:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,n,r,o){this.timestampMs=e,this.topic=t,this.data=i,this.senderAttendeeId=n,this.senderExternalUserId=r,this.throttled=!!o}text(){return(new TextDecoder).decode(this.data)}json(){return JSON.parse((new TextDecoder).decode(this.data))}}},146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDestroyable=void 0,t.isDestroyable=function(e){return e&&"destroy"in e}},1746:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAudioTransformDevice=void 0,t.isAudioTransformDevice=function(e){return!!e&&"object"==typeof e&&"mute"in e&&"stop"in e&&"intrinsicDevice"in e}},4142:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(543),o=i(7086),s=i(6354),a=i(7797),l=i(3922),c=i(3327),u=i(1746),d=i(8128),h=i(5348),f=i(1238),p=i(3110),m=i(4842),g=i(6991),v=i(6950),b=i(4500),S=i(7170);class y{constructor(e,t,i=new r.default){this.logger=e,this.browserBehavior=i,this.deviceInfoCache=null,this.activeDevices={audio:null,video:null},this.chosenVideoTransformDevice=null,this.audioOutputDeviceId=null,this.deviceChangeObservers=new Set,this.deviceLabelTrigger=()=>navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),this.audioInputDestinationNode=null,this.audioInputSourceNode=null,this.videoInputQualitySettings=null,this.useWebAudio=!1,this.inputDeviceCount=0,this.alreadyHandlingDeviceChange=!1;const{enableWebAudio:n=!1}=t||{};this.useWebAudio=n,this.muteCallback=e=>{var t;null===(t=this.transform)||void 0===t||t.device.mute(e)},this.videoInputQualitySettings=new b.default(y.defaultVideoWidth,y.defaultVideoHeight,y.defaultVideoFrameRate,y.defaultVideoMaxBandwidthKbps);const o=this.browserBehavior.requiresResolutionAlignment(this.videoInputQualitySettings.videoWidth,this.videoInputQualitySettings.videoHeight);this.videoInputQualitySettings.videoWidth=o[0],this.videoInputQualitySettings.videoHeight=o[1],this.logger.info(`DefaultDeviceController video dimension ${this.videoInputQualitySettings.videoWidth} x ${this.videoInputQualitySettings.videoHeight}`);try{this.mediaDeviceWrapper=(new s.default).create();const e=navigator.mediaDevices.getSupportedConstraints();this.logger.info(`Supported Constraints in this browser ${JSON.stringify(e)}`)}catch(t){e.error(t.message)}}isWatchingForDeviceChanges(){return!!this.onDeviceChangeCallback}ensureWatchingDeviceChanges(){this.isWatchingForDeviceChanges()||(this.logger.info("Starting devicechange listener."),this.onDeviceChangeCallback=()=>this.handleDeviceChange(),this.mediaDeviceWrapper.addEventListener("devicechange",this.onDeviceChangeCallback))}stopWatchingDeviceChanges(){this.isWatchingForDeviceChanges()&&(this.logger.info("Stopping devicechange listener."),this.mediaDeviceWrapper.removeEventListener("devicechange",this.onDeviceChangeCallback),this.onDeviceChangeCallback=void 0)}shouldObserveDeviceChanges(){return!!this.deviceChangeObservers.size||(this.activeDevices.audio&&null!==this.activeDevices.audio.constraints||this.activeDevices.video&&null!==this.activeDevices.video.constraints||!!this.audioOutputDeviceId)}watchForDeviceChangesIfNecessary(){this.shouldObserveDeviceChanges()?this.ensureWatchingDeviceChanges():this.stopWatchingDeviceChanges()}destroy(){var e,t;return n(this,void 0,void 0,(function*(){this.stopWatchingDeviceChanges(),yield this.chooseAudioInputDevice(null),yield this.chooseVideoInputDevice(null),null===(e=this.audioInputSourceNode)||void 0===e||e.disconnect(),null===(t=this.audioInputDestinationNode)||void 0===t||t.disconnect(),this.audioInputSourceNode=void 0,this.audioInputDestinationNode=void 0}))}listAudioInputDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.listDevicesOfKind("audioinput");return this.trace("listAudioInputDevices",null,e),e}))}listVideoInputDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.listDevicesOfKind("videoinput");return this.trace("listVideoInputDevices",null,e),e}))}listAudioOutputDevices(){return n(this,void 0,void 0,(function*(){const e=yield this.listDevicesOfKind("audiooutput");return this.trace("listAudioOutputDevices",null,e),e}))}pushAudioMeetingStateForPermissions(e){var t,i;null===(i=null===(t=this.boundAudioVideoController)||void 0===t?void 0:t.eventController)||void 0===i||i.publishEvent(null===e?"audioInputUnselected":"audioInputSelected")}pushVideoMeetingStateForPermissions(e){var t,i;null===(i=null===(t=this.boundAudioVideoController)||void 0===t?void 0:t.eventController)||void 0===i||i.publishEvent(null===e?"videoInputUnselected":"videoInputSelected")}chooseAudioInputDevice(e){var t,i;return n(this,void 0,void 0,(function*(){if(void 0===e)return void this.logger.error("Audio input device cannot be undefined");let n=this.useWebAudio;this.useWebAudio||this.logger.debug("Not using Web Audio. No need to recreate audio context."),"suspended"===(null===(t=y.audioContext)||void 0===t?void 0:t.state)&&(n=!1),n&&!this.browserBehavior.requiresContextRecreationForAudioWorklet()&&(this.logger.debug("Browser does not require audio context recreation hack."),n=!1),n&&!this.transform&&u.isAudioTransformDevice(e)&&(this.logger.debug("Neither device is a transform. No need to recreate audio context."),n=!1),n&&(this.logger.info("Recreating audio context when selecting new device."),this.transform&&(this.transform.nodes&&(this.transform.nodes.end.disconnect(),this.transform.nodes=void 0),this.transform=void 0),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0),y.closeAudioContext()),u.isAudioTransformDevice(e)?(this.logger.info(`Choosing transform input device ${e}`),yield this.chooseAudioTransformInputDevice(e)):(this.logger.info(`Choosing intrinsic input device ${e}`),this.removeTransform(),yield this.chooseInputIntrinsicDevice("audio",e,!1),this.trace("chooseAudioInputDevice",e,"success")),n&&(null===(i=this.boundAudioVideoController)||void 0===i?void 0:i.rtcPeerConnection)&&this.boundAudioVideoController.restartLocalAudio((()=>{this.logger.info("Local audio restarted.")})),this.pushAudioMeetingStateForPermissions(e)}))}chooseAudioTransformInputDevice(e){var t;return n(this,void 0,void 0,(function*(){if((null===(t=this.transform)||void 0===t?void 0:t.device)===e)return;if(!this.useWebAudio)throw new Error("Cannot apply transform device without enabling Web Audio.");const i=y.getAudioContext();if(i instanceof OfflineAudioContext);else switch(i.state){case"running":break;case"closed":throw new Error("Cannot choose a transform device with a closed audio context.");case"suspended":yield i.resume()}let n;try{n=yield e.createAudioNode(i)}catch(e){throw this.logger.error(`Unable to create transform device node: ${e}.`),e}const r=yield e.intrinsicDevice();yield this.chooseInputIntrinsicDevice("audio",r,!1),this.logger.debug(`Got inner stream: ${r}.`),this.setTransform(e,n)}))}chooseVideoTransformInputDevice(e){var t,i;return n(this,void 0,void 0,(function*(){if(e===this.chosenVideoTransformDevice)return void this.logger.info("Reselecting same VideoTransformDevice");const n=this.chosenVideoTransformDevice;n&&this.logger.info("Switched from previous VideoTransformDevice");const r=!!n,o=yield e.intrinsicDevice();if(!this.isMediaStreamReusableByDeviceId(null===(t=this.activeDevices.video)||void 0===t?void 0:t.stream,o))return this.logger.info("video transform device needs new intrinsic device"),r&&n.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=e,this.activeDevices.video=null,void(yield this.chooseInputIntrinsicDevice("video",o,!1,!0));this.chosenVideoTransformDevice=e;const s=this.activeDevices.video.stream;if(this.logger.info("video transform device uses previous stream"),!o.id){const e=o;e.width=e.width||this.videoInputQualitySettings.videoWidth,e.height=e.height||this.videoInputQualitySettings.videoHeight,e.frameRate=e.frameRate||this.videoInputQualitySettings.videoFrameRate,yield s.getVideoTracks()[0].applyConstraints(e)}yield e.transformStream(this.activeDevices.video.stream),(null===(i=this.boundAudioVideoController)||void 0===i?void 0:i.videoTileController.hasStartedLocalVideoTile())&&(this.boundAudioVideoController.replaceLocalVideo?this.restartLocalVideoAfterSelection(null,!1,!0):yield this.boundAudioVideoController.update())}))}chooseVideoInputDevice(e){return n(this,void 0,void 0,(function*(){if(void 0!==e){if(S.isVideoTransformDevice(e))return this.logger.info(`Choosing video transform device ${e}`),this.chooseVideoTransformInputDevice(e);this.updateMaxBandwidthKbps(),this.chosenVideoInputIsTransformDevice()&&(this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null),yield this.chooseInputIntrinsicDevice("video",e,!1),this.trace("chooseVideoInputDevice",e),this.pushVideoMeetingStateForPermissions(e)}else this.logger.error("Video input device cannot be undefined")}))}chooseAudioOutputDevice(e){return n(this,void 0,void 0,(function*(){this.audioOutputDeviceId=e,this.watchForDeviceChangesIfNecessary(),yield this.bindAudioOutput(),this.trace("chooseAudioOutputDevice",e,null)}))}addDeviceChangeObserver(e){this.logger.info("adding device change observer"),this.deviceChangeObservers.add(e),this.watchForDeviceChangesIfNecessary(),this.trace("addDeviceChangeObserver")}removeDeviceChangeObserver(e){this.logger.info("removing device change observer"),this.deviceChangeObservers.delete(e),this.watchForDeviceChangesIfNecessary(),this.trace("removeDeviceChangeObserver")}createAnalyserNodeForAudioInput(){var e,t;if(!this.activeDevices.audio)return null;const i=null===(t=null===(e=this.transform)||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.end;if(i){const e=i.context.createAnalyser();return e.removeOriginalInputs=()=>{try{i.disconnect(e)}catch(e){}},i.connect(e),e}return this.createAnalyserNodeForRawAudioInput()}createAnalyserNodeForRawAudioInput(){return this.activeDevices.audio?this.createAnalyserNodeForStream(this.activeDevices.audio.stream):null}createAnalyserNodeForStream(e){const t=y.getAudioContext(),i=t.createAnalyser(),n=t.createMediaStreamSource(e);return n.connect(i),this.trace("createAnalyserNodeForAudioInput"),i.removeOriginalInputs=()=>{try{n.disconnect(i)}catch(e){}},i}startVideoPreviewForVideoInput(e){if(!this.activeDevices.video)return this.logger.warn("cannot bind video preview since video input device has not been chosen"),void this.trace("startVideoPreviewForVideoInput",e.id);this.releaseMediaStream(e.srcObject),c.default.disconnectVideoStreamFromVideoElement(e,!1),c.default.connectVideoStreamToVideoElement(this.activeDevices.video.stream,e,!0),this.trace("startVideoPreviewForVideoInput",e.id)}stopVideoPreviewForVideoInput(e){const t=e.srcObject,i=this.activeDevices.video;i&&this.releaseActiveDevice(i),t&&(this.releaseMediaStream(t),c.default.disconnectVideoStreamFromVideoElement(e,!1)),this.trace("stopVideoPreviewForVideoInput",e.id)}setDeviceLabelTrigger(e){this.deviceLabelTrigger=e,this.trace("setDeviceLabelTrigger")}mixIntoAudioInput(e){let t=null;return this.useWebAudio?(t=y.getAudioContext().createMediaStreamSource(e),t.connect(this.getMediaStreamOutputNode())):this.logger.warn("WebAudio is not enabled, mixIntoAudioInput will not work"),this.trace("mixIntoAudioInput",e.id),t}chooseVideoInputQuality(e,t,i,n){const r=this.browserBehavior.requiresResolutionAlignment(e,t);this.videoInputQualitySettings=new b.default(r[0],r[1],i,n),this.updateMaxBandwidthKbps()}getVideoInputQualitySettings(){return this.videoInputQualitySettings}acquireAudioInputStream(){return this.acquireInputStream("audio")}acquireVideoInputStream(){return this.acquireInputStream("video")}acquireDisplayInputStream(e){return n(this,void 0,void 0,(function*(){return e&&e.video&&e.video.mandatory&&e.video.mandatory.chromeMediaSource&&e.video.mandatory.chromeMediaSourceId?navigator.mediaDevices.getUserMedia(e):navigator.mediaDevices.getDisplayMedia(e)}))}releaseAudioTransformStream(){this.logger.info("Stopping audio track for Web Audio graph"),this.stopTracksAndRemoveCallback("audio"),this.logger.info("Removing audio transform, if there is one."),this.removeTransform(),this.audioInputSourceNode&&(this.audioInputSourceNode.disconnect(),this.audioInputSourceNode=void 0),this.audioInputDestinationNode&&(this.audioInputDestinationNode.disconnect(),this.audioInputDestinationNode=void 0)}releaseVideoTransformStream(){this.logger.info("Stopping video track for transform"),this.stopTracksAndRemoveCallback("video"),this.logger.info("Disconnecting video transform"),this.chosenVideoTransformDevice.onOutputStreamDisconnect(),this.chosenVideoTransformDevice=null}stopTracksAndRemoveCallback(e){const t=this.activeDevices[e];if(!t)return;const i=t.endedCallback;for(const n of t.stream.getTracks())n.stop(),i&&(n.removeEventListener("ended",i),delete t.endedCallback),delete this.activeDevices[e]}releaseOrdinaryStream(e){var t;const i=e.getTracks();if(i.length){for(const e of i)e.stop();for(const n in this.activeDevices){const r=this.activeDevices[n];(null==r?void 0:r.stream)===e&&(r.endedCallback&&(i[0].removeEventListener("ended",r.endedCallback),delete r.endedCallback),delete this.activeDevices[n],"video"===n&&(null===(t=this.boundAudioVideoController)||void 0===t?void 0:t.videoTileController.hasStartedLocalVideoTile())&&this.boundAudioVideoController.videoTileController.stopLocalVideoTile())}}}releaseMediaStream(e){var t,i;if(e)try{if(e===(null===(t=this.audioInputDestinationNode)||void 0===t?void 0:t.stream))return void this.releaseAudioTransformStream();if(e===(null===(i=this.chosenVideoTransformDevice)||void 0===i?void 0:i.outputMediaStream))return void this.releaseVideoTransformStream();this.releaseOrdinaryStream(e)}finally{this.watchForDeviceChangesIfNecessary()}}chosenVideoInputIsTransformDevice(){return!!this.chosenVideoTransformDevice}bindToAudioVideoController(e){this.boundAudioVideoController&&this.unsubscribeFromMuteAndUnmuteLocalAudio(),this.boundAudioVideoController=e,this.subscribeToMuteAndUnmuteLocalAudio(),this.browserBehavior.supportsSetSinkId()&&a.default.nextTick((()=>{this.bindAudioOutput()}))}subscribeToMuteAndUnmuteLocalAudio(){this.boundAudioVideoController&&this.boundAudioVideoController.realtimeController&&this.boundAudioVideoController.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.muteCallback)}unsubscribeFromMuteAndUnmuteLocalAudio(){this.boundAudioVideoController.realtimeController&&this.boundAudioVideoController.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.muteCallback)}static getIntrinsicDeviceId(e){if(void 0===e)return;if(null===e)return null;if("string"==typeof e)return e;if(e.id)return e.id;const t=e.deviceId;if(void 0===t)return;if(null===t)return null;if("string"==typeof t||Array.isArray(t))return t;const i=t;return"string"==typeof i.exact||Array.isArray(i.exact)?i.exact:void 0}static createEmptyAudioDevice(){return y.synthesizeAudioDevice(0)}static createEmptyVideoDevice(){return y.synthesizeVideoDevice("black")}static synthesizeAudioDevice(e){const t=y.getAudioContext(),i=t.createMediaStreamDestination();if(e){const n=t.createGain();n.gain.value=.1,n.connect(i);const r=t.createOscillator();r.frequency.value=e,r.connect(n),r.start()}else{const e=t.createBufferSource();try{e.buffer=t.createBuffer(1,5*t.sampleRate,t.sampleRate)}catch(i){if(!i||"NotSupportedError"!==i.name)throw i;e.buffer=t.createBuffer(1,5*y.defaultSampleRate,y.defaultSampleRate)}e.buffer.getChannelData(0)[0]=3e-4,e.loop=!0,e.connect(i),e.start()}return i.stream}static synthesizeVideoDevice(e){const t=document.createElement("canvas");t.width=480,t.height=t.width/16*9;const i=function(e,t){const i=new l.default(1e3),n=e.getContext("2d"),r=e.captureStream(5)||null;if(!r)return;i.start((()=>{"smpte"===t?function(e,t){const i=e.width,n=e.height,r=2*n/3,o=3*n/4,s=n,a=["#c0c0c0","#c0c000","#00c0c0","#00c000","#c000c0","#c00000","#0000c0"],l=["#0000c0","#000000","#c000c0","#000000","#00c0c0","#000000","#c0c0c0"],c=["#00214c","#ffffff","#32006a","#131313","#090909","#131313","#1d1d1d","#131313"],u=[0*i,1*i/4*(5/7),2*i/4*(5/7),3*i/4*(5/7),i*(5/7),i*(5/7+1/21),i*(5/7+2/21),i*(6/7),1*i],d=i/a.length,h=e.getContext("2d");for(let e=0;e<a.length;e++)h.fillStyle=a[e],h.fillRect(0+e*d,0,d,r),h.fillStyle=l[e],h.fillRect(0+e*d,r,d,o-r);for(let e=0;e<c.length;e++)h.fillStyle=c[e],h.fillRect(0+u[e],o,u[e+1]-u[e],s-o)}(e):(n.fillStyle=t,n.fillRect(0,0,e.width,e.height))}));const o=()=>{i.stop()};return r.getVideoTracks()[0].addEventListener("ended",o),{listener:o,scheduler:i,stream:r}}(t,e);if(!i)return null;const{stream:n}=i;return n}updateMaxBandwidthKbps(){this.boundAudioVideoController&&this.boundAudioVideoController.setVideoMaxBandwidthKbps(this.videoInputQualitySettings.videoMaxBandwidthKbps)}listDevicesOfKind(e){return n(this,void 0,void 0,(function*(){return null!==this.deviceInfoCache&&this.isWatchingForDeviceChanges()||(yield this.updateDeviceInfoCacheFromBrowser()),this.listCachedDevicesOfKind(e)}))}updateDeviceInfoCacheFromBrowser(){return n(this,void 0,void 0,(function*(){if("undefined"==typeof MediaDeviceInfo)return void(this.deviceInfoCache=[]);let e=yield navigator.mediaDevices.enumerateDevices(),t=!0;for(const i of e)if(!i.label){t=!1;break}if(!t)try{this.logger.info("attempting to trigger media device labels since they are hidden");const t=yield this.deviceLabelTrigger();e=yield navigator.mediaDevices.enumerateDevices();for(const e of t.getTracks())e.stop()}catch(e){this.logger.info("unable to get media device labels")}this.deviceInfoCache=e}))}listCachedDevicesOfKind(e){const t=[];for(const i of this.deviceInfoCache)i.kind===e&&t.push(i);return t}handleDeviceChange(){return n(this,void 0,void 0,(function*(){if(null===this.deviceInfoCache)return;if(this.alreadyHandlingDeviceChange)return void a.default.nextTick((()=>{this.handleDeviceChange()}));this.alreadyHandlingDeviceChange=!0;const e=this.listCachedDevicesOfKind("audioinput"),t=this.listCachedDevicesOfKind("videoinput"),i=this.listCachedDevicesOfKind("audiooutput");yield this.updateDeviceInfoCacheFromBrowser();const n=this.listCachedDevicesOfKind("audioinput"),r=this.listCachedDevicesOfKind("videoinput"),s=this.listCachedDevicesOfKind("audiooutput");this.forEachObserver((a=>{this.areDeviceListsEqual(e,n)||o.default.of(a.audioInputsChanged).map((e=>e.bind(a)(n))),this.areDeviceListsEqual(t,r)||o.default.of(a.videoInputsChanged).map((e=>e.bind(a)(r))),this.areDeviceListsEqual(i,s)||o.default.of(a.audioOutputsChanged).map((e=>e.bind(a)(s)))})),this.alreadyHandlingDeviceChange=!1}))}handleDeviceStreamEnded(e,t){return n(this,void 0,void 0,(function*(){try{yield this.chooseInputIntrinsicDevice(e,null,!1)}catch(e){this.logger.error("Failed to choose null device after stream ended.")}"audio"===e?this.forEachObserver((e=>{o.default.of(e.audioInputStreamEnded).map((i=>i.bind(e)(t)))})):this.forEachObserver((e=>{o.default.of(e.videoInputStreamEnded).map((i=>i.bind(e)(t)))}))}))}forEachObserver(e){for(const t of this.deviceChangeObservers)a.default.nextTick((()=>{this.deviceChangeObservers.has(t)&&e(t)}))}areDeviceListsEqual(e,t){return JSON.stringify(e.map((e=>JSON.stringify(e))).sort())===JSON.stringify(t.map((e=>JSON.stringify(e))).sort())}intrinsicDeviceAsMediaStream(e){return e&&e.id?e:null}hasSameGroupId(e,t,i){if(""===e)return!0;const n=y.getIntrinsicDeviceId(i);return"string"==typeof n&&e===this.getGroupIdFromDeviceId(t,n)}getGroupIdFromDeviceId(e,t){if(null!==this.deviceInfoCache){const i=this.listCachedDevicesOfKind(`${e}input`).find((e=>e.deviceId===t));if(i&&i.groupId)return i.groupId}return""}getActiveDeviceId(e){if(this.activeDevices[e]&&this.activeDevices[e].constraints){const t=(this.activeDevices[e].constraints.audio||this.activeDevices[e].constraints.video).deviceId;let i;return i="string"==typeof t?t:t.exact,i}return null}restartLocalVideoAfterSelection(e,t,i){return n(this,void 0,void 0,(function*(){!t&&this.boundAudioVideoController&&this.boundAudioVideoController.videoTileController.hasStartedLocalVideoTile()?i?(yield this.boundAudioVideoController.replaceLocalVideo(),this.logger.info("successfully replaced video track"),(null==e?void 0:e.stream.active)&&(this.logger.warn("previous media stream is not stopped during restart video"),this.releaseActiveDevice(e))):(this.logger.info("restarting local video to switch to new device"),this.boundAudioVideoController.restartLocalVideo((()=>{(null==e?void 0:e.stream.active)&&(this.logger.warn("previous media stream is not stopped during restart video"),this.releaseActiveDevice(e))}))):this.releaseActiveDevice(e)}))}handleGetUserMediaError(e,t){if(!e)throw new h.default(e);switch(e.name){case"NotReadableError":case"TrackStartError":throw new p.default(e);case"NotFoundError":case"DevicesNotFoundError":throw new f.default(e);case"NotAllowedError":case"PermissionDeniedError":case"SecurityError":throw t&&t<y.permissionDeniedOriginDetectionThresholdMs?new g.default(e,"Permission denied by browser"):new g.default(e,"Permission denied by user");case"OverconstrainedError":case"ConstraintNotSatisfiedError":throw new m.default(e);case"TypeError":throw new v.default(e);default:throw new h.default(e)}}releaseActiveDevice(e){if(e&&e.stream){if(e.endedCallback){const t=e.stream.getTracks()[0];t&&t.removeEventListener("ended",e.endedCallback)}delete e.endedCallback,this.releaseMediaStream(e.stream),delete e.stream}}matchesDeviceSelection(e,t,i,n){return!!(i&&i.stream.active&&null!==i.groupId&&this.hasSameGroupId(i.groupId,e,t))&&i.matchesConstraints(n)}chooseInputIntrinsicDevice(e,t,i,r=!1){var o,s,a,l,c;return n(this,void 0,void 0,(function*(){this.inputDeviceCount+=1;const n=this.inputDeviceCount;if(null===t&&"video"===e){this.lastNoVideoInputDeviceCount=this.inputDeviceCount;const t=this.activeDevices[e];return void(t&&(this.releaseActiveDevice(t),delete this.activeDevices[e],this.watchForDeviceChangesIfNecessary()))}const u=this.calculateMediaStreamConstraints(e,t);if(this.matchesDeviceSelection(e,t,this.activeDevices[e],u))return void this.logger.info(`reusing existing ${e} device`);"audio"===e&&this.activeDevices[e]&&this.activeDevices[e].stream&&this.releaseActiveDevice(this.activeDevices[e]);const h=Date.now(),f=new d.default;try{this.logger.info(`requesting new ${e} device with constraint ${JSON.stringify(u)}`);const i=this.intrinsicDeviceAsMediaStream(t);if("audio"===e&&null===t)f.stream=y.createEmptyAudioDevice(),f.constraints=null;else if(i)this.logger.info(`using media stream ${i.id} for ${e} device`),f.stream=i,f.constraints=u;else{if(f.stream=yield navigator.mediaDevices.getUserMedia(u),f.constraints=u,"video"===e&&this.lastNoVideoInputDeviceCount>n)return this.logger.warn(`ignored to get video device for constraints ${JSON.stringify(u)} as no device was requested`),void this.releaseMediaStream(f.stream);yield this.handleDeviceChange();const t=f.stream.getTracks()[0];f.endedCallback=()=>{this.activeDevices[e]&&this.activeDevices[e].stream===f.stream&&(this.logger.warn(`${e} input device which was active is no longer available, resetting to null device`),this.handleDeviceStreamEnded(e,this.getActiveDeviceId(e)),delete f.endedCallback)},t.addEventListener("ended",f.endedCallback,{once:!0})}f.groupId=(null===(o=this.getMediaTrackSettings(f.stream))||void 0===o?void 0:o.groupId)||""}catch(t){let n;if(n=(null==t?void 0:t.name)&&t.message?`${t.name}: ${t.message}`:(null==t?void 0:t.name)?t.name:(null==t?void 0:t.message)?t.message:"UnknownError","audio"===e?null===(a=null===(s=this.boundAudioVideoController)||void 0===s?void 0:s.eventController)||void 0===a||a.publishEvent("audioInputFailed",{audioInputErrorMessage:n}):null===(c=null===(l=this.boundAudioVideoController)||void 0===l?void 0:l.eventController)||void 0===c||c.publishEvent("videoInputFailed",{videoInputErrorMessage:n}),this.logger.error(`failed to get ${e} device for constraints ${JSON.stringify(u)}: ${n}`),t&&"constraint"in t&&this.logger.error(`Over-constrained by constraint: ${t.constraint}`),"audio"===e){this.logger.info(`choosing null ${e} device instead`);try{f.stream=y.createEmptyAudioDevice(),f.constraints=null,yield this.handleNewInputDevice(e,f,i)}catch(t){this.logger.error(`failed to choose null ${e} device. ${t.name}: ${t.message}`)}}this.handleGetUserMediaError(t,Date.now()-h)}finally{this.watchForDeviceChangesIfNecessary()}this.logger.info(`got ${e} device for constraints ${JSON.stringify(u)}`),yield this.handleNewInputDevice(e,f,i,r)}))}handleNewInputDevice(e,t,i,r=!1){return n(this,void 0,void 0,(function*(){const n=this.activeDevices[e];if(this.activeDevices[e]=t,this.watchForDeviceChangesIfNecessary(),"video"===e)this.chosenVideoInputIsTransformDevice()&&(this.logger.info("apply processors to transform"),yield this.chosenVideoTransformDevice.transformStream(this.activeDevices.video.stream)),yield this.restartLocalVideoAfterSelection(n,i,r);else if(this.releaseActiveDevice(n),this.useWebAudio)this.attachAudioInputStreamToAudioContext(this.activeDevices[e].stream);else if(this.boundAudioVideoController)try{yield this.boundAudioVideoController.restartLocalAudio((()=>{}))}catch(e){this.logger.info(`cannot replace audio track due to: ${e.message}`)}else this.logger.info("no audio-video controller is bound to the device controller")}))}bindAudioOutput(){return n(this,void 0,void 0,(function*(){if(!this.boundAudioVideoController)return;const e=this.deviceInfoFromDeviceId("audiooutput",this.audioOutputDeviceId);yield this.boundAudioVideoController.audioMixController.bindAudioDevice(e)}))}calculateMediaStreamConstraints(e,t){let i={};""===t&&(t=null);const n=this.intrinsicDeviceAsMediaStream(t);return null===t?null:("string"==typeof t?this.browserBehavior.requiresNoExactMediaStreamConstraints()&&this.browserBehavior.requiresGroupIdMediaStreamConstraints()?(i.deviceId=t,i.groupId=this.getGroupIdFromDeviceId(e,t)):this.browserBehavior.requiresNoExactMediaStreamConstraints()?i.deviceId=t:i.deviceId={exact:t}:n?i.streamId=n.id:function(e){return"object"==typeof e&&"deviceId"in e&&"groupId"in e&&"kind"in e&&"label"in e}(t)?(i.deviceId=t.deviceId,i.groupId=t.groupId):i=t,"video"===e&&(i.width=i.width||{ideal:this.videoInputQualitySettings.videoWidth},i.height=i.height||{ideal:this.videoInputQualitySettings.videoHeight},i.frameRate=i.frameRate||{ideal:this.videoInputQualitySettings.videoFrameRate},i.googCpuOveruseDetection=!0,i.googCpuOveruseEncodeUsage=!0,i.googCpuOveruseThreshold=85,i.googCpuUnderuseThreshold=55),"audio"===e&&this.supportSampleRateConstraint()&&(i.sampleRate={ideal:y.defaultSampleRate}),"audio"===e&&this.supportSampleSizeConstraint()&&(i.sampleSize={ideal:y.defaultSampleSize}),"audio"===e&&this.supportChannelCountConstraint()&&(i.channelCount={ideal:y.defaultChannelCount}),"audio"===e&&(i=Object.assign({echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0},i)),"audio"===e?{audio:i}:{video:i})}deviceInfoFromDeviceId(e,t){if(null===this.deviceInfoCache)return null;for(const i of this.deviceInfoCache)if(i.kind===e&&i.deviceId===t)return i;return null}acquireInputStream(e){return n(this,void 0,void 0,(function*(){if("audio"===e&&this.useWebAudio)return this.getMediaStreamDestinationNode().stream;if("video"===e&&this.chosenVideoInputIsTransformDevice())return this.chosenVideoTransformDevice.outputMediaStream;let t=null;if(this.activeDevices[e]){this.logger.info(`checking whether existing ${e} device can be reused`);const i=this.activeDevices[e];t=i.constraints?i.constraints[e]:null}else{if("audio"!==e)throw this.logger.error(`no ${e} device chosen, stopping local video tile`),this.boundAudioVideoController.videoTileController.stopLocalVideoTile(),new Error(`no ${e} device chosen, stopping local video tile`);this.logger.info(`no ${e} device chosen, creating empty ${e} device`)}try{yield this.chooseInputIntrinsicDevice(e,t,!0)}catch(t){if(this.logger.error(`unable to acquire ${e} device`),t instanceof g.default)throw t;throw new h.default(t,`unable to acquire ${e} device`)}return this.activeDevices[e].stream}))}hasAppliedTransform(){return!!this.transform}isMediaStreamReusableByDeviceId(e,t){if(!e||!e.active||!t)return!1;if(t.id)return e.id===t.id;const i=this.getMediaTrackSettings(e);if(!i.deviceId)return!1;const n=y.getIntrinsicDeviceId(t);return"string"==typeof n&&i.deviceId===n}getMediaTrackSettings(e){var t;return null===(t=e.getTracks()[0])||void 0===t?void 0:t.getSettings()}reconnectAudioInputs(){if(!this.audioInputSourceNode)return;this.audioInputSourceNode.disconnect();const e=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(e)}setTransform(e,t){var i,n;null===(n=null===(i=this.transform)||void 0===i?void 0:i.nodes)||void 0===n||n.end.disconnect(),this.transform={nodes:t,device:e};const r=null==t?void 0:t.end,o=this.getMediaStreamDestinationNode();this.logger.debug(`Connecting transform node ${r} to destination ${o}.`),null==r||r.connect(o),this.reconnectAudioInputs()}removeTransform(){var e;const t=this.transform;if(t)return null===(e=this.transform.nodes)||void 0===e||e.end.disconnect(),this.transform=void 0,this.reconnectAudioInputs(),t}attachAudioInputStreamToAudioContext(e){var t;null===(t=this.audioInputSourceNode)||void 0===t||t.disconnect(),this.audioInputSourceNode=y.getAudioContext().createMediaStreamSource(e);const i=this.getMediaStreamOutputNode();this.audioInputSourceNode.connect(i)}getMediaStreamDestinationNode(){return this.audioInputDestinationNode||(this.audioInputDestinationNode=y.getAudioContext().createMediaStreamDestination()),this.audioInputDestinationNode}getMediaStreamOutputNode(){var e,t;return(null===(t=null===(e=this.transform)||void 0===e?void 0:e.nodes)||void 0===t?void 0:t.start)||this.getMediaStreamDestinationNode()}static getAudioContext(){if(!y.audioContext){const e={};navigator.mediaDevices.getSupportedConstraints().sampleRate&&(e.sampleRate=y.defaultSampleRate),y.audioContext=new(window.AudioContext||window.webkitAudioContext)(e)}return y.audioContext}static closeAudioContext(){if(y.audioContext)try{y.audioContext.close()}catch(e){}y.audioContext=null}supportSampleRateConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleRate}supportSampleSizeConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().sampleSize}supportChannelCountConstraint(){return this.useWebAudio&&!!navigator.mediaDevices.getSupportedConstraints().channelCount}trace(e,t,i){let n=`API/DefaultDeviceController/${e}`;void 0!==t&&(n+=` ${JSON.stringify(t)}`),void 0!==i&&(n+=` -> ${JSON.stringify(i)}`),this.logger.info(n)}}t.default=y,y.permissionDeniedOriginDetectionThresholdMs=500,y.defaultVideoWidth=960,y.defaultVideoHeight=540,y.defaultVideoFrameRate=15,y.defaultVideoMaxBandwidthKbps=1400,y.defaultSampleRate=48e3,y.defaultSampleSize=16,y.defaultChannelCount=1,y.audioContext=null},8128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.groupId=""}matchesConstraints(e){return JSON.stringify(this.constraints)===JSON.stringify(e)}}},5348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i extends Error{constructor(e,t){super(t||"Error fetching device."),this.cause=e}}t.default=i},6154:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DestroyableNoOpDeviceController=void 0;const r=i(4015);class o extends r.default{constructor(e){super()}listAudioInputDevices(){return Promise.resolve([])}listVideoInputDevices(){return Promise.resolve([])}listAudioOutputDevices(){return Promise.resolve([])}chooseAudioInputDevice(e){return Promise.reject()}chooseVideoInputDevice(e){return Promise.reject()}chooseAudioOutputDevice(e){return Promise.reject()}addDeviceChangeObserver(e){}removeDeviceChangeObserver(e){}createAnalyserNodeForAudioInput(){return null}startVideoPreviewForVideoInput(e){}stopVideoPreviewForVideoInput(e){}setDeviceLabelTrigger(e){}mixIntoAudioInput(e){return null}chooseVideoInputQuality(e,t,i,n){}getVideoInputQualitySettings(){return null}}t.default=o,t.DestroyableNoOpDeviceController=class extends o{constructor(){super(...arguments),this.destroyed=!1}destroy(){return n(this,void 0,void 0,(function*(){this.destroyed=!0}))}}},1238:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(5348);class r extends n.default{constructor(e){super(e)}}t.default=r},3110:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(5348);class r extends n.default{constructor(e){super(e)}}t.default=r},4842:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(5348);class r extends n.default{constructor(e,t){super(e),this.constraint=t}}t.default=r},6991:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(5348);class r extends n.default{constructor(e,t){super(e,t)}}t.default=r},7786:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.inner=e}mute(e){return i(this,void 0,void 0,(function*(){}))}stop(){var e;return i(this,void 0,void 0,(function*(){null===(e=this.node)||void 0===e||e.disconnect()}))}intrinsicDevice(){return i(this,void 0,void 0,(function*(){return this.inner}))}createAudioNode(e){var t;return i(this,void 0,void 0,(function*(){return null===(t=this.node)||void 0===t||t.disconnect(),this.node=yield this.createSingleAudioNode(e),{start:this.node,end:this.node}}))}}},6950:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(5348);class r extends n.default{constructor(e){super(e)}}t.default=r},4500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,n){this.videoWidth=e,this.videoHeight=t,this.videoFrameRate=i,this.videoMaxBandwidthKbps=n}}},7170:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoTransformDevice=void 0,t.isVideoTransformDevice=function(e){return!!e&&"object"==typeof e&&"transformStream"in e&&"stop"in e&&"intrinsicDevice"in e}},8236:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){if(this.devicePixelRatioSource=e,this.observerQueue=new Set,this.mediaQueryListener=()=>{this.observerQueue.forEach((e=>{e.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}))},"undefined"==typeof window)return;const i=matchMedia(`(resolution: ${this.devicePixelRatioSource.devicePixelRatio()}dppx)`);"function"==typeof i.addEventListener?(i.addEventListener("change",this.mediaQueryListener),this.mediaQueryList=i):"function"==typeof i.addListener?(i.addListener(this.mediaQueryListener),this.mediaQueryList=i):t.warn("ignoring DefaultDevicePixelRatioMonitor")}destroy(){return i(this,void 0,void 0,(function*(){this.mediaQueryList&&("function"==typeof this.mediaQueryList.addEventListener?this.mediaQueryList.removeEventListener("change",this.mediaQueryListener):this.mediaQueryList.removeListener(this.mediaQueryListener)),delete this.mediaQueryListener,this.observerQueue.clear()}))}registerObserver(e){this.observerQueue.add(e),e.devicePixelRatioChanged(this.devicePixelRatioSource.devicePixelRatio())}removeObserver(e){this.observerQueue.delete(e)}}},9190:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{devicePixelRatio(){return"undefined"!=typeof window&&window&&window.devicePixelRatio?window.devicePixelRatio:1}}},3831:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(2238),o=i(4046);class s{constructor(e){var t,i,n,o,a,l,c;this.audioVideoController=e,this.meetingHistoryStates=[];try{this.parserResult=navigator&&navigator.userAgent?new r.UAParser(navigator.userAgent).getResult():null}catch(t){e.logger.error(t.message)}this.browserMajorVersion=(null===(n=null===(i=null===(t=this.parserResult)||void 0===t?void 0:t.browser)||void 0===i?void 0:i.version)||void 0===n?void 0:n.split(".")[0])||s.UNAVAILABLE,this.browserName=(null===(o=this.parserResult)||void 0===o?void 0:o.browser.name)||s.UNAVAILABLE,this.browserVersion=(null===(a=this.parserResult)||void 0===a?void 0:a.browser.version)||s.UNAVAILABLE,this.deviceName=[(null===(l=this.parserResult)||void 0===l?void 0:l.device.vendor)||"",(null===(c=this.parserResult)||void 0===c?void 0:c.device.model)||""].join(" ").trim()||s.UNAVAILABLE}publishEvent(e,t){return n(this,void 0,void 0,(function*(){const i=Date.now();yield this.pushMeetingState(e,i);const n=Object.freeze(Object.assign(this.getAttributes(i),t));this.audioVideoController.forEachObserver((t=>{t.eventDidReceive&&t.eventDidReceive(e,n)}))}))}pushMeetingState(e,t=Date.now()){return n(this,void 0,void 0,(function*(){this.meetingHistoryStates.push({name:e,timestampMs:t})}))}getAttributes(e){var t,i;return{attendeeId:this.audioVideoController.configuration.credentials.attendeeId,browserMajorVersion:this.browserMajorVersion,browserName:this.browserName,browserVersion:this.browserVersion,deviceName:this.deviceName,externalMeetingId:"string"==typeof this.audioVideoController.configuration.externalMeetingId?this.audioVideoController.configuration.externalMeetingId:"",externalUserId:this.audioVideoController.configuration.credentials.externalUserId,meetingHistory:this.meetingHistoryStates,meetingId:this.audioVideoController.configuration.meetingId,osName:(null===(t=this.parserResult)||void 0===t?void 0:t.os.name)||s.UNAVAILABLE,osVersion:(null===(i=this.parserResult)||void 0===i?void 0:i.os.version)||s.UNAVAILABLE,sdkVersion:o.default.sdkVersion,sdkName:o.default.sdkName,timestampMs:e}}}t.default=s,s.UNAVAILABLE="Unavailable"},3204:(e,t,i)=>{"use strict";t.hUf=t.ykv=t.NEK=t.SvZ=t.kwN=void 0,t.GVf=t.FEK=t.NHh=t.wSh=t.ini=t.QcA=void 0,t._4L=t.dh0=void 0,i(5185).default,i(7797).default,i(8358).default,i(7602).default,i(9880).default,i(3765).default,i(1876).default,i(3940).default,i(1789).default,i(9394).default,i(9807).default,i(2084).default,i(8892).default,i(9333).default,i(1087).default,i(2606).default,i(7415).default,i(4299).default,i(6818).default,i(1737).default,i(3216).default,i(7408).default,i(6196).default,i(9496).default,i(2770).default,i(6688).default,i(3731).default;const n=i(8030);t.kwN=n.default,i(8890).default,i(8370).default,i(5054).default,i(1129).default,i(1018).default,i(8320).default;const r=i(2363);t.SvZ=r.default,i(6802).default,i(9059).default,i(8538).default,i(543).default,i(6893).default,i(8023).default;const o=i(4142);t.NEK=o.default,i(8236).default,i(3831).default,i(6354).default,i(3980).default;const s=i(4202);t.ykv=s.default,i(8947).default;const a=i(214);t.hUf=a.default,i(7500).default,i(983).default,i(9141).default,i(7293).default,i(9678).default,i(334).default,i(1208).default,i(4450).default,i(9636).default,i(365).default,i(1133).default,i(8919).default,i(1508).default,i(1318).default,i(3327).default,i(2958).default,i(4922).default,i(7673).default,i(9751).default,i(7631).default,i(9190).default,i(8128).default,i(6240).default;const l=i(8434);t.QcA=l.default,i(5640).default,i(7300).default,i(5348).default,i(2306).default,i(3922).default,i(1960).default,i(6180).default,i(2748).default,i(293).default;const c=i(813);t.ini=c.default;const u=i(7086);t.wSh=u.default,i(4236).default,i(3990).default;const d=i(589);t.NHh=d.default,i(8015).default,i(7604).default,i(1296).default;const h=i(6326);t.FEK=h.default,i(3789).default;const f=i(5687);t.GVf=f.default,i(7215).default,i(6057).default,i(5723).default,i(9358).default,i(4323).default,i(1981).default,i(9938).default,i(4442).default,i(9836).default,i(209).default,i(6154).default,i(7434).default,i(4015).default,i(8831).default,i(3663).default,i(2801).default,i(5319).default,i(657).default,i(8021).default,i(1238).default,i(3110).default,i(1124).default,i(4543).default,i(4842).default,i(8556).default,i(6991).default,i(5910).default,i(9825).default,i(9576).default,i(1209).default,i(5547).default,i(120).default,i(9560).default,i(9708).default,i(8797).default,i(4191).default,i(4076).default,i(9485).default,i(7079).default,i(3860).default,i(6850).default,i(9553).default,i(3013).default,i(4833).default,i(5275).default,i(8581).default,i(3920).default,i(2902).default,i(9416).default,i(2168).default,i(6729).default,i(7606).default,i(5785).default,i(4242).default,i(7786).default,i(9532).default,i(2811).default,i(5924).default,i(2721).default,i(4456).default;const p=i(4929);t.dh0=p.default,i(250).default,i(6950).default,i(1922).default;const m=i(4046);t._4L=m.default,i(2880).default,i(155).default,i(9354).default,i(1754).default,i(1819).default,i(4992).default,i(4500).default,i(60).default,i(6876).default,i(7804).default,i(2497).default,i(8878).default,i(6171).default,i(7387).default;i(1819),i(1746),i(146),i(7170)},8030:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(813);t.default=class{constructor(e,t=n.default.WARN){this.name=e,this.level=t}info(e){this.log(n.default.INFO,e)}warn(e){this.log(n.default.WARN,e)}error(e){this.log(n.default.ERROR,e)}debug(e){n.default.DEBUG<this.level||("string"==typeof e?this.log(n.default.DEBUG,e):e?this.log(n.default.DEBUG,e()):this.log(n.default.DEBUG,""+e))}setLogLevel(e){this.level=e}getLogLevel(){return this.level}log(e,t){if(e<this.level)return;const i=`${(new Date).toISOString()} [${n.default[e]}] ${this.name} - ${t}`;switch(e){case n.default.ERROR:console.error(i);break;case n.default.WARN:console.warn(i);break;case n.default.DEBUG:console.debug(i.replace(/\\r\\n/g,"\n"));break;case n.default.INFO:console.info(i)}}}},293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,n){this.sequenceNumber=e,this.message=t,this.timestampMs=i,this.logLevel=n}}},813:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.OFF=4]="OFF"}(i=t.LogLevel||(t.LogLevel={})),t.default=i},6326:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(813),o=i(3922),s=i(293);t.default=class{constructor(e,t,i,n,o,s=r.default.WARN,a){this.name=e,this.configuration=t,this.batchSize=i,this.intervalMs=n,this.url=o,this.level=s,this.headers=a,this.logCapture=[],this.sequenceNumber=0,this.lock=!1,this.startLogPublishScheduler(this.batchSize),this.eventListener=()=>{this.stop()},this.addEventListener()}addEventListener(){this.eventListener&&"window"in i.g&&window.addEventListener&&window.addEventListener("unload",this.eventListener)}removeEventListener(){this.eventListener&&"window"in i.g&&window.removeEventListener&&window.removeEventListener("unload",this.eventListener)}debug(e){r.default.DEBUG<this.level||("string"==typeof e?this.log(r.default.DEBUG,e):e?this.log(r.default.DEBUG,e()):this.log(r.default.DEBUG,""+e))}info(e){this.log(r.default.INFO,e)}warn(e){this.log(r.default.WARN,e)}error(e){this.log(r.default.ERROR,e)}setLogLevel(e){this.level=e}getLogLevel(){return this.level}getLogCaptureSize(){return this.logCapture.length}startLogPublishScheduler(e){var t;this.addEventListener(),null===(t=this.intervalScheduler)||void 0===t||t.stop(),this.intervalScheduler=new o.default(this.intervalMs),this.intervalScheduler.start((()=>n(this,void 0,void 0,(function*(){if(!0===this.lock||0===this.getLogCaptureSize())return;this.lock=!0;const t=this.logCapture.slice(0,e),i=this.makeRequestBody(t);try{200===(yield fetch(this.url,Object.assign({method:"POST",body:i},this.headers?{headers:this.headers}:{}))).status&&(this.logCapture=this.logCapture.slice(t.length))}catch(e){console.warn("[MeetingSessionPOSTLogger] "+e.message)}finally{this.lock=!1}}))))}stop(){var e;null===(e=this.intervalScheduler)||void 0===e||e.stop(),this.intervalScheduler=void 0,this.removeEventListener();const t=this.makeRequestBody(this.logCapture);navigator.sendBeacon(this.url,t)}destroy(){var e;return n(this,void 0,void 0,(function*(){null===(e=this.intervalScheduler)||void 0===e||e.stop(),this.intervalScheduler=void 0,this.removeEventListener(),this.configuration=void 0,this.logCapture=[]}))}makeRequestBody(e){return JSON.stringify({meetingId:this.configuration.meetingId,attendeeId:this.configuration.credentials.attendeeId,appName:this.name,logs:e})}log(e,t){if(e<this.level)return;const i=Date.now();this.logCapture.push(new s.default(this.sequenceNumber,t,i,r.default[e])),this.sequenceNumber+=1}}},9938:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(813);t.default=class{constructor(...e){this._loggers=e}info(e){for(const t of this._loggers)t.info(e)}warn(e){for(const t of this._loggers)t.warn(e)}error(e){for(const t of this._loggers)t.error(e)}debug(e){let t,i;i="string"==typeof e?e:e?()=>(t||(t=e()),t):""+e;for(const e of this._loggers)e.debug(i)}setLogLevel(e){for(const t of this._loggers)t.setLogLevel(e)}getLogLevel(){for(const e of this._loggers)return e.getLogLevel();return n.default.OFF}}},209:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(813),r=i(7434);class o extends r.default{constructor(){super(n.default.DEBUG)}}t.default=o},7434:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(813);t.default=class{constructor(e=n.default.OFF){this.level=e}info(e){}warn(e){}error(e){}debug(e){n.default.DEBUG<this.level||"string"!=typeof e&&e()}setLogLevel(e){this.level=e}getLogLevel(){return this.level}}},7086:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8021),r=i(9532);t.default=class{static of(e){return null==e?n.default.of():r.default.of(e)}}},8021:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(7086);class r{constructor(){this.isSome=!1,this.isNone=!0}get(){throw new Error("value is null")}getOrElse(e){return e}map(e){return new r}flatMap(e){return new r}defaulting(e){return n.default.of(this.getOrElse(e))}static of(){return new r}}t.default=r},9532:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(7086);class r{constructor(e){this.value=e,this.isSome=!0,this.isNone=!1}map(e){return n.default.of(e(this.value))}flatMap(e){return e(this.value)}get(){return this.value}getOrElse(e){return this.value}defaulting(e){return n.default.of(this.getOrElse(e))}static of(e){if(null==e)throw new Error("value is ${value}");return new r(e)}}t.default=r},6354:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(4236);t.default=class{constructor(){this.isMediaDevicesSupported="undefined"!=typeof navigator&&!!navigator.mediaDevices}create(){if(this.isMediaDevicesSupported)return new Proxy(navigator.mediaDevices,new n.default);throw new Error("navigator.mediaDevices is not supported")}}},4236:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(7797),o=i(3922);class s{constructor(){this.scheduler=null,this.devices=null,this.deviceChangeListeners=new Set,this.get=(e,t,i)=>{if(!Reflect.has(e,t))return;if(!("ondevicechange"in navigator.mediaDevices)){if("addEventListener"===t)return this.patchAddEventListener(e,t,i);if("removeEventListener"===t)return this.patchRemoveEventListener(e,t,i)}const n=Reflect.get(e,t,i);return"function"==typeof n?n.bind(e):n},this.patchAddEventListener=(e,t,i)=>{const n=Reflect.get(e,t,i);return(t,i,r)=>{if("devicechange"!==t)return Reflect.apply(n,e,[t,i,r]);this.deviceChangeListeners.add(i),this.scheduler||(this.scheduler=new o.default(s.INTERVAL_MS),this.scheduler.start(this.pollDeviceLists))}},this.patchRemoveEventListener=(e,t,i)=>{const n=Reflect.get(e,t,i);return(t,i,r)=>{if("devicechange"!==t)return Reflect.apply(n,e,[t,i,r]);this.deviceChangeListeners.delete(i),0===this.deviceChangeListeners.size&&this.scheduler&&(this.scheduler.stop(),this.scheduler=null)}},this.pollDeviceLists=()=>n(this,void 0,void 0,(function*(){const e=yield this.sortedDeviceList();this.devices&&(e.length!==this.devices.length||e.some(((e,t)=>e.deviceId!==this.devices[t].deviceId)))&&this.handleDeviceChangeEvent(),this.devices=e}))}sortedDeviceList(){return n(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).sort(((e,t)=>e.deviceId<t.deviceId?1:e.deviceId>t.deviceId?-1:0))}))}handleDeviceChangeEvent(){for(const e of this.deviceChangeListeners)r.default.nextTick((()=>{if(this.deviceChangeListeners.has(e)){const t=new Event("devicechange");"function"==typeof e?e(t):e.handleEvent(t)}}))}}t.default=s,s.INTERVAL_MS=1e3},4015:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{acquireAudioInputStream(){return Promise.reject()}acquireVideoInputStream(){return Promise.reject()}acquireDisplayInputStream(e){return Promise.reject()}releaseMediaStream(e){}bindToAudioVideoController(e){}}},2084:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAudioConnectivityFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.AudioInputRequestFailed=1]="AudioInputRequestFailed",e[e.AudioInputPermissionDenied=2]="AudioInputPermissionDenied",e[e.ConnectionFailed=3]="ConnectionFailed",e[e.AudioNotReceived=4]="AudioNotReceived"}(i=t.CheckAudioConnectivityFeedback||(t.CheckAudioConnectivityFeedback={})),t.default=i},8892:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAudioInputFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.PermissionDenied=2]="PermissionDenied"}(i=t.CheckAudioInputFeedback||(t.CheckAudioInputFeedback={})),t.default=i},9333:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckAudioOutputFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed"}(i=t.CheckAudioOutputFeedback||(t.CheckAudioOutputFeedback={})),t.default=i},1087:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckCameraResolutionFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.ResolutionNotSupported=2]="ResolutionNotSupported",e[e.PermissionDenied=3]="PermissionDenied"}(i=t.CheckCameraResolutionFeedback||(t.CheckCameraResolutionFeedback={})),t.default=i},2606:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckContentShareConnectivityFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.PermissionDenied=2]="PermissionDenied",e[e.TimedOut=3]="TimedOut",e[e.ConnectionFailed=4]="ConnectionFailed"}(i=t.CheckContentShareConnectivityFeedback||(t.CheckContentShareConnectivityFeedback={})),t.default=i},7415:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckNetworkTCPConnectivityFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",e[e.ConnectionFailed=2]="ConnectionFailed",e[e.ICENegotiationFailed=3]="ICENegotiationFailed"}(i=t.CheckNetworkTCPConnectivityFeedback||(t.CheckNetworkTCPConnectivityFeedback={})),t.default=i},4299:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckNetworkUDPConnectivityFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.MeetingSessionURLsNotInitialized=1]="MeetingSessionURLsNotInitialized",e[e.ConnectionFailed=2]="ConnectionFailed",e[e.ICENegotiationFailed=3]="ICENegotiationFailed"}(i=t.CheckNetworkUDPConnectivityFeedback||(t.CheckNetworkUDPConnectivityFeedback={})),t.default=i},6818:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckVideoConnectivityFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.VideoInputRequestFailed=1]="VideoInputRequestFailed",e[e.VideoInputPermissionDenied=2]="VideoInputPermissionDenied",e[e.ConnectionFailed=3]="ConnectionFailed",e[e.VideoNotSent=4]="VideoNotSent"}(i=t.CheckVideoConnectivityFeedback||(t.CheckVideoConnectivityFeedback={})),t.default=i},1737:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CheckVideoInputFeedback=void 0,function(e){e[e.Succeeded=0]="Succeeded",e[e.Failed=1]="Failed",e[e.PermissionDenied=2]="PermissionDenied"}(i=t.CheckVideoInputFeedback||(t.CheckVideoInputFeedback={})),t.default=i},3980:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(6802),o=i(543),s=i(4142),a=i(6991),l=i(1789),c=i(250),u=i(2084),d=i(8892),h=i(9333),f=i(1087),p=i(2606),m=i(7415),g=i(4299),v=i(6818),b=i(1737),S=i(3990);class y{constructor(e,t,i=new S.default){this.logger=e,this.meetingSession=t,this.configuration=i,this.browserBehavior=new o.default}static delay(e){return n(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}checkAudioInput(e){return n(this,void 0,void 0,(function*(){try{return yield this.meetingSession.audioVideo.chooseAudioInputDevice(e),yield this.meetingSession.audioVideo.chooseAudioInputDevice(null),d.default.Succeeded}catch(e){return this.logger.error(`MeetingReadinessChecker: Audio input check failed with error ${e}`),e instanceof a.default?d.default.PermissionDenied:d.default.Failed}}))}checkAudioOutput(e,t,i=null){return n(this,void 0,void 0,(function*(){try{const n=e?s.default.getIntrinsicDeviceId(e):"";return yield this.playTone(n,440,i),(yield t())?h.default.Succeeded:h.default.Failed}catch(e){return this.logger.error(`MeetingReadinessChecker: Audio output check failed with error: ${e}`),h.default.Failed}finally{this.stopTone()}}))}playTone(e,t,i){return n(this,void 0,void 0,(function*(){this.oscillatorNode&&this.stopTone(),this.audioContext=s.default.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=0,this.oscillatorNode=this.audioContext.createOscillator(),this.oscillatorNode.frequency.value=t,this.oscillatorNode.connect(this.gainNode),this.destinationStream=this.audioContext.createMediaStreamDestination(),this.gainNode.connect(this.destinationStream);const n=this.audioContext.currentTime+.1;this.gainNode.gain.linearRampToValueAtTime(0,n),this.gainNode.gain.linearRampToValueAtTime(.1,n+.1),this.oscillatorNode.start();const o=new r.default(this.logger);try{this.browserBehavior.supportsSetSinkId()&&(yield o.bindAudioDevice({deviceId:e}))}catch(e){this.logger.error(`Failed to bind audio device: ${e}`)}try{yield o.bindAudioElement(i||new Audio)}catch(e){this.logger.error(`Failed to bind audio element: ${e}`)}yield o.bindAudioStream(this.destinationStream.stream)}))}stopTone(){if(!(this.audioContext&&this.gainNode&&this.oscillatorNode&&this.destinationStream))return;const e=this.audioContext.currentTime;this.gainNode.gain.linearRampToValueAtTime(.1,e+.1+1),this.gainNode.gain.linearRampToValueAtTime(0,e+.2+1),this.oscillatorNode.stop(),this.oscillatorNode.disconnect(this.gainNode),this.gainNode.disconnect(this.destinationStream),this.oscillatorNode=null,this.gainNode=null,this.destinationStream=null}checkVideoInput(e){return n(this,void 0,void 0,(function*(){try{return yield this.meetingSession.audioVideo.chooseVideoInputDevice(e),yield this.meetingSession.audioVideo.chooseVideoInputDevice(null),b.default.Succeeded}catch(e){return this.logger.error(`MeetingReadinessChecker: Video check failed with error ${e}`),e instanceof a.default?b.default.PermissionDenied:b.default.Failed}}))}checkCameraResolution(e,t,i){return n(this,void 0,void 0,(function*(){let n;try{const r=s.default.getIntrinsicDeviceId(e),o={video:this.calculateVideoConstraint(r,t,i)};n=yield navigator.mediaDevices.getUserMedia(o)}catch(e){return this.logger.error(`MeetingReadinessChecker: Camera resolution check with width: ${t} height ${i} failed with error ${e}`),e&&"OverconstrainedError"===e.name?f.default.ResolutionNotSupported:e&&"NotAllowedError"===e.name?f.default.PermissionDenied:f.default.Failed}finally{n&&n.getTracks().forEach((function(e){e.stop()}))}return f.default.Succeeded}))}calculateVideoConstraint(e,t,i){const n=this.browserBehavior.requiresResolutionAlignment(t,i),r={};return this.browserBehavior.requiresNoExactMediaStreamConstraints()?(r.deviceId=e,r.width=t,r.height=i):(r.deviceId={exact:e},r.width={exact:n[0]},r.height={exact:n[1]}),r}checkContentShareConnectivity(e){return n(this,void 0,void 0,(function*(){let t=!1,i=!1;const r={contentShareDidStart:()=>{t=!0}},o={audioVideoDidStart:()=>{i=!0}};try{return this.meetingSession.audioVideo.addObserver(o),this.meetingSession.audioVideo.start(),this.meetingSession.audioVideo.addContentShareObserver(r),yield this.meetingSession.audioVideo.startContentShareFromScreenCapture(e),yield this.executeTimeoutTask((()=>n(this,void 0,void 0,(function*(){return i&&t})))),i?(yield this.stopMeeting(),t?p.default.Succeeded:p.default.TimedOut):p.default.ConnectionFailed}catch(e){return this.logger.error(`MeetingReadinessChecker: Content share check failed with error ${e}`),"NotAllowedError"===e.name?p.default.PermissionDenied:p.default.Failed}finally{this.meetingSession.audioVideo.removeObserver(o),this.meetingSession.audioVideo.stopContentShare(),this.meetingSession.audioVideo.removeContentShareObserver(r)}}))}checkAudioConnectivity(e){return n(this,void 0,void 0,(function*(){let t=!1;const i=this.meetingSession.audioVideo,r=(e,i,n,r)=>{e===this.meetingSession.configuration.credentials.attendeeId&&i&&(t=!0)};try{yield i.chooseAudioInputDevice(e)}catch(e){return this.logger.error(`MeetingReadinessChecker: Failed to get audio input device with error ${e}`),e instanceof a.default?u.default.AudioInputPermissionDenied:u.default.AudioInputRequestFailed}if(i.realtimeSubscribeToAttendeeIdPresence(r),!(yield this.startMeeting())){i.realtimeUnsubscribeToAttendeeIdPresence(r);try{yield this.meetingSession.audioVideo.chooseAudioInputDevice(null)}catch(e){this.logger.error(`MeetingReadinessChecker: Failed to choose null device with error ${e}`)}return u.default.ConnectionFailed}yield this.executeTimeoutTask((()=>n(this,void 0,void 0,(function*(){return t})))),i.realtimeUnsubscribeToAttendeeIdPresence(r),yield this.stopMeeting();try{yield this.meetingSession.audioVideo.chooseAudioInputDevice(null)}catch(e){this.logger.error(`MeetingReadinessChecker: Failed to choose null device with error ${e}`)}return t?u.default.Succeeded:u.default.AudioNotReceived}))}checkVideoConnectivity(e){return n(this,void 0,void 0,(function*(){const t=this.meetingSession.audioVideo;try{yield t.chooseVideoInputDevice(e)}catch(e){return this.logger.error(`MeetingReadinessChecker: Failed to get video input device with error ${e}`),e instanceof a.default?v.default.VideoInputPermissionDenied:v.default.VideoInputRequestFailed}if(!(yield this.startMeeting()))return v.default.ConnectionFailed;let i=0;return t.startLocalVideoTile(),yield this.executeTimeoutTask((()=>n(this,void 0,void 0,(function*(){const e=yield t.getRTCPeerConnectionStats();return e&&e.forEach((e=>{"outbound-rtp"===e.type&&"video"===e.mediaType&&(i=e.packetsSent)})),i>0})))),t.stopLocalVideoTile(),yield this.stopMeeting(),i<=0?v.default.VideoNotSent:v.default.Succeeded}))}checkNetworkUDPConnectivity(){return n(this,void 0,void 0,(function*(){try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(e){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${e}`),g.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=e=>{const t=this.originalURLRewriter(e);return t.includes("transport=tcp")?"":t};const e=this.meetingSession.audioVideo;if(!(yield this.startMeeting()))return this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,g.default.ConnectionFailed;let t=!1;return yield this.executeTimeoutTask((()=>n(this,void 0,void 0,(function*(){const i=yield e.getRTCPeerConnectionStats();return i&&i.forEach((e=>{"candidate-pair"===e.type&&"succeeded"===e.state&&(t=!0)})),t})))),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),t?g.default.Succeeded:g.default.ICENegotiationFailed}))}checkNetworkTCPConnectivity(){return n(this,void 0,void 0,(function*(){try{this.originalURLRewriter=this.meetingSession.configuration.urls.urlRewriter}catch(e){return this.logger.error(`MeetingSessionConfiguration.urls doesn't exist. Error: ${e}`),m.default.MeetingSessionURLsNotInitialized}this.meetingSession.configuration.urls.urlRewriter=e=>{const t=this.originalURLRewriter(e);return t.includes("transport=udp")?"":t};const e=this.meetingSession.audioVideo;if(!(yield this.startMeeting()))return this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,m.default.ConnectionFailed;let t=!1;return yield this.executeTimeoutTask((()=>n(this,void 0,void 0,(function*(){const i=yield e.getRTCPeerConnectionStats();return i&&i.forEach((e=>{"candidate-pair"===e.type&&"succeeded"===e.state&&(t=!0)})),t})))),this.meetingSession.configuration.urls.urlRewriter=this.originalURLRewriter,yield this.stopMeeting(),t?m.default.Succeeded:m.default.ICENegotiationFailed}))}startMeeting(){return n(this,void 0,void 0,(function*(){let e=!1;const t={audioVideoDidStart:()=>{e=!0}};return this.meetingSession.audioVideo.addObserver(t),this.meetingSession.audioVideo.start(),yield this.executeTimeoutTask((()=>n(this,void 0,void 0,(function*(){return e})))),this.meetingSession.audioVideo.removeObserver(t),e}))}stopMeeting(){return n(this,void 0,void 0,(function*(){let e=!1;const t={audioVideoDidStop:t=>{e=!0}};return this.meetingSession.audioVideo.addObserver(t),this.meetingSession.audioVideo.stop(),yield this.executeTimeoutTask((()=>n(this,void 0,void 0,(function*(){return e})))),this.meetingSession.audioVideo.removeObserver(t),e}))}executeTimeoutTask(e){return n(this,void 0,void 0,(function*(){let t=!1;class i extends l.default{constructor(e,t){super(e),this.waitDurationMs=t,this.isCancelled=!1}cancel(){this.isCancelled=!0}run(){return n(this,void 0,void 0,(function*(){for(;!this.isCancelled;){if(yield e()){t=!0;break}yield y.delay(this.waitDurationMs)}}))}}const r=new c.default(this.logger,new i(this.logger,this.configuration.waitDurationMs),this.configuration.timeoutMs);return yield r.run(),t}))}}t.default=y},3990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.timeoutMs=1e4,this.waitDurationMs=3e3}}},4202:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9059),o=i(8538),s=i(8434),a=i(543),l=i(8370),c=i(8023),u=i(146),d=i(9141),h=i(7631);t.default=class{constructor(e,t,i){this._configuration=e,this._logger=t,this.checkBrowserSupportAndFeatureConfiguration(),this._deviceController=i,this.audioVideoController=new r.default(this._configuration,this._logger,new h.default(this._logger),i,new d.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),i.bindToAudioVideoController(this.audioVideoController);const n=new l.default(this._logger);this.contentShareController=new c.default(n,new r.default(c.default.createContentShareMeetingSessionConfigure(this._configuration),this._logger,new h.default(this._logger),n,new d.default(this._configuration.reconnectTimeoutMs,new s.default(this._configuration.reconnectFixedWaitMs,this._configuration.reconnectShortBackOffMs,this._configuration.reconnectLongBackOffMs))),this.audioVideoController),this.audioVideoFacade=new o.default(this.audioVideoController,this.audioVideoController.videoTileController,this.audioVideoController.realtimeController,this.audioVideoController.audioMixController,this._deviceController,this.contentShareController)}get configuration(){return this._configuration}get logger(){return this._logger}get audioVideo(){return this.audioVideoFacade}get contentShare(){return this.contentShareController}get deviceController(){return this._deviceController}destroy(){return n(this,void 0,void 0,(function*(){u.isDestroyable(this.contentShareController)&&(yield this.contentShareController.destroy()),u.isDestroyable(this.audioVideoController)&&(yield this.audioVideoController.destroy()),this._logger=void 0,this._configuration=void 0,this._deviceController=void 0,this.audioVideoFacade=void 0,this.audioVideoController=void 0,this.contentShareController=void 0}))}checkBrowserSupportAndFeatureConfiguration(){const e=new a.default,t=`${e.name()} ${e.majorVersion()} (${e.version()})`;this.logger.info(`browser is ${t}`),e.isSupported()||this.logger.warn(`this browser is not currently supported. Stability may suffer. Supported browsers are: ${e.supportString()}.`),this._configuration.enableUnifiedPlanForChromiumBasedBrowsers&&(e.hasChromiumWebRTC()?this.logger.info("WebRTC unified plan for Chromium-based browsers is enabled"):this.logger.info(`WebRTC unified plan is required for ${e.name()}`)),this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers&&(this._configuration.enableUnifiedPlanForChromiumBasedBrowsers?e.hasChromiumWebRTC()?this.logger.info(`Simulcast is enabled for ${e.name()}`):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast requires WebRTC Unified Plan and is only supported on Chromium-based browsers")):(this._configuration.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.logger.info("Simulcast requires enabling WebRTC Unified Plan for Chromium-based browsers")))}}},589:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3731),r=i(5185),o=i(4442),s=i(8015),a=i(6057);t.default=class{constructor(e,t){this.meetingId=null,this.externalMeetingId=null,this.credentials=null,this.urls=null,this.connectionTimeoutMs=15e3,this.screenSharingTimeoutMs=5e3,this.screenViewingTimeoutMs=5e3,this.attendeePresenceTimeoutMs=0,this.connectionHealthPolicyConfiguration=new n.default,this.reconnectTimeoutMs=12e4,this.reconnectFixedWaitMs=0,this.reconnectShortBackOffMs=1e3,this.reconnectLongBackOffMs=5e3,this.enableUnifiedPlanForChromiumBasedBrowsers=!0,this.enableSimulcastForUnifiedPlanChromiumBasedBrowsers=!1,this.videoDownlinkBandwidthPolicy=null,this.videoUplinkBandwidthPolicy=null,e&&((e=this.toLowerCasePropertyNames(e)).meeting&&(e=e.meeting),this.meetingId=e.meetingid,this.externalMeetingId=e.externalmeetingid,this.urls=new a.default,this.urls.audioHostURL=e.mediaplacement.audiohosturl,this.urls.screenDataURL=e.mediaplacement.screendataurl,this.urls.screenSharingURL=e.mediaplacement.screensharingurl,this.urls.screenViewingURL=e.mediaplacement.screenviewingurl,this.urls.signalingURL=e.mediaplacement.signalingurl,this.urls.turnControlURL=e.mediaplacement.turncontrolurl),t&&((t=this.toLowerCasePropertyNames(t)).attendee&&(t=t.attendee),this.credentials=new s.default,this.credentials.attendeeId=t.attendeeid,this.credentials.externalUserId=t.externaluserid,this.credentials.joinToken=t.jointoken),this.videoDownlinkBandwidthPolicy=new r.default(this.credentials?this.credentials.attendeeId:null),this.videoUplinkBandwidthPolicy=new o.default(this.credentials?this.credentials.attendeeId:null)}toLowerCasePropertyNames(e){return null===e?null:"object"!=typeof e?e:Array.isArray(e)?e.map(this.toLowerCasePropertyNames):Object.keys(e).reduce(((t,i)=>{const n=e[i],r="object"==typeof n?this.toLowerCasePropertyNames(n):n;return t[i.toLowerCase()]=r,t}),{})}}},8015:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.attendeeId=null,this.externalUserId=null,this.joinToken=null}toJSON(){return{attendeeId:this.attendeeId,joinToken:null===this.joinToken?null:"<redacted>"}}}},7604:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingSessionLifecycleEvent=void 0,function(e){e[e.Connecting=0]="Connecting",e[e.Started=1]="Started",e[e.Stopped=2]="Stopped"}(i=t.MeetingSessionLifecycleEvent||(t.MeetingSessionLifecycleEvent={})),t.default=i},1296:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingSessionLifecycleEventCondition=void 0,function(e){e[e.ConnectingNew=0]="ConnectingNew",e[e.ReconnectingExisting=1]="ReconnectingExisting",e[e.StartedNew=2]="StartedNew",e[e.StartedExisting=3]="StartedExisting",e[e.StartedAfterReconnect=4]="StartedAfterReconnect",e[e.StoppedCleanly=5]="StoppedCleanly",e[e.StoppedWithFailure=6]="StoppedWithFailure"}(i=t.MeetingSessionLifecycleEventCondition||(t.MeetingSessionLifecycleEventCondition={})),t.default=i},3789:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(289),r=i(5687);class o{constructor(e){this._statusCode=e}statusCode(){return this._statusCode}isFailure(){switch(this._statusCode){case r.default.AudioAuthenticationRejected:case r.default.AudioCallAtCapacity:case r.default.AudioInternalServerError:case r.default.AudioServiceUnavailable:case r.default.AudioDisconnected:case r.default.VideoCallAtSourceCapacity:case r.default.SignalingBadRequest:case r.default.SignalingInternalServerError:case r.default.SignalingRequestFailed:case r.default.StateMachineTransitionFailed:case r.default.ICEGatheringTimeoutWorkaround:case r.default.ConnectionHealthReconnect:case r.default.RealtimeApiFailed:case r.default.TaskFailed:case r.default.NoAttendeePresent:return!0;default:return!1}}isTerminal(){switch(this._statusCode){case r.default.Left:case r.default.AudioJoinedFromAnotherDevice:case r.default.AudioAuthenticationRejected:case r.default.AudioCallAtCapacity:case r.default.MeetingEnded:case r.default.AudioDisconnected:case r.default.TURNCredentialsForbidden:case r.default.SignalingBadRequest:case r.default.SignalingRequestFailed:case r.default.VideoCallAtSourceCapacity:case r.default.RealtimeApiFailed:case r.default.AudioAttendeeRemoved:return!0;default:return!1}}isAudioConnectionFailure(){switch(this._statusCode){case r.default.AudioAuthenticationRejected:case r.default.AudioInternalServerError:case r.default.AudioServiceUnavailable:case r.default.StateMachineTransitionFailed:case r.default.ICEGatheringTimeoutWorkaround:case r.default.SignalingBadRequest:case r.default.SignalingInternalServerError:case r.default.SignalingRequestFailed:case r.default.RealtimeApiFailed:case r.default.NoAttendeePresent:return!0;default:return!1}}toString(){switch(this._statusCode){case r.default.OK:return"Everything is OK so far.";case r.default.Left:return"The attendee left the meeting.";case r.default.AudioJoinedFromAnotherDevice:return"The attendee joined from another device.";case r.default.AudioDisconnectAudio:return"The audio connection failed.";case r.default.AudioAuthenticationRejected:return"The meeting rejected the attendee.";case r.default.AudioCallAtCapacity:return"The attendee couldn't join because the meeting was at capacity.";case r.default.AudioCallEnded:case r.default.TURNMeetingEnded:case r.default.MeetingEnded:return"The meeting ended.";case r.default.AudioInternalServerError:case r.default.AudioServiceUnavailable:case r.default.AudioDisconnected:return"The audio connection failed.";case r.default.VideoCallSwitchToViewOnly:return"The attendee couldn't start the local video because the maximum video capacity was reached.";case r.default.VideoCallAtSourceCapacity:return"The connection failed due to an internal server error.";case r.default.SignalingBadRequest:case r.default.SignalingInternalServerError:case r.default.SignalingRequestFailed:return"The signaling connection failed.";case r.default.StateMachineTransitionFailed:return"The state transition failed.";case r.default.ICEGatheringTimeoutWorkaround:return"Gathering ICE candidates timed out. In Chrome, this might indicate that the browser is in a bad state after reconnecting to VPN.";case r.default.ConnectionHealthReconnect:return"The meeting was reconnected.";case r.default.RealtimeApiFailed:return"The real-time API failed. This status code might indicate that the callback you passed to the real-time API threw an exception.";case r.default.TaskFailed:return"The connection failed. See the error message for more details.";case r.default.AudioDeviceSwitched:return"The attendee chose another audio device.";case r.default.IncompatibleSDP:return"The connection failed due to incompatible SDP.";case r.default.TURNCredentialsForbidden:return"The meeting ended, or the attendee was removed.";case r.default.NoAttendeePresent:return"The attendee was not present.";case r.default.AudioAttendeeRemoved:return"The meeting ended because attendee removed.";default:{const e=this._statusCode;throw new Error(`Unhandled case: ${e}`)}}}static fromSignalFrame(e){return e.error&&e.error.status?this.fromSignalingStatus(e.error.status):e.type===n.SdkSignalFrame.Type.AUDIO_STATUS?e.audioStatus?this.fromAudioStatus(e.audioStatus.audioStatus):new o(r.default.SignalingRequestFailed):new o(r.default.OK)}static fromAudioStatus(e){switch(e){case 200:return new o(r.default.OK);case 301:return new o(r.default.AudioJoinedFromAnotherDevice);case 302:return new o(r.default.AudioDisconnectAudio);case 403:return new o(r.default.AudioAuthenticationRejected);case 409:return new o(r.default.AudioCallAtCapacity);case 410:return new o(r.default.MeetingEnded);case 411:return new o(r.default.AudioAttendeeRemoved);case 500:return new o(r.default.AudioInternalServerError);case 503:return new o(r.default.AudioServiceUnavailable);default:return 2===Math.floor(e/100)?new o(r.default.OK):new o(r.default.AudioDisconnected)}}static fromSignalingStatus(e){switch(e){case 206:return new o(r.default.VideoCallSwitchToViewOnly);case 509:return new o(r.default.VideoCallAtSourceCapacity);default:switch(Math.floor(e/100)){case 2:return new o(r.default.OK);case 4:return new o(r.default.SignalingBadRequest);case 5:return new o(r.default.SignalingInternalServerError);default:return new o(r.default.SignalingRequestFailed)}}}}t.default=o},5687:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingSessionStatusCode=void 0,function(e){e[e.OK=0]="OK",e[e.Left=1]="Left",e[e.AudioJoinedFromAnotherDevice=2]="AudioJoinedFromAnotherDevice",e[e.AudioDisconnectAudio=3]="AudioDisconnectAudio",e[e.AudioAuthenticationRejected=4]="AudioAuthenticationRejected",e[e.AudioCallAtCapacity=5]="AudioCallAtCapacity",e[e.AudioCallEnded=6]="AudioCallEnded",e[e.TURNMeetingEnded=6]="TURNMeetingEnded",e[e.MeetingEnded=6]="MeetingEnded",e[e.AudioInternalServerError=7]="AudioInternalServerError",e[e.AudioServiceUnavailable=8]="AudioServiceUnavailable",e[e.AudioDisconnected=9]="AudioDisconnected",e[e.VideoCallSwitchToViewOnly=10]="VideoCallSwitchToViewOnly",e[e.VideoCallAtSourceCapacity=11]="VideoCallAtSourceCapacity",e[e.SignalingBadRequest=12]="SignalingBadRequest",e[e.SignalingInternalServerError=13]="SignalingInternalServerError",e[e.SignalingRequestFailed=14]="SignalingRequestFailed",e[e.StateMachineTransitionFailed=15]="StateMachineTransitionFailed",e[e.ICEGatheringTimeoutWorkaround=16]="ICEGatheringTimeoutWorkaround",e[e.ConnectionHealthReconnect=17]="ConnectionHealthReconnect",e[e.RealtimeApiFailed=18]="RealtimeApiFailed",e[e.TaskFailed=19]="TaskFailed",e[e.AudioDeviceSwitched=20]="AudioDeviceSwitched",e[e.IncompatibleSDP=21]="IncompatibleSDP",e[e.TURNCredentialsForbidden=22]="TURNCredentialsForbidden",e[e.NoAttendeePresent=23]="NoAttendeePresent",e[e.AudioAttendeeRemoved=24]="AudioAttendeeRemoved"}(i=t.MeetingSessionStatusCode||(t.MeetingSessionStatusCode={})),t.default=i},7215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.username=null,this.password=null,this.ttl=null,this.uris=null}}},6057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this._audioHostURL=null,this._screenDataURL=null,this._screenSharingURL=null,this._screenViewingURL=null,this._signalingURL=null,this._turnControlURL=null,this.urlRewriter=e=>e}get audioHostURL(){return this.urlRewriter(this._audioHostURL)}set audioHostURL(e){this._audioHostURL=e}get screenDataURL(){return this.urlRewriter(this._screenDataURL)}set screenDataURL(e){this._screenDataURL=e}get screenSharingURL(){return this.urlRewriter(this._screenSharingURL)}set screenSharingURL(e){this._screenSharingURL=e}get screenViewingURL(){return this.urlRewriter(this._screenViewingURL)}set screenViewingURL(e){this._screenViewingURL=e}get signalingURL(){return this.urlRewriter(this._signalingURL)}set signalingURL(e){this._signalingURL=e}get turnControlURL(){return this.urlRewriter(this._turnControlURL)}set turnControlURL(e){this._turnControlURL=e}}},5723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.remoteVideoAvailable=!1,this.canStartLocalVideo=!1}equal(e){return this.remoteVideoAvailable===e.remoteVideoAvailable&&this.canStartLocalVideo===e.canStartLocalVideo}clone(){const e=new i;return e.remoteVideoAvailable=this.remoteVideoAvailable,e.canStartLocalVideo=this.canStartLocalVideo,e}}t.default=i},9358:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i){this.type=e,this.headers=t,this.payload=i}}},8947:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(8434),o=i(9358),s=i(9141),a=i(7797),l=i(334),c=i(7631),u=i(7387);t.default=class{constructor(e,t,i,n,o){this.configuration=e,this.logger=t,this.webSocket=i,this.reconnectController=n,this.sigV4=o,this.observerQueue=new Set,this.webSocket||(this.webSocket=new c.default(this.logger)),this.reconnectController||(this.reconnectController=new s.default(e.reconnectTimeoutMs,new r.default(e.reconnectFixedWaitMs,e.reconnectShortBackoffMs,e.reconnectLongBackoffMs))),this.sigV4||(this.sigV4=new l.default(this.configuration.chimeClient,this.configuration.awsClient))}addObserver(e){this.logger.info("adding messaging observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing messaging observer"),this.observerQueue.delete(e)}start(){this.isClosed()?this.startConnecting(!1):this.logger.info("messaging session already started")}stop(){this.isClosed()?this.logger.info("no existing connection needs closing"):(this.isClosing=!0,this.webSocket.close())}forEachObserver(e){for(const t of this.observerQueue)a.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}setUpEventListeners(){this.webSocket.addEventListener("open",(()=>{this.openEventHandler()})),this.webSocket.addEventListener("message",(e=>{this.receiveMessageHandler(e.data)})),this.webSocket.addEventListener("close",(e=>{this.closeEventHandler(e)})),this.webSocket.addEventListener("error",(()=>{this.logger.error("WebSocket error")}))}startConnecting(e){const t=this.prepareWebSocketUrl();this.logger.info(`opening connection to ${t}`),e||this.reconnectController.reset(),this.reconnectController.hasStartedConnectionAttempt()?this.reconnectController.startedConnectionAttempt(!1):this.reconnectController.startedConnectionAttempt(!0),this.webSocket.create(t,[],!0),this.forEachObserver((t=>{t.messagingSessionDidStartConnecting&&t.messagingSessionDidStartConnecting(e)})),this.setUpEventListeners()}prepareWebSocketUrl(){const e=new Map;return e.set("userArn",[this.configuration.userArn]),e.set("sessionId",[this.configuration.messagingSessionId]),this.sigV4.signURL("GET","wss","chime",this.configuration.endpointUrl,"/connect","",e)}isClosed(){return this.webSocket.readyState()===u.default.None||this.webSocket.readyState()===u.default.Closed}openEventHandler(){this.reconnectController.reset(),this.isFirstMessageReceived=!1}receiveMessageHandler(e){try{const t=JSON.parse(e),i=t.Headers["x-amz-chime-event-type"],n=new o.default(i,t.Headers,t.Payload||null);this.isFirstMessageReceived||(this.forEachObserver((e=>{e.messagingSessionDidStart&&e.messagingSessionDidStart()})),this.isFirstMessageReceived=!0),this.forEachObserver((e=>{e.messagingSessionDidReceiveMessage&&e.messagingSessionDidReceiveMessage(n)}))}catch(e){this.logger.error(`Messaging parsing failed: ${e}`)}}closeEventHandler(e){this.logger.info(`WebSocket close: ${e.code} ${e.reason}`),this.webSocket.destroy(),!this.isClosing&&this.canReconnect(e.code)&&this.reconnectController.retryWithBackoff((()=>n(this,void 0,void 0,(function*(){this.startConnecting(!0)}))),null)||(this.isClosing=!1,this.isFirstMessageReceived&&this.forEachObserver((t=>{t.messagingSessionDidStop&&t.messagingSessionDidStop(e)})))}canReconnect(e){return 1001===e||1006===e||e>=1011&&e<=1014||e>4e3&&4002!==e&&4003!==e&&4401!==e}}},4323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,n,r){this.userArn=e,this.messagingSessionId=t,this.endpointUrl=i,this.chimeClient=n,this.awsClient=r,this.reconnectTimeoutMs=1e4,this.reconnectFixedWaitMs=0,this.reconnectShortBackoffMs=1e3,this.reconnectLongBackoffMs=5e3,this.messagingSessionId||(this.messagingSessionId=this.generateSessionId())}generateSessionId(){const e=new Uint32Array(1);return window.crypto.getRandomValues(e)[0].toString()}}},214:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8890);class r{constructor(e){this._id=e}id(){return this._id}base(){return this._id?this._id.split(r.MODALITY_SEPARATOR)[0]:""}modality(){if(!this._id)return"";const e=this._id.split(r.MODALITY_SEPARATOR);return 2===e.length?e[1]:""}hasModality(e){return""!==e&&this.modality()===e}withModality(e){const t=new r(this.base()+r.MODALITY_SEPARATOR+e);return""===e||""===this.base()||new r(t._id).modality()!==e?new r(this.base()):t}}t.default=r,r.MODALITY_SEPARATOR=n.default.Modality[0],r.MODALITY_CONTENT=n.default.Modality.substr(1)},7500:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(7086),r=i(7797),o=i(3922),s=i(9416),a=i(289);t.default=class{constructor(e,t,i){this.signalingClient=e,this.intervalMs=t,this.logger=i,this.observerQueue=new Set,this.consecutivePongsUnaccountedFor=0,this.intervalScheduler=new o.default(this.intervalMs),this.pingId=0}addObserver(e){this.logger.info("adding a ping-pong observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing a ping-pong observer"),this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)r.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}start(){this.stop(),this.signalingClient.registerObserver(this),this.signalingClient.ready()&&this.startPingInterval()}stop(){this.stopPingInterval(),this.signalingClient.removeObserver(this)}startPingInterval(){this.intervalScheduler.start((()=>{this.ping()})),this.ping()}stopPingInterval(){this.intervalScheduler.stop(),this.pingId=0,this.consecutivePongsUnaccountedFor=0}ping(){this.consecutivePongsUnaccountedFor>0&&(this.logger.warn(`missed pong ${this.consecutivePongsUnaccountedFor} time(s)`),this.forEachObserver((e=>{n.default.of(e.didMissPongs).map((t=>t.bind(e)(this.consecutivePongsUnaccountedFor)))}))),this.consecutivePongsUnaccountedFor+=1,this.pingId=this.pingId+1&4294967295;const e=a.SdkPingPongFrame.create();e.pingId=this.pingId,e.type=a.SdkPingPongType.PING,this.pingTimestampLocalMs=this.signalingClient.pingPong(e),this.logger.debug((()=>`sent ping ${this.pingId}`))}pong(e){const t=a.SdkPingPongFrame.create();t.pingId=e,t.type=a.SdkPingPongType.PONG,this.signalingClient.pingPong(t)}handleSignalingClientEvent(e){switch(e.type){case s.default.WebSocketOpen:this.startPingInterval();break;case s.default.WebSocketFailed:case s.default.WebSocketError:this.logger.warn(`stopped pinging (${s.default[e.type]})`),this.stopPingInterval();break;case s.default.WebSocketClosing:case s.default.WebSocketClosed:this.logger.info(`stopped pinging (${s.default[e.type]})`),this.stopPingInterval();break;case s.default.ReceivedSignalFrame:if(e.message.type!==a.SdkSignalFrame.Type.PING_PONG)break;if(e.message.pingPong.type===a.SdkPingPongType.PONG){const t=e.message.pingPong.pingId;if(t!==this.pingId){this.logger.warn(`unexpected ping id ${t} (expected ${this.pingId})`);break}let i;if(this.consecutivePongsUnaccountedFor=0,"number"!=typeof e.message.timestampMs)break;i=e.message.timestampMs,this.logger.debug((()=>`received pong ${t} with timestamp ${i}`));const r=e.timestampMs-this.pingTimestampLocalMs,o=Math.round(i-r/2),s=this.pingTimestampLocalMs-o;this.logger.info(`local clock skew estimate=${s}ms from ping-pong time=${r}ms`),this.forEachObserver((e=>{n.default.of(e.didReceivePong).map((i=>i.bind(e)(t,s,r)))}))}else this.pong(e.message.pingPong.pingId)}}}},983:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9825),r=i(9576);t.default=class{constructor(){this.state=new n.default}realtimeSetLocalAttendeeId(e,t){this.state.localAttendeeId=e,this.state.localExternalUserId=t}realtimeSetAttendeeIdPresence(e,t,i,n,r){try{t&&(this.state.attendeeIdToExternalUserId[e]=i);for(const o of this.state.attendeeIdChangesCallbacks)o(e,t,i,n,r)}catch(e){this.onError(e)}}realtimeSubscribeToAttendeeIdPresence(e){try{this.state.attendeeIdChangesCallbacks.push(e)}catch(e){this.onError(e)}}realtimeUnsubscribeToAttendeeIdPresence(e){try{const t=this.state.attendeeIdChangesCallbacks.indexOf(e);-1!==t&&this.state.attendeeIdChangesCallbacks.splice(t,1)}catch(e){this.onError(e)}}realtimeSetLocalAudioInput(e){try{if(this.state.audioInput===e)return;this.setAudioInputEnabled(!1),this.state.audioInput=e,this.setAudioInputEnabled(!this.state.muted)}catch(e){this.onError(e)}}realtimeSetCanUnmuteLocalAudio(e){try{if(this.state.canUnmute===e)return;this.state.canUnmute=e;for(const t of this.state.setCanUnmuteLocalAudioCallbacks)t(e)}catch(e){this.onError(e)}}realtimeSubscribeToSetCanUnmuteLocalAudio(e){try{this.state.setCanUnmuteLocalAudioCallbacks.push(e)}catch(e){this.onError(e)}}realtimeUnsubscribeToSetCanUnmuteLocalAudio(e){try{const t=this.state.setCanUnmuteLocalAudioCallbacks.indexOf(e);-1!==t&&this.state.setCanUnmuteLocalAudioCallbacks.splice(t,1)}catch(e){this.onError(e)}}realtimeCanUnmuteLocalAudio(){return this.state.canUnmute}realtimeMuteLocalAudio(){if(!this.state.muted)try{this.setAudioInputEnabled(!1),this.state.muted=!0,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!0)}catch(e){this.onError(e)}}realtimeUnmuteLocalAudio(){if(!this.state.muted)return!0;if(!this.state.canUnmute)return!1;try{this.setAudioInputEnabled(!0),this.state.muted=!1,this.realtimeUpdateVolumeIndicator(this.state.localAttendeeId,null,null,null,this.state.localExternalUserId);for(const e of this.state.muteAndUnmuteLocalAudioCallbacks)e(!1);return!0}catch(e){return this.onError(e),!1}}realtimeSubscribeToMuteAndUnmuteLocalAudio(e){try{this.state.muteAndUnmuteLocalAudioCallbacks.push(e)}catch(e){this.onError(e)}}realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e){try{const t=this.state.muteAndUnmuteLocalAudioCallbacks.indexOf(e);-1!==t&&this.state.muteAndUnmuteLocalAudioCallbacks.splice(t,1)}catch(e){this.onError(e)}}realtimeIsLocalAudioMuted(){return this.state.muted}realtimeSubscribeToVolumeIndicator(e,t){try{this.state.volumeIndicatorCallbacks.hasOwnProperty(e)||(this.state.volumeIndicatorCallbacks[e]=[]),this.state.volumeIndicatorCallbacks[e].push(t),this.sendVolumeIndicatorChange(e,!0,!0,!0,this.state.attendeeIdToExternalUserId[e])}catch(e){this.onError(e)}}realtimeUnsubscribeFromVolumeIndicator(e,t){try{if(t){const i=this.state.volumeIndicatorCallbacks[e].indexOf(t);-1!==i&&this.state.volumeIndicatorCallbacks[e].splice(i,1)}else delete this.state.volumeIndicatorCallbacks[e]}catch(e){this.onError(e)}}realtimeUpdateVolumeIndicator(e,t,i,n,r){try{i=this.applyLocalMuteOverride(e,i);const o=this.getVolumeIndicatorState(e);let s=!1,a=!1,l=!1;null!==i&&o.muted!==i&&(o.muted=i,a=!0,o.muted&&0!==o.volume&&(o.volume=0,s=!0)),o.muted||null===t||(o.volume!==t&&(o.volume=t,s=!0),null===o.muted&&(o.muted=!1,a=!0)),null!==n&&o.signalStrength!==n&&(o.signalStrength=n,l=!0),this.sendVolumeIndicatorChange(e,s,a,l,r)}catch(e){this.onError(e)}}realtimeSubscribeToLocalSignalStrengthChange(e){try{if(this.state.localSignalStrengthChangeCallbacks.push(e),null===this.state.localAttendeeId)return;this.sendLocalSignalStrengthChange(this.state.localAttendeeId,!0)}catch(e){this.onError(e)}}realtimeUnsubscribeToLocalSignalStrengthChange(e){try{const t=this.state.localSignalStrengthChangeCallbacks.indexOf(e);-1!==t&&this.state.localSignalStrengthChangeCallbacks.splice(t,1)}catch(e){this.onError(e)}}realtimeSubscribeToSendDataMessage(e){try{this.state.sendDataMessageCallbacks.push(e)}catch(e){this.onError(e)}}realtimeUnsubscribeFromSendDataMessage(e){try{const t=this.state.sendDataMessageCallbacks.indexOf(e);-1!==t&&this.state.sendDataMessageCallbacks.splice(t,1)}catch(e){this.onError(e)}}realtimeSendDataMessage(e,t,i){try{for(const n of this.state.sendDataMessageCallbacks)n(e,t,i)}catch(e){this.onError(e)}}realtimeSubscribeToReceiveDataMessage(e,t){try{this.state.receiveDataMessageCallbacks.has(e)?this.state.receiveDataMessageCallbacks.get(e).push(t):this.state.receiveDataMessageCallbacks.set(e,[t])}catch(e){this.onError(e)}}realtimeUnsubscribeFromReceiveDataMessage(e){try{this.state.receiveDataMessageCallbacks.delete(e)}catch(e){this.onError(e)}}realtimeReceiveDataMessage(e){try{if(this.state.receiveDataMessageCallbacks.has(e.topic))for(const t of this.state.receiveDataMessageCallbacks.get(e.topic))t(e)}catch(e){this.onError(e)}}realtimeSubscribeToFatalError(e){try{this.state.fatalErrorCallbacks.push(e)}catch(e){this.onError(e)}}realtimeUnsubscribeToFatalError(e){try{const t=this.state.fatalErrorCallbacks.indexOf(e);-1!==t&&this.state.fatalErrorCallbacks.splice(t,1)}catch(e){this.onError(e)}}setAudioInputEnabled(e){if(this.state.audioInput)for(const t of this.state.audioInput.getTracks())t.enabled!==e&&(t.enabled=e)}applyLocalMuteOverride(e,t){const i=this.state.localAttendeeId,n=this.state.muted;return e!==i||null===this.state.audioInput?t:n}sendVolumeIndicatorChange(e,t,i,n,o){if(this.sendLocalSignalStrengthChange(e,n),!this.state.volumeIndicatorCallbacks.hasOwnProperty(e))return;const s=this.getVolumeIndicatorState(e),a=new r.default;if(t&&(a.volume=s.volume),i&&(a.muted=s.muted),n&&(a.signalStrength=s.signalStrength),!this.stateIsEmpty(a))for(const t of this.state.volumeIndicatorCallbacks[e])t(e,a.volume,a.muted,a.signalStrength,o)}sendLocalSignalStrengthChange(e,t){if(!t)return;if(e!==this.state.localAttendeeId)return;const i=this.getVolumeIndicatorState(e).signalStrength;if(null!==i)for(const e of this.state.localSignalStrengthChangeCallbacks)e(i)}getVolumeIndicatorState(e){return this.state.volumeIndicatorState.hasOwnProperty(e)||(this.state.volumeIndicatorState[e]=new r.default),this.state.volumeIndicatorState[e]}stateIsEmpty(e){return null===e.volume&&null===e.muted&&null===e.signalStrength}onError(e){try{for(const t of this.state.fatalErrorCallbacks)t(e)}catch(t){try{console.error(e),console.error(t)}catch(e){}}}}},5910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.attendeeIndex=null,this.attendeesInFrame=null}}},9825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.localAttendeeId=null,this.localExternalUserId=null,this.attendeeIdChangesCallbacks=[],this.canUnmute=!0,this.setCanUnmuteLocalAudioCallbacks=[],this.muted=!1,this.muteAndUnmuteLocalAudioCallbacks=[],this.audioInput=null,this.volumeIndicatorState={},this.attendeeIdToExternalUserId={},this.volumeIndicatorCallbacks={},this.localSignalStrengthChangeCallbacks=[],this.fatalErrorCallbacks=[],this.sendDataMessageCallbacks=[],this.receiveDataMessageCallbacks=new Map}}},9576:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.volume=null,this.muted=null,this.signalStrength=null}}},9141:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(4929);class r{constructor(e,t){this.reconnectTimeoutMs=e,this.backoffPolicy=t,this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this._isFirstConnection=!0,this.backoffTimer=null,this.backoffCancel=null,this.reset()}timeSpentReconnectingMs(){return this.firstConnectionAttempted?Date.now()-this.firstConnectionAttemptTimestampMs:0}hasPastReconnectDeadline(){return Date.now()-this.lastActiveTimestampMs>=this.reconnectTimeoutMs||this.timeSpentReconnectingMs()>=this.reconnectTimeoutMs}reset(){this.cancel(),this.shouldReconnect=!0,this.onlyRestartPeerConnection=!1,this.firstConnectionAttempted=!1,this.firstConnectionAttemptTimestampMs=0,this.lastActiveTimestampMs=1/0,this.backoffPolicy.reset()}startedConnectionAttempt(e){this._isFirstConnection=e,this.firstConnectionAttempted||(this.firstConnectionAttempted=!0,this.firstConnectionAttemptTimestampMs=Date.now())}hasStartedConnectionAttempt(){return this.firstConnectionAttempted}isFirstConnection(){return this._isFirstConnection}disableReconnect(){this.shouldReconnect=!1}enableRestartPeerConnection(){this.onlyRestartPeerConnection=!0}cancel(){this.disableReconnect(),this.backoffTimer&&(this.backoffTimer.stop(),this.backoffCancel&&(this.backoffCancel(),this.backoffCancel=null))}retryWithBackoff(e,t){const i=this.shouldReconnect&&!this.hasPastReconnectDeadline();return i&&(this.backoffCancel=t,this.backoffTimer=new n.default(this.backoffPolicy.nextBackoffAmountMs()),this.backoffTimer.start((()=>{this.backoffCancel=null,e()}))),i}shouldOnlyRestartPeerConnection(){return this.onlyRestartPeerConnection}clone(){return new r(this.reconnectTimeoutMs,this.backoffPolicy)}setLastActiveTimestampMs(e){this.lastActiveTimestampMs=e}}t.default=r},7797:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(4929);class r extends n.default{constructor(){super(0)}static nextTick(e){setTimeout(e,0)}}t.default=r},3922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.intervalMs=e}start(e){this.stop(),this.timer=setInterval(e,this.intervalMs)}stop(){void 0!==this.timer&&(clearInterval(this.timer),this.timer=void 0)}running(){return void 0!==this.timer}}},4929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.timeoutMs=e,this.timer=null}start(e){this.stop(),this.timer=setTimeout((()=>{clearTimeout(this.timer),e()}),this.timeoutMs)}stop(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}}},7293:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(4076);class r{constructor(e){this.sdp=e}clone(){return new r(this.sdp)}static isRTPCandidate(e){const t=/candidate[:](\S+) (\d+)/g.exec(e);return null!==t&&"1"===t[2]}static linesToSDP(e){return new r(e.join(r.CRLF))}static candidateTypeFromString(e){switch(e){case n.default.Host:return n.default.Host;case n.default.ServerReflexive:return n.default.ServerReflexive;case n.default.PeerReflexive:return n.default.PeerReflexive;case n.default.Relay:return n.default.Relay}return null}static candidateType(e){const t=/a[=]candidate[:].* typ ([a-z]+) /g.exec(e);return null===t?null:r.candidateTypeFromString(t[1])}static splitLines(e){return e.trim().split("\n").map((e=>e.trim()))}static splitSections(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+r.CRLF))}static findActiveCameraSection(e){let t=0,i=!1;for(const n of e){if(/^m=video/.test(n)&&n.indexOf("sendrecv")>-1){i=!0;break}t++}return!1===i&&(t=-1),t}static parseSSRCMedia(e){const t=e.indexOf(" ");let i=0,n="",o="";i=r.extractSSRCFromAttributeLine(e);const s=e.indexOf(":",t);return s>-1?(n=e.substr(t+1,s-t-1),o=e.substr(s+1)):n=e.substr(t+1),[i,n,o]}static extractSSRCsFromFIDGroupLine(e){return/^a=ssrc-group:FID\s(.+)/.exec(e)[1]}static extractSSRCFromAttributeLine(e){const t=/^a=ssrc:([0-9]+)\s/.exec(e);return null===t?0:parseInt(t[1],10)}static matchPrefix(e,t){return r.splitLines(e).filter((e=>0===e.indexOf(t)))}lines(){return this.sdp.split(r.CRLF)}hasVideo(){return null!==/^m=video/gm.exec(this.sdp)}hasCandidates(){return null!==/a[=]candidate[:]/g.exec(this.sdp)}hasCandidatesForAllMLines(){return!(this.sdp.indexOf("c=IN IP4 0.0.0.0")>-1)}withBundleAudioVideo(){const e=this.lines(),t=[];for(const i of e){const e=i.replace(/^a=group:BUNDLE audio$/,"a=group:BUNDLE audio video");e===i?t.push(i):t.push(e)}return r.linesToSDP(t)}copyVideo(e){const t=e.split(r.CRLF),i=r.splitLines(this.sdp);let n=!1;for(const e of t)/^m=video/.test(e)?n=!0:/^m=/.test(e)&&(n=!1),n&&i.push(e);return r.linesToSDP(i)}withoutCandidateType(e){return r.linesToSDP(this.lines().filter((t=>r.candidateType(t)!==e)))}withoutServerReflexiveCandidates(){return this.withoutCandidateType(n.default.ServerReflexive)}withBandwidthRestriction(e,t){const i=this.lines(),n=[];for(const r of i)n.push(r),/^m=video/.test(r)&&(t?n.push("b=TIAS:"+1e3*e):n.push(`b=AS:${e}`));return r.linesToSDP(n)}withAudioMaxAverageBitrate(e){if(!e)return this.clone();e=Math.trunc(Math.min(Math.max(e,r.rfc7587LowestBitrate),r.rfc7587HighestBitrate));const t=this.lines(),i=[],n=/^a=rtpmap:\s*(\d+)\s+opus\/48000/;let o=!1,s=null;for(const r of t){if(r.startsWith("m=audio")&&(o=!0,s=null),r.startsWith("m=video")&&(o=!1,s=null),o){const e=n.exec(r);null!==e&&(s=`a=fmtp:${e[1]} `,o=!1)}if(s&&r.startsWith(s)){const t=r.slice(s.length).split(";"),n=[];for(const e of t)e.startsWith("maxaveragebitrate=")||n.push(e);n.push(`maxaveragebitrate=${e}`),i.push(s+n.join(";"))}else i.push(r)}return r.linesToSDP(i)}withUnifiedPlanFormat(){let e=this.sdp;return e.includes("mozilla")?this.clone():(e=e.replace("o=-","o=mozilla-chrome"),new r(e))}preferH264IfExists(){const e=this.sdp,t=r.splitSections(e);if(t.length<2)return new r(this.sdp);const i=[];for(let e=0;e<t.length;e++){if(/^m=video/.test(t[e])){const i=r.splitLines(t[e]);let n=0,o=0;if(i.forEach((e=>{if(/^a=rtpmap:/.test(e)){const t=/^a=rtpmap:([0-9]+)\s/.exec(e);e.toLowerCase().includes("vp8")?n=parseInt(t[1],10):e.toLowerCase().includes("h264")&&(o=parseInt(t[1],10))}})),0!==n&&0!==o){const e=i[0].split(" ");let t=-1,r=-1;for(let i=3;i<e.length;i++){const s=parseInt(e[i],10);s===n?t=i:s===o&&(r=i)}t<r&&(e[t]=o.toString(),e[r]=n.toString()),i[0]=e.join(" ")}t[e]=i.join(r.CRLF)+r.CRLF}i.push(t[e])}const n=i.join("");return new r(n)}withOldFashionedMungingSimulcast(e){if(e<2)return this.clone();const t=this.sdp,i=r.splitSections(t);if(i.length<2)return new r(this.sdp);const n=r.findActiveCameraSection(i);if(-1===n)return new r(this.sdp);let o="",s="";r.matchPrefix(i[n],"a=ssrc:").forEach((e=>{const t=r.parseSSRCMedia(e);"cname"===t[1]?o=t[2]:"msid"===t[1]&&(s=t[2])}));const a=r.matchPrefix(i[n],"a=ssrc-group:FID ");if(""===o||""===s||a.length<1)return new r(this.sdp);const l=r.extractSSRCsFromFIDGroupLine(a[0]),c=i[n].trim().split(r.CRLF).filter((e=>0!==e.indexOf("a=ssrc:")&&0!==e.indexOf("a=ssrc-group:"))),u=[],[d,h]=l.split(" ").map((e=>parseInt(e,10)));let f=d,p=h;for(let t=0;t<e;t++)c.push("a=ssrc:"+f+" cname:"+o),c.push("a=ssrc:"+f+" msid:"+s),c.push("a=ssrc:"+p+" cname:"+o),c.push("a=ssrc:"+p+" msid:"+s),c.push("a=ssrc-group:FID "+f+" "+p),u.push(f),f+=1,p=f+1;c.push("a=ssrc-group:SIM "+u.join(" ")),i[n]=c.join(r.CRLF)+r.CRLF;const m=i.join("");return new r(m)}ssrcForVideoSendingSection(){const e=this.sdp,t=r.splitSections(e);if(t.length<2)return"";const i=r.findActiveCameraSection(t);if(-1===i)return"";const n=r.matchPrefix(t[i],"a=ssrc-group:FID ");if(n.length<1)return"";const o=r.extractSSRCsFromFIDGroupLine(n[0]),[s]=o.split(" ").map((e=>parseInt(e,10)));return s.toString()}videoSendSectionHasDifferentSSRC(e){const t=this.ssrcForVideoSendingSection(),i=e.ssrcForVideoSendingSection();return""!==t&&""!==i&&parseInt(t,10)!==parseInt(i,10)}}t.default=r,r.CRLF="\r\n",r.rfc7587LowestBitrate=6e3,r.rfc7587HighestBitrate=51e4},4076:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SDPCandidateType=void 0,function(e){e.Host="host",e.ServerReflexive="srflx",e.PeerReflexive="prflx",e.Relay="relay"}(i=t.SDPCandidateType||(t.SDPCandidateType={})),t.default=i},9678:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3860),r=i(6850),o=i(9553),s=i(3013);t.default=class{constructor(e){this.logger=e,this.currentState=o.SessionStateControllerState.NotConnected,this.deferredAction=null,this.deferredWork=null}perform(e,t){const i=this.currentState;if(i===o.SessionStateControllerState.NotConnected&&e===n.SessionStateControllerAction.Connect)this.transition(o.SessionStateControllerState.Connecting,e);else if(i===o.SessionStateControllerState.Connecting&&e===n.SessionStateControllerAction.Fail)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(i===o.SessionStateControllerState.Connecting&&e===n.SessionStateControllerAction.FinishConnecting)this.transition(o.SessionStateControllerState.Connected,e);else if(i===o.SessionStateControllerState.Connected&&e===n.SessionStateControllerAction.Disconnect)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(i===o.SessionStateControllerState.Connected&&e===n.SessionStateControllerAction.Reconnect)this.transition(o.SessionStateControllerState.Connecting,e);else if(i===o.SessionStateControllerState.Connected&&e===n.SessionStateControllerAction.Fail)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(i===o.SessionStateControllerState.Connected&&e===n.SessionStateControllerAction.Update)this.transition(o.SessionStateControllerState.Updating,e);else if(i===o.SessionStateControllerState.Updating&&e===n.SessionStateControllerAction.Fail)this.transition(o.SessionStateControllerState.Disconnecting,e);else if(i===o.SessionStateControllerState.Updating&&e===n.SessionStateControllerAction.FinishUpdating)this.transition(o.SessionStateControllerState.Connected,e);else{if(i!==o.SessionStateControllerState.Disconnecting||e!==n.SessionStateControllerAction.FinishDisconnecting)return this.canDefer(e)?(this.logger.info(`deferring transition from ${o.SessionStateControllerState[this.currentState]} with ${n.SessionStateControllerAction[e]}`),this.deferAction(e,t),s.SessionStateControllerTransitionResult.DeferredTransition):(this.logger.warn(`no transition found from ${o.SessionStateControllerState[this.currentState]} with ${n.SessionStateControllerAction[e]}`),s.SessionStateControllerTransitionResult.NoTransitionAvailable);this.transition(o.SessionStateControllerState.NotConnected,e)}try{t()}catch(t){return this.logger.error(`error during state ${o.SessionStateControllerState[this.currentState]} with action ${n.SessionStateControllerAction[e]}: ${t}`),this.logger.info(`rolling back transition to ${o.SessionStateControllerState[i]}`),this.currentState=i,s.SessionStateControllerTransitionResult.TransitionFailed}return this.performDeferredAction(),s.SessionStateControllerTransitionResult.Transitioned}state(){return this.currentState}transition(e,t){this.logger.info(`transitioning from ${o.SessionStateControllerState[this.currentState]} to ${o.SessionStateControllerState[e]} with ${n.SessionStateControllerAction[t]}`),this.currentState=e}deferPriority(e){switch(e){case n.SessionStateControllerAction.Disconnect:return r.SessionStateControllerDeferPriority.VeryHigh;case n.SessionStateControllerAction.Fail:return r.SessionStateControllerDeferPriority.High;case n.SessionStateControllerAction.Reconnect:return r.SessionStateControllerDeferPriority.Medium;case n.SessionStateControllerAction.Update:return r.SessionStateControllerDeferPriority.Low;default:return r.SessionStateControllerDeferPriority.DoNotDefer}}deferAction(e,t){null!==this.deferredAction&&this.deferPriority(this.deferredAction)>this.deferPriority(e)||(this.deferredAction=e,this.deferredWork=t)}canDefer(e){return this.deferPriority(e)!==r.SessionStateControllerDeferPriority.DoNotDefer&&(this.currentState===o.SessionStateControllerState.Connecting||this.currentState===o.SessionStateControllerState.Updating)}performDeferredAction(){if(!this.deferredAction)return;const e=this.deferredAction,t=this.deferredWork;this.deferredAction=null,this.deferredWork=null,this.logger.info(`performing deferred action ${n.SessionStateControllerAction[e]}`),this.perform(e,t)!==s.SessionStateControllerTransitionResult.Transitioned&&this.logger.info(`unable to perform deferred action ${n.SessionStateControllerAction[e]} in state ${o.SessionStateControllerState[this.currentState]}`)}}},3860:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerAction=void 0,function(e){e[e.Connect=0]="Connect",e[e.FinishConnecting=1]="FinishConnecting",e[e.Update=2]="Update",e[e.FinishUpdating=3]="FinishUpdating",e[e.Reconnect=4]="Reconnect",e[e.Disconnect=5]="Disconnect",e[e.Fail=6]="Fail",e[e.FinishDisconnecting=7]="FinishDisconnecting"}(i=t.SessionStateControllerAction||(t.SessionStateControllerAction={})),t.default=i},6850:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerDeferPriority=void 0,function(e){e[e.DoNotDefer=0]="DoNotDefer",e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.High=3]="High",e[e.VeryHigh=4]="VeryHigh"}(i=t.SessionStateControllerDeferPriority||(t.SessionStateControllerDeferPriority={})),t.default=i},9553:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerState=void 0,function(e){e[e.NotConnected=0]="NotConnected",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.Updating=3]="Updating",e[e.Disconnecting=4]="Disconnecting"}(i=t.SessionStateControllerState||(t.SessionStateControllerState={})),t.default=i},3013:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStateControllerTransitionResult=void 0,function(e){e[e.Transitioned=0]="Transitioned",e[e.NoTransitionAvailable=1]="NoTransitionAvailable",e[e.DeferredTransition=2]="DeferredTransition",e[e.TransitionFailed=3]="TransitionFailed"}(i=t.SessionStateControllerTransitionResult||(t.SessionStateControllerTransitionResult={})),t.default=i},1208:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(543),r=i(289),o=i(4046),s=i(7387),a=i(2902),l=i(9416);class c{constructor(e,t){this.webSocket=e,this.logger=t,this.unloadHandler=null,this.observerQueue=new Set,this.connectionRequestQueue=[],this.resetConnection(),this.logger.debug((()=>"signaling client init")),this.audioSessionId=this.generateNewAudioSessionId()}registerObserver(e){this.logger.debug((()=>"registering signaling client observer")),this.observerQueue.add(e)}removeObserver(e){this.logger.debug((()=>"removing signaling client observer")),this.observerQueue.delete(e)}openConnection(e){this.logger.info("adding connection request to queue: "+e.url()),this.connectionRequestQueue.push(e),this.closeConnection()}pingPong(e){this.logger.debug((()=>"sending ping"));const t=r.SdkSignalFrame.create();return t.type=r.SdkSignalFrame.Type.PING_PONG,t.pingPong=e,this.sendMessage(t),t.timestampMs}join(e){this.logger.info("sending join");const t=r.SdkJoinFrame.create();t.protocolVersion=2,t.maxNumOfVideos=e.maxVideos,t.flags=r.SdkJoinFlags.HAS_STREAM_UPDATE;const i=new n.default;i.supportsSenderSideBandwidthEstimation()&&(t.flags|=r.SdkJoinFlags.USE_SEND_SIDE_BWE),t.flags|=e.sendBitrates?r.SdkJoinFlags.SEND_BITRATES:0,t.clientDetails=r.SdkClientDetails.create({platformName:i.name(),platformVersion:i.version(),clientSource:o.default.sdkName,chimeSdkVersion:o.default.sdkVersion}),t.audioSessionId=this.audioSessionId;const s=r.SdkSignalFrame.create();s.type=r.SdkSignalFrame.Type.JOIN,s.join=t,this.sendMessage(s)}subscribe(e){const t=r.SdkSubscribeFrame.create();if(t.sendStreams=[],t.sdpOffer=e.sdpOffer,e.connectionTypeHasVideo&&(t.receiveStreamIds=e.receiveStreamIds),e.audioHost&&(t.audioCheckin=e.audioCheckin,t.audioHost=e.audioHost,t.audioMuted=e.audioMuted,!e.audioCheckin)){const i=r.SdkStreamDescriptor.create();i.mediaType=r.SdkStreamMediaType.AUDIO,i.trackLabel="AmazonChimeExpressAudio",i.attendeeId=e.attendeeId,i.streamId=1,i.groupId=1,i.framerate=15,i.maxBitrateKbps=600,i.avgBitrateBps=4e5,t.sendStreams.push(i)}if(t.duplex=r.SdkStreamServiceType.RX,e.localVideoEnabled){t.duplex=r.SdkStreamServiceType.DUPLEX;for(let i=0;i<e.videoStreamDescriptions.length;i++){const n=e.videoStreamDescriptions[i].clone();n.attendeeId=e.attendeeId,t.sendStreams.push(n.toStreamDescriptor())}}const i=r.SdkSignalFrame.create();i.type=r.SdkSignalFrame.Type.SUBSCRIBE,i.sub=t,this.sendMessage(i)}leave(){const e=r.SdkSignalFrame.create();e.type=r.SdkSignalFrame.Type.LEAVE,e.leave=r.SdkLeaveFrame.create(),this.sendMessage(e),this.logger.debug((()=>"sent leave"))}sendClientMetrics(e){const t=r.SdkSignalFrame.create();t.type=r.SdkSignalFrame.Type.CLIENT_METRIC,t.clientMetric=e,this.sendMessage(t)}sendDataMessage(e){const t=r.SdkSignalFrame.create();t.type=r.SdkSignalFrame.Type.DATA_MESSAGE,t.dataMessage=e,this.sendMessage(t)}closeConnection(){this.webSocket.readyState()!==s.default.None&&this.webSocket.readyState()!==s.default.Closed?(this.isClosing=!0,this.sendEvent(new a.default(this,l.default.WebSocketClosing,null)),this.webSocket.close(),this.deactivatePageUnloadHandler()):(this.logger.info("no existing connection needs closing"),this.serviceConnectionRequestQueue())}ready(){return this.webSocket.readyState()===s.default.Open&&!this.isClosing&&this.wasOpened}mute(e){const t=r.SdkSignalFrame.create();t.type=r.SdkSignalFrame.Type.AUDIO_CONTROL;const i=r.SdkAudioControlFrame.create();i.muted=e,t.audioControl=i,this.sendMessage(t)}pause(e){const t=r.SdkSignalFrame.create();t.type=r.SdkSignalFrame.Type.PAUSE,t.pause=r.SdkPauseResumeFrame.create(),t.pause.streamIds=e,this.sendMessage(t)}resume(e){const t=r.SdkSignalFrame.create();t.type=r.SdkSignalFrame.Type.RESUME,t.pause=r.SdkPauseResumeFrame.create(),t.pause.streamIds=e,this.sendMessage(t)}resetConnection(){this.webSocket.destroy(),this.wasOpened=!1}sendMessage(e){e.timestampMs=Date.now(),this.logger.debug((()=>`sending: ${JSON.stringify(e)}`));const t=this.prependWithFrameTypeRTC(r.SdkSignalFrame.encode(e).finish());if(this.ready()){if(!this.webSocket.send(t))return void this.sendEvent(new a.default(this,l.default.WebSocketSendMessageFailure,null));this.sendEvent(new a.default(this,l.default.WebSocketSentMessage,null))}else this.sendEvent(new a.default(this,l.default.WebSocketSkippedMessage,null))}receiveMessage(e){let t;try{t=r.SdkSignalFrame.decode(e)}catch(t){return this.logger.info(`failed to decode: ${e}`),void this.sendEvent(new a.default(this,l.default.ProtocolDecodeFailure,null))}this.logger.debug((()=>`received: ${JSON.stringify(t)}`)),this.webSocket.readyState()===s.default.Open?this.sendEvent(new a.default(this,l.default.ReceivedSignalFrame,t)):this.logger.info(`skipping notification of message since WebSocket is not open: ${JSON.stringify(t)}`)}stripFrameTypeRTC(e){const t=e[0];return t!==c.FRAME_TYPE_RTC&&2!==t&&this.logger.warn(`expected FrameTypeRTC for message but got ${t}`),e.slice(1)}prependWithFrameTypeRTC(e){const t=new Uint8Array(e.length+1);return t[0]=c.FRAME_TYPE_RTC,t.set(e,1),t}serviceConnectionRequestQueue(){if(0===this.connectionRequestQueue.length)return void this.logger.info("no connection requests to service");const e=this.connectionRequestQueue.shift();this.logger.info(`opening connection to ${e.url()}`),this.isClosing=!1,this.webSocket.create(e.url(),e.protocols()),this.setUpEventListeners(),this.sendEvent(new a.default(this,l.default.WebSocketConnecting,null))}sendEvent(e){switch(e.type){case l.default.WebSocketMessage:case l.default.ReceivedSignalFrame:case l.default.WebSocketSentMessage:this.logger.debug((()=>`notifying event: ${l.default[e.type]}`));break;case l.default.WebSocketSkippedMessage:this.logger.debug((()=>`notifying event: ${l.default[e.type]}, websocket state=${s.default[this.webSocket.readyState()]}`));break;default:this.logger.info(`notifying event: ${l.default[e.type]}`)}for(const t of this.observerQueue)t.handleSignalingClientEvent(e)}setUpEventListeners(){this.webSocket.addEventListener("open",(()=>{this.activatePageUnloadHandler(),this.wasOpened=!0,this.sendEvent(new a.default(this,l.default.WebSocketOpen,null))})),this.webSocket.addEventListener("message",(e=>{this.sendEvent(new a.default(this,l.default.WebSocketMessage,null)),this.receiveMessage(this.stripFrameTypeRTC(new Uint8Array(e.data)))})),this.webSocket.addEventListener("close",(e=>{this.deactivatePageUnloadHandler(),this.resetConnection(),this.sendEvent(new a.default(this,l.default.WebSocketClosed,null,e.code,e.reason)),this.serviceConnectionRequestQueue()})),this.webSocket.addEventListener("error",(()=>{!this.isClosing||this.wasOpened?this.wasOpened?(this.logger.error("received error while connected"),this.sendEvent(new a.default(this,l.default.WebSocketError,null))):(this.logger.error("failed to connect"),this.sendEvent(new a.default(this,l.default.WebSocketFailed,null))):this.logger.info("ignoring error closing signaling while connecting")}))}activatePageUnloadHandler(){this.unloadHandler=()=>{this.leave()};const e=i.g;e.window&&e.window.addEventListener&&window.addEventListener("unload",this.unloadHandler)}deactivatePageUnloadHandler(){const e=i.g;e.window&&e.window.addEventListener&&window.removeEventListener("unload",this.unloadHandler),this.unloadHandler=null}generateNewAudioSessionId(){const e=new Uint32Array(1);return window.crypto.getRandomValues(e)[0]}}t.default=c,c.FRAME_TYPE_RTC=5},3920:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.signalingURL=e,this.joinToken=t}url(){return this.signalingURL+"?X-Chime-Control-Protocol-Version=3&X-Amzn-Chime-Send-Close-On-Error=1"}protocols(){return["_aws_wt_session",this.joinToken]}}},2902:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(9416);t.default=class{constructor(e,t,i,n,r){this.client=e,this.type=t,this.message=i,this.closeCode=n,this.closeReason=r,this.timestampMs=Date.now()}isConnectionTerminated(){switch(this.type){case n.default.WebSocketFailed:case n.default.WebSocketError:case n.default.WebSocketClosing:case n.default.WebSocketClosed:return!0;default:return!1}}}},9416:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SignalingClientEventType=void 0,function(e){e[e.WebSocketConnecting=0]="WebSocketConnecting",e[e.WebSocketOpen=1]="WebSocketOpen",e[e.WebSocketError=2]="WebSocketError",e[e.WebSocketClosing=3]="WebSocketClosing",e[e.WebSocketClosed=4]="WebSocketClosed",e[e.WebSocketFailed=5]="WebSocketFailed",e[e.WebSocketMessage=6]="WebSocketMessage",e[e.WebSocketSendMessageFailure=7]="WebSocketSendMessageFailure",e[e.WebSocketSentMessage=8]="WebSocketSentMessage",e[e.ProtocolDecodeFailure=9]="ProtocolDecodeFailure",e[e.ReceivedSignalFrame=10]="ReceivedSignalFrame",e[e.WebSocketSkippedMessage=11]="WebSocketSkippedMessage"}(i=t.SignalingClientEventType||(t.SignalingClientEventType={})),t.default=i},2168:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.maxVideos=e,this.sendBitrates=t}}},6729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,n,r,o,s,a,l){this.attendeeId=e,this.sdpOffer=t,this.audioHost=i,this.audioMuted=n,this.audioCheckin=r,this.receiveStreamIds=o,this.localVideoEnabled=s,this.videoStreamDescriptions=a,this.connectionTypeHasVideo=l}}},289:(e,t,i)=>{"use strict";var n,r,o=i(2100),s=o.Reader,a=o.Writer,l=o.util,c=o.roots.default||(o.roots.default={});c.SdkSignalFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}var t,i;return e.prototype.timestampMs=l.Long?l.Long.fromBits(0,0,!0):0,e.prototype.type=1,e.prototype.error=null,e.prototype.join=null,e.prototype.joinack=null,e.prototype.sub=null,e.prototype.suback=null,e.prototype.index=null,e.prototype.pause=null,e.prototype.leave=null,e.prototype.leaveAck=null,e.prototype.bitrates=null,e.prototype.audioControl=null,e.prototype.audioMetadata=null,e.prototype.audioStreamIdInfo=null,e.prototype.pingPong=null,e.prototype.audioStatus=null,e.prototype.clientMetric=null,e.prototype.dataMessage=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).uint64(e.timestampMs),t.uint32(16).int32(e.type),null!=e.error&&e.hasOwnProperty("error")&&c.SdkErrorFrame.encode(e.error,t.uint32(26).fork()).ldelim(),null!=e.join&&e.hasOwnProperty("join")&&c.SdkJoinFrame.encode(e.join,t.uint32(34).fork()).ldelim(),null!=e.joinack&&e.hasOwnProperty("joinack")&&c.SdkJoinAckFrame.encode(e.joinack,t.uint32(42).fork()).ldelim(),null!=e.sub&&e.hasOwnProperty("sub")&&c.SdkSubscribeFrame.encode(e.sub,t.uint32(50).fork()).ldelim(),null!=e.suback&&e.hasOwnProperty("suback")&&c.SdkSubscribeAckFrame.encode(e.suback,t.uint32(58).fork()).ldelim(),null!=e.index&&e.hasOwnProperty("index")&&c.SdkIndexFrame.encode(e.index,t.uint32(66).fork()).ldelim(),null!=e.pause&&e.hasOwnProperty("pause")&&c.SdkPauseResumeFrame.encode(e.pause,t.uint32(82).fork()).ldelim(),null!=e.leave&&e.hasOwnProperty("leave")&&c.SdkLeaveFrame.encode(e.leave,t.uint32(90).fork()).ldelim(),null!=e.leaveAck&&e.hasOwnProperty("leaveAck")&&c.SdkLeaveAckFrame.encode(e.leaveAck,t.uint32(98).fork()).ldelim(),null!=e.bitrates&&e.hasOwnProperty("bitrates")&&c.SdkBitrateFrame.encode(e.bitrates,t.uint32(114).fork()).ldelim(),null!=e.audioControl&&e.hasOwnProperty("audioControl")&&c.SdkAudioControlFrame.encode(e.audioControl,t.uint32(138).fork()).ldelim(),null!=e.audioMetadata&&e.hasOwnProperty("audioMetadata")&&c.SdkAudioMetadataFrame.encode(e.audioMetadata,t.uint32(146).fork()).ldelim(),null!=e.audioStreamIdInfo&&e.hasOwnProperty("audioStreamIdInfo")&&c.SdkAudioStreamIdInfoFrame.encode(e.audioStreamIdInfo,t.uint32(154).fork()).ldelim(),null!=e.pingPong&&e.hasOwnProperty("pingPong")&&c.SdkPingPongFrame.encode(e.pingPong,t.uint32(162).fork()).ldelim(),null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&c.SdkAudioStatusFrame.encode(e.audioStatus,t.uint32(170).fork()).ldelim(),null!=e.clientMetric&&e.hasOwnProperty("clientMetric")&&c.SdkClientMetricFrame.encode(e.clientMetric,t.uint32(178).fork()).ldelim(),null!=e.dataMessage&&e.hasOwnProperty("dataMessage")&&c.SdkDataMessageFrame.encode(e.dataMessage,t.uint32(186).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkSignalFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.timestampMs=e.uint64();break;case 2:n.type=e.int32();break;case 3:n.error=c.SdkErrorFrame.decode(e,e.uint32());break;case 4:n.join=c.SdkJoinFrame.decode(e,e.uint32());break;case 5:n.joinack=c.SdkJoinAckFrame.decode(e,e.uint32());break;case 6:n.sub=c.SdkSubscribeFrame.decode(e,e.uint32());break;case 7:n.suback=c.SdkSubscribeAckFrame.decode(e,e.uint32());break;case 8:n.index=c.SdkIndexFrame.decode(e,e.uint32());break;case 10:n.pause=c.SdkPauseResumeFrame.decode(e,e.uint32());break;case 11:n.leave=c.SdkLeaveFrame.decode(e,e.uint32());break;case 12:n.leaveAck=c.SdkLeaveAckFrame.decode(e,e.uint32());break;case 14:n.bitrates=c.SdkBitrateFrame.decode(e,e.uint32());break;case 17:n.audioControl=c.SdkAudioControlFrame.decode(e,e.uint32());break;case 18:n.audioMetadata=c.SdkAudioMetadataFrame.decode(e,e.uint32());break;case 19:n.audioStreamIdInfo=c.SdkAudioStreamIdInfoFrame.decode(e,e.uint32());break;case 20:n.pingPong=c.SdkPingPongFrame.decode(e,e.uint32());break;case 21:n.audioStatus=c.SdkAudioStatusFrame.decode(e,e.uint32());break;case 22:n.clientMetric=c.SdkClientMetricFrame.decode(e,e.uint32());break;case 23:n.dataMessage=c.SdkDataMessageFrame.decode(e,e.uint32());break;default:e.skipType(7&r)}}if(!n.hasOwnProperty("timestampMs"))throw l.ProtocolError("missing required 'timestampMs'",{instance:n});if(!n.hasOwnProperty("type"))throw l.ProtocolError("missing required 'type'",{instance:n});return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!(l.isInteger(e.timestampMs)||e.timestampMs&&l.isInteger(e.timestampMs.low)&&l.isInteger(e.timestampMs.high)))return"timestampMs: integer|Long expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 7:case 8:case 9:case 10:case 13:case 16:case 17:case 18:case 19:case 20:case 21:case 22:}var t;return null!=e.error&&e.hasOwnProperty("error")&&(t=c.SdkErrorFrame.verify(e.error))?"error."+t:null!=e.join&&e.hasOwnProperty("join")&&(t=c.SdkJoinFrame.verify(e.join))?"join."+t:null!=e.joinack&&e.hasOwnProperty("joinack")&&(t=c.SdkJoinAckFrame.verify(e.joinack))?"joinack."+t:null!=e.sub&&e.hasOwnProperty("sub")&&(t=c.SdkSubscribeFrame.verify(e.sub))?"sub."+t:null!=e.suback&&e.hasOwnProperty("suback")&&(t=c.SdkSubscribeAckFrame.verify(e.suback))?"suback."+t:null!=e.index&&e.hasOwnProperty("index")&&(t=c.SdkIndexFrame.verify(e.index))?"index."+t:null!=e.pause&&e.hasOwnProperty("pause")&&(t=c.SdkPauseResumeFrame.verify(e.pause))?"pause."+t:null!=e.leave&&e.hasOwnProperty("leave")&&(t=c.SdkLeaveFrame.verify(e.leave))?"leave."+t:null!=e.leaveAck&&e.hasOwnProperty("leaveAck")&&(t=c.SdkLeaveAckFrame.verify(e.leaveAck))?"leaveAck."+t:null!=e.bitrates&&e.hasOwnProperty("bitrates")&&(t=c.SdkBitrateFrame.verify(e.bitrates))?"bitrates."+t:null!=e.audioControl&&e.hasOwnProperty("audioControl")&&(t=c.SdkAudioControlFrame.verify(e.audioControl))?"audioControl."+t:null!=e.audioMetadata&&e.hasOwnProperty("audioMetadata")&&(t=c.SdkAudioMetadataFrame.verify(e.audioMetadata))?"audioMetadata."+t:null!=e.audioStreamIdInfo&&e.hasOwnProperty("audioStreamIdInfo")&&(t=c.SdkAudioStreamIdInfoFrame.verify(e.audioStreamIdInfo))?"audioStreamIdInfo."+t:null!=e.pingPong&&e.hasOwnProperty("pingPong")&&(t=c.SdkPingPongFrame.verify(e.pingPong))?"pingPong."+t:null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&(t=c.SdkAudioStatusFrame.verify(e.audioStatus))?"audioStatus."+t:null!=e.clientMetric&&e.hasOwnProperty("clientMetric")&&(t=c.SdkClientMetricFrame.verify(e.clientMetric))?"clientMetric."+t:null!=e.dataMessage&&e.hasOwnProperty("dataMessage")&&(t=c.SdkDataMessageFrame.verify(e.dataMessage))?"dataMessage."+t:null},e.fromObject=function(e){if(e instanceof c.SdkSignalFrame)return e;var t=new c.SdkSignalFrame;switch(null!=e.timestampMs&&(l.Long?(t.timestampMs=l.Long.fromValue(e.timestampMs)).unsigned=!0:"string"==typeof e.timestampMs?t.timestampMs=parseInt(e.timestampMs,10):"number"==typeof e.timestampMs?t.timestampMs=e.timestampMs:"object"==typeof e.timestampMs&&(t.timestampMs=new l.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0))),e.type){case"JOIN":case 1:t.type=1;break;case"JOIN_ACK":case 2:t.type=2;break;case"SUBSCRIBE":case 3:t.type=3;break;case"SUBSCRIBE_ACK":case 4:t.type=4;break;case"INDEX":case 5:t.type=5;break;case"PAUSE":case 7:t.type=7;break;case"RESUME":case 8:t.type=8;break;case"LEAVE":case 9:t.type=9;break;case"LEAVE_ACK":case 10:t.type=10;break;case"BITRATES":case 13:t.type=13;break;case"AUDIO_CONTROL":case 16:t.type=16;break;case"AUDIO_METADATA":case 17:t.type=17;break;case"AUDIO_STREAM_ID_INFO":case 18:t.type=18;break;case"PING_PONG":case 19:t.type=19;break;case"AUDIO_STATUS":case 20:t.type=20;break;case"CLIENT_METRIC":case 21:t.type=21;break;case"DATA_MESSAGE":case 22:t.type=22}if(null!=e.error){if("object"!=typeof e.error)throw TypeError(".SdkSignalFrame.error: object expected");t.error=c.SdkErrorFrame.fromObject(e.error)}if(null!=e.join){if("object"!=typeof e.join)throw TypeError(".SdkSignalFrame.join: object expected");t.join=c.SdkJoinFrame.fromObject(e.join)}if(null!=e.joinack){if("object"!=typeof e.joinack)throw TypeError(".SdkSignalFrame.joinack: object expected");t.joinack=c.SdkJoinAckFrame.fromObject(e.joinack)}if(null!=e.sub){if("object"!=typeof e.sub)throw TypeError(".SdkSignalFrame.sub: object expected");t.sub=c.SdkSubscribeFrame.fromObject(e.sub)}if(null!=e.suback){if("object"!=typeof e.suback)throw TypeError(".SdkSignalFrame.suback: object expected");t.suback=c.SdkSubscribeAckFrame.fromObject(e.suback)}if(null!=e.index){if("object"!=typeof e.index)throw TypeError(".SdkSignalFrame.index: object expected");t.index=c.SdkIndexFrame.fromObject(e.index)}if(null!=e.pause){if("object"!=typeof e.pause)throw TypeError(".SdkSignalFrame.pause: object expected");t.pause=c.SdkPauseResumeFrame.fromObject(e.pause)}if(null!=e.leave){if("object"!=typeof e.leave)throw TypeError(".SdkSignalFrame.leave: object expected");t.leave=c.SdkLeaveFrame.fromObject(e.leave)}if(null!=e.leaveAck){if("object"!=typeof e.leaveAck)throw TypeError(".SdkSignalFrame.leaveAck: object expected");t.leaveAck=c.SdkLeaveAckFrame.fromObject(e.leaveAck)}if(null!=e.bitrates){if("object"!=typeof e.bitrates)throw TypeError(".SdkSignalFrame.bitrates: object expected");t.bitrates=c.SdkBitrateFrame.fromObject(e.bitrates)}if(null!=e.audioControl){if("object"!=typeof e.audioControl)throw TypeError(".SdkSignalFrame.audioControl: object expected");t.audioControl=c.SdkAudioControlFrame.fromObject(e.audioControl)}if(null!=e.audioMetadata){if("object"!=typeof e.audioMetadata)throw TypeError(".SdkSignalFrame.audioMetadata: object expected");t.audioMetadata=c.SdkAudioMetadataFrame.fromObject(e.audioMetadata)}if(null!=e.audioStreamIdInfo){if("object"!=typeof e.audioStreamIdInfo)throw TypeError(".SdkSignalFrame.audioStreamIdInfo: object expected");t.audioStreamIdInfo=c.SdkAudioStreamIdInfoFrame.fromObject(e.audioStreamIdInfo)}if(null!=e.pingPong){if("object"!=typeof e.pingPong)throw TypeError(".SdkSignalFrame.pingPong: object expected");t.pingPong=c.SdkPingPongFrame.fromObject(e.pingPong)}if(null!=e.audioStatus){if("object"!=typeof e.audioStatus)throw TypeError(".SdkSignalFrame.audioStatus: object expected");t.audioStatus=c.SdkAudioStatusFrame.fromObject(e.audioStatus)}if(null!=e.clientMetric){if("object"!=typeof e.clientMetric)throw TypeError(".SdkSignalFrame.clientMetric: object expected");t.clientMetric=c.SdkClientMetricFrame.fromObject(e.clientMetric)}if(null!=e.dataMessage){if("object"!=typeof e.dataMessage)throw TypeError(".SdkSignalFrame.dataMessage: object expected");t.dataMessage=c.SdkDataMessageFrame.fromObject(e.dataMessage)}return t},e.toObject=function(e,t){t||(t={});var i={};if(t.defaults){if(l.Long){var n=new l.Long(0,0,!0);i.timestampMs=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else i.timestampMs=t.longs===String?"0":0;i.type=t.enums===String?"JOIN":1,i.error=null,i.join=null,i.joinack=null,i.sub=null,i.suback=null,i.index=null,i.pause=null,i.leave=null,i.leaveAck=null,i.bitrates=null,i.audioControl=null,i.audioMetadata=null,i.audioStreamIdInfo=null,i.pingPong=null,i.audioStatus=null,i.clientMetric=null,i.dataMessage=null}return null!=e.timestampMs&&e.hasOwnProperty("timestampMs")&&("number"==typeof e.timestampMs?i.timestampMs=t.longs===String?String(e.timestampMs):e.timestampMs:i.timestampMs=t.longs===String?l.Long.prototype.toString.call(e.timestampMs):t.longs===Number?new l.LongBits(e.timestampMs.low>>>0,e.timestampMs.high>>>0).toNumber(!0):e.timestampMs),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?c.SdkSignalFrame.Type[e.type]:e.type),null!=e.error&&e.hasOwnProperty("error")&&(i.error=c.SdkErrorFrame.toObject(e.error,t)),null!=e.join&&e.hasOwnProperty("join")&&(i.join=c.SdkJoinFrame.toObject(e.join,t)),null!=e.joinack&&e.hasOwnProperty("joinack")&&(i.joinack=c.SdkJoinAckFrame.toObject(e.joinack,t)),null!=e.sub&&e.hasOwnProperty("sub")&&(i.sub=c.SdkSubscribeFrame.toObject(e.sub,t)),null!=e.suback&&e.hasOwnProperty("suback")&&(i.suback=c.SdkSubscribeAckFrame.toObject(e.suback,t)),null!=e.index&&e.hasOwnProperty("index")&&(i.index=c.SdkIndexFrame.toObject(e.index,t)),null!=e.pause&&e.hasOwnProperty("pause")&&(i.pause=c.SdkPauseResumeFrame.toObject(e.pause,t)),null!=e.leave&&e.hasOwnProperty("leave")&&(i.leave=c.SdkLeaveFrame.toObject(e.leave,t)),null!=e.leaveAck&&e.hasOwnProperty("leaveAck")&&(i.leaveAck=c.SdkLeaveAckFrame.toObject(e.leaveAck,t)),null!=e.bitrates&&e.hasOwnProperty("bitrates")&&(i.bitrates=c.SdkBitrateFrame.toObject(e.bitrates,t)),null!=e.audioControl&&e.hasOwnProperty("audioControl")&&(i.audioControl=c.SdkAudioControlFrame.toObject(e.audioControl,t)),null!=e.audioMetadata&&e.hasOwnProperty("audioMetadata")&&(i.audioMetadata=c.SdkAudioMetadataFrame.toObject(e.audioMetadata,t)),null!=e.audioStreamIdInfo&&e.hasOwnProperty("audioStreamIdInfo")&&(i.audioStreamIdInfo=c.SdkAudioStreamIdInfoFrame.toObject(e.audioStreamIdInfo,t)),null!=e.pingPong&&e.hasOwnProperty("pingPong")&&(i.pingPong=c.SdkPingPongFrame.toObject(e.pingPong,t)),null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=c.SdkAudioStatusFrame.toObject(e.audioStatus,t)),null!=e.clientMetric&&e.hasOwnProperty("clientMetric")&&(i.clientMetric=c.SdkClientMetricFrame.toObject(e.clientMetric,t)),null!=e.dataMessage&&e.hasOwnProperty("dataMessage")&&(i.dataMessage=c.SdkDataMessageFrame.toObject(e.dataMessage,t)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e.Type=(t={},(i=Object.create(t))[t[1]="JOIN"]=1,i[t[2]="JOIN_ACK"]=2,i[t[3]="SUBSCRIBE"]=3,i[t[4]="SUBSCRIBE_ACK"]=4,i[t[5]="INDEX"]=5,i[t[7]="PAUSE"]=7,i[t[8]="RESUME"]=8,i[t[9]="LEAVE"]=9,i[t[10]="LEAVE_ACK"]=10,i[t[13]="BITRATES"]=13,i[t[16]="AUDIO_CONTROL"]=16,i[t[17]="AUDIO_METADATA"]=17,i[t[18]="AUDIO_STREAM_ID_INFO"]=18,i[t[19]="PING_PONG"]=19,i[t[20]="AUDIO_STATUS"]=20,i[t[21]="CLIENT_METRIC"]=21,i[t[22]="DATA_MESSAGE"]=22,i),e}(),c.SdkErrorFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.status=0,e.prototype.description="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.status&&e.hasOwnProperty("status")&&t.uint32(8).uint32(e.status),null!=e.description&&e.hasOwnProperty("description")&&t.uint32(18).string(e.description),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkErrorFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.status=e.uint32();break;case 2:n.description=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.status&&e.hasOwnProperty("status")&&!l.isInteger(e.status)?"status: integer expected":null!=e.description&&e.hasOwnProperty("description")&&!l.isString(e.description)?"description: string expected":null},e.fromObject=function(e){if(e instanceof c.SdkErrorFrame)return e;var t=new c.SdkErrorFrame;return null!=e.status&&(t.status=e.status>>>0),null!=e.description&&(t.description=String(e.description)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.status=0,i.description=""),null!=e.status&&e.hasOwnProperty("status")&&(i.status=e.status),null!=e.description&&e.hasOwnProperty("description")&&(i.description=e.description),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkJoinFlags=(n={},(r=Object.create(n))[n[1]="SEND_BITRATES"]=1,r[n[2]="HAS_STREAM_UPDATE"]=2,r[n[8]="USE_SEND_SIDE_BWE"]=8,r[n[16]="COMPLETE_VIDEO_SOURCES_LIST"]=16,r[n[32]="EXCLUDE_SELF_CONTENT_IN_INDEX"]=32,r),c.SdkClientDetails=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.appVersionName="",e.prototype.appVersionCode="",e.prototype.deviceModel="",e.prototype.deviceMake="",e.prototype.platformName="",e.prototype.platformVersion="",e.prototype.clientSource="",e.prototype.chimeSdkVersion="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.appVersionName&&e.hasOwnProperty("appVersionName")&&t.uint32(10).string(e.appVersionName),null!=e.appVersionCode&&e.hasOwnProperty("appVersionCode")&&t.uint32(18).string(e.appVersionCode),null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&t.uint32(26).string(e.deviceModel),null!=e.deviceMake&&e.hasOwnProperty("deviceMake")&&t.uint32(34).string(e.deviceMake),null!=e.platformName&&e.hasOwnProperty("platformName")&&t.uint32(42).string(e.platformName),null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&t.uint32(50).string(e.platformVersion),null!=e.clientSource&&e.hasOwnProperty("clientSource")&&t.uint32(58).string(e.clientSource),null!=e.chimeSdkVersion&&e.hasOwnProperty("chimeSdkVersion")&&t.uint32(66).string(e.chimeSdkVersion),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkClientDetails;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.appVersionName=e.string();break;case 2:n.appVersionCode=e.string();break;case 3:n.deviceModel=e.string();break;case 4:n.deviceMake=e.string();break;case 5:n.platformName=e.string();break;case 6:n.platformVersion=e.string();break;case 7:n.clientSource=e.string();break;case 8:n.chimeSdkVersion=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.appVersionName&&e.hasOwnProperty("appVersionName")&&!l.isString(e.appVersionName)?"appVersionName: string expected":null!=e.appVersionCode&&e.hasOwnProperty("appVersionCode")&&!l.isString(e.appVersionCode)?"appVersionCode: string expected":null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&!l.isString(e.deviceModel)?"deviceModel: string expected":null!=e.deviceMake&&e.hasOwnProperty("deviceMake")&&!l.isString(e.deviceMake)?"deviceMake: string expected":null!=e.platformName&&e.hasOwnProperty("platformName")&&!l.isString(e.platformName)?"platformName: string expected":null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&!l.isString(e.platformVersion)?"platformVersion: string expected":null!=e.clientSource&&e.hasOwnProperty("clientSource")&&!l.isString(e.clientSource)?"clientSource: string expected":null!=e.chimeSdkVersion&&e.hasOwnProperty("chimeSdkVersion")&&!l.isString(e.chimeSdkVersion)?"chimeSdkVersion: string expected":null},e.fromObject=function(e){if(e instanceof c.SdkClientDetails)return e;var t=new c.SdkClientDetails;return null!=e.appVersionName&&(t.appVersionName=String(e.appVersionName)),null!=e.appVersionCode&&(t.appVersionCode=String(e.appVersionCode)),null!=e.deviceModel&&(t.deviceModel=String(e.deviceModel)),null!=e.deviceMake&&(t.deviceMake=String(e.deviceMake)),null!=e.platformName&&(t.platformName=String(e.platformName)),null!=e.platformVersion&&(t.platformVersion=String(e.platformVersion)),null!=e.clientSource&&(t.clientSource=String(e.clientSource)),null!=e.chimeSdkVersion&&(t.chimeSdkVersion=String(e.chimeSdkVersion)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.appVersionName="",i.appVersionCode="",i.deviceModel="",i.deviceMake="",i.platformName="",i.platformVersion="",i.clientSource="",i.chimeSdkVersion=""),null!=e.appVersionName&&e.hasOwnProperty("appVersionName")&&(i.appVersionName=e.appVersionName),null!=e.appVersionCode&&e.hasOwnProperty("appVersionCode")&&(i.appVersionCode=e.appVersionCode),null!=e.deviceModel&&e.hasOwnProperty("deviceModel")&&(i.deviceModel=e.deviceModel),null!=e.deviceMake&&e.hasOwnProperty("deviceMake")&&(i.deviceMake=e.deviceMake),null!=e.platformName&&e.hasOwnProperty("platformName")&&(i.platformName=e.platformName),null!=e.platformVersion&&e.hasOwnProperty("platformVersion")&&(i.platformVersion=e.platformVersion),null!=e.clientSource&&e.hasOwnProperty("clientSource")&&(i.clientSource=e.clientSource),null!=e.chimeSdkVersion&&e.hasOwnProperty("chimeSdkVersion")&&(i.chimeSdkVersion=e.chimeSdkVersion),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkJoinFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.protocolVersion=2,e.prototype.maxNumOfVideos=8,e.prototype.flags=0,e.prototype.clientDetails=null,e.prototype.audioSessionId=l.Long?l.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.protocolVersion&&e.hasOwnProperty("protocolVersion")&&t.uint32(8).uint32(e.protocolVersion),null!=e.maxNumOfVideos&&e.hasOwnProperty("maxNumOfVideos")&&t.uint32(16).uint32(e.maxNumOfVideos),null!=e.flags&&e.hasOwnProperty("flags")&&t.uint32(24).uint32(e.flags),null!=e.clientDetails&&e.hasOwnProperty("clientDetails")&&c.SdkClientDetails.encode(e.clientDetails,t.uint32(34).fork()).ldelim(),null!=e.audioSessionId&&e.hasOwnProperty("audioSessionId")&&t.uint32(48).uint64(e.audioSessionId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkJoinFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.protocolVersion=e.uint32();break;case 2:n.maxNumOfVideos=e.uint32();break;case 3:n.flags=e.uint32();break;case 4:n.clientDetails=c.SdkClientDetails.decode(e,e.uint32());break;case 6:n.audioSessionId=e.uint64();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.protocolVersion&&e.hasOwnProperty("protocolVersion")&&!l.isInteger(e.protocolVersion))return"protocolVersion: integer expected";if(null!=e.maxNumOfVideos&&e.hasOwnProperty("maxNumOfVideos")&&!l.isInteger(e.maxNumOfVideos))return"maxNumOfVideos: integer expected";if(null!=e.flags&&e.hasOwnProperty("flags")&&!l.isInteger(e.flags))return"flags: integer expected";if(null!=e.clientDetails&&e.hasOwnProperty("clientDetails")){var t=c.SdkClientDetails.verify(e.clientDetails);if(t)return"clientDetails."+t}return null!=e.audioSessionId&&e.hasOwnProperty("audioSessionId")&&!(l.isInteger(e.audioSessionId)||e.audioSessionId&&l.isInteger(e.audioSessionId.low)&&l.isInteger(e.audioSessionId.high))?"audioSessionId: integer|Long expected":null},e.fromObject=function(e){if(e instanceof c.SdkJoinFrame)return e;var t=new c.SdkJoinFrame;if(null!=e.protocolVersion&&(t.protocolVersion=e.protocolVersion>>>0),null!=e.maxNumOfVideos&&(t.maxNumOfVideos=e.maxNumOfVideos>>>0),null!=e.flags&&(t.flags=e.flags>>>0),null!=e.clientDetails){if("object"!=typeof e.clientDetails)throw TypeError(".SdkJoinFrame.clientDetails: object expected");t.clientDetails=c.SdkClientDetails.fromObject(e.clientDetails)}return null!=e.audioSessionId&&(l.Long?(t.audioSessionId=l.Long.fromValue(e.audioSessionId)).unsigned=!0:"string"==typeof e.audioSessionId?t.audioSessionId=parseInt(e.audioSessionId,10):"number"==typeof e.audioSessionId?t.audioSessionId=e.audioSessionId:"object"==typeof e.audioSessionId&&(t.audioSessionId=new l.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var i={};if(t.defaults)if(i.protocolVersion=2,i.maxNumOfVideos=8,i.flags=0,i.clientDetails=null,l.Long){var n=new l.Long(0,0,!0);i.audioSessionId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else i.audioSessionId=t.longs===String?"0":0;return null!=e.protocolVersion&&e.hasOwnProperty("protocolVersion")&&(i.protocolVersion=e.protocolVersion),null!=e.maxNumOfVideos&&e.hasOwnProperty("maxNumOfVideos")&&(i.maxNumOfVideos=e.maxNumOfVideos),null!=e.flags&&e.hasOwnProperty("flags")&&(i.flags=e.flags),null!=e.clientDetails&&e.hasOwnProperty("clientDetails")&&(i.clientDetails=c.SdkClientDetails.toObject(e.clientDetails,t)),null!=e.audioSessionId&&e.hasOwnProperty("audioSessionId")&&("number"==typeof e.audioSessionId?i.audioSessionId=t.longs===String?String(e.audioSessionId):e.audioSessionId:i.audioSessionId=t.longs===String?l.Long.prototype.toString.call(e.audioSessionId):t.longs===Number?new l.LongBits(e.audioSessionId.low>>>0,e.audioSessionId.high>>>0).toNumber(!0):e.audioSessionId),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkJoinAckFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.turnCredentials=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.turnCredentials&&e.hasOwnProperty("turnCredentials")&&c.SdkTurnCredentials.encode(e.turnCredentials,t.uint32(10).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkJoinAckFrame;e.pos<i;){var r=e.uint32();r>>>3==1?n.turnCredentials=c.SdkTurnCredentials.decode(e,e.uint32()):e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.turnCredentials&&e.hasOwnProperty("turnCredentials")){var t=c.SdkTurnCredentials.verify(e.turnCredentials);if(t)return"turnCredentials."+t}return null},e.fromObject=function(e){if(e instanceof c.SdkJoinAckFrame)return e;var t=new c.SdkJoinAckFrame;if(null!=e.turnCredentials){if("object"!=typeof e.turnCredentials)throw TypeError(".SdkJoinAckFrame.turnCredentials: object expected");t.turnCredentials=c.SdkTurnCredentials.fromObject(e.turnCredentials)}return t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.turnCredentials=null),null!=e.turnCredentials&&e.hasOwnProperty("turnCredentials")&&(i.turnCredentials=c.SdkTurnCredentials.toObject(e.turnCredentials,t)),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkLeaveFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkLeaveFrame;e.pos<i;){var r=e.uint32();e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof c.SdkLeaveFrame?e:new c.SdkLeaveFrame},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkLeaveAckFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkLeaveAckFrame;e.pos<i;){var r=e.uint32();e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null},e.fromObject=function(e){return e instanceof c.SdkLeaveAckFrame?e:new c.SdkLeaveAckFrame},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkStreamServiceType=function(){var e={},t=Object.create(e);return t[e[1]="RX"]=1,t[e[2]="TX"]=2,t[e[3]="DUPLEX"]=3,t}(),c.SdkStreamMediaType=function(){var e={},t=Object.create(e);return t[e[1]="AUDIO"]=1,t[e[2]="VIDEO"]=2,t}(),c.SdkSubscribeFrame=function(){function e(e){if(this.sendStreams=[],this.receiveStreamIds=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.duplex=1,e.prototype.sendStreams=l.emptyArray,e.prototype.receiveStreamIds=l.emptyArray,e.prototype.sdpOffer="",e.prototype.audioHost="",e.prototype.audioCheckin=!1,e.prototype.audioMuted=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.duplex&&e.hasOwnProperty("duplex")&&t.uint32(8).int32(e.duplex),null!=e.sendStreams&&e.sendStreams.length)for(var i=0;i<e.sendStreams.length;++i)c.SdkStreamDescriptor.encode(e.sendStreams[i],t.uint32(18).fork()).ldelim();if(null!=e.receiveStreamIds&&e.receiveStreamIds.length)for(i=0;i<e.receiveStreamIds.length;++i)t.uint32(24).uint32(e.receiveStreamIds[i]);return null!=e.sdpOffer&&e.hasOwnProperty("sdpOffer")&&t.uint32(34).string(e.sdpOffer),null!=e.audioHost&&e.hasOwnProperty("audioHost")&&t.uint32(42).string(e.audioHost),null!=e.audioCheckin&&e.hasOwnProperty("audioCheckin")&&t.uint32(48).bool(e.audioCheckin),null!=e.audioMuted&&e.hasOwnProperty("audioMuted")&&t.uint32(56).bool(e.audioMuted),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkSubscribeFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.duplex=e.int32();break;case 2:n.sendStreams&&n.sendStreams.length||(n.sendStreams=[]),n.sendStreams.push(c.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(n.receiveStreamIds&&n.receiveStreamIds.length||(n.receiveStreamIds=[]),2==(7&r))for(var o=e.uint32()+e.pos;e.pos<o;)n.receiveStreamIds.push(e.uint32());else n.receiveStreamIds.push(e.uint32());break;case 4:n.sdpOffer=e.string();break;case 5:n.audioHost=e.string();break;case 6:n.audioCheckin=e.bool();break;case 7:n.audioMuted=e.bool();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.duplex&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:}if(null!=e.sendStreams&&e.hasOwnProperty("sendStreams")){if(!Array.isArray(e.sendStreams))return"sendStreams: array expected";for(var t=0;t<e.sendStreams.length;++t){var i=c.SdkStreamDescriptor.verify(e.sendStreams[t]);if(i)return"sendStreams."+i}}if(null!=e.receiveStreamIds&&e.hasOwnProperty("receiveStreamIds")){if(!Array.isArray(e.receiveStreamIds))return"receiveStreamIds: array expected";for(t=0;t<e.receiveStreamIds.length;++t)if(!l.isInteger(e.receiveStreamIds[t]))return"receiveStreamIds: integer[] expected"}return null!=e.sdpOffer&&e.hasOwnProperty("sdpOffer")&&!l.isString(e.sdpOffer)?"sdpOffer: string expected":null!=e.audioHost&&e.hasOwnProperty("audioHost")&&!l.isString(e.audioHost)?"audioHost: string expected":null!=e.audioCheckin&&e.hasOwnProperty("audioCheckin")&&"boolean"!=typeof e.audioCheckin?"audioCheckin: boolean expected":null!=e.audioMuted&&e.hasOwnProperty("audioMuted")&&"boolean"!=typeof e.audioMuted?"audioMuted: boolean expected":null},e.fromObject=function(e){if(e instanceof c.SdkSubscribeFrame)return e;var t=new c.SdkSubscribeFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3}if(e.sendStreams){if(!Array.isArray(e.sendStreams))throw TypeError(".SdkSubscribeFrame.sendStreams: array expected");t.sendStreams=[];for(var i=0;i<e.sendStreams.length;++i){if("object"!=typeof e.sendStreams[i])throw TypeError(".SdkSubscribeFrame.sendStreams: object expected");t.sendStreams[i]=c.SdkStreamDescriptor.fromObject(e.sendStreams[i])}}if(e.receiveStreamIds){if(!Array.isArray(e.receiveStreamIds))throw TypeError(".SdkSubscribeFrame.receiveStreamIds: array expected");for(t.receiveStreamIds=[],i=0;i<e.receiveStreamIds.length;++i)t.receiveStreamIds[i]=e.receiveStreamIds[i]>>>0}return null!=e.sdpOffer&&(t.sdpOffer=String(e.sdpOffer)),null!=e.audioHost&&(t.audioHost=String(e.audioHost)),null!=e.audioCheckin&&(t.audioCheckin=Boolean(e.audioCheckin)),null!=e.audioMuted&&(t.audioMuted=Boolean(e.audioMuted)),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sendStreams=[],i.receiveStreamIds=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpOffer="",i.audioHost="",i.audioCheckin=!1,i.audioMuted=!1),null!=e.duplex&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?c.SdkStreamServiceType[e.duplex]:e.duplex),e.sendStreams&&e.sendStreams.length){i.sendStreams=[];for(var n=0;n<e.sendStreams.length;++n)i.sendStreams[n]=c.SdkStreamDescriptor.toObject(e.sendStreams[n],t)}if(e.receiveStreamIds&&e.receiveStreamIds.length)for(i.receiveStreamIds=[],n=0;n<e.receiveStreamIds.length;++n)i.receiveStreamIds[n]=e.receiveStreamIds[n];return null!=e.sdpOffer&&e.hasOwnProperty("sdpOffer")&&(i.sdpOffer=e.sdpOffer),null!=e.audioHost&&e.hasOwnProperty("audioHost")&&(i.audioHost=e.audioHost),null!=e.audioCheckin&&e.hasOwnProperty("audioCheckin")&&(i.audioCheckin=e.audioCheckin),null!=e.audioMuted&&e.hasOwnProperty("audioMuted")&&(i.audioMuted=e.audioMuted),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkSubscribeAckFrame=function(){function e(e){if(this.allocations=[],this.tracks=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.duplex=1,e.prototype.allocations=l.emptyArray,e.prototype.sdpAnswer="",e.prototype.tracks=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.duplex&&e.hasOwnProperty("duplex")&&t.uint32(8).int32(e.duplex),null!=e.allocations&&e.allocations.length)for(var i=0;i<e.allocations.length;++i)c.SdkStreamAllocation.encode(e.allocations[i],t.uint32(18).fork()).ldelim();if(null!=e.sdpAnswer&&e.hasOwnProperty("sdpAnswer")&&t.uint32(26).string(e.sdpAnswer),null!=e.tracks&&e.tracks.length)for(i=0;i<e.tracks.length;++i)c.SdkTrackMapping.encode(e.tracks[i],t.uint32(34).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkSubscribeAckFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.duplex=e.int32();break;case 2:n.allocations&&n.allocations.length||(n.allocations=[]),n.allocations.push(c.SdkStreamAllocation.decode(e,e.uint32()));break;case 3:n.sdpAnswer=e.string();break;case 4:n.tracks&&n.tracks.length||(n.tracks=[]),n.tracks.push(c.SdkTrackMapping.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.duplex&&e.hasOwnProperty("duplex"))switch(e.duplex){default:return"duplex: enum value expected";case 1:case 2:case 3:}if(null!=e.allocations&&e.hasOwnProperty("allocations")){if(!Array.isArray(e.allocations))return"allocations: array expected";for(var t=0;t<e.allocations.length;++t)if(i=c.SdkStreamAllocation.verify(e.allocations[t]))return"allocations."+i}if(null!=e.sdpAnswer&&e.hasOwnProperty("sdpAnswer")&&!l.isString(e.sdpAnswer))return"sdpAnswer: string expected";if(null!=e.tracks&&e.hasOwnProperty("tracks")){if(!Array.isArray(e.tracks))return"tracks: array expected";for(t=0;t<e.tracks.length;++t){var i;if(i=c.SdkTrackMapping.verify(e.tracks[t]))return"tracks."+i}}return null},e.fromObject=function(e){if(e instanceof c.SdkSubscribeAckFrame)return e;var t=new c.SdkSubscribeAckFrame;switch(e.duplex){case"RX":case 1:t.duplex=1;break;case"TX":case 2:t.duplex=2;break;case"DUPLEX":case 3:t.duplex=3}if(e.allocations){if(!Array.isArray(e.allocations))throw TypeError(".SdkSubscribeAckFrame.allocations: array expected");t.allocations=[];for(var i=0;i<e.allocations.length;++i){if("object"!=typeof e.allocations[i])throw TypeError(".SdkSubscribeAckFrame.allocations: object expected");t.allocations[i]=c.SdkStreamAllocation.fromObject(e.allocations[i])}}if(null!=e.sdpAnswer&&(t.sdpAnswer=String(e.sdpAnswer)),e.tracks){if(!Array.isArray(e.tracks))throw TypeError(".SdkSubscribeAckFrame.tracks: array expected");for(t.tracks=[],i=0;i<e.tracks.length;++i){if("object"!=typeof e.tracks[i])throw TypeError(".SdkSubscribeAckFrame.tracks: object expected");t.tracks[i]=c.SdkTrackMapping.fromObject(e.tracks[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.allocations=[],i.tracks=[]),t.defaults&&(i.duplex=t.enums===String?"RX":1,i.sdpAnswer=""),null!=e.duplex&&e.hasOwnProperty("duplex")&&(i.duplex=t.enums===String?c.SdkStreamServiceType[e.duplex]:e.duplex),e.allocations&&e.allocations.length){i.allocations=[];for(var n=0;n<e.allocations.length;++n)i.allocations[n]=c.SdkStreamAllocation.toObject(e.allocations[n],t)}if(null!=e.sdpAnswer&&e.hasOwnProperty("sdpAnswer")&&(i.sdpAnswer=e.sdpAnswer),e.tracks&&e.tracks.length)for(i.tracks=[],n=0;n<e.tracks.length;++n)i.tracks[n]=c.SdkTrackMapping.toObject(e.tracks[n],t);return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkIndexFrame=function(){function e(e){if(this.sources=[],this.pausedAtSourceIds=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.atCapacity=!1,e.prototype.sources=l.emptyArray,e.prototype.pausedAtSourceIds=l.emptyArray,e.prototype.numParticipants=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.atCapacity&&e.hasOwnProperty("atCapacity")&&t.uint32(8).bool(e.atCapacity),null!=e.sources&&e.sources.length)for(var i=0;i<e.sources.length;++i)c.SdkStreamDescriptor.encode(e.sources[i],t.uint32(18).fork()).ldelim();if(null!=e.pausedAtSourceIds&&e.pausedAtSourceIds.length)for(i=0;i<e.pausedAtSourceIds.length;++i)t.uint32(24).uint32(e.pausedAtSourceIds[i]);return null!=e.numParticipants&&e.hasOwnProperty("numParticipants")&&t.uint32(32).uint32(e.numParticipants),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkIndexFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.atCapacity=e.bool();break;case 2:n.sources&&n.sources.length||(n.sources=[]),n.sources.push(c.SdkStreamDescriptor.decode(e,e.uint32()));break;case 3:if(n.pausedAtSourceIds&&n.pausedAtSourceIds.length||(n.pausedAtSourceIds=[]),2==(7&r))for(var o=e.uint32()+e.pos;e.pos<o;)n.pausedAtSourceIds.push(e.uint32());else n.pausedAtSourceIds.push(e.uint32());break;case 4:n.numParticipants=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.atCapacity&&e.hasOwnProperty("atCapacity")&&"boolean"!=typeof e.atCapacity)return"atCapacity: boolean expected";if(null!=e.sources&&e.hasOwnProperty("sources")){if(!Array.isArray(e.sources))return"sources: array expected";for(var t=0;t<e.sources.length;++t){var i=c.SdkStreamDescriptor.verify(e.sources[t]);if(i)return"sources."+i}}if(null!=e.pausedAtSourceIds&&e.hasOwnProperty("pausedAtSourceIds")){if(!Array.isArray(e.pausedAtSourceIds))return"pausedAtSourceIds: array expected";for(t=0;t<e.pausedAtSourceIds.length;++t)if(!l.isInteger(e.pausedAtSourceIds[t]))return"pausedAtSourceIds: integer[] expected"}return null!=e.numParticipants&&e.hasOwnProperty("numParticipants")&&!l.isInteger(e.numParticipants)?"numParticipants: integer expected":null},e.fromObject=function(e){if(e instanceof c.SdkIndexFrame)return e;var t=new c.SdkIndexFrame;if(null!=e.atCapacity&&(t.atCapacity=Boolean(e.atCapacity)),e.sources){if(!Array.isArray(e.sources))throw TypeError(".SdkIndexFrame.sources: array expected");t.sources=[];for(var i=0;i<e.sources.length;++i){if("object"!=typeof e.sources[i])throw TypeError(".SdkIndexFrame.sources: object expected");t.sources[i]=c.SdkStreamDescriptor.fromObject(e.sources[i])}}if(e.pausedAtSourceIds){if(!Array.isArray(e.pausedAtSourceIds))throw TypeError(".SdkIndexFrame.pausedAtSourceIds: array expected");for(t.pausedAtSourceIds=[],i=0;i<e.pausedAtSourceIds.length;++i)t.pausedAtSourceIds[i]=e.pausedAtSourceIds[i]>>>0}return null!=e.numParticipants&&(t.numParticipants=e.numParticipants>>>0),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.sources=[],i.pausedAtSourceIds=[]),t.defaults&&(i.atCapacity=!1,i.numParticipants=0),null!=e.atCapacity&&e.hasOwnProperty("atCapacity")&&(i.atCapacity=e.atCapacity),e.sources&&e.sources.length){i.sources=[];for(var n=0;n<e.sources.length;++n)i.sources[n]=c.SdkStreamDescriptor.toObject(e.sources[n],t)}if(e.pausedAtSourceIds&&e.pausedAtSourceIds.length)for(i.pausedAtSourceIds=[],n=0;n<e.pausedAtSourceIds.length;++n)i.pausedAtSourceIds[n]=e.pausedAtSourceIds[n];return null!=e.numParticipants&&e.hasOwnProperty("numParticipants")&&(i.numParticipants=e.numParticipants),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkPauseResumeFrame=function(){function e(e){if(this.streamIds=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.streamIds=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.streamIds&&e.streamIds.length)for(var i=0;i<e.streamIds.length;++i)t.uint32(8).uint32(e.streamIds[i]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkPauseResumeFrame;e.pos<i;){var r=e.uint32();if(r>>>3==1)if(n.streamIds&&n.streamIds.length||(n.streamIds=[]),2==(7&r))for(var o=e.uint32()+e.pos;e.pos<o;)n.streamIds.push(e.uint32());else n.streamIds.push(e.uint32());else e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.streamIds&&e.hasOwnProperty("streamIds")){if(!Array.isArray(e.streamIds))return"streamIds: array expected";for(var t=0;t<e.streamIds.length;++t)if(!l.isInteger(e.streamIds[t]))return"streamIds: integer[] expected"}return null},e.fromObject=function(e){if(e instanceof c.SdkPauseResumeFrame)return e;var t=new c.SdkPauseResumeFrame;if(e.streamIds){if(!Array.isArray(e.streamIds))throw TypeError(".SdkPauseResumeFrame.streamIds: array expected");t.streamIds=[];for(var i=0;i<e.streamIds.length;++i)t.streamIds[i]=e.streamIds[i]>>>0}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streamIds=[]),e.streamIds&&e.streamIds.length){i.streamIds=[];for(var n=0;n<e.streamIds.length;++n)i.streamIds[n]=e.streamIds[n]}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkBitrateFrame=function(){function e(e){if(this.bitrates=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.bitrates=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.bitrates&&e.bitrates.length)for(var i=0;i<e.bitrates.length;++i)c.SdkBitrate.encode(e.bitrates[i],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkBitrateFrame;e.pos<i;){var r=e.uint32();r>>>3==1?(n.bitrates&&n.bitrates.length||(n.bitrates=[]),n.bitrates.push(c.SdkBitrate.decode(e,e.uint32()))):e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.bitrates&&e.hasOwnProperty("bitrates")){if(!Array.isArray(e.bitrates))return"bitrates: array expected";for(var t=0;t<e.bitrates.length;++t){var i=c.SdkBitrate.verify(e.bitrates[t]);if(i)return"bitrates."+i}}return null},e.fromObject=function(e){if(e instanceof c.SdkBitrateFrame)return e;var t=new c.SdkBitrateFrame;if(e.bitrates){if(!Array.isArray(e.bitrates))throw TypeError(".SdkBitrateFrame.bitrates: array expected");t.bitrates=[];for(var i=0;i<e.bitrates.length;++i){if("object"!=typeof e.bitrates[i])throw TypeError(".SdkBitrateFrame.bitrates: object expected");t.bitrates[i]=c.SdkBitrate.fromObject(e.bitrates[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.bitrates=[]),e.bitrates&&e.bitrates.length){i.bitrates=[];for(var n=0;n<e.bitrates.length;++n)i.bitrates[n]=c.SdkBitrate.toObject(e.bitrates[n],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkStreamDescriptor=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.streamId=0,e.prototype.framerate=0,e.prototype.maxBitrateKbps=0,e.prototype.trackLabel="",e.prototype.groupId=0,e.prototype.avgBitrateBps=0,e.prototype.attendeeId="",e.prototype.mediaType=1,e.prototype.externalUserId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.streamId&&e.hasOwnProperty("streamId")&&t.uint32(8).uint32(e.streamId),null!=e.framerate&&e.hasOwnProperty("framerate")&&t.uint32(16).uint32(e.framerate),null!=e.maxBitrateKbps&&e.hasOwnProperty("maxBitrateKbps")&&t.uint32(24).uint32(e.maxBitrateKbps),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&t.uint32(34).string(e.trackLabel),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(48).uint32(e.groupId),null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&t.uint32(56).uint32(e.avgBitrateBps),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&t.uint32(66).string(e.attendeeId),null!=e.mediaType&&e.hasOwnProperty("mediaType")&&t.uint32(72).int32(e.mediaType),null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&t.uint32(82).string(e.externalUserId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkStreamDescriptor;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.streamId=e.uint32();break;case 2:n.framerate=e.uint32();break;case 3:n.maxBitrateKbps=e.uint32();break;case 4:n.trackLabel=e.string();break;case 6:n.groupId=e.uint32();break;case 7:n.avgBitrateBps=e.uint32();break;case 8:n.attendeeId=e.string();break;case 9:n.mediaType=e.int32();break;case 10:n.externalUserId=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.streamId&&e.hasOwnProperty("streamId")&&!l.isInteger(e.streamId))return"streamId: integer expected";if(null!=e.framerate&&e.hasOwnProperty("framerate")&&!l.isInteger(e.framerate))return"framerate: integer expected";if(null!=e.maxBitrateKbps&&e.hasOwnProperty("maxBitrateKbps")&&!l.isInteger(e.maxBitrateKbps))return"maxBitrateKbps: integer expected";if(null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&!l.isString(e.trackLabel))return"trackLabel: string expected";if(null!=e.groupId&&e.hasOwnProperty("groupId")&&!l.isInteger(e.groupId))return"groupId: integer expected";if(null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&!l.isInteger(e.avgBitrateBps))return"avgBitrateBps: integer expected";if(null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&!l.isString(e.attendeeId))return"attendeeId: string expected";if(null!=e.mediaType&&e.hasOwnProperty("mediaType"))switch(e.mediaType){default:return"mediaType: enum value expected";case 1:case 2:}return null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&!l.isString(e.externalUserId)?"externalUserId: string expected":null},e.fromObject=function(e){if(e instanceof c.SdkStreamDescriptor)return e;var t=new c.SdkStreamDescriptor;switch(null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.framerate&&(t.framerate=e.framerate>>>0),null!=e.maxBitrateKbps&&(t.maxBitrateKbps=e.maxBitrateKbps>>>0),null!=e.trackLabel&&(t.trackLabel=String(e.trackLabel)),null!=e.groupId&&(t.groupId=e.groupId>>>0),null!=e.avgBitrateBps&&(t.avgBitrateBps=e.avgBitrateBps>>>0),null!=e.attendeeId&&(t.attendeeId=String(e.attendeeId)),e.mediaType){case"AUDIO":case 1:t.mediaType=1;break;case"VIDEO":case 2:t.mediaType=2}return null!=e.externalUserId&&(t.externalUserId=String(e.externalUserId)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.framerate=0,i.maxBitrateKbps=0,i.trackLabel="",i.groupId=0,i.avgBitrateBps=0,i.attendeeId="",i.mediaType=t.enums===String?"AUDIO":1,i.externalUserId=""),null!=e.streamId&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),null!=e.framerate&&e.hasOwnProperty("framerate")&&(i.framerate=e.framerate),null!=e.maxBitrateKbps&&e.hasOwnProperty("maxBitrateKbps")&&(i.maxBitrateKbps=e.maxBitrateKbps),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),null!=e.groupId&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),null!=e.mediaType&&e.hasOwnProperty("mediaType")&&(i.mediaType=t.enums===String?c.SdkStreamMediaType[e.mediaType]:e.mediaType),null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkStreamAllocation=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.trackLabel="",e.prototype.streamId=0,e.prototype.groupId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&t.uint32(10).string(e.trackLabel),null!=e.streamId&&e.hasOwnProperty("streamId")&&t.uint32(16).uint32(e.streamId),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(24).uint32(e.groupId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkStreamAllocation;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.trackLabel=e.string();break;case 2:n.streamId=e.uint32();break;case 3:n.groupId=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&!l.isString(e.trackLabel)?"trackLabel: string expected":null!=e.streamId&&e.hasOwnProperty("streamId")&&!l.isInteger(e.streamId)?"streamId: integer expected":null!=e.groupId&&e.hasOwnProperty("groupId")&&!l.isInteger(e.groupId)?"groupId: integer expected":null},e.fromObject=function(e){if(e instanceof c.SdkStreamAllocation)return e;var t=new c.SdkStreamAllocation;return null!=e.trackLabel&&(t.trackLabel=String(e.trackLabel)),null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.groupId&&(t.groupId=e.groupId>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.trackLabel="",i.streamId=0,i.groupId=0),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),null!=e.streamId&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),null!=e.groupId&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkTrackMapping=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.streamId=0,e.prototype.ssrc=0,e.prototype.trackLabel="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.streamId&&e.hasOwnProperty("streamId")&&t.uint32(8).uint32(e.streamId),null!=e.ssrc&&e.hasOwnProperty("ssrc")&&t.uint32(16).uint32(e.ssrc),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&t.uint32(26).string(e.trackLabel),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkTrackMapping;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.streamId=e.uint32();break;case 2:n.ssrc=e.uint32();break;case 3:n.trackLabel=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.streamId&&e.hasOwnProperty("streamId")&&!l.isInteger(e.streamId)?"streamId: integer expected":null!=e.ssrc&&e.hasOwnProperty("ssrc")&&!l.isInteger(e.ssrc)?"ssrc: integer expected":null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&!l.isString(e.trackLabel)?"trackLabel: string expected":null},e.fromObject=function(e){if(e instanceof c.SdkTrackMapping)return e;var t=new c.SdkTrackMapping;return null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.ssrc&&(t.ssrc=e.ssrc>>>0),null!=e.trackLabel&&(t.trackLabel=String(e.trackLabel)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.streamId=0,i.ssrc=0,i.trackLabel=""),null!=e.streamId&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),null!=e.ssrc&&e.hasOwnProperty("ssrc")&&(i.ssrc=e.ssrc),null!=e.trackLabel&&e.hasOwnProperty("trackLabel")&&(i.trackLabel=e.trackLabel),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkBitrate=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.sourceStreamId=0,e.prototype.avgBitrateBps=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.sourceStreamId&&e.hasOwnProperty("sourceStreamId")&&t.uint32(8).uint32(e.sourceStreamId),null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&t.uint32(16).uint32(e.avgBitrateBps),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkBitrate;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.sourceStreamId=e.uint32();break;case 2:n.avgBitrateBps=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.sourceStreamId&&e.hasOwnProperty("sourceStreamId")&&!l.isInteger(e.sourceStreamId)?"sourceStreamId: integer expected":null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&!l.isInteger(e.avgBitrateBps)?"avgBitrateBps: integer expected":null},e.fromObject=function(e){if(e instanceof c.SdkBitrate)return e;var t=new c.SdkBitrate;return null!=e.sourceStreamId&&(t.sourceStreamId=e.sourceStreamId>>>0),null!=e.avgBitrateBps&&(t.avgBitrateBps=e.avgBitrateBps>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.sourceStreamId=0,i.avgBitrateBps=0),null!=e.sourceStreamId&&e.hasOwnProperty("sourceStreamId")&&(i.sourceStreamId=e.sourceStreamId),null!=e.avgBitrateBps&&e.hasOwnProperty("avgBitrateBps")&&(i.avgBitrateBps=e.avgBitrateBps),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkAudioControlFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.muted=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.muted&&e.hasOwnProperty("muted")&&t.uint32(8).bool(e.muted),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkAudioControlFrame;e.pos<i;){var r=e.uint32();r>>>3==1?n.muted=e.bool():e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.muted&&e.hasOwnProperty("muted")&&"boolean"!=typeof e.muted?"muted: boolean expected":null},e.fromObject=function(e){if(e instanceof c.SdkAudioControlFrame)return e;var t=new c.SdkAudioControlFrame;return null!=e.muted&&(t.muted=Boolean(e.muted)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.muted=!1),null!=e.muted&&e.hasOwnProperty("muted")&&(i.muted=e.muted),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkAudioMetadataFrame=function(){function e(e){if(this.attendeeStates=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.attendeeStates=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.attendeeStates&&e.attendeeStates.length)for(var i=0;i<e.attendeeStates.length;++i)c.SdkAudioAttendeeState.encode(e.attendeeStates[i],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkAudioMetadataFrame;e.pos<i;){var r=e.uint32();r>>>3==1?(n.attendeeStates&&n.attendeeStates.length||(n.attendeeStates=[]),n.attendeeStates.push(c.SdkAudioAttendeeState.decode(e,e.uint32()))):e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.attendeeStates&&e.hasOwnProperty("attendeeStates")){if(!Array.isArray(e.attendeeStates))return"attendeeStates: array expected";for(var t=0;t<e.attendeeStates.length;++t){var i=c.SdkAudioAttendeeState.verify(e.attendeeStates[t]);if(i)return"attendeeStates."+i}}return null},e.fromObject=function(e){if(e instanceof c.SdkAudioMetadataFrame)return e;var t=new c.SdkAudioMetadataFrame;if(e.attendeeStates){if(!Array.isArray(e.attendeeStates))throw TypeError(".SdkAudioMetadataFrame.attendeeStates: array expected");t.attendeeStates=[];for(var i=0;i<e.attendeeStates.length;++i){if("object"!=typeof e.attendeeStates[i])throw TypeError(".SdkAudioMetadataFrame.attendeeStates: object expected");t.attendeeStates[i]=c.SdkAudioAttendeeState.fromObject(e.attendeeStates[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.attendeeStates=[]),e.attendeeStates&&e.attendeeStates.length){i.attendeeStates=[];for(var n=0;n<e.attendeeStates.length;++n)i.attendeeStates[n]=c.SdkAudioAttendeeState.toObject(e.attendeeStates[n],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkAudioAttendeeState=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.audioStreamId=0,e.prototype.volume=0,e.prototype.muted=!1,e.prototype.signalStrength=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),null!=e.volume&&e.hasOwnProperty("volume")&&t.uint32(16).uint32(e.volume),null!=e.muted&&e.hasOwnProperty("muted")&&t.uint32(24).bool(e.muted),null!=e.signalStrength&&e.hasOwnProperty("signalStrength")&&t.uint32(32).uint32(e.signalStrength),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkAudioAttendeeState;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.audioStreamId=e.uint32();break;case 2:n.volume=e.uint32();break;case 3:n.muted=e.bool();break;case 4:n.signalStrength=e.uint32();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&!l.isInteger(e.audioStreamId)?"audioStreamId: integer expected":null!=e.volume&&e.hasOwnProperty("volume")&&!l.isInteger(e.volume)?"volume: integer expected":null!=e.muted&&e.hasOwnProperty("muted")&&"boolean"!=typeof e.muted?"muted: boolean expected":null!=e.signalStrength&&e.hasOwnProperty("signalStrength")&&!l.isInteger(e.signalStrength)?"signalStrength: integer expected":null},e.fromObject=function(e){if(e instanceof c.SdkAudioAttendeeState)return e;var t=new c.SdkAudioAttendeeState;return null!=e.audioStreamId&&(t.audioStreamId=e.audioStreamId>>>0),null!=e.volume&&(t.volume=e.volume>>>0),null!=e.muted&&(t.muted=Boolean(e.muted)),null!=e.signalStrength&&(t.signalStrength=e.signalStrength>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.volume=0,i.muted=!1,i.signalStrength=0),null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),null!=e.volume&&e.hasOwnProperty("volume")&&(i.volume=e.volume),null!=e.muted&&e.hasOwnProperty("muted")&&(i.muted=e.muted),null!=e.signalStrength&&e.hasOwnProperty("signalStrength")&&(i.signalStrength=e.signalStrength),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkAudioStreamIdInfoFrame=function(){function e(e){if(this.streams=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.streams=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.streams&&e.streams.length)for(var i=0;i<e.streams.length;++i)c.SdkAudioStreamIdInfo.encode(e.streams[i],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkAudioStreamIdInfoFrame;e.pos<i;){var r=e.uint32();r>>>3==1?(n.streams&&n.streams.length||(n.streams=[]),n.streams.push(c.SdkAudioStreamIdInfo.decode(e,e.uint32()))):e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.streams&&e.hasOwnProperty("streams")){if(!Array.isArray(e.streams))return"streams: array expected";for(var t=0;t<e.streams.length;++t){var i=c.SdkAudioStreamIdInfo.verify(e.streams[t]);if(i)return"streams."+i}}return null},e.fromObject=function(e){if(e instanceof c.SdkAudioStreamIdInfoFrame)return e;var t=new c.SdkAudioStreamIdInfoFrame;if(e.streams){if(!Array.isArray(e.streams))throw TypeError(".SdkAudioStreamIdInfoFrame.streams: array expected");t.streams=[];for(var i=0;i<e.streams.length;++i){if("object"!=typeof e.streams[i])throw TypeError(".SdkAudioStreamIdInfoFrame.streams: object expected");t.streams[i]=c.SdkAudioStreamIdInfo.fromObject(e.streams[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.streams=[]),e.streams&&e.streams.length){i.streams=[];for(var n=0;n<e.streams.length;++n)i.streams[n]=c.SdkAudioStreamIdInfo.toObject(e.streams[n],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkAudioStreamIdInfo=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.audioStreamId=0,e.prototype.attendeeId="",e.prototype.muted=!1,e.prototype.externalUserId="",e.prototype.dropped=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&t.uint32(8).uint32(e.audioStreamId),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&t.uint32(18).string(e.attendeeId),null!=e.muted&&e.hasOwnProperty("muted")&&t.uint32(24).bool(e.muted),null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&t.uint32(34).string(e.externalUserId),null!=e.dropped&&e.hasOwnProperty("dropped")&&t.uint32(40).bool(e.dropped),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkAudioStreamIdInfo;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.audioStreamId=e.uint32();break;case 2:n.attendeeId=e.string();break;case 3:n.muted=e.bool();break;case 4:n.externalUserId=e.string();break;case 5:n.dropped=e.bool();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&!l.isInteger(e.audioStreamId)?"audioStreamId: integer expected":null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&!l.isString(e.attendeeId)?"attendeeId: string expected":null!=e.muted&&e.hasOwnProperty("muted")&&"boolean"!=typeof e.muted?"muted: boolean expected":null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&!l.isString(e.externalUserId)?"externalUserId: string expected":null!=e.dropped&&e.hasOwnProperty("dropped")&&"boolean"!=typeof e.dropped?"dropped: boolean expected":null},e.fromObject=function(e){if(e instanceof c.SdkAudioStreamIdInfo)return e;var t=new c.SdkAudioStreamIdInfo;return null!=e.audioStreamId&&(t.audioStreamId=e.audioStreamId>>>0),null!=e.attendeeId&&(t.attendeeId=String(e.attendeeId)),null!=e.muted&&(t.muted=Boolean(e.muted)),null!=e.externalUserId&&(t.externalUserId=String(e.externalUserId)),null!=e.dropped&&(t.dropped=Boolean(e.dropped)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStreamId=0,i.attendeeId="",i.muted=!1,i.externalUserId="",i.dropped=!1),null!=e.audioStreamId&&e.hasOwnProperty("audioStreamId")&&(i.audioStreamId=e.audioStreamId),null!=e.attendeeId&&e.hasOwnProperty("attendeeId")&&(i.attendeeId=e.attendeeId),null!=e.muted&&e.hasOwnProperty("muted")&&(i.muted=e.muted),null!=e.externalUserId&&e.hasOwnProperty("externalUserId")&&(i.externalUserId=e.externalUserId),null!=e.dropped&&e.hasOwnProperty("dropped")&&(i.dropped=e.dropped),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkPingPongType=function(){var e={},t=Object.create(e);return t[e[1]="PING"]=1,t[e[2]="PONG"]=2,t}(),c.SdkPingPongFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.type=1,e.prototype.pingId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),t.uint32(8).int32(e.type),t.uint32(16).uint32(e.pingId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkPingPongFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.type=e.int32();break;case 2:n.pingId=e.uint32();break;default:e.skipType(7&r)}}if(!n.hasOwnProperty("type"))throw l.ProtocolError("missing required 'type'",{instance:n});if(!n.hasOwnProperty("pingId"))throw l.ProtocolError("missing required 'pingId'",{instance:n});return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.type){default:return"type: enum value expected";case 1:case 2:}return l.isInteger(e.pingId)?null:"pingId: integer expected"},e.fromObject=function(e){if(e instanceof c.SdkPingPongFrame)return e;var t=new c.SdkPingPongFrame;switch(e.type){case"PING":case 1:t.type=1;break;case"PONG":case 2:t.type=2}return null!=e.pingId&&(t.pingId=e.pingId>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"PING":1,i.pingId=0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?c.SdkPingPongType[e.type]:e.type),null!=e.pingId&&e.hasOwnProperty("pingId")&&(i.pingId=e.pingId),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkAudioStatusFrame=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.audioStatus=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&t.uint32(8).uint32(e.audioStatus),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkAudioStatusFrame;e.pos<i;){var r=e.uint32();r>>>3==1?n.audioStatus=e.uint32():e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&!l.isInteger(e.audioStatus)?"audioStatus: integer expected":null},e.fromObject=function(e){if(e instanceof c.SdkAudioStatusFrame)return e;var t=new c.SdkAudioStatusFrame;return null!=e.audioStatus&&(t.audioStatus=e.audioStatus>>>0),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.audioStatus=0),null!=e.audioStatus&&e.hasOwnProperty("audioStatus")&&(i.audioStatus=e.audioStatus),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkMetric=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.type=1,e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.type&&e.hasOwnProperty("type")&&t.uint32(8).int32(e.type),null!=e.value&&e.hasOwnProperty("value")&&t.uint32(17).double(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkMetric;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.type=e.int32();break;case 2:n.value=e.double();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 48:case 49:case 64:case 66:case 69:case 72:case 86:case 87:}return null!=e.value&&e.hasOwnProperty("value")&&"number"!=typeof e.value?"value: number expected":null},e.fromObject=function(e){if(e instanceof c.SdkMetric)return e;var t=new c.SdkMetric;switch(e.type){case"VIDEO_ACTUAL_ENCODER_BITRATE":case 1:t.type=1;break;case"VIDEO_AVAILABLE_SEND_BANDWIDTH":case 2:t.type=2;break;case"VIDEO_RETRANSMIT_BITRATE":case 3:t.type=3;break;case"VIDEO_AVAILABLE_RECEIVE_BANDWIDTH":case 4:t.type=4;break;case"VIDEO_TARGET_ENCODER_BITRATE":case 5:t.type=5;break;case"VIDEO_BUCKET_DELAY_MS":case 6:t.type=6;break;case"STUN_RTT_MS":case 7:t.type=7;break;case"SOCKET_DISCARDED_PPS":case 8:t.type=8;break;case"RTC_MIC_JITTER_MS":case 9:t.type=9;break;case"RTC_MIC_PPS":case 10:t.type=10;break;case"RTC_MIC_FRACTION_PACKET_LOST_PERCENT":case 11:t.type=11;break;case"RTC_MIC_BITRATE":case 12:t.type=12;break;case"RTC_MIC_RTT_MS":case 13:t.type=13;break;case"RTC_SPK_PPS":case 14:t.type=14;break;case"RTC_SPK_FRACTION_PACKET_LOST_PERCENT":case 15:t.type=15;break;case"RTC_SPK_JITTER_MS":case 16:t.type=16;break;case"RTC_SPK_FRACTION_DECODER_LOSS_PERCENT":case 17:t.type=17;break;case"RTC_SPK_BITRATE":case 18:t.type=18;break;case"RTC_SPK_CURRENT_DELAY_MS":case 19:t.type=19;break;case"RTC_SPK_JITTER_BUFFER_MS":case 20:t.type=20;break;case"VIDEO_SENT_RTT_MS":case 21:t.type=21;break;case"VIDEO_ENCODE_USAGE_PERCENT":case 22:t.type=22;break;case"VIDEO_NACKS_RECEIVED":case 23:t.type=23;break;case"VIDEO_PLIS_RECEIVED":case 24:t.type=24;break;case"VIDEO_AVERAGE_ENCODE_MS":case 25:t.type=25;break;case"VIDEO_INPUT_FPS":case 26:t.type=26;break;case"VIDEO_ENCODE_FPS":case 27:t.type=27;break;case"VIDEO_SENT_FPS":case 28:t.type=28;break;case"VIDEO_FIRS_RECEIVED":case 29:t.type=29;break;case"VIDEO_SENT_PPS":case 30:t.type=30;break;case"VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT":case 31:t.type=31;break;case"VIDEO_SENT_BITRATE":case 32:t.type=32;break;case"VIDEO_DROPPED_FPS":case 33:t.type=33;break;case"VIDEO_TARGET_DELAY_MS":case 34:t.type=34;break;case"VIDEO_DECODE_MS":case 35:t.type=35;break;case"VIDEO_OUTPUT_FPS":case 36:t.type=36;break;case"VIDEO_RECEIVED_PPS":case 37:t.type=37;break;case"VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT":case 38:t.type=38;break;case"VIDEO_RENDER_DELAY_MS":case 39:t.type=39;break;case"VIDEO_RECEIVED_FPS":case 40:t.type=40;break;case"VIDEO_DECODE_FPS":case 41:t.type=41;break;case"VIDEO_NACKS_SENT":case 42:t.type=42;break;case"VIDEO_FIRS_SENT":case 43:t.type=43;break;case"VIDEO_RECEIVED_BITRATE":case 44:t.type=44;break;case"VIDEO_CURRENT_DELAY_MS":case 45:t.type=45;break;case"VIDEO_JITTER_BUFFER_MS":case 46:t.type=46;break;case"VIDEO_DISCARDED_PPS":case 47:t.type=47;break;case"VIDEO_PLIS_SENT":case 48:t.type=48;break;case"VIDEO_RECEIVED_JITTER_MS":case 49:t.type=49;break;case"VIDEO_ENCODE_HEIGHT":case 64:t.type=64;break;case"VIDEO_SENT_QP_SUM":case 66:t.type=66;break;case"VIDEO_DECODE_HEIGHT":case 69:t.type=69;break;case"VIDEO_RECEIVED_QP_SUM":case 72:t.type=72;break;case"VIDEO_ENCODE_WIDTH":case 86:t.type=86;break;case"VIDEO_DECODE_WIDTH":case 87:t.type=87}return null!=e.value&&(t.value=Number(e.value)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.type=t.enums===String?"VIDEO_ACTUAL_ENCODER_BITRATE":1,i.value=0),null!=e.type&&e.hasOwnProperty("type")&&(i.type=t.enums===String?c.SdkMetric.Type[e.type]:e.type),null!=e.value&&e.hasOwnProperty("value")&&(i.value=t.json&&!isFinite(e.value)?String(e.value):e.value),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[1]="VIDEO_ACTUAL_ENCODER_BITRATE"]=1,t[e[2]="VIDEO_AVAILABLE_SEND_BANDWIDTH"]=2,t[e[3]="VIDEO_RETRANSMIT_BITRATE"]=3,t[e[4]="VIDEO_AVAILABLE_RECEIVE_BANDWIDTH"]=4,t[e[5]="VIDEO_TARGET_ENCODER_BITRATE"]=5,t[e[6]="VIDEO_BUCKET_DELAY_MS"]=6,t[e[7]="STUN_RTT_MS"]=7,t[e[8]="SOCKET_DISCARDED_PPS"]=8,t[e[9]="RTC_MIC_JITTER_MS"]=9,t[e[10]="RTC_MIC_PPS"]=10,t[e[11]="RTC_MIC_FRACTION_PACKET_LOST_PERCENT"]=11,t[e[12]="RTC_MIC_BITRATE"]=12,t[e[13]="RTC_MIC_RTT_MS"]=13,t[e[14]="RTC_SPK_PPS"]=14,t[e[15]="RTC_SPK_FRACTION_PACKET_LOST_PERCENT"]=15,t[e[16]="RTC_SPK_JITTER_MS"]=16,t[e[17]="RTC_SPK_FRACTION_DECODER_LOSS_PERCENT"]=17,t[e[18]="RTC_SPK_BITRATE"]=18,t[e[19]="RTC_SPK_CURRENT_DELAY_MS"]=19,t[e[20]="RTC_SPK_JITTER_BUFFER_MS"]=20,t[e[21]="VIDEO_SENT_RTT_MS"]=21,t[e[22]="VIDEO_ENCODE_USAGE_PERCENT"]=22,t[e[23]="VIDEO_NACKS_RECEIVED"]=23,t[e[24]="VIDEO_PLIS_RECEIVED"]=24,t[e[25]="VIDEO_AVERAGE_ENCODE_MS"]=25,t[e[26]="VIDEO_INPUT_FPS"]=26,t[e[27]="VIDEO_ENCODE_FPS"]=27,t[e[28]="VIDEO_SENT_FPS"]=28,t[e[29]="VIDEO_FIRS_RECEIVED"]=29,t[e[30]="VIDEO_SENT_PPS"]=30,t[e[31]="VIDEO_SENT_FRACTION_PACKET_LOST_PERCENT"]=31,t[e[32]="VIDEO_SENT_BITRATE"]=32,t[e[33]="VIDEO_DROPPED_FPS"]=33,t[e[34]="VIDEO_TARGET_DELAY_MS"]=34,t[e[35]="VIDEO_DECODE_MS"]=35,t[e[36]="VIDEO_OUTPUT_FPS"]=36,t[e[37]="VIDEO_RECEIVED_PPS"]=37,t[e[38]="VIDEO_RECEIVED_FRACTION_PACKET_LOST_PERCENT"]=38,t[e[39]="VIDEO_RENDER_DELAY_MS"]=39,t[e[40]="VIDEO_RECEIVED_FPS"]=40,t[e[41]="VIDEO_DECODE_FPS"]=41,t[e[42]="VIDEO_NACKS_SENT"]=42,t[e[43]="VIDEO_FIRS_SENT"]=43,t[e[44]="VIDEO_RECEIVED_BITRATE"]=44,t[e[45]="VIDEO_CURRENT_DELAY_MS"]=45,t[e[46]="VIDEO_JITTER_BUFFER_MS"]=46,t[e[47]="VIDEO_DISCARDED_PPS"]=47,t[e[48]="VIDEO_PLIS_SENT"]=48,t[e[49]="VIDEO_RECEIVED_JITTER_MS"]=49,t[e[64]="VIDEO_ENCODE_HEIGHT"]=64,t[e[66]="VIDEO_SENT_QP_SUM"]=66,t[e[69]="VIDEO_DECODE_HEIGHT"]=69,t[e[72]="VIDEO_RECEIVED_QP_SUM"]=72,t[e[86]="VIDEO_ENCODE_WIDTH"]=86,t[e[87]="VIDEO_DECODE_WIDTH"]=87,t}(),e}(),c.SdkStreamMetricFrame=function(){function e(e){if(this.metrics=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.streamId=0,e.prototype.groupId=0,e.prototype.metrics=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.streamId&&e.hasOwnProperty("streamId")&&t.uint32(24).uint32(e.streamId),null!=e.groupId&&e.hasOwnProperty("groupId")&&t.uint32(32).uint32(e.groupId),null!=e.metrics&&e.metrics.length)for(var i=0;i<e.metrics.length;++i)c.SdkMetric.encode(e.metrics[i],t.uint32(42).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkStreamMetricFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 3:n.streamId=e.uint32();break;case 4:n.groupId=e.uint32();break;case 5:n.metrics&&n.metrics.length||(n.metrics=[]),n.metrics.push(c.SdkMetric.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.streamId&&e.hasOwnProperty("streamId")&&!l.isInteger(e.streamId))return"streamId: integer expected";if(null!=e.groupId&&e.hasOwnProperty("groupId")&&!l.isInteger(e.groupId))return"groupId: integer expected";if(null!=e.metrics&&e.hasOwnProperty("metrics")){if(!Array.isArray(e.metrics))return"metrics: array expected";for(var t=0;t<e.metrics.length;++t){var i=c.SdkMetric.verify(e.metrics[t]);if(i)return"metrics."+i}}return null},e.fromObject=function(e){if(e instanceof c.SdkStreamMetricFrame)return e;var t=new c.SdkStreamMetricFrame;if(null!=e.streamId&&(t.streamId=e.streamId>>>0),null!=e.groupId&&(t.groupId=e.groupId>>>0),e.metrics){if(!Array.isArray(e.metrics))throw TypeError(".SdkStreamMetricFrame.metrics: array expected");t.metrics=[];for(var i=0;i<e.metrics.length;++i){if("object"!=typeof e.metrics[i])throw TypeError(".SdkStreamMetricFrame.metrics: object expected");t.metrics[i]=c.SdkMetric.fromObject(e.metrics[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.metrics=[]),t.defaults&&(i.streamId=0,i.groupId=0),null!=e.streamId&&e.hasOwnProperty("streamId")&&(i.streamId=e.streamId),null!=e.groupId&&e.hasOwnProperty("groupId")&&(i.groupId=e.groupId),e.metrics&&e.metrics.length){i.metrics=[];for(var n=0;n<e.metrics.length;++n)i.metrics[n]=c.SdkMetric.toObject(e.metrics[n],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkClientMetricFrame=function(){function e(e){if(this.globalMetrics=[],this.streamMetricFrames=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.globalMetrics=l.emptyArray,e.prototype.streamMetricFrames=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.globalMetrics&&e.globalMetrics.length)for(var i=0;i<e.globalMetrics.length;++i)c.SdkMetric.encode(e.globalMetrics[i],t.uint32(10).fork()).ldelim();if(null!=e.streamMetricFrames&&e.streamMetricFrames.length)for(i=0;i<e.streamMetricFrames.length;++i)c.SdkStreamMetricFrame.encode(e.streamMetricFrames[i],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkClientMetricFrame;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.globalMetrics&&n.globalMetrics.length||(n.globalMetrics=[]),n.globalMetrics.push(c.SdkMetric.decode(e,e.uint32()));break;case 2:n.streamMetricFrames&&n.streamMetricFrames.length||(n.streamMetricFrames=[]),n.streamMetricFrames.push(c.SdkStreamMetricFrame.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.globalMetrics&&e.hasOwnProperty("globalMetrics")){if(!Array.isArray(e.globalMetrics))return"globalMetrics: array expected";for(var t=0;t<e.globalMetrics.length;++t)if(i=c.SdkMetric.verify(e.globalMetrics[t]))return"globalMetrics."+i}if(null!=e.streamMetricFrames&&e.hasOwnProperty("streamMetricFrames")){if(!Array.isArray(e.streamMetricFrames))return"streamMetricFrames: array expected";for(t=0;t<e.streamMetricFrames.length;++t){var i;if(i=c.SdkStreamMetricFrame.verify(e.streamMetricFrames[t]))return"streamMetricFrames."+i}}return null},e.fromObject=function(e){if(e instanceof c.SdkClientMetricFrame)return e;var t=new c.SdkClientMetricFrame;if(e.globalMetrics){if(!Array.isArray(e.globalMetrics))throw TypeError(".SdkClientMetricFrame.globalMetrics: array expected");t.globalMetrics=[];for(var i=0;i<e.globalMetrics.length;++i){if("object"!=typeof e.globalMetrics[i])throw TypeError(".SdkClientMetricFrame.globalMetrics: object expected");t.globalMetrics[i]=c.SdkMetric.fromObject(e.globalMetrics[i])}}if(e.streamMetricFrames){if(!Array.isArray(e.streamMetricFrames))throw TypeError(".SdkClientMetricFrame.streamMetricFrames: array expected");for(t.streamMetricFrames=[],i=0;i<e.streamMetricFrames.length;++i){if("object"!=typeof e.streamMetricFrames[i])throw TypeError(".SdkClientMetricFrame.streamMetricFrames: object expected");t.streamMetricFrames[i]=c.SdkStreamMetricFrame.fromObject(e.streamMetricFrames[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.globalMetrics=[],i.streamMetricFrames=[]),e.globalMetrics&&e.globalMetrics.length){i.globalMetrics=[];for(var n=0;n<e.globalMetrics.length;++n)i.globalMetrics[n]=c.SdkMetric.toObject(e.globalMetrics[n],t)}if(e.streamMetricFrames&&e.streamMetricFrames.length)for(i.streamMetricFrames=[],n=0;n<e.streamMetricFrames.length;++n)i.streamMetricFrames[n]=c.SdkStreamMetricFrame.toObject(e.streamMetricFrames[n],t);return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkDataMessageFrame=function(){function e(e){if(this.messages=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.messages=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.messages&&e.messages.length)for(var i=0;i<e.messages.length;++i)c.SdkDataMessagePayload.encode(e.messages[i],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkDataMessageFrame;e.pos<i;){var r=e.uint32();r>>>3==1?(n.messages&&n.messages.length||(n.messages=[]),n.messages.push(c.SdkDataMessagePayload.decode(e,e.uint32()))):e.skipType(7&r)}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.messages&&e.hasOwnProperty("messages")){if(!Array.isArray(e.messages))return"messages: array expected";for(var t=0;t<e.messages.length;++t){var i=c.SdkDataMessagePayload.verify(e.messages[t]);if(i)return"messages."+i}}return null},e.fromObject=function(e){if(e instanceof c.SdkDataMessageFrame)return e;var t=new c.SdkDataMessageFrame;if(e.messages){if(!Array.isArray(e.messages))throw TypeError(".SdkDataMessageFrame.messages: array expected");t.messages=[];for(var i=0;i<e.messages.length;++i){if("object"!=typeof e.messages[i])throw TypeError(".SdkDataMessageFrame.messages: object expected");t.messages[i]=c.SdkDataMessagePayload.fromObject(e.messages[i])}}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.messages=[]),e.messages&&e.messages.length){i.messages=[];for(var n=0;n<e.messages.length;++n)i.messages[n]=c.SdkDataMessagePayload.toObject(e.messages[n],t)}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkDataMessagePayload=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.topic="",e.prototype.data=l.newBuffer([]),e.prototype.lifetimeMs=0,e.prototype.senderAttendeeId="",e.prototype.ingestTimeNs=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.senderExternalUserId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.topic&&e.hasOwnProperty("topic")&&t.uint32(10).string(e.topic),null!=e.data&&e.hasOwnProperty("data")&&t.uint32(18).bytes(e.data),null!=e.lifetimeMs&&e.hasOwnProperty("lifetimeMs")&&t.uint32(24).uint32(e.lifetimeMs),null!=e.senderAttendeeId&&e.hasOwnProperty("senderAttendeeId")&&t.uint32(34).string(e.senderAttendeeId),null!=e.ingestTimeNs&&e.hasOwnProperty("ingestTimeNs")&&t.uint32(40).int64(e.ingestTimeNs),null!=e.senderExternalUserId&&e.hasOwnProperty("senderExternalUserId")&&t.uint32(50).string(e.senderExternalUserId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkDataMessagePayload;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.topic=e.string();break;case 2:n.data=e.bytes();break;case 3:n.lifetimeMs=e.uint32();break;case 4:n.senderAttendeeId=e.string();break;case 5:n.ingestTimeNs=e.int64();break;case 6:n.senderExternalUserId=e.string();break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.topic&&e.hasOwnProperty("topic")&&!l.isString(e.topic)?"topic: string expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"==typeof e.data.length||l.isString(e.data))?"data: buffer expected":null!=e.lifetimeMs&&e.hasOwnProperty("lifetimeMs")&&!l.isInteger(e.lifetimeMs)?"lifetimeMs: integer expected":null!=e.senderAttendeeId&&e.hasOwnProperty("senderAttendeeId")&&!l.isString(e.senderAttendeeId)?"senderAttendeeId: string expected":null!=e.ingestTimeNs&&e.hasOwnProperty("ingestTimeNs")&&!(l.isInteger(e.ingestTimeNs)||e.ingestTimeNs&&l.isInteger(e.ingestTimeNs.low)&&l.isInteger(e.ingestTimeNs.high))?"ingestTimeNs: integer|Long expected":null!=e.senderExternalUserId&&e.hasOwnProperty("senderExternalUserId")&&!l.isString(e.senderExternalUserId)?"senderExternalUserId: string expected":null},e.fromObject=function(e){if(e instanceof c.SdkDataMessagePayload)return e;var t=new c.SdkDataMessagePayload;return null!=e.topic&&(t.topic=String(e.topic)),null!=e.data&&("string"==typeof e.data?l.base64.decode(e.data,t.data=l.newBuffer(l.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.lifetimeMs&&(t.lifetimeMs=e.lifetimeMs>>>0),null!=e.senderAttendeeId&&(t.senderAttendeeId=String(e.senderAttendeeId)),null!=e.ingestTimeNs&&(l.Long?(t.ingestTimeNs=l.Long.fromValue(e.ingestTimeNs)).unsigned=!1:"string"==typeof e.ingestTimeNs?t.ingestTimeNs=parseInt(e.ingestTimeNs,10):"number"==typeof e.ingestTimeNs?t.ingestTimeNs=e.ingestTimeNs:"object"==typeof e.ingestTimeNs&&(t.ingestTimeNs=new l.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber())),null!=e.senderExternalUserId&&(t.senderExternalUserId=String(e.senderExternalUserId)),t},e.toObject=function(e,t){t||(t={});var i={};if(t.defaults){if(i.topic="",t.bytes===String?i.data="":(i.data=[],t.bytes!==Array&&(i.data=l.newBuffer(i.data))),i.lifetimeMs=0,i.senderAttendeeId="",l.Long){var n=new l.Long(0,0,!1);i.ingestTimeNs=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else i.ingestTimeNs=t.longs===String?"0":0;i.senderExternalUserId=""}return null!=e.topic&&e.hasOwnProperty("topic")&&(i.topic=e.topic),null!=e.data&&e.hasOwnProperty("data")&&(i.data=t.bytes===String?l.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.lifetimeMs&&e.hasOwnProperty("lifetimeMs")&&(i.lifetimeMs=e.lifetimeMs),null!=e.senderAttendeeId&&e.hasOwnProperty("senderAttendeeId")&&(i.senderAttendeeId=e.senderAttendeeId),null!=e.ingestTimeNs&&e.hasOwnProperty("ingestTimeNs")&&("number"==typeof e.ingestTimeNs?i.ingestTimeNs=t.longs===String?String(e.ingestTimeNs):e.ingestTimeNs:i.ingestTimeNs=t.longs===String?l.Long.prototype.toString.call(e.ingestTimeNs):t.longs===Number?new l.LongBits(e.ingestTimeNs.low>>>0,e.ingestTimeNs.high>>>0).toNumber():e.ingestTimeNs),null!=e.senderExternalUserId&&e.hasOwnProperty("senderExternalUserId")&&(i.senderExternalUserId=e.senderExternalUserId),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),c.SdkTurnCredentials=function(){function e(e){if(this.uris=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.username="",e.prototype.password="",e.prototype.ttl=0,e.prototype.uris=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.username&&e.hasOwnProperty("username")&&t.uint32(10).string(e.username),null!=e.password&&e.hasOwnProperty("password")&&t.uint32(18).string(e.password),null!=e.ttl&&e.hasOwnProperty("ttl")&&t.uint32(24).uint32(e.ttl),null!=e.uris&&e.uris.length)for(var i=0;i<e.uris.length;++i)t.uint32(34).string(e.uris[i]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof s||(e=s.create(e));for(var i=void 0===t?e.len:e.pos+t,n=new c.SdkTurnCredentials;e.pos<i;){var r=e.uint32();switch(r>>>3){case 1:n.username=e.string();break;case 2:n.password=e.string();break;case 3:n.ttl=e.uint32();break;case 4:n.uris&&n.uris.length||(n.uris=[]),n.uris.push(e.string());break;default:e.skipType(7&r)}}return n},e.decodeDelimited=function(e){return e instanceof s||(e=new s(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.username&&e.hasOwnProperty("username")&&!l.isString(e.username))return"username: string expected";if(null!=e.password&&e.hasOwnProperty("password")&&!l.isString(e.password))return"password: string expected";if(null!=e.ttl&&e.hasOwnProperty("ttl")&&!l.isInteger(e.ttl))return"ttl: integer expected";if(null!=e.uris&&e.hasOwnProperty("uris")){if(!Array.isArray(e.uris))return"uris: array expected";for(var t=0;t<e.uris.length;++t)if(!l.isString(e.uris[t]))return"uris: string[] expected"}return null},e.fromObject=function(e){if(e instanceof c.SdkTurnCredentials)return e;var t=new c.SdkTurnCredentials;if(null!=e.username&&(t.username=String(e.username)),null!=e.password&&(t.password=String(e.password)),null!=e.ttl&&(t.ttl=e.ttl>>>0),e.uris){if(!Array.isArray(e.uris))throw TypeError(".SdkTurnCredentials.uris: array expected");t.uris=[];for(var i=0;i<e.uris.length;++i)t.uris[i]=String(e.uris[i])}return t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.uris=[]),t.defaults&&(i.username="",i.password="",i.ttl=0),null!=e.username&&e.hasOwnProperty("username")&&(i.username=e.username),null!=e.password&&e.hasOwnProperty("password")&&(i.password=e.password),null!=e.ttl&&e.hasOwnProperty("ttl")&&(i.ttl=e.ttl),e.uris&&e.uris.length){i.uris=[];for(var n=0;n<e.uris.length;++n)i.uris[n]=e.uris[n]}return i},e.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},e}(),e.exports=c},334:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(4046);t.default=class{constructor(e,t){this.chimeClient=e,this.awsClient=t}makeTwoDigits(e){return e>9?e.toString():"0"+e.toString()}getDateTimeString(){const e=new Date;return e.getUTCFullYear()+this.makeTwoDigits(e.getUTCMonth()+1)+this.makeTwoDigits(e.getUTCDate())+"T"+this.makeTwoDigits(e.getUTCHours())+this.makeTwoDigits(e.getUTCMinutes())+this.makeTwoDigits(e.getUTCSeconds())+"Z"}getDateString(e){return e.substring(0,e.indexOf("T"))}getSignatureKey(e,t,i,n){const r=this.awsClient.util.crypto.hmac("AWS4"+e,t,"buffer"),o=this.awsClient.util.crypto.hmac(r,i,"buffer"),s=this.awsClient.util.crypto.hmac(o,n,"buffer");return this.awsClient.util.crypto.hmac(s,"aws4_request","buffer")}signURL(e,t,i,r,o,s,a){const l=this.getDateTimeString(),c=this.getDateString(l),u=this.chimeClient.config.region,d="host:"+r.toLowerCase()+"\n",h=c+"/"+u+"/"+i+"/aws4_request",f=this.chimeClient.config.credentials;let p=new Map;p.set("X-Amz-Algorithm",["AWS4-HMAC-SHA256"]),p.set("X-Amz-Credential",[encodeURIComponent(f.accessKeyId+"/"+h)]),p.set("X-Amz-Date",[l]),p.set("X-Amz-Expires",["10"]),p.set("X-Amz-SignedHeaders",["host"]),f.sessionToken&&p.set("X-Amz-Security-Token",[encodeURIComponent(f.sessionToken)]),p.set(n.default.X_AMZN_VERSION,[encodeURIComponent(n.default.sdkVersion)]),p.set(n.default.X_AMZN_USER_AGENT,[encodeURIComponent(n.default.sdkUserAgentLowResolution)]),null==a||a.forEach(((e,t)=>{const i=encodeURIComponent(t);e.sort().forEach((e=>{p.has(i)||p.set(i,[]),p.get(i).push(encodeURIComponent(e))}))}));let m="";p=new Map([...p.entries()].sort()),p.forEach(((e,t)=>{e.forEach((e=>{m.length&&(m+="&"),m+=t+"="+e}))}));const g=e+"\n"+o+"\n"+m+"\n"+d+"\nhost\n"+this.awsClient.util.crypto.sha256(s,"hex"),v="AWS4-HMAC-SHA256\n"+l+"\n"+c+"/"+u+"/"+i+"/aws4_request\n"+this.awsClient.util.crypto.sha256(g,"hex"),b=this.getSignatureKey(f.secretAccessKey,c,u,i),S=this.awsClient.util.crypto.hmac(b,v,"hex");return t+"://"+r+o+"?"+m+"&X-Amz-Signature="+S}}},7606:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SimulcastLayers=void 0,function(e){e[e.Low=0]="Low",e[e.LowAndMedium=1]="LowAndMedium",e[e.LowAndHigh=2]="LowAndHigh",e[e.Medium=3]="Medium",e[e.MediumAndHigh=4]="MediumAndHigh",e[e.High=5]="High"}(i=t.SimulcastLayers||(t.SimulcastLayers={})),t.default=i},9880:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.AudioLogEvent=void 0,function(e){e[e.DeviceChanged=0]="DeviceChanged",e[e.MutedLocal=1]="MutedLocal",e[e.UnmutedLocal=2]="UnmutedLocal",e[e.Connected=3]="Connected",e[e.ConnectFailed=4]="ConnectFailed",e[e.RedmicStartLoss=5]="RedmicStartLoss",e[e.RedmicEndLoss=6]="RedmicEndLoss"}(i=t.AudioLogEvent||(t.AudioLogEvent={})),t.default=i},9636:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(6196),r=i(9496),o=i(6893),s=i(2811),a=i(7086),l=i(7604),c=i(1296),u=i(3922),d=i(289),h=i(9880),f=i(155);class p{constructor(e,t,i,n=p.INTERVAL_MS){this.audioVideoController=e,this.logger=t,this.browserBehavior=i,this.interval=n,this.intervalScheduler=null,this.metricsAddTime=(e,t,i)=>{},this.metricsLogEvent=(e,t)=>{}}toAttribute(e){return this.toSuffix(e).substring(1)}toSuffix(e){return e.toLowerCase()===e?`_${e}`:e.toUpperCase()===e?`_${e.toLowerCase()}`:e.replace(/([A-Z][a-z]+)/g,(function(e){return`_${e}`})).replace(/([A-Z][A-Z]+)/g,(function(e){return`_${e}`})).toLowerCase()}logLatency(e,t,i){const n=this.toSuffix(e);this.logEventTime("meeting"+n,t,i)}logStateTimeout(e,t){const i=this.toSuffix(e);this.logEvent("meeting_session_state_timeout",Object.assign(Object.assign({},t),{state:`state${i}`}))}logAudioEvent(e,t){const i="audio"+this.toSuffix(h.default[e]);this.logEvent(i,t)}logVideoEvent(e,t){const i="video"+this.toSuffix(f.default[e]);this.logEvent(i,t)}logEventTime(e,t,i={}){const n=Object.assign(Object.assign({},i),{call_id:this.audioVideoController.configuration.meetingId,client_type:p.CLIENT_TYPE,metric_type:"latency"});this.logger.debug((()=>`[DefaultStatsCollector] ${e}: ${JSON.stringify(n)}`)),this.metricsAddTime(e,t,n)}logMeetingSessionStatus(e){const t=`${e.statusCode()}`;this.logEvent(t);const i={status:t,status_code:`${e.statusCode()}`};this.logEvent("meeting_session_status",i),e.isTerminal()&&this.logEvent("meeting_session_stopped",i),e.isAudioConnectionFailure()&&this.logEvent("meeting_session_audio_failed",i),e.isFailure()&&this.logEvent("meeting_session_failed",i)}logLifecycleEvent(e,t){const i={lifecycle_event:`lifecycle${this.toSuffix(l.default[e])}`,lifecycle_event_code:`${e}`,lifecycle_event_condition:`condition${this.toSuffix(c.default[t])}`,lifecycle_event_condition_code:`${t}`};this.logEvent("meeting_session_lifecycle",i)}logEvent(e,t={}){const i=Object.assign(Object.assign({},t),{call_id:this.audioVideoController.configuration.meetingId,client_type:p.CLIENT_TYPE});this.logger.debug((()=>`[DefaultStatsCollector] ${e}: ${JSON.stringify(i)}`)),this.metricsLogEvent(e,i)}start(e,t,i){return!this.intervalScheduler&&(this.logger.info("Starting DefaultStatsCollector"),this.signalingClient=e,this.videoStreamIndex=t,this.clientMetricReport=i||new o.default(this.logger,this.videoStreamIndex,this.audioVideoController.configuration.credentials.attendeeId),this.intervalScheduler=new u.default(this.interval),this.intervalScheduler.start((()=>{this.getStatsWrapper()})),!0)}stop(){this.logger.info("Stopping DefaultStatsCollector"),this.intervalScheduler&&this.intervalScheduler.stop(),this.intervalScheduler=null}updateMetricValues(e,t){const i=t?this.clientMetricReport.streamMetricReports[Number(e.ssrc)]:this.clientMetricReport.globalMetricReport;let n;n=t?this.clientMetricReport.getMetricMap(i.mediaType,i.direction):this.clientMetricReport.getMetricMap();for(const t in e)t in n&&(i.previousMetrics[t]=i.currentMetrics[t],i.currentMetrics[t]=e[t])}processRawMetricReports(e){this.clientMetricReport.currentSsrcs={};const t=Date.now();for(const t of e){const e=this.isStreamRawMetricReport(t.type);if(e){if(!this.clientMetricReport.streamMetricReports[Number(t.ssrc)]){const e=new s.default;e.mediaType=this.getMediaType(t),e.direction=this.getDirectionType(t),this.videoStreamIndex.allStreams().empty()||(e.streamId=this.videoStreamIndex.streamIdForSSRC(Number(t.ssrc))),this.clientMetricReport.streamMetricReports[Number(t.ssrc)]=e}this.clientMetricReport.currentSsrcs[Number(t.ssrc)]=1}this.updateMetricValues(t,e)}this.clientMetricReport.removeDestroyedSsrcs(),this.clientMetricReport.previousTimestampMs=this.clientMetricReport.currentTimestampMs,this.clientMetricReport.currentTimestampMs=t,this.clientMetricReport.print()}addMetricFrame(e,t,i,n){const r=i.type,o=i.transform,s=i.source,a=t.streamMetricFrames.length,l=t.streamMetricFrames[a-1];if(r){const i=d.SdkMetric.create();i.type=r,i.value=o(s||e,n),n?l.metrics.push(i):t.globalMetrics.push(i)}}addGlobalMetricsToProtobuf(e){const t=this.clientMetricReport.getMetricMap();for(const i in this.clientMetricReport.globalMetricReport.currentMetrics)this.addMetricFrame(i,e,t[i])}addStreamMetricsToProtobuf(e){for(const t in this.clientMetricReport.streamMetricReports){const i=this.clientMetricReport.streamMetricReports[t],n=d.SdkStreamMetricFrame.create();n.streamId=i.streamId,n.metrics=[],e.streamMetricFrames.push(n);const r=this.clientMetricReport.getMetricMap(i.mediaType,i.direction);for(const n in i.currentMetrics)this.addMetricFrame(n,e,r[n],Number(t))}}makeClientMetricProtobuf(){const e=d.SdkClientMetricFrame.create();return e.globalMetrics=[],e.streamMetricFrames=[],this.addGlobalMetricsToProtobuf(e),this.addStreamMetricsToProtobuf(e),e}sendClientMetricProtobuf(e){this.signalingClient.sendClientMetrics(e)}isStreamRawMetricReport(e){return"ssrc"===e||"inbound-rtp"===e||"outbound-rtp"===e}getMediaType(e){return"audio"===e.mediaType?r.default.AUDIO:r.default.VIDEO}getDirectionType(e){return-1!==e.id.toLowerCase().indexOf("send")||-1!==e.id.toLowerCase().indexOf("outbound")?n.default.UPSTREAM:n.default.DOWNSTREAM}isValidChromeRawMetric(e){return this.browserBehavior.hasChromiumWebRTC()&&("ssrc"===e.type||"VideoBwe"===e.type||"googCandidatePair"===e.type&&"true"===e.googWritable&&"true"===e.googReadable)}isValidStandardRawMetric(e){const t="inbound-rtp"===e.type||"outbound-rtp"===e.type||"candidate-pair"===e.type&&"succeeded"===e.state;return this.browserBehavior.hasFirefoxWebRTC()?-1===this.compareMajorVersion(p.FIREFOX_UPDATED_GET_STATS_VERSION)?t:t&&!1===e.isRemote:t}isValidSsrc(e){let t=!0;return this.isStreamRawMetricReport(e.type)&&this.getDirectionType(e)===n.default.DOWNSTREAM&&this.getMediaType(e)===r.default.VIDEO&&(t=this.videoStreamIndex.streamIdForSSRC(Number(e.ssrc))>0),t}isValidRawMetricReport(e){return(this.isValidChromeRawMetric(e)||this.isValidStandardRawMetric(e))&&this.isValidSsrc(e)}filterRawMetricReports(e){const t=[];for(const i of e)this.isValidRawMetricReport(i)&&t.push(i);return t}handleRawMetricReports(e){const t=this.filterRawMetricReports(e);this.logger.debug((()=>`Filtered raw metrics : ${JSON.stringify(t)}`)),this.processRawMetricReports(t);const i=this.makeClientMetricProtobuf();this.sendClientMetricProtobuf(i),this.audioVideoController.forEachObserver((e=>{a.default.of(e.metricsDidReceive).map((t=>t.bind(e)(this.clientMetricReport.clone())))}))}getStatsWrapper(){if(!this.audioVideoController.rtcPeerConnection)return;const e=[];this.browserBehavior.requiresPromiseBasedWebRTCGetStats()?this.audioVideoController.rtcPeerConnection.getStats().then((t=>{t.forEach((t=>{e.push(t)})),this.handleRawMetricReports(e)})).catch((e=>{this.logger.error(e.message)})):this.audioVideoController.rtcPeerConnection.getStats((t=>{t.result().forEach((t=>{const i={};t.names().forEach((e=>{i[e]=t.stat(e)})),i.id=t.id,i.type=t.type,i.timestamp=t.timestamp,e.push(i)})),this.handleRawMetricReports(e)}),(e=>{this.logger.error(e.message)}))}compareMajorVersion(e){const t=parseInt(this.browserBehavior.version().split(".")[0]),i=parseInt(e.split(".")[0]);return i===t?0:i>t?1:-1}}t.default=p,p.INTERVAL_MS=1e3,p.FIREFOX_UPDATED_GET_STATS_VERSION="66.0.0",p.CLIENT_TYPE="amazon-chime-sdk-js"},155:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.VideoLogEvent=void 0,function(e){e[e.InputAttached=0]="InputAttached",e[e.SendingFailed=1]="SendingFailed",e[e.SendingSuccess=2]="SendingSuccess"}(i=t.VideoLogEvent||(t.VideoLogEvent={})),t.default=i},8358:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(155),o=i(1789);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="AttachMediaInputTask"}run(){return n(this,void 0,void 0,(function*(){const e=this.context.transceiverController;e.setPeer(this.context.peer),e.setupLocalTransceivers();const t=this.context.activeAudioInput;if(t){const i=t.getAudioTracks();if(this.context.browserBehavior.requiresUnifiedPlan())this.context.logger.info("attaching audio track to peer connection (unified-plan)"),yield e.setAudioInput(i.length?i[0]:null);else{this.context.logger.info("attaching audio track to peer connection (plan-b)");const e=this.context.peer.getSenders();t.getAudioTracks().forEach((i=>{e.find((e=>e.track.id===i.id))||(this.context.localAudioSender=this.context.peer.addTrack(i,t))}))}}else yield e.setAudioInput(null),this.context.logger.info("no audio track");const i=this.context.activeVideoInput;if(i){const t=i.getVideoTracks(),n=t.length?t[0]:null;if(this.context.browserBehavior.requiresUnifiedPlan()){if(this.context.logger.info("attaching video track to peer connection (unified-plan)"),yield e.setVideoInput(n),this.context.enableSimulcast&&this.context.videoUplinkBandwidthPolicy){const t=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();e.setEncodingParameters(t)}}else this.context.logger.info("attaching video track to peer connection (plan-b)"),this.context.peer.getSenders().find((e=>e.track&&e.track.id===t[0].id))||(this.context.localVideoSender&&(this.context.peer.removeTrack(this.context.localVideoSender),this.context.localVideoSender=null),this.context.localVideoSender=this.context.peer.addTrack(t[0],i));n&&(this.context.statsCollector.logVideoEvent(r.default.InputAttached,this.context.videoDeviceInformation),this.context.videoInputAttachedTimestampMs=Date.now())}else yield e.setVideoInput(null),this.context.logger.info("no video track"),this.context.localVideoSender&&(this.context.logger.info("removing track from peer"),this.context.peer.removeTrack(this.context.localVideoSender),this.context.localVideoSender=null);this.context.videoSubscriptions=e.updateVideoTransceivers(this.context.videoStreamIndex,this.context.videosToReceive)}))}}t.default=s},1789:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1124),o=i(4456);t.default=class{constructor(e){this.logger=e,this.taskName="BaseTask",this.parentTask=null,this.status=o.default.IDLE,this.run=this.baseRun.bind(this,this.run),this.cancel=this.baseCancel.bind(this,this.cancel)}once(...e){return new r.default(this.logger,this,e)}cancel(){}name(){return this.parentTask?`${this.parentTask.name()}/${this.taskName}`:this.taskName}setParent(e){this.parentTask=e}getStatus(){return this.status}logAndThrow(e){throw this.logger.info(e),new Error(e)}baseRun(e){return n(this,void 0,void 0,(function*(){try{const t=Date.now();switch(this.logger.info(`running task ${this.name()}`),this.status){case o.default.RUNNING:this.logAndThrow(`${this.name()} is already running`);case o.default.CANCELED:this.logAndThrow(`${this.name()} was canceled before running`);case o.default.FINISHED:this.logAndThrow(`${this.name()} was already finished`)}this.status=o.default.RUNNING,yield e.call(this),this.logger.info(`${this.name()} took ${Math.round(Date.now()-t)} ms`)}catch(e){throw e}finally{this.status!==o.default.CANCELED&&(this.status=o.default.FINISHED)}}))}baseCancel(e){this.status!==o.default.CANCELED&&this.status!==o.default.FINISHED?(this.logger.info(`canceling task ${this.name()}`),this.status=o.default.CANCELED,e.call(this)):this.logger.info(`Not canceling ${this.name()}: state is ${this.status}`)}}},3216:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1789);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="CleanRestartedSessionTask"}run(){return n(this,void 0,void 0,(function*(){this.context.peer&&this.context.peer.close(),this.context.transceiverController.reset(),this.context.localVideoSender=null,this.context.peer=null,this.context.videoDownlinkBandwidthPolicy.reset(),this.context.iceCandidateHandler=null,this.context.iceCandidates=[],this.context.previousSdpOffer=null}))}}t.default=o},7408:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9416),o=i(1789);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="CleanStoppedSessionTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return n(this,void 0,void 0,(function*(){try{this.context.signalingClient.ready()&&(this.context.signalingClient.closeConnection(),yield this.receiveWebSocketClosedEvent())}catch(e){throw e}finally{for(const e of this.context.removableObservers)e.removeObserver();this.context.statsCollector.stop(),this.context.statsCollector=null,this.context.connectionMonitor.stop(),this.context.connectionMonitor=null,this.context.peer&&this.context.peer.close(),this.context.peer=null,this.context.localVideoSender=null,this.context.sdpAnswer=null,this.context.sdpOfferInit=null,this.context.indexFrame=null,this.context.videoDownlinkBandwidthPolicy.reset(),this.context.iceCandidateHandler=null,this.context.iceCandidates=[],this.context.turnCredentials=null,this.context.videoSubscriptions=null,this.context.transceiverController.reset();const e=this.context.videoTileController.getLocalVideoTile();e&&e.bindVideoStream("",!0,null,null,null,null),this.context.videoTileController.removeAllVideoTiles()}}))}receiveWebSocketClosedEvent(){return new Promise(((e,t)=>{const i=new class{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("CleanStoppedSessionTask got canceled while waiting for the WebSocket closed event"))}handleSignalingClientEvent(t){t.type===r.default.WebSocketClosed&&(this.signalingClient.removeObserver(this),e())}}(this.context.signalingClient);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)}))}}t.default=s},5054:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1789);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="CreatePeerConnectionTask",this.removeTrackAddedEventListener=null,this.removeTrackRemovedEventListeners={},this.trackEvents=["ended","mute","unmute","isolationchange","overconstrained"],this.removeVideoTrackEventListeners={},this.trackAddedHandler=e=>{const t=e.track;if(this.context.logger.info(`received track event: kind=${t.kind} id=${t.id} label=${t.label}`),e.transceiver&&"inactive"===e.transceiver.currentDirection)return;if(0===e.streams.length)return void this.context.logger.warn("Track event but no stream");const i=e.streams[0];"audio"===t.kind?this.context.audioMixController.bindAudioStream(i):"video"!==t.kind||this.trackIsVideoInput(t)||this.addRemoteVideoTrack(t,i)}}removeObserver(){this.removeTrackAddedEventListener&&this.removeTrackAddedEventListener();for(const e in this.removeTrackRemovedEventListeners)this.removeTrackRemovedEventListeners[e]()}addPeerConnectionEventLogger(){const e=this.context.peer;e.addEventListener("connectionstatechange",(()=>{this.context.logger.info(`peer connection state changed: ${e.connectionState}`)})),e.addEventListener("negotiationneeded",(()=>{this.context.logger.info("peer connection negotiation is needed")})),e.addEventListener("icegatheringstatechange",(()=>{this.context.logger.info(`peer connection ice gathering state changed: ${e.iceGatheringState}`)})),e.addEventListener("icecandidate",(e=>{this.context.logger.info(`peer connection ice candidate: ${e.candidate?e.candidate.candidate:"(null)"}`)})),e.addEventListener("iceconnectionstatechange",(()=>{this.context.logger.info(`peer connection ice connection state changed: ${e.iceConnectionState}`)}))}run(){return n(this,void 0,void 0,(function*(){this.context.removableObservers.push(this);const e=this.context.turnCredentials&&this.context.turnCredentials.uris.length>0?{iceServers:[{urls:this.context.turnCredentials.uris,username:this.context.turnCredentials.username,credential:this.context.turnCredentials.password,credentialType:"password"}],iceTransportPolicy:"relay"}:{};e.bundlePolicy=this.context.browserBehavior.requiresBundlePolicy(),e.sdpSemantics=this.context.browserBehavior.requiresUnifiedPlan()?"unified-plan":"plan-b",this.logger.info(`SDP semantics are ${e.sdpSemantics}`);this.context.peer?this.context.logger.info("reusing peer connection"):(this.context.logger.info("creating new peer connection"),this.context.peer=new RTCPeerConnection(e,{optional:[{googHighStartBitrate:0},{googCpuOveruseDetection:!1},{googCpuOveruseEncodeUsage:!1},{googCpuUnderuseThreshold:55},{googCpuOveruseThreshold:150},{googCombinedAudioVideoBwe:!0}]}),this.addPeerConnectionEventLogger()),this.removeTrackAddedEventListener=()=>{this.context.peer&&this.context.peer.removeEventListener("track",this.trackAddedHandler),this.removeTrackAddedEventListener=null},this.context.peer.addEventListener("track",this.trackAddedHandler)}))}trackIsVideoInput(e){if(this.context.transceiverController.useTransceivers())return this.logger.debug((()=>"getting video track type (unified-plan)")),this.context.transceiverController.trackIsVideoInput(e);if(this.logger.debug((()=>"getting video track type (plan-b)")),this.context.activeVideoInput){const t=this.context.activeVideoInput.getVideoTracks();if(t&&t.length>0&&t[0].id===e.id)return!0}return!1}addRemoteVideoTrack(e,t){let i=t.id;this.context.browserBehavior.requiresUnifiedPlan()||(t=new MediaStream([e]),i=e.id);const n=this.context.videoStreamIndex.attendeeIdForTrack(i);if(this.context.videoTileController.haveVideoTileForAttendeeId(n))return void this.context.logger.info(`Not adding remote track. Already have tile for attendeeId:  ${n}`);const r=this.context.videoTileController.addVideoTile();let o,s,a=this.context.videoStreamIndex.streamIdForTrack(i);void 0===a&&(this.logger.warn(`stream not found for tile=${r.id()} track=${i}`),a=null);for(let i=0;i<this.trackEvents.length;i++){const n=this.trackEvents[i],o=t.getVideoTracks();if(o&&o.length){const t=o[0],i=()=>{this.context.logger.info(`received the ${n} event for tile=${r.id()} id=${e.id} streamId=${a}`),"ended"===n&&this.context.browserBehavior.requiresUnifiedPlan()&&this.removeRemoteVideoTrack(e,r.state())};t.addEventListener(n,i),this.removeVideoTrackEventListeners[e.id]||(this.removeVideoTrackEventListeners[e.id]=[]),this.removeVideoTrackEventListeners[e.id].push((()=>{t.removeEventListener(n,i)}))}}if(e.getSettings){const t=e.getSettings();o=t.width,s=t.height}else{const t=e.getCapabilities();o=t.width,s=t.height}const l=this.context.videoStreamIndex.externalUserIdForTrack(i);r.bindVideoStream(n,!1,t,o,s,a,l),this.logger.info(`video track added, created tile=${r.id()} track=${i} streamId=${a}`);let c="removetrack",u=t;this.context.browserBehavior.requiresUnifiedPlan()||(this.logger.debug((()=>"updating end event and target track (plan-b)")),c="ended",u=e);const d=()=>this.removeRemoteVideoTrack(e,r.state());this.removeTrackRemovedEventListeners[e.id]=()=>{u.removeEventListener(c,d),delete this.removeTrackRemovedEventListeners[e.id]},u.addEventListener(c,d)}removeRemoteVideoTrack(e,t){if(this.removeTrackRemovedEventListeners.hasOwnProperty(e.id)){this.removeTrackRemovedEventListeners[e.id]();for(const t of this.removeVideoTrackEventListeners[e.id])t();delete this.removeVideoTrackEventListeners[e.id]}this.logger.info(`video track ended, removing tile=${t.tileId} id=${e.id} stream=${t.streamId}`),t.streamId?this.context.videosPaused.remove(t.streamId):this.logger.warn(`no stream found for tile=${t.tileId}`),this.context.videoTileController.removeVideoTile(t.tileId)}}t.default=o,o.REMOVE_HANDLER_INTERVAL_MS=1e4},1129:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(5687),o=i(7293),s=i(1789);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="CreateSDPTask"}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}sessionUsesAudio(){var e,t;return!!(null===(t=null===(e=this.context.meetingSessionConfiguration)||void 0===e?void 0:e.urls)||void 0===t?void 0:t.audioHostURL)}sessionUsesVideo(){let e;e=this.context.transceiverController.useTransceivers()?this.context.transceiverController.hasVideoInput():this.context.videoTileController.hasStartedLocalVideoTile();const t=!!this.context.videosToReceive&&!this.context.videosToReceive.empty(),i=e||t;return this.context.logger.info(`uses video: ${i} (enabled: true, sending: ${e}, receiving: ${t})`),i}run(){return n(this,void 0,void 0,(function*(){const e={offerToReceiveAudio:this.sessionUsesAudio(),offerToReceiveVideo:this.sessionUsesVideo()};this.logger.info(`peer connection offerOptions: ${JSON.stringify(e)}`),yield new Promise(((t,i)=>n(this,void 0,void 0,(function*(){this.cancelPromise=e=>{i(e)};try{if(this.context.sdpOfferInit=yield this.context.peer.createOffer(e),this.context.logger.info("peer connection created offer"),this.context.previousSdpOffer&&new o.default(this.context.sdpOfferInit.sdp).videoSendSectionHasDifferentSSRC(this.context.previousSdpOffer)){const e=new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.IncompatibleSDP}`);return this.context.previousSdpOffer=null,void i(e)}t()}catch(e){i(e)}finally{delete this.cancelPromise}}))))}))}}t.default=a},6240:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(5687),o=i(7293),s=i(1789);class a extends s.default{constructor(e,t=a.CHROME_VPN_TIMEOUT_MS){super(e.logger),this.context=e,this.chromeVpnTimeoutMs=t,this.taskName="FinishGatheringICECandidatesTask"}removeEventListener(){this.context.peer&&(this.context.peer.removeEventListener("icecandidate",this.context.iceCandidateHandler),this.context.turnCredentials||this.context.peer.removeEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler))}cancel(){let e;this.context.browserBehavior.requiresIceCandidateGatheringTimeoutWorkaround()&&this.chromeVpnTimeoutMs<this.context.meetingSessionConfiguration.connectionTimeoutMs&&Date.now()-this.startTimestampMs>this.chromeVpnTimeoutMs&&(e=new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.ICEGatheringTimeoutWorkaround}`)),this.cancelPromise&&(e=e||new Error(`canceling ${this.name()}`),this.cancelPromise(e),delete this.cancelPromise)}run(){return n(this,void 0,void 0,(function*(){if(this.context.peer||this.logAndThrow("session does not have peer connection; bypass ice gathering"),this.context.browserBehavior.requiresCheckForSdpConnectionAttributes()){if(new o.default(this.context.peer.localDescription.sdp).hasCandidatesForAllMLines())return void this.context.logger.info(`ice gathering already complete; bypass gathering, current local description ${this.context.peer.localDescription.sdp}`)}else this.context.logger.info(`iOS device does not require checking for connection attributes in SDP, current local description ${this.context.peer.localDescription.sdp}`);if(!this.context.browserBehavior.hasFirefoxWebRTC()&&"complete"!==this.context.peer.iceGatheringState||!new o.default(this.context.peer.localDescription.sdp).hasCandidates())try{yield new Promise(((e,t)=>{this.cancelPromise=e=>{this.removeEventListener(),t(e)},this.context.turnCredentials||(this.context.iceGatheringStateEventHandler=()=>{if("complete"===this.context.peer.iceGatheringState)return this.removeEventListener(),e(),void delete this.cancelPromise},this.context.peer.addEventListener("icegatheringstatechange",this.context.iceGatheringStateEventHandler)),this.context.iceCandidateHandler=i=>{if(this.context.logger.info(`ice candidate: ${i.candidate?i.candidate.candidate:"(null)"} state: ${this.context.peer.iceGatheringState}`),i.candidate&&(o.default.isRTPCandidate(i.candidate.candidate)&&this.context.iceCandidates.push(i.candidate),this.context.turnCredentials&&this.context.iceCandidates.length>=1))return this.context.logger.info("gathered at least one relay candidate"),this.removeEventListener(),e(),void delete this.cancelPromise;"complete"===this.context.peer.iceGatheringState&&(this.context.logger.info("done gathering ice candidates"),this.removeEventListener(),new o.default(this.context.peer.localDescription.sdp).hasCandidates()&&0!==this.context.iceCandidates.length?(e(),delete this.cancelPromise):(t(new Error("no ice candidates were gathered")),delete this.cancelPromise))},this.context.peer.addEventListener("icecandidate",this.context.iceCandidateHandler),this.startTimestampMs=Date.now()}))}catch(e){throw e}finally{this.startTimestampMs&&(this.context.iceGatheringDurationMs=Math.round(Date.now()-this.startTimestampMs))}else this.context.logger.info("ice gathering state is complete and candidates are in SDP; bypass gathering")}))}}t.default=a,a.CHROME_VPN_TIMEOUT_MS=5e3},1960:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(3789),o=i(5687),s=i(7215),a=i(9416),l=i(2168),c=i(289),u=i(1789);class d extends u.default{constructor(e){super(e.logger),this.context=e,this.taskName="JoinAndReceiveIndexTask",this.taskCanceler=null,this.maxVideos=16}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return n(this,void 0,void 0,(function*(){const e=yield new Promise(((e,t)=>{const i=this.context;i.turnCredentials=null;const n=new class{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("JoinAndReceiveIndexTask got canceled while waiting for SdkIndexFrame"))}handleSignalingClientEvent(t){if(t.type===a.default.WebSocketClosed){let e=`The signaling connection was closed with code ${t.closeCode} and reason: ${t.closeReason}`;i.logger.warn(e);let n=o.default.SignalingBadRequest;return 4410===t.closeCode?(e="The meeting already ended.",i.logger.warn(e),n=o.default.MeetingEnded):t.closeCode>=4500&&t.closeCode<4600&&(n=o.default.SignalingInternalServerError),void i.audioVideoController.handleMeetingSessionStatus(new r.default(n),new Error(e))}if(t.type!==a.default.ReceivedSignalFrame)return;if(t.message.type===c.SdkSignalFrame.Type.JOIN_ACK){const e=t.message.joinack;return void(e&&e.turnCredentials?(i.turnCredentials=new s.default,i.turnCredentials.username=e.turnCredentials.username,i.turnCredentials.password=e.turnCredentials.password,i.turnCredentials.ttl=e.turnCredentials.ttl,i.turnCredentials.uris=e.turnCredentials.uris.map((e=>i.meetingSessionConfiguration.urls.urlRewriter(e))).filter((e=>!!e))):i.logger.error("missing TURN credentials in JoinAckFrame"))}if(t.message.type!==c.SdkSignalFrame.Type.INDEX)return;this.signalingClient.removeObserver(this);const n=t.message.index;e(n)}}(this.context.signalingClient);this.context.signalingClient.registerObserver(n),this.taskCanceler=n,this.context.signalingClient.join(new l.default(this.maxVideos,!0))}));this.context.logger.info(`received first index ${JSON.stringify(e)}`),this.context.indexFrame=e}))}}t.default=d},6180:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9416),o=i(289),s=i(1789);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="LeaveAndReceiveLeaveAckTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return n(this,void 0,void 0,(function*(){this.context.signalingClient.ready()&&(this.context.signalingClient.leave(),this.context.logger.info("sent leave"),yield this.receiveLeaveAck())}))}receiveLeaveAck(){return new Promise(((e,t)=>{const i=new class{constructor(e,t){this.signalingClient=e,this.logger=t}cancel(){this.signalingClient.removeObserver(this),t(new Error("LeaveAndReceiveLeaveAckTask got canceled while waiting for IndexFrame"))}handleSignalingClientEvent(t){if(t.isConnectionTerminated())return this.signalingClient.removeObserver(this),this.logger.info("LeaveAndReceiveLeaveAckTask connection terminated"),void e();t.type===r.default.ReceivedSignalFrame&&t.message.type===o.SdkSignalFrame.Type.LEAVE_ACK&&(this.signalingClient.removeObserver(this),this.logger.info("got leave ack"),e())}}(this.context.signalingClient,this.context.logger);this.taskCanceler=i,this.context.signalingClient.registerObserver(i)}))}}t.default=a},2748:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9416),o=i(289),s=i(1789);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="ListenForVolumeIndicatorsTask",this.realtimeMuteAndUnmuteHandler=e=>{this.context.signalingClient.mute(e)}}run(){return n(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler)}))}removeObserver(){this.context.realtimeController.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(this.realtimeMuteAndUnmuteHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===r.default.ReceivedSignalFrame)if(e.message.type===o.SdkSignalFrame.Type.AUDIO_STREAM_ID_INFO){const t=e.message.audioStreamIdInfo;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioStreamIdInfo(t)}else if(e.message.type===o.SdkSignalFrame.Type.AUDIO_METADATA){const t=e.message.audioMetadata;this.context.volumeIndicatorAdapter.sendRealtimeUpdatesForAudioMetadata(t)}}}t.default=a},1981:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(6196),o=i(9496),s=i(2770),a=i(9708),l=i(1922),c=i(7086),u=i(3789),d=i(5687),h=i(9416),f=i(9880),p=i(155),m=i(1789);class g extends m.default{constructor(e,t,i){super(e.logger),this.context=e,this.initialConnectionHealthData=i,this.taskName="MonitorTask",this.prevSignalStrength=1,this.currentVideoDownlinkBandwidthEstimationKbps=1e4,this.currentAvailableStreamAvgBitrates=null,this.hasSignalingError=!1,this.presenceHandlerCalled=!1,this.checkAndSendWeakSignalEvent=e=>{const t=e<1,i=this.prevSignalStrength<1,n=t?i?null:f.default.RedmicStartLoss:i?f.default.RedmicEndLoss:null;n&&this.context.statsCollector.logAudioEvent(n),this.prevSignalStrength=e},this.realtimeFatalErrorCallback=e=>{this.logger.error(`realtime error: ${e}: ${e.stack}`),this.context.audioVideoController.handleMeetingSessionStatus(new u.default(d.default.RealtimeApiFailed),e)},this.realtimeAttendeeIdPresenceHandler=(e,t)=>{const i=this.context.meetingSessionConfiguration.credentials.attendeeId;this.logger.info(`attendeePresenceReceived: ${i}`),i===e&&t&&!this.presenceHandlerCalled&&(this.presenceHandlerCalled=!0,this.context.attendeePresenceDurationMs=Date.now()-this.context.startAudioVideoTimestamp,this.context.eventController&&this.context.eventController.publishEvent("attendeePresenceReceived",{attendeePresenceDurationMs:this.context.attendeePresenceDurationMs}))},this.reconnectionHealthPolicy=new a.default(e.logger,Object.assign({},t),this.initialConnectionHealthData.clone()),this.unusableAudioWarningHealthPolicy=new l.default(Object.assign({},t),this.initialConnectionHealthData.clone())}removeObserver(){this.context.audioVideoController.removeObserver(this),this.context.realtimeController.realtimeUnsubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeUnsubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.signalingClient.removeObserver(this)}run(){return n(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.audioVideoController.addObserver(this),this.context.realtimeController.realtimeSubscribeToFatalError(this.realtimeFatalErrorCallback),this.context.realtimeController.realtimeSubscribeToLocalSignalStrengthChange(this.checkAndSendWeakSignalEvent),this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(this.realtimeAttendeeIdPresenceHandler),this.context.connectionMonitor.start(),this.context.statsCollector.start(this.context.signalingClient,this.context.videoStreamIndex),this.context.signalingClient.registerObserver(this)}))}videoTileDidUpdate(e){this.context.maxVideoTileCount=Math.max(this.context.maxVideoTileCount,this.context.videoTileController.getAllVideoTiles().length)}videoSendHealthDidChange(e,t){if(0===this.context.videoInputAttachedTimestampMs||!this.context.videoTileController.hasStartedLocalVideoTile()||!this.context.lastKnownVideoAvailability.canStartLocalVideo)return;const i=null!==this.context.activeVideoInput?this.context.activeVideoInput.getTracks():null;if(!i||!i[0])return;const n=Date.now()-this.context.videoInputAttachedTimestampMs;t>0||e>0?(this.context.statsCollector.logVideoEvent(p.default.SendingSuccess,this.context.videoDeviceInformation),this.context.statsCollector.logLatency("video_start_sending",n,this.context.videoDeviceInformation),this.context.videoInputAttachedTimestampMs=0):n>g.DEFAULT_TIMEOUT_FOR_START_SENDING_VIDEO_MS&&(this.context.statsCollector.logVideoEvent(p.default.SendingFailed,this.context.videoDeviceInformation),this.context.videoInputAttachedTimestampMs=0)}videoReceiveBandwidthDidChange(e,t){this.logger.debug((()=>`receiving bandwidth changed from prev=${t} Kbps to curr=${e} Kbps`)),this.currentVideoDownlinkBandwidthEstimationKbps=e}checkResubscribe(e){const t=e.getObservableMetrics();if(!t)return!1;const i=t.availableSendBandwidth||t.availableOutgoingBitrate,n=t.nackCountReceivedPerSecond||t.googNackCountReceivedPerSecond;let r=!1;this.context.videoDownlinkBandwidthPolicy.updateMetrics(e);const o=this.context.videoDownlinkBandwidthPolicy.wantsResubscribe();if(r=r||o,o&&(this.context.videosToReceive=this.context.videoDownlinkBandwidthPolicy.chooseSubscriptions(),this.logger.info(`trigger resubscribe for down=${o}; videosToReceive=[${this.context.videosToReceive.array()}]`)),this.context.videoTileController.hasStartedLocalVideoTile()){this.context.videoUplinkBandwidthPolicy.updateConnectionMetric({uplinkKbps:i/1e3,nackCountPerSecond:n});const e=this.context.videoUplinkBandwidthPolicy.wantsResubscribe();r=r||e,e&&(this.logger.info(`trigger resubscribe for up=${e}; videosToReceive=[${this.context.videosToReceive.array()}]`),this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters(),this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints())}return r}metricsDidReceive(e){const t=e;if(!t)return;if(this.checkResubscribe(e)&&this.context.audioVideoController.update(),!this.currentAvailableStreamAvgBitrates)return;const i=t.streamMetricReports;if(!i)return;const n=new Map,a=new Map;for(const e in i)i[e].mediaType===o.default.VIDEO&&i[e].direction===r.default.DOWNSTREAM&&n.set(i[e].streamId,i[e]);let l=!1;for(const e of this.currentAvailableStreamAvgBitrates.bitrates)if(n.has(e.sourceStreamId)){const t=n.get(e.sourceStreamId),i=this.context.videoStreamIndex.attendeeIdForStreamId(e.sourceStreamId);if(!i)continue;const r=new s.default,o=t.previousMetrics.bytesReceived,c=t.currentMetrics.bytesReceived;if(!o||!c)continue;const u=8*(c-o)/1e3;r.expectedAverageBitrateKbps=e.avgBitrateBps/1e3,r.receivedAverageBitrateKbps=u,r.attendeeId=i,u<e.avgBitrateBps/1e3*g.DEFAULT_DOWNLINK_CALLRATE_UNDERSHOOT_FACTOR&&(l=!0),a.set(i,r)}l&&(this.logger.debug((()=>"Downlink video streams are not receiving enough data")),this.context.audioVideoController.forEachObserver((e=>{c.default.of(e.videoNotReceivingEnoughData).map((t=>t.bind(e)(Array.from(a.values()))))})))}connectionHealthDidChange(e){var t;0===e.consecutiveMissedPongs&&this.context.reconnectController&&this.context.reconnectController.setLastActiveTimestampMs(Date.now()),this.reconnectionHealthPolicy.update(e);const i=this.reconnectionHealthPolicy.healthIfChanged();null!==i&&(this.logger.info(`reconnection health is now: ${i}`),0===i&&this.context.audioVideoController.handleMeetingSessionStatus(new u.default(d.default.ConnectionHealthReconnect),null)),this.unusableAudioWarningHealthPolicy.update(e);const n=this.unusableAudioWarningHealthPolicy.healthIfChanged();null!==n&&(this.logger.info(`unusable audio warning is now: ${n}`),0===n?(this.context.poorConnectionCount+=1,null===(t=this.context.eventController)||void 0===t||t.pushMeetingState("receivingAudioDropped"),this.context.videoTileController.haveVideoTilesWithStreams()?this.context.audioVideoController.forEachObserver((e=>{c.default.of(e.connectionDidSuggestStopVideo).map((t=>t.bind(e)()))})):this.context.audioVideoController.forEachObserver((e=>{c.default.of(e.connectionDidBecomePoor).map((t=>t.bind(e)()))}))):this.context.audioVideoController.forEachObserver((e=>{c.default.of(e.connectionDidBecomeGood).map((t=>t.bind(e)()))})))}handleBitrateFrame(e){const t=this.context.videoSubscriptions||[];let i=0;this.currentAvailableStreamAvgBitrates=e,this.logger.debug((()=>`simulcast: bitrates from server ${JSON.stringify(e)}`));for(const n of e.bitrates)-1!==t.indexOf(n.sourceStreamId)&&(i+=n.avgBitrateBps);i/=1e3,this.currentVideoDownlinkBandwidthEstimationKbps*g.DEFAULT_DOWNLINK_CALLRATE_OVERSHOOT_FACTOR<i&&(this.logger.info(`Downlink bandwidth pressure is high: estimated bandwidth ${this.currentVideoDownlinkBandwidthEstimationKbps}Kbps, required bandwidth ${i}Kbps`),this.context.audioVideoController.forEachObserver((e=>{c.default.of(e.estimatedDownlinkBandwidthLessThanRequired).map((t=>t.bind(e)(this.currentVideoDownlinkBandwidthEstimationKbps,i)))})))}handleSignalingClientEvent(e){var t;if(e.type===h.default.WebSocketClosed&&(4410===e.closeCode||e.closeCode>=4500&&e.closeCode<4600)||e.type===h.default.WebSocketError||e.type===h.default.WebSocketFailed?this.hasSignalingError||(null===(t=this.context.eventController)||void 0===t||t.pushMeetingState("signalingDropped"),this.hasSignalingError=!0):e.type===h.default.WebSocketOpen&&(this.hasSignalingError=!1),e.type===h.default.ReceivedSignalFrame){if(e.message.bitrates){const t=e.message.bitrates;this.context.videoStreamIndex.integrateBitratesFrame(t),this.context.videoDownlinkBandwidthPolicy.updateIndex(this.context.videoStreamIndex),this.handleBitrateFrame(e.message.bitrates)}const t=u.default.fromSignalFrame(e.message);t.statusCode()!==d.default.OK&&this.context.audioVideoController.handleMeetingSessionStatus(t,null)}}}t.default=g,g.DEFAULT_TIMEOUT_FOR_START_SENDING_VIDEO_MS=3e4,g.DEFAULT_DOWNLINK_CALLRATE_OVERSHOOT_FACTOR=1.5,g.DEFAULT_DOWNLINK_CALLRATE_UNDERSHOOT_FACTOR=.5},8831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{cancel(){}name(){return"NoOpTask"}run(){return Promise.resolve()}setParent(e){}}},1124:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(813),r=i(7797);t.default=class{constructor(e,t,i){this.logger=e,this.task=t,this.dependencies=i,this.canceled=!1}name(){return`${this.task.name()} (once)`}cancel(){if(!this.canceled){if(this.dependencies)for(const e of this.dependencies)e.cancel();this.logger.info(`Canceling ${this.name()}`),r.default.nextTick((()=>this.task.cancel())),this.canceled=!0,this.cancelPromise&&r.default.nextTick((()=>this.cancelPromise(new Error(`canceling ${this.name()}`))))}}logDependencies(){if(this.logger.getLogLevel()>n.default.INFO)return;if(!this.dependencies)return;const e=this.dependencies.filter((e=>e)).map((e=>e.name())).join(", ");this.logger.info(`${this.task.name()} waiting for dependencies: ${e}`)}run(){if(this.promise)return this.promise;const e=this.dependencies?Promise.all(this.dependencies.map((e=>null==e?void 0:e.run()))):Promise.resolve();return this.logDependencies(),this.ongoing=e.then((()=>this.task.run())),this.promise=new Promise(((e,t)=>{this.cancelPromise=t,this.ongoing.then(e).catch(t)}))}setParent(e){this.task.setParent(e)}}},4543:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(3920),o=i(9416),s=i(1789);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="OpenSignalingConnectionTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return n(this,void 0,void 0,(function*(){const e=this.context.meetingSessionConfiguration;this.context.signalingClient.openConnection(new r.default(e.urls.signalingURL,e.credentials.joinToken));const t=Date.now();try{yield new Promise(((e,t)=>{const i=new class{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("OpenSignalingConnectionTask got canceled while waiting to open signaling connection"))}handleSignalingClientEvent(i){switch(i.type){case o.default.WebSocketOpen:this.signalingClient.removeObserver(this),e();break;case o.default.WebSocketFailed:this.signalingClient.removeObserver(this),t(new Error("WebSocket connection failed"))}}}(this.context.signalingClient);this.context.signalingClient.registerObserver(i),this.taskCanceler=i}))}catch(e){throw e}finally{this.context.signalingOpenDurationMs=Math.round(Date.now()-t),this.logger.info(`Opening signaling connection took ${this.context.signalingOpenDurationMs} ms`)}}))}}t.default=a},8556:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1789);class o extends r.default{constructor(e,t,i){super(e),this.taskName=t,this.tasksToRunParallel=i;for(const e of i)e.setParent(this)}cancel(){for(const e of this.tasksToRunParallel)this.logger.info(`canceling parallel group task ${this.name()} subtask ${e.name()}`),e.cancel()}run(){return n(this,void 0,void 0,(function*(){const e=[];for(const t of this.tasksToRunParallel)this.logger.info(`parallel group task ${this.name()} running subtask ${t.name()}`),e.push(t.run());const t=[];for(let i=0;i<e.length;i++){try{yield e[i]}catch(e){t.push(`task ${this.tasksToRunParallel[i].name()} failed: ${e.message}`)}this.logger.info(`parallel group task ${this.name()} completed subtask ${this.tasksToRunParallel[i].name()}`)}if(t.length>0){const e=t.join(", ");this.logAndThrow(`parallel group task ${this.name()} failed for tasks: ${e}`)}this.logger.info(`parallel group task ${this.name()} completed`)}))}}t.default=o},1209:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1789);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveAudioInputTask"}run(){var e,t;return n(this,void 0,void 0,(function*(){if(!(null===(t=null===(e=this.context.meetingSessionConfiguration)||void 0===e?void 0:e.urls)||void 0===t?void 0:t.audioHostURL))return void this.context.logger.info("No audio connection: not acquiring audio input");if(this.context.activeAudioInput)return void this.context.logger.info("an active audio input exists");let i;try{i=yield this.context.mediaStreamBroker.acquireAudioInputStream()}catch(e){this.context.logger.warn("could not acquire audio input from current device")}i?(this.context.activeAudioInput=i,this.context.realtimeController.realtimeSetLocalAudioInput(i)):this.context.logger.warn("an audio input is not available")}))}}t.default=o},5547:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(5687),o=i(7215),s=i(214),a=i(4046),l=i(1789);class c extends l.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveTURNCredentialsTask",this.url=e.meetingSessionConfiguration.urls.turnControlURL,this.meetingId=e.meetingSessionConfiguration.meetingId,this.joinToken=e.meetingSessionConfiguration.credentials.joinToken}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return n(this,void 0,void 0,(function*(){if(this.context.turnCredentials)return void this.context.logger.info("TURN credentials available, skipping credentials fetch");if(this.context.logger.error("missing TURN credentials - falling back to fetch"),!this.url)return void this.context.logger.info("TURN control url not supplied, skipping credentials fetch");const e={method:"POST",mode:"cors",cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json","X-Chime-Auth-Token":"_aws_wt_session="+new s.default(this.joinToken).base()},redirect:"follow",referrer:"no-referrer",body:JSON.stringify({meetingId:this.meetingId})};this.context.logger.info(`requesting TURN credentials from ${this.url}`);const t=yield new Promise(((t,i)=>n(this,void 0,void 0,(function*(){this.cancelPromise=e=>{i(e)};try{const n=yield fetch(a.default.urlWithVersion(this.url),e);if(this.context.logger.info("received TURN credentials"),n.status&&403===n.status)return void i(new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.TURNCredentialsForbidden}`));if(n.status&&404===n.status)return void i(new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.MeetingEnded}`));t(yield n.json())}catch(e){i(e)}finally{delete this.cancelPromise}}))));this.context.turnCredentials=new o.default,this.context.turnCredentials.password=t.password,this.context.turnCredentials.ttl=t.ttl,this.context.turnCredentials.uris=t.uris.map((e=>this.context.meetingSessionConfiguration.urls.urlRewriter(e))).filter((e=>!!e)),this.context.turnCredentials.username=t.username}))}}t.default=c},120:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(289),o=i(1789);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoInputTask"}run(){return n(this,void 0,void 0,(function*(){const e=this.context.videoDuplexMode===r.SdkStreamServiceType.RX||this.context.videoDuplexMode===r.SdkStreamServiceType.DUPLEX;if(this.context.videoTileController.hasStartedLocalVideoTile()?this.context.videoDuplexMode=e?r.SdkStreamServiceType.DUPLEX:r.SdkStreamServiceType.TX:this.context.videoDuplexMode=e?r.SdkStreamServiceType.RX:0,this.context.videoCaptureAndEncodeParameter=this.context.videoUplinkBandwidthPolicy.chooseCaptureAndEncodeParameters(),!this.context.videoTileController.hasStartedLocalVideoTile())return this.context.logger.info("has not started local video tile"),void(this.context.activeVideoInput&&this.stopVideoInput());const t=this.context.videoTileController.getLocalVideoTile();let i=null;try{i=yield this.context.mediaStreamBroker.acquireVideoInputStream()}catch(e){this.context.logger.warn("could not acquire video input from current device")}if(this.context.enableSimulcast){const e=this.context.videoUplinkBandwidthPolicy.chooseEncodingParameters();this.context.videoStreamIndex.integrateUplinkPolicyDecision(Array.from(e.values()))}if(this.context.activeVideoInput=i,i){const e=i.getVideoTracks(),n=this.context.meetingSessionConfiguration.credentials.attendeeId,r=e[0].getSettings();if(this.context.enableSimulcast){const t=this.context.videoUplinkBandwidthPolicy.chooseMediaTrackConstraints();this.context.logger.info(`simulcast: choose constraint ${JSON.stringify(t)}`);try{yield e[0].applyConstraints(t)}catch(e){this.context.logger.info("simulcast: pass video without more constraint")}}const o=this.context.audioVideoController.configuration.credentials.externalUserId;t.bindVideoStream(n,!0,i,r.width,r.height,null,o);for(let t=0;t<e.length;t++){const i=e[t];this.logger.info(`using video device label=${i.label} id=${i.id}`),this.context.videoDeviceInformation.current_camera_name=i.label,this.context.videoDeviceInformation.current_camera_id=i.id}}}))}stopVideoInput(){this.context.mediaStreamBroker.releaseMediaStream(this.context.activeVideoInput),this.context.activeVideoInput=null}}t.default=s},9560:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(7086),o=i(5723),s=i(214),a=i(9416),l=i(289),c=i(1789);class u extends c.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReceiveVideoStreamIndexTask"}removeObserver(){this.context.signalingClient.removeObserver(this)}run(){return n(this,void 0,void 0,(function*(){this.handleIndexFrame(this.context.indexFrame),this.context.signalingClient.registerObserver(this),this.context.removableObservers.push(this)}))}handleSignalingClientEvent(e){if(e.type!==a.default.ReceivedSignalFrame||e.message.type!==l.SdkSignalFrame.Type.INDEX)return;const t=e.message.index;this.context.logger.info(`received new index ${JSON.stringify(t)}`),this.handleIndexFrame(t)}handleIndexFrame(e){if(!e)return;const t=this.context.audioVideoController.configuration.credentials.attendeeId;e.sources=e.sources.filter((e=>{const i=new s.default(e.attendeeId);return!(i.base()===t&&i.hasModality(s.default.MODALITY_CONTENT))}));const{videoStreamIndex:i,videoDownlinkBandwidthPolicy:n,videoUplinkBandwidthPolicy:o}=this.context,a=i.allVideoSendingSourcesExcludingSelf(t);i.integrateIndexFrame(e),n.updateIndex(i),o.updateIndex(i),this.resubscribe(n,o),this.updateVideoAvailability(e),this.handleIndexVideosPausedAtSource();const l=i.allVideoSendingSourcesExcludingSelf(t);this.areVideoSourcesEqual(a,l)||this.context.audioVideoController.forEachObserver((e=>{r.default.of(e.remoteVideoSourcesDidChange).map((t=>t.bind(e)(l)))}))}areVideoSourcesEqual(e,t){if(e.length!==t.length)return!1;const i=(e,t)=>e.attendee.attendeeId.localeCompare(t.attendee.attendeeId),n=[...e].sort(i),r=[...t].sort(i);for(let e=0;e<n.length;e++)if(n[e].attendee.attendeeId!==r[e].attendee.attendeeId)return!1;return!0}resubscribe(e,t){const i=e.wantsResubscribe(),n=(this.context.videoDuplexMode===l.SdkStreamServiceType.TX||this.context.videoDuplexMode===l.SdkStreamServiceType.DUPLEX)&&t.wantsResubscribe(),r=i||n;this.logger.info(`should resubscribe: ${r} (downlink: ${i} uplink: ${n})`),r&&(this.context.videosToReceive=e.chooseSubscriptions(),this.context.videoCaptureAndEncodeParameter=t.chooseCaptureAndEncodeParameters(),this.logger.info(`trigger resubscribe for up=${n} down=${i}; videosToReceive=[${this.context.videosToReceive.array()}] captureParams=${JSON.stringify(this.context.videoCaptureAndEncodeParameter)}`),this.context.audioVideoController.update())}updateVideoAvailability(e){if(!this.context.videosToReceive)return void this.logger.error("videosToReceive must be set in the meeting context.");const t=new o.default;t.remoteVideoAvailable=!this.context.videosToReceive.empty(),t.canStartLocalVideo=!e.atCapacity,this.context.lastKnownVideoAvailability&&this.context.lastKnownVideoAvailability.equal(t)||(this.context.lastKnownVideoAvailability=t.clone(),this.context.audioVideoController.forEachObserver((e=>{r.default.of(e.videoAvailabilityDidChange).map((i=>i.bind(e)(t.clone())))})))}handleIndexVideosPausedAtSource(){const e=this.context.videoStreamIndex.streamsPausedAtSource();for(const t of this.context.videoTileController.getAllVideoTiles()){const i=t.state();e.contain(i.streamId)?t.markPoorConnection()&&this.logger.info(`marks the tile ${i.tileId} as having a poor connection`):t.unmarkPoorConnection()&&this.logger.info(`unmarks the tile ${i.tileId} as having a poor connection`)}}}t.default=u},8797:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1789);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="ReleaseMediaStreamsTask"}run(){return n(this,void 0,void 0,(function*(){if(this.context.mediaStreamBroker)try{this.context.mediaStreamBroker.releaseMediaStream(this.context.activeAudioInput),this.context.activeAudioInput=null,this.context.mediaStreamBroker.releaseMediaStream(this.context.activeVideoInput),this.context.activeVideoInput=null,this.context.realtimeController.realtimeSetLocalAudioInput(null)}catch(e){this.context.logger.error(`Failed to release media streams: ${e}`)}}))}}t.default=o},4191:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1789);class r extends n.default{constructor(e,t,i="RunnableTask"){super(e),this.fn=t,this.taskName=i}run(){return this.fn().then((()=>{}))}}t.default=r},9485:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1018),o=i(9416),s=i(289),a=i(1789);class l extends a.default{constructor(e){super(e.logger),this.context=e,this.taskName="SendAndReceiveDataMessagesTask",this.sendDataMessageHandler=(e,t,i)=>{if(!this.context.signalingClient.ready())throw new Error("Signaling client is not ready");{let n;n=t instanceof Uint8Array?t:"string"==typeof t?(new TextEncoder).encode(t):(new TextEncoder).encode(JSON.stringify(t)),this.validateDataMessage(e,n,i);const r=s.SdkDataMessagePayload.create();r.topic=e,r.lifetimeMs=i,r.data=n;const o=s.SdkDataMessageFrame.create();o.messages=[r],this.context.signalingClient.sendDataMessage(o)}}}run(){return n(this,void 0,void 0,(function*(){this.context.removableObservers.push(this),this.context.signalingClient.registerObserver(this),this.context.realtimeController.realtimeSubscribeToSendDataMessage(this.sendDataMessageHandler)}))}removeObserver(){this.context.realtimeController.realtimeUnsubscribeFromSendDataMessage(this.sendDataMessageHandler),this.context.signalingClient.removeObserver(this)}handleSignalingClientEvent(e){if(e.type===o.default.ReceivedSignalFrame&&e.message.type===s.SdkSignalFrame.Type.DATA_MESSAGE)for(const t of e.message.dataMessage.messages){const e=new r.default(t.ingestTimeNs/1e6,t.topic,t.data,t.senderAttendeeId,t.senderExternalUserId,0===t.ingestTimeNs);this.context.realtimeController.realtimeReceiveDataMessage(e)}}validateDataMessage(e,t,i){if(!l.TOPIC_REGEX.test(e))throw new Error("Invalid topic");if(t.length>l.DATA_SIZE)throw new Error("Data size has to be less than 2048 bytes");if(i&&i<0)throw new Error("The life time of the message has to be non negative")}}t.default=l,l.TOPIC_REGEX=new RegExp(/^[a-zA-Z0-9_-]{1,36}$/),l.DATA_SIZE=2048},7079:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1789),o=i(4456);class s extends r.default{constructor(e,t,i){super(e),this.taskName=t,this.tasksToRunSerially=i,this.currentTask=null;for(const e of i)e.setParent(this)}cancel(){this.currentTask&&(this.logger.info(`canceling serial group task ${this.name()} subtask ${this.currentTask.name()}`),this.currentTask.cancel())}run(){return n(this,void 0,void 0,(function*(){for(const e of this.tasksToRunSerially){this.getStatus()===o.default.CANCELED&&this.logAndThrow(`serial group task ${this.name()} was canceled`);try{this.logger.info(`serial group task ${this.name()} running subtask ${e.name()}`),this.currentTask=e,yield e.run(),this.logger.info(`serial group task ${this.name()} completed subtask ${e.name()}`)}catch(e){this.logAndThrow(`serial group task ${this.name()} was canceled due to subtask ${this.currentTask.name()} error: ${e.message}`)}finally{this.currentTask=null}}this.logger.info(`serial group task ${this.name()} completed`)}))}}t.default=s},4833:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(1789);class o extends r.default{constructor(e){super(e.logger),this.context=e,this.taskName="SetLocalDescriptionTask"}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return n(this,void 0,void 0,(function*(){const e=this.context.peer,t=this.context.sdpOfferInit;this.logger.debug((()=>`local description is >>>${t.sdp}<<<`)),yield new Promise(((i,r)=>n(this,void 0,void 0,(function*(){this.cancelPromise=e=>{r(e)};try{yield e.setLocalDescription(t),i()}catch(e){r(e)}finally{delete this.cancelPromise}})))),this.context.logger.info("set local description")}))}}t.default=o},5275:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(543),o=i(7293),s=i(1789);class a extends s.default{constructor(e){super(e.logger),this.context=e,this.taskName="SetRemoteDescriptionTask"}cancel(){this.cancelICEPromise&&this.cancelICEPromise()}run(){return n(this,void 0,void 0,(function*(){this.context.peer||this.logAndThrow("session does not have peer connection; bypass set remote description");let e=this.context.sdpAnswer;if(e=new o.default(e).withoutServerReflexiveCandidates().sdp,this.context.audioProfile&&(e=new o.default(e).withAudioMaxAverageBitrate(this.context.audioProfile.audioBitrateBps).sdp),!this.context.browserBehavior.requiresUnifiedPlan()&&(this.logger.info("checking for no videos (plan-b)"),this.context.videosToReceive.empty()&&this.context.peer.remoteDescription)){this.logger.info("have no videos and have remote description (plan-b)");const t=this.context.peer.localDescription.sdp,i=e;let n=i;const r=new o.default(t);if(r.hasVideo()){this.logger.info(`offer has video (plan-b): >>>${r.sdp}<<<`);const e=new o.default(i);this.logger.info(`existing answer (plan-b): >>>${e.sdp}<<<`),e.hasVideo()||(this.logger.info(`copying inactive video from offer into answer (plan-b); sdp answer before is >>>${i}<<<`),n=e.copyVideo(t).sdp)}e=n}(new r.default).requiresSortCodecPreferencesForSdpAnswer()&&(e=new o.default(e).preferH264IfExists().sdp),this.logger.info(`processed remote description is >>>${e}<<<`);const t={type:"answer",sdp:e,toJSON:null};try{yield this.createICEConnectionCompletedPromise(t)}catch(e){throw e}}))}createICEConnectionCompletedPromise(e){return new Promise(((t,i)=>n(this,void 0,void 0,(function*(){const n=()=>{"connected"!==this.context.peer.iceConnectionState&&"completed"!==this.context.peer.iceConnectionState||(this.context.peer.removeEventListener("iceconnectionstatechange",n),t())};this.cancelICEPromise=()=>{this.context.peer&&this.context.peer.removeEventListener("iceconnectionstatechange",n),i(new Error(`${this.name()} got canceled while waiting for the ICE connection state`))},this.context.peer.addEventListener("iceconnectionstatechange",n);try{yield this.context.peer.setRemoteDescription(e),this.logger.info("set remote description, waiting for ICE connection"),n()}catch(e){i(e)}}))))}}t.default=a},5924:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(7293),o=i(9416),s=i(6729),a=i(289),l=i(1789);class c extends l.default{constructor(e){super(e.logger),this.context=e,this.taskName="SubscribeAndReceiveSubscribeAckTask",this.taskCanceler=null}cancel(){this.taskCanceler&&(this.taskCanceler.cancel(),this.taskCanceler=null)}run(){return n(this,void 0,void 0,(function*(){let e="";if(this.context.peer&&this.context.peer.localDescription&&(e=this.context.browserBehavior.requiresUnifiedPlanMunging()?new r.default(this.context.peer.localDescription.sdp).withUnifiedPlanFormat().sdp:this.context.peer.localDescription.sdp),!this.context.enableSimulcast){let e=0,t=0;this.context.videoCaptureAndEncodeParameter&&(e=this.context.videoCaptureAndEncodeParameter.captureFrameRate(),t=this.context.videoCaptureAndEncodeParameter.encodeBitrates()[0]);const i={rid:"hi",maxBitrate:1e3*t,maxFramerate:e,active:!0};this.context.videoStreamIndex.integrateUplinkPolicyDecision([i])}this.context.videoStreamIndex.subscribeFrameSent();const t=this.context.videoDuplexMode===a.SdkStreamServiceType.TX||this.context.videoDuplexMode===a.SdkStreamServiceType.DUPLEX;this.context.previousSdpOffer=new r.default(e);const i=new s.default(this.context.meetingSessionConfiguration.credentials.attendeeId,e,this.context.meetingSessionConfiguration.urls.audioHostURL,this.context.realtimeController.realtimeIsLocalAudioMuted(),!1,this.context.videoSubscriptions,t,this.context.videoStreamIndex.localStreamDescriptions(),!0);this.context.logger.info(`sending subscribe: ${JSON.stringify(i)}`),this.context.signalingClient.subscribe(i);const n=yield this.receiveSubscribeAck();this.context.logger.info(`got subscribe ack: ${JSON.stringify(n)}`),this.context.sdpAnswer=n.sdpAnswer,this.context.videoStreamIndex.integrateSubscribeAckFrame(n)}))}receiveSubscribeAck(){return new Promise(((e,t)=>{const i=new class{constructor(e){this.signalingClient=e}cancel(){this.signalingClient.removeObserver(this),t(new Error("SubscribeAndReceiveSubscribeAckTask got canceled while waiting for SdkSubscribeAckFrame"))}handleSignalingClientEvent(t){if(t.type!==o.default.ReceivedSignalFrame||t.message.type!==a.SdkSignalFrame.Type.SUBSCRIBE_ACK)return;this.signalingClient.removeObserver(this);const i=t.message.suback;e(i)}}(this.context.signalingClient);this.context.signalingClient.registerObserver(i),this.taskCanceler=i}))}}t.default=c},4456:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.IDLE="IDLE",e.RUNNING="RUNNING",e.CANCELED="CANCELED",e.FINISHED="FINISHED"}(i||(i={})),t.default=i},250:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(4929),o=i(1789);class s extends o.default{constructor(e,t,i){super(e),this.taskToRunBeforeTimeout=t,this.timeoutMs=i,this.taskName=`Timeout${this.timeoutMs}ms`,t.setParent(this)}cancel(){this.logger.info(`canceling timeout task ${this.name()} subtask ${this.taskToRunBeforeTimeout}`),this.taskToRunBeforeTimeout.cancel()}run(){return n(this,void 0,void 0,(function*(){const e=new r.default(this.timeoutMs);e.start((()=>{this.logger.info(`timeout reached for task ${this.name()}`),this.taskToRunBeforeTimeout.cancel()}));try{yield this.taskToRunBeforeTimeout.run()}finally{e.stop()}this.logger.info(`timeout task ${this.name()} completed`)}))}}t.default=s},6171:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(5687),o=i(1789);class s extends o.default{constructor(e){super(e.logger),this.context=e,this.taskName="WaitForAttendeePresenceTask"}cancel(){if(this.cancelPromise){const e=new Error(`canceling ${this.name()} due to the meeting status code: ${r.default.NoAttendeePresent}`);this.cancelPromise(e),delete this.cancelPromise}}run(){return n(this,void 0,void 0,(function*(){const e=this.context.meetingSessionConfiguration.credentials.attendeeId;return new Promise(((t,i)=>{const n=(i,r,o,s,a)=>{e===i&&r&&(this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),t(),delete this.cancelPromise)};this.cancelPromise=e=>{this.context.realtimeController.realtimeUnsubscribeToAttendeeIdPresence(n),i(e)},this.context.realtimeController.realtimeSubscribeToAttendeeIdPresence(n)}))}))}}t.default=s},365:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.logger=e,this.browserBehavior=t,this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}setEncodingParameters(e){}static setVideoSendingBitrateKbpsForSender(e,t,n){return i(this,void 0,void 0,(function*(){if(!e||t<=0)return;const i=e.getParameters();i.encodings||(i.encodings=[{}]);for(const e of i.encodings)e.maxBitrate=1e3*t;yield e.setParameters(i)}))}static replaceAudioTrackForSender(e,t){return i(this,void 0,void 0,(function*(){return!!e&&(yield e.replaceTrack(t),!0)}))}localAudioTransceiver(){return this._localAudioTransceiver}localVideoTransceiver(){return this._localCameraTransceiver}setVideoSendingBitrateKbps(e){return i(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const t=this._localCameraTransceiver.sender;yield n.setVideoSendingBitrateKbpsForSender(t,e,this.logger)}))}setPeer(e){this.peer=e}reset(){this._localCameraTransceiver=null,this._localAudioTransceiver=null,this.videoSubscriptions=[],this.defaultMediaStream=null,this.peer=null}useTransceivers(){return!(!this.peer||!this.browserBehavior.requiresUnifiedPlan())&&void 0!==this.peer.getTransceivers}hasVideoInput(){return!(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)}trackIsVideoInput(e){return!!this._localCameraTransceiver&&(e===this._localCameraTransceiver.sender.track||e===this._localCameraTransceiver.receiver.track)}setupLocalTransceivers(){this.useTransceivers()&&(this.defaultMediaStream||"undefined"==typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]})),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}replaceAudioTrack(e){return i(this,void 0,void 0,(function*(){return this._localAudioTransceiver&&"sendrecv"===this._localAudioTransceiver.direction?(yield this._localAudioTransceiver.sender.replaceTrack(e),!0):(this.logger.info("audio transceiver direction is not set up or not activated"),!1)}))}setAudioInput(e){return i(this,void 0,void 0,(function*(){yield this.setTransceiverInput(this._localAudioTransceiver,e)}))}setVideoInput(e){return i(this,void 0,void 0,(function*(){yield this.setTransceiverInput(this._localCameraTransceiver,e)}))}updateVideoTransceivers(e,t){if(!this.useTransceivers())return t.array();const i=this.peer.getTransceivers();return this.videoSubscriptions=[0],t=t.clone(),this.updateTransceivers(i,e,t),this.logger.debug((()=>this.debugDumpTransceivers())),this.videoSubscriptions}updateTransceivers(e,t,i){const n=i.array();let r=1;for(const i of e)if(i!==this._localCameraTransceiver&&this.transceiverIsVideo(i)){if(this.videoSubscriptions[r]=0,"inactive"!==i.direction){const e=t.streamIdForTrack("v_"+i.mid);if(void 0!==e)for(const[o,s]of n.entries())if(t.StreamIdsInSameGroup(e,s)){i.direction="recvonly",this.videoSubscriptions[r]=s,n.splice(o,1);break}}r+=1}r=1;for(const t of e)if(t!==this._localCameraTransceiver&&this.transceiverIsVideo(t)){if("inactive"===t.direction&&n.length>0){t.direction="recvonly";const e=n.shift();this.videoSubscriptions[r]=e}else 0===this.videoSubscriptions[r]&&(t.direction="inactive");r+=1}for(const e of n){const t=this.peer.addTransceiver("video",{direction:"recvonly",streams:[this.defaultMediaStream]});this.videoSubscriptions.push(e),this.logger.info(`adding transceiver mid: ${t.mid} subscription: ${e} direction: recvonly`)}}transceiverIsVideo(e){return e.receiver&&e.receiver.track&&"video"===e.receiver.track.kind||e.sender&&e.sender.track&&"video"===e.sender.track.kind}debugDumpTransceivers(){let e="",t=0;for(const i of this.peer.getTransceivers())this.transceiverIsVideo(i)&&(e+=`transceiver index=${t} mid=${i.mid} subscription=${this.videoSubscriptions[t]} direction=${i.direction}\n`,t+=1);return e}setTransceiverInput(e,t){return i(this,void 0,void 0,(function*(){e&&(e.direction=t?"sendrecv":"inactive",yield e.sender.replaceTrack(t))}))}}t.default=n},5785:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(365);class o extends r.default{constructor(e,t){super(e,t),this.videoQualityControlParameterMap=new Map;let i=4;for(let e=0;e<o.NAME_ARR_ASCENDING.length;e++){const t=o.NAME_ARR_ASCENDING[e];this.videoQualityControlParameterMap.set(t,{rid:t,scaleResolutionDownBy:i,maxBitrate:1e3*o.BITRATE_ARR_ASCENDING[e]}),i/=2}}setEncodingParameters(e){return n(this,void 0,void 0,(function*(){if(!this._localCameraTransceiver||"sendrecv"!==this._localCameraTransceiver.direction)return;const t=this._localCameraTransceiver.sender,i=Array.from(e.values());if(i.length<=0)return;const n=t.getParameters();if(n.encodings)for(let t=0;t<n.encodings.length;t++)n.encodings[t].rid===o.LOW_LEVEL_NAME&&(n.encodings[t].maxBitrate=e.get(o.LOW_LEVEL_NAME).maxBitrate,n.encodings[t].active=e.get(o.LOW_LEVEL_NAME).active),n.encodings[t].rid===o.MID_LEVEL_NAME&&(n.encodings[t].maxBitrate=e.get(o.MID_LEVEL_NAME).maxBitrate,n.encodings[t].active=e.get(o.MID_LEVEL_NAME).active),n.encodings[t].rid===o.HIGH_LEVEL_NAME&&(n.encodings[t].maxBitrate=e.get(o.HIGH_LEVEL_NAME).maxBitrate,n.encodings[t].active=e.get(o.HIGH_LEVEL_NAME).active);else n.encodings=i;yield t.setParameters(n),this.logVideoTransceiverParameters()}))}static replaceAudioTrackForSender(e,t){return n(this,void 0,void 0,(function*(){return!!e&&(yield e.replaceTrack(t),!0)}))}setVideoSendingBitrateKbps(e){return n(this,void 0,void 0,(function*(){}))}setupLocalTransceivers(){if(this.useTransceivers()&&(this.defaultMediaStream||"undefined"==typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localAudioTransceiver||(this._localAudioTransceiver=this.peer.addTransceiver("audio",{direction:"inactive",streams:[this.defaultMediaStream]})),!this._localCameraTransceiver)){const e=Array.from(this.videoQualityControlParameterMap.values());this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream],sendEncodings:e})}}logVideoTransceiverParameters(){const e=this._localCameraTransceiver.sender.getParameters().encodings;let t="simulcast: current encoding parameters \n";for(const i of e)t+=`rid=${i.rid} maxBitrate=${i.maxBitrate} active=${i.active} \n`;this.logger.info(t)}}t.default=o,o.LOW_LEVEL_NAME="low",o.MID_LEVEL_NAME="mid",o.HIGH_LEVEL_NAME="hi",o.NAME_ARR_ASCENDING=["low","mid","hi"],o.BITRATE_ARR_ASCENDING=[200,400,1100]},9354:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(365);class r extends n.default{constructor(e,t){super(e,t)}setupLocalTransceivers(){this.useTransceivers()&&(this.defaultMediaStream||"undefined"==typeof MediaStream||(this.defaultMediaStream=new MediaStream),this._localCameraTransceiver||(this._localCameraTransceiver=this.peer.addTransceiver("video",{direction:"inactive",streams:[this.defaultMediaStream]})))}}t.default=r},4046:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(543),r=i(2336);class o{static get sdkName(){return"amazon-chime-sdk-js"}static get sdkVersion(){return r.default.semverString}static get buildSHA(){return r.default.hash.substr(1)}static get sdkUserAgentLowResolution(){const e=new n.default;return`${e.name()}-${e.majorVersion()}`}static urlWithVersion(e){const t=new URL(e);return t.searchParams.append(o.X_AMZN_VERSION,o.sdkVersion),t.searchParams.append(o.X_AMZN_USER_AGENT,o.sdkUserAgentLowResolution),t.toString()}}t.default=o,o.X_AMZN_VERSION="X-Amzn-Version",o.X_AMZN_USER_AGENT="X-Amzn-User-Agent"},2336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={hash:"9ac2804",raw:"v2.10.0",semverString:"2.10.0"}},1133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t,i,n,r){this.cameraWidth=e,this.cameraHeight=t,this.cameraFrameRate=i,this.maxEncodeBitrateKbps=n,this.isSimulcast=r}equal(e){let t=e.captureWidth()===this.cameraWidth&&e.captureHeight()===this.cameraHeight&&e.captureFrameRate()===this.cameraFrameRate&&e.encodeBitrates().length===this.encodeBitrates().length&&e.encodeWidths().length===this.encodeWidths().length&&e.encodeHeights().length===this.encodeHeights().length;if(t)for(let i=0;i<e.encodeWidths().length;i++)if(e.encodeWidths()[i]!==this.encodeWidths()[i]||e.encodeHeights()[i]!==this.encodeHeights()[i]||e.encodeBitrates()[i]!==this.encodeBitrates()[i])return t=!1,t;return t}clone(){return new i(this.cameraWidth,this.cameraHeight,this.cameraFrameRate,this.maxEncodeBitrateKbps,this.isSimulcast)}captureWidth(){return this.cameraWidth}captureHeight(){return this.cameraHeight}captureFrameRate(){return this.cameraFrameRate}encodeBitrates(){return[this.maxEncodeBitrateKbps]}encodeWidths(){return[this.cameraWidth]}encodeHeights(){return[this.cameraHeight]}}t.default=i},5185:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1508);t.default=class{constructor(e){this.selfAttendeeId=e,this.reset()}reset(){this.optimalReceiveSet=new n.default,this.subscribedReceiveSet=new n.default}updateIndex(e){this.optimalReceiveSet=this.calculateOptimalReceiveSet(e)}updateMetrics(e){}wantsResubscribe(){return!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveSet.clone()}calculateOptimalReceiveSet(e){return e.highestQualityStreamFromEachGroupExcludingSelf(this.selfAttendeeId)}}},5319:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1508);t.default=class{reset(){}updateIndex(e){}updateMetrics(e){}wantsResubscribe(){return!1}chooseSubscriptions(){return new n.default}}},2721:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TargetDisplaySize=void 0,function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(i=t.TargetDisplaySize||(t.TargetDisplaySize={})),t.default=i},2880:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8890),r=i(1754),o=i(1819),s=i(4992);class a extends s.default{constructor(e){super(e),this.logger=e,super.shouldPauseTiles=!1,this.videoPreferences=void 0}reset(){super.reset(),super.shouldPauseTiles=!1,this.videoPreferences=void 0}updateIndex(e){super.updateIndex(e);const t=o.VideoPreferences.prepare();let i=!1;const s=e.remoteStreamDescriptions();for(const e of s)t.some((t=>t.attendeeId===e.attendeeId))||(e.attendeeId.endsWith(n.default.Modality)?(t.add(new r.default(e.attendeeId,1)),i=!0):t.add(new r.default(e.attendeeId,2)));i?(this.videoPreferences=t.build(),this.videoPreferencesUpdated=!0):this.videoPreferences=void 0}chooseRemoteVideoSources(e){this.logger.error("chooseRemoteVideoSources should not be called by VideoAdaptiveProbePolicy")}}t.default=a},1754:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(2721);class r{constructor(e,t,i){this.attendeeId=e,this.priority=t,this.targetSize=void 0!==i?i:n.default.High}partialCompare(e){return this.priority-e.priority}equals(e){return this.attendeeId===e.attendeeId&&this.targetSize===e.targetSize&&this.priority===e.priority}targetSizeToBitrateKbps(e){switch(e){case n.default.High:return r.HIGH_BITRATE_KBPS;case n.default.Medium:return r.MID_BITRATE_KBPS;case n.default.Low:return r.LOW_BITRATE_KBPS}}}t.default=r,r.LOW_BITRATE_KBPS=300,r.MID_BITRATE_KBPS=600,r.HIGH_BITRATE_KBPS=1200},1819:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPreferences=t.MutableVideoPreferences=void 0;class i{constructor(e=[]){this.items=e}static default(){return new i([])}[Symbol.iterator](){let e=0;const t=this.items;return{next:()=>e<t.length?{done:!1,value:t[e++]}:{done:!0,value:null}}}first(){return this.items[0]}add(e){this.items.push(e)}replaceFirst(e,t){const i=this.items.findIndex(t);-1===i?this.items.push(e):this.has(e)?this.items.splice(i,1):this.items[i]=e}remove(e){this.items=this.items.filter((t=>!t.equals(e)))}clear(){this.items=[]}isEmpty(){return 0===this.items.length}equals(e){if(e===this)return!0;if(e.items.length!==this.items.length)return!1;for(const t of this.items)if(!e.items.some((e=>e.equals(t))))return!1;return!0}has(e){return this.items.some((t=>t.equals(e)))}some(e){return this.items.some(e)}clone(){return new i([...this.items])}sort(){this.items.sort(((e,t)=>e.partialCompare(t)))}modify(){return new n(this)}}class n{constructor(e=new i){this.items=e,this.copied=!1}cow(){this.copied||(this.items=this.items.clone(),this.copied=!0)}add(e){this.items.has(e)||(this.cow(),this.items.add(e))}replaceFirst(e,t){this.items.has(e)&&!this.items.some(t)||(this.cow(),this.items.replaceFirst(e,t))}remove(e){this.items.has(e)&&(this.cow(),this.items.remove(e))}some(e){return this.items.some(e)}clear(){this.items.isEmpty()||(this.cow(),this.items.clear())}build(){return this.copied&&this.items.sort(),this.copied=!1,this.items}}class r{constructor(e){this.builder=e}add(e){this.builder.add(e)}replaceFirst(e,t){this.builder.replaceFirst(e,t)}remove(e){this.builder.remove(e)}some(e){return this.builder.some(e)}clear(){this.builder.clear()}build(){return new o(this.builder.build())}}t.MutableVideoPreferences=r;class o{constructor(e){this.items=e}static prepare(){return new r(new n)}static default(){return new o(i.default())}[Symbol.iterator](){return this.items[Symbol.iterator]()}highestPriority(){var e;return null===(e=this.items.first())||void 0===e?void 0:e.priority}sorted(){return this.items[Symbol.iterator]()}equals(e){return e===this||this.items.equals(e.items)}modify(){return new r(this.items.modify())}some(e){return this.items.some(e)}isEmpty(){return this.items.isEmpty()}}t.VideoPreferences=o,t.default=o},4992:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(6196),r=i(8890),o=i(813),s=i(1508),a=i(2721),l=i(1754),c=i(1819);class u{constructor(){this.bandwidthEstimateKbps=0,this.usedBandwidthKbps=0,this.packetsLost=0,this.nackCount=0,this.rttMs=0}}class d{constructor(e){this.logger=e,this.shouldPauseTiles=!0,this.observerQueue=new Set,this.pausedBwAttendeeIds=new Set,this.reset()}reset(){this.optimalReceiveSet=new s.default,this.optimalReceiveStreams=[],this.optimalNonPausedReceiveStreams=[],this.subscribedReceiveSet=new s.default,this.subscribedReceiveStreams=[],this.videoPreferences=c.VideoPreferences.default(),this.defaultVideoPreferences=void 0,this.shouldPauseTiles=!0,this.pausedStreamIds=new s.default,this.pausedBwAttendeeIds=new Set,this.videoPreferencesUpdated=!1,this.logCount=0,this.startupPeriod=!0,this.usingPrevTargetRate=!1,this.rateProbeState="Not Probing",this.firstEstimateTimestamp=0,this.lastUpgradeRateKbps=0,this.timeBeforeAllowSubscribeMs=d.MIN_TIME_BETWEEN_SUBSCRIBE_MS,this.lastProbeTimestamp=Date.now(),this.timeBeforeAllowProbeMs=d.MIN_TIME_BETWEEN_PROBE_MS,this.downlinkStats=new u,this.prevDownlinkStats=new u}bindToTileController(e){this.tileController=e}chooseRemoteVideoSources(e){this.videoPreferences.equals(e)||(this.videoPreferences=e,this.videoPreferencesUpdated=!0,this.logger.info(`bwe: setVideoPreferences bwe: new preferences: ${JSON.stringify(e)}`))}updateIndex(e){this.videoIndex=e,void 0===this.videoPreferences&&this.updateDefaultVideoPreferences()}updateDefaultVideoPreferences(){const e=new Set;for(const t of this.videoIndex.remoteStreamDescriptions())e.add(t.attendeeId);const t=c.VideoPreferences.prepare();for(const i of e)t.add(new l.default(i,1,a.default.High));this.defaultVideoPreferences=t.build()}updateMetrics(e){if(this.videoIndex.allStreams().empty())return;this.prevDownlinkStats=this.downlinkStats,this.downlinkStats=new u;const t=e.getObservableMetrics();this.downlinkStats.bandwidthEstimateKbps=t.availableReceiveBandwidth/1e3;for(const t in e.streamMetricReports){const i=Number.parseInt(t,10),r=e.streamMetricReports[i];r.direction===n.default.DOWNSTREAM&&(r.currentMetrics.hasOwnProperty("googNacksSent")&&r.currentMetrics.hasOwnProperty("googFrameRateReceived")&&(this.downlinkStats.nackCount+=e.countPerSecond("googNacksSent",i)),r.currentMetrics.hasOwnProperty("packetsLost")&&r.currentMetrics.hasOwnProperty("googFrameRateReceived")&&(this.downlinkStats.packetsLost+=e.countPerSecond("packetsLost",i)),r.currentMetrics.hasOwnProperty("bytesReceived")&&(this.downlinkStats.usedBandwidthKbps+=e.bitsPerSecond("bytesReceived",i)/1e3))}}wantsResubscribe(){return this.calculateOptimalReceiveSet(),!this.subscribedReceiveSet.equal(this.optimalReceiveSet)}chooseSubscriptions(){return this.subscribedReceiveSet.equal(this.optimalReceiveSet)||(this.lastSubscribeTimestamp=Date.now()),this.subscribedReceiveSet=this.optimalReceiveSet.clone(),this.subscribedReceiveStreams=this.optimalReceiveStreams.slice(),this.subscribedReceiveSet.clone()}addObserver(e){this.observerQueue.add(e)}removeObserver(e){this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)setTimeout((()=>{this.observerQueue.has(t)&&e(t)}),0)}calculateOptimalReceiveStreams(){var e;const t=[],i=this.videoIndex.remoteStreamDescriptions();if(0===i.length||(null===(e=this.videoPreferences)||void 0===e?void 0:e.isEmpty()))return void(this.optimalReceiveStreams=[]);const n=this.rateProbeState;this.cleanBwPausedTiles(i),this.handleAppPausedStreams(t,i);const s=this.availStreamsSameAsLast(i);if(!this.startupPeriod&&s&&Date.now()-this.lastSubscribeTimestamp<this.timeBeforeAllowSubscribeMs)return;this.timeBeforeAllowSubscribeMs=d.MIN_TIME_BETWEEN_SUBSCRIBE_MS,i.sort(((e,t)=>e.maxBitrateKbps===t.maxBitrateKbps?e.streamId-t.streamId:e.maxBitrateKbps-t.maxBitrateKbps));for(const e of i)(0===e.avgBitrateKbps||e.avgBitrateKbps>e.maxBitrateKbps)&&(e.attendeeId.endsWith(r.default.Modality)&&e.maxBitrateKbps<100?e.maxBitrateKbps=e.avgBitrateKbps:e.avgBitrateKbps=e.maxBitrateKbps);const a={targetDownlinkBitrate:0,chosenTotalBitrate:0,deltaToNextUpgrade:0};a.targetDownlinkBitrate=this.determineTargetRate(i);const l=this.priorityPolicy(a,i,t);let c=0;if(!this.startupPeriod&&s?"Probing"===this.rateProbeState?c=this.handleProbe(t,a.targetDownlinkBitrate):0!==a.deltaToNextUpgrade&&(c=this.maybeOverrideOrProbe(t,a,l)):(this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0),this.prevRemoteInfos=i,this.videoPreferencesUpdated=!1,1===c)return this.logger.info(`bwe: keepSameSubscriptions stats:${JSON.stringify(this.downlinkStats)}`),void(this.prevTargetRateKbps=a.targetDownlinkBitrate);if(2===c){const e=this.calculateSubscribeRate(this.preProbeNonPausedReceiveStreams);return this.optimalReceiveStreams=this.preProbeReceiveStreams.slice(),this.processBwPausedStreams(i,this.preProbeNonPausedReceiveStreams),void this.logger.info("bwe: Use Pre-Probe subscription subscribedRate:"+e)}this.optimalNonPausedReceiveStreams=t.slice();const u=this.pausedBwAttendeeIds.size;this.processBwPausedStreams(i,t),this.logger.getLogLevel()<=o.LogLevel.INFO&&(this.logCount%15==0||this.rateProbeState!==n||this.optimalReceiveStreams.length!==t.length||u!==this.pausedBwAttendeeIds.size)&&(this.logger.info(this.policyStateLogStr(i,a.targetDownlinkBitrate)),this.logCount=0),this.logCount++,this.prevTargetRateKbps=a.targetDownlinkBitrate,this.optimalReceiveStreams=t.slice()}calculateOptimalReceiveSet(){const e=new s.default;this.calculateOptimalReceiveStreams();for(const t of this.optimalReceiveStreams)e.add(t.streamId);if(!this.optimalReceiveSet.equal(e)){const t=this.calculateSubscribeRate(this.optimalReceiveStreams);this.logger.info(`bwe: new streamSelection: ${JSON.stringify(e)} subscribedRate:${t}`)}this.optimalReceiveSet=e}determineTargetRate(e){let t=0,i=Number.MAX_VALUE;for(const t of e)0!==t.avgBitrateKbps&&t.avgBitrateKbps<i&&(i=t.avgBitrateKbps);const n=Date.now();return 0!==this.downlinkStats.bandwidthEstimateKbps?(0===this.firstEstimateTimestamp&&(this.firstEstimateTimestamp=n),this.startupPeriod&&(this.downlinkStats.bandwidthEstimateKbps>d.DEFAULT_BANDWIDTH_KBPS||this.downlinkStats.packetsLost>0||n-this.firstEstimateTimestamp>d.STARTUP_PERIOD_MS&&this.downlinkStats.bandwidthEstimateKbps<=this.prevDownlinkStats.bandwidthEstimateKbps)&&(this.startupPeriod=!1,this.prevTargetRateKbps=this.downlinkStats.bandwidthEstimateKbps),t=this.startupPeriod?d.DEFAULT_BANDWIDTH_KBPS:this.downlinkStats.bandwidthEstimateKbps):t=0===this.firstEstimateTimestamp?d.DEFAULT_BANDWIDTH_KBPS:this.prevTargetRateKbps,t=Math.max(i,t),!this.startupPeriod&&(this.usingPrevTargetRate&&this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps||this.downlinkStats.bandwidthEstimateKbps<this.prevTargetRateKbps*(100-d.LARGE_RATE_CHANGE_TRIGGER_PERCENT)/100||this.downlinkStats.bandwidthEstimateKbps<this.downlinkStats.usedBandwidthKbps*d.LARGE_RATE_CHANGE_TRIGGER_PERCENT/100)&&0===this.downlinkStats.packetsLost?(this.logger.debug((()=>"bwe: ValidateRate: Using Previous rate "+this.prevTargetRateKbps)),this.usingPrevTargetRate=!0,t=this.prevTargetRateKbps):this.usingPrevTargetRate=!1,t}setProbeState(e){if(this.rateProbeState===e)return!1;const t=Date.now();switch(e){case"Not Probing":this.probePendingStartTimestamp=0;break;case"Probe Pending":if(!(0===this.lastProbeTimestamp||t-this.lastProbeTimestamp>d.MIN_TIME_BETWEEN_PROBE_MS))return!1;this.probePendingStartTimestamp=t;break;case"Probing":if(!(t-this.probePendingStartTimestamp>this.timeBeforeAllowProbeMs))return!1;this.lastProbeTimestamp=t,this.preProbeReceiveStreams=this.subscribedReceiveStreams.slice(),this.preProbeNonPausedReceiveStreams=this.optimalNonPausedReceiveStreams,this.timeBeforeAllowProbeMs=Math.min(2*this.timeBeforeAllowProbeMs,d.MAX_HOLD_BEFORE_PROBE_MS)}return this.logger.info("bwe: setProbeState to "+e+" from "+this.rateProbeState),this.rateProbeState=e,!0}upgradeToStream(e,t){for(let i=0;i<e.length;i++)if(e[i].groupId===t.groupId){const n=t.avgBitrateKbps-e[i].avgBitrateKbps;return this.logger.info("bwe: upgradeStream from "+JSON.stringify(e[i])+" to "+t),this.lastUpgradeRateKbps=n,e[i]=t,n}return e.push(t),this.lastUpgradeRateKbps=t.avgBitrateKbps,this.lastUpgradeRateKbps}handleProbe(e,t){if(Date.now()-this.lastProbeTimestamp>d.MAX_ALLOWED_PROBE_TIME_MS)return this.logger.info("bwe: Canceling probe due to timeout"),this.setProbeState("Not Probing"),0;if(this.downlinkStats.packetsLost>0)return this.setProbeState("Not Probing"),this.logger.info("bwe: Canceling probe due to network loss"),this.timeBeforeAllowSubscribeMs=3*d.MIN_TIME_BETWEEN_SUBSCRIBE_MS,2;const i=this.calculateSubscribeRate(this.optimalReceiveStreams);if(this.chosenStreamsSameAsLast(e)||t>i){let i=0;for(const t of e)i+=t.avgBitrateKbps;if(t>i)return this.logger.info("bwe: Probe successful"),this.setProbeState("Not Probing"),this.timeBeforeAllowProbeMs=d.MIN_TIME_BETWEEN_PROBE_MS,0}return 1}maybeOverrideOrProbe(e,t,i){const n=this.chosenStreamsSameAsLast(e);let r=0;const o=t.targetDownlinkBitrate>d.LOW_BITRATE_THRESHOLD_KBPS?d.TARGET_RATE_CHANGE_TRIGGER_PERCENT:2*d.TARGET_RATE_CHANGE_TRIGGER_PERCENT,s=t.targetDownlinkBitrate*o/100;if(!n&&Math.abs(t.targetDownlinkBitrate-this.prevTargetRateKbps)<s&&(this.logger.info("bwe: MaybeOverrideOrProbe: Reuse last decision based on delta rate. {"+JSON.stringify(this.subscribedReceiveSet)+"}"),r=1),this.downlinkStats.packetsLost>this.prevDownlinkStats.packetsLost)return this.setProbeState("Not Probing"),this.lastUpgradeRateKbps=0,r;if(n||1===r)switch(this.rateProbeState){case"Not Probing":this.setProbeState("Probe Pending");break;case"Probe Pending":this.setProbeState("Probing")&&(this.timeBeforeAllowSubscribeMs=800,this.upgradeToStream(e,i),r=0)}else this.setProbeState("Not Probing");return r}calculateSubscribeRate(e){let t=0;for(const i of e)this.pausedStreamIds.contain(i.streamId)||this.pausedBwAttendeeIds.has(i.attendeeId)||(t+=i.maxBitrateKbps);return t}handleAppPausedStreams(e,t){if(!this.tileController)return;this.pausedStreamIds=new s.default;const i=this.tileController.getAllRemoteVideoTiles();for(const n of i){const i=n.state();if(i.paused&&!this.pausedBwAttendeeIds.has(i.boundAttendeeId)){let n=t.length;for(;n--;)t[n].attendeeId===i.boundAttendeeId&&(this.logger.info("bwe: removed paused attendee "+i.boundAttendeeId+" streamId: "+t[n].streamId),this.pausedStreamIds.add(t[n].streamId),this.subscribedReceiveSet.contain(t[n].streamId)&&e.push(t[n]),t.splice(n,1))}}}processBwPausedStreams(e,t){if(this.tileController&&(this.pausedBwAttendeeIds=new Set,this.videoPreferences&&this.shouldPauseTiles)){const i=this.tileController.getAllVideoTiles();for(const n of this.videoPreferences){const r=this.getVideoTileForAttendeeId(n.attendeeId,i),o=(null==r?void 0:r.state().paused)||!1;if(t.some((e=>e.attendeeId===n.attendeeId)))o&&(this.logger.info(`bwe: unpausing attendee ${n.attendeeId} due to bandwidth`),this.forEachObserver((e=>{e.tileWillBeUnpausedByDownlinkPolicy(r.id())})),this.tileController.unpauseVideoTile(r.id()));else if(r){const e=this.optimalReceiveStreams.find((e=>e.attendeeId===n.attendeeId));void 0!==e&&(o||(this.logger.info(`bwe: pausing streamId ${e.streamId} attendee ${n.attendeeId} due to bandwidth`),this.forEachObserver((e=>{e.tileWillBePausedByDownlinkPolicy(r.id())})),this.tileController.pauseVideoTile(r.id())),t.push(e)),this.pausedBwAttendeeIds.add(n.attendeeId)}else if(e.some((e=>e.attendeeId===n.attendeeId))){const e=this.tileController.addVideoTile();e.pause(),e.bindVideoStream(n.attendeeId,!1,null,0,0,0,null),this.logger.info(`bwe: Created video tile ${e.id()} for bw paused attendee ${n.attendeeId}`),this.pausedBwAttendeeIds.add(n.attendeeId)}}}}cleanBwPausedTiles(e){if(!this.tileController)return;const t=this.tileController.getAllRemoteVideoTiles();for(const i of t){const t=i.state();t.boundVideoStream||(e.some((e=>e.attendeeId===t.boundAttendeeId))?void 0===this.videoPreferences||this.videoPreferences.some((e=>e.attendeeId===t.boundAttendeeId))||this.tileController.removeVideoTile(t.tileId):(this.tileController.removeVideoTile(t.tileId),this.logger.info(`bwe: Removed video tile ${t.tileId} for bw paused attendee ${t.boundAttendeeId}`)))}}priorityPolicy(e,t,i){let n;const r=this.videoPreferences||this.defaultVideoPreferences,o=r.highestPriority();let s,a=o;for(;-1!==a;){s=-1;for(const o of r)if(o.priority===a)for(const r of t)r.attendeeId===o.attendeeId&&(i.some((e=>e.groupId===r.groupId))||(e.chosenTotalBitrate+r.avgBitrateKbps<=e.targetDownlinkBitrate?(i.push(r),e.chosenTotalBitrate+=r.avgBitrateKbps):0===e.deltaToNextUpgrade&&(e.deltaToNextUpgrade=r.avgBitrateKbps,n=r)));else if(o.priority>a){s=o.priority;break}for(const o of r)if(o.priority===a){for(const r of t)if(r.attendeeId===o.attendeeId){const s=i.findIndex((e=>e.groupId===r.groupId&&e.maxBitrateKbps<r.maxBitrateKbps));if(-1!==s){const a=r.avgBitrateKbps-i[s].avgBitrateKbps;this.hasSimulcastStreams(t,r.attendeeId,r.groupId)&&this.canUpgrade(r.avgBitrateKbps,o.targetSizeToBitrateKbps(o.targetSize))?(this.logger.info(`bwe: attendee: ${r.attendeeId} group: ${r.groupId} has simulcast and can upgrade avgBitrate: ${r.avgBitrateKbps} target: ${o.targetSizeToBitrateKbps(o.targetSize)} targetTotalBitrate: ${e.targetDownlinkBitrate}`),e.chosenTotalBitrate+a<=e.targetDownlinkBitrate?(e.chosenTotalBitrate+=a,i[s]=r):0===e.deltaToNextUpgrade&&(e.deltaToNextUpgrade=a,n=r)):this.logger.info("bwe: cannot upgrade stream quality beyond target size")}}}else if(o.priority>a)break;if(a===o&&0!==e.deltaToNextUpgrade)break;a=s}return n}getVideoTileForAttendeeId(e,t){for(const i of t)if(i.state().boundAttendeeId===e)return i;return null}canUpgrade(e,t){return e<=t?(this.logger.info(`bwe: canUpgrade: bitrateKbp: ${e} targetBitrateKbp: ${t}`),!0):(this.logger.info(`bwe: cannot Upgrade: bitrateKbp: ${e} targetBitrateKbp: ${t}`),!1)}hasSimulcastStreams(e,t,i){let n=0;for(const r of e)r.attendeeId===t&&r.groupId===i&&n++;return this.logger.info(`bwe: attendeeId: ${t} groupId: ${i} hasSimulcastStreams: streamCount: ${n}`),n>1}availStreamsSameAsLast(e){if(void 0===this.prevRemoteInfos||e.length!==this.prevRemoteInfos.length||!0===this.videoPreferencesUpdated)return!1;for(const t of e)if(void 0===this.prevRemoteInfos.find((e=>e.groupId===t.groupId&&e.streamId===t.streamId&&e.maxBitrateKbps===t.maxBitrateKbps)))return!1;return!0}chosenStreamsSameAsLast(e){if(this.optimalNonPausedReceiveStreams.length!==e.length)return!1;for(const t of this.optimalNonPausedReceiveStreams)if(!e.some((e=>e.streamId===t.streamId)))return!1;return!0}policyStateLogStr(e,t){const i={targetBitrate:t,subscribedRate:this.calculateSubscribeRate(this.optimalReceiveStreams),probeState:this.rateProbeState,startupPeriod:this.startupPeriod};let n="remoteInfos: [";for(const t of e)n+=`{grpId:${t.groupId} strId:${t.streamId} maxBr:${t.maxBitrateKbps} avgBr:${t.avgBitrateKbps}}, `;n+="]";let r=`bwe: optimalReceiveSet ${JSON.stringify(i)}\nbwe:   prev ${JSON.stringify(this.prevDownlinkStats)}\nbwe:   now  ${JSON.stringify(this.downlinkStats)}\nbwe:   ${n}\n`;return(this.pausedStreamIds.size()>0||this.pausedBwAttendeeIds.size>0)&&(r+=`bwe:   paused: app stream ids ${JSON.stringify(this.pausedStreamIds)}  bw attendees { ${Array.from(this.pausedBwAttendeeIds).join(" ")} }\n`),this.videoPreferences&&(r+=`bwe:   preferences: ${JSON.stringify(this.videoPreferences)}`),r}}t.default=d,d.DEFAULT_BANDWIDTH_KBPS=2800,d.STARTUP_PERIOD_MS=6e3,d.LARGE_RATE_CHANGE_TRIGGER_PERCENT=20,d.TARGET_RATE_CHANGE_TRIGGER_PERCENT=15,d.LOW_BITRATE_THRESHOLD_KBPS=300,d.MIN_TIME_BETWEEN_PROBE_MS=5e3,d.MIN_TIME_BETWEEN_SUBSCRIBE_MS=2e3,d.MAX_HOLD_BEFORE_PROBE_MS=6e4,d.MAX_ALLOWED_PROBE_TIME_MS=6e4},3663:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{create(){return{clientWidth:400,clientHeight:300,width:400,height:300,videoWidth:400,videoHeight:300,style:{transform:""},hasAttribute:()=>!1,removeAttribute:()=>{},setAttribute:()=>{},srcObject:!1,pause:()=>{},play:()=>Promise.resolve()}}}},9807:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.canvas=e,this.destroyed=!1}destroy(){this.canvas=null,this.destroyed=!0}asCanvasImageSource(){return i(this,void 0,void 0,(function*(){return this.destroyed?Promise.reject("canvas buffer is destroyed"):Promise.resolve(this.canvas)}))}asCanvasElement(){return this.canvas}}},8919:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9807);t.default=class{constructor(e,t){this.logger=e,this.stages=t,this.fr=15,this.outputMediaStream=new MediaStream,this.videoInput=document.createElement("video"),this.canvasOutput=document.createElement("canvas"),this.outputCtx=this.canvasOutput.getContext("2d"),this.canvasInput=document.createElement("canvas"),this.inputCtx=this.canvasInput.getContext("2d"),this.inputVideoStream=null,this.sourceBuffers=[],this.destBuffers=[],this.observers=new Set,this.hasStarted=!1,this.process=e=>n(this,void 0,void 0,(function*(){if(!this.inputVideoStream)return;const e=performance.now();this.videoInput.videoWidth&&(this.canvasInput.width!==this.videoInput.videoWidth&&(this.canvasInput.width=this.videoInput.videoWidth,this.canvasInput.height=this.videoInput.videoHeight,this.sourceBuffers[0].height=this.canvasInput.height,this.sourceBuffers[0].width=this.canvasInput.width,this.sourceBuffers[0].framerate=this.framerate),this.inputCtx.drawImage(this.videoInput,0,0));let t,i=[];i.push(this.sourceBuffers[0]);try{for(const e of this.processors)i=yield e.process(i)}catch(e){return void this.forEachObserver((e=>{e.processingDidFailToStart&&e.processingDidFailToStart()}))}this.destBuffers=i;try{t=yield this.destBuffers[0].asCanvasImageSource()}catch(e){return void(this.inputVideoStream&&(this.logger.info("buffers are destroyed and pipeline could not start"),this.forEachObserver((e=>{e.processingDidFailToStart&&e.processingDidFailToStart()}))))}const n=t.width,r=t.height;0!==n&&0!==r&&(this.canvasOutput.width!==n&&this.canvasOutput.height!==r&&(this.canvasOutput.width=n,this.canvasOutput.height=r),this.outputCtx.drawImage(t,0,0,n,r,0,0,n,r),this.hasStarted||(this.hasStarted=!0,this.forEachObserver((e=>{e.processingDidStart&&e.processingDidStart()}))));const o=performance.now()-e,s=2e3/this.framerate-o,a=Math.max(0,1e3/this.framerate-o);s<=0&&this.forEachObserver((e=>{e.processingLatencyTooHigh&&e.processingLatencyTooHigh(o)})),this.lastTimeOut=setTimeout(this.process,a)}))}destroy(){if(this.stop(),this.stages)for(const e of this.stages)e.destroy()}get framerate(){return this.fr}set framerate(e){this.fr=e<0?15:e}stop(){if(this.videoInput.removeEventListener("loadedmetadata",this.process),this.videoInput.srcObject=null,this.destroyInputMediaStreamAndBuffers(),this.outputMediaStream)for(const e of this.outputMediaStream.getVideoTracks())e.stop();this.lastTimeOut&&(clearTimeout(this.lastTimeOut),this.lastTimeOut=void 0),this.hasStarted&&(this.hasStarted=!1,this.forEachObserver((e=>{e.processingDidStop&&e.processingDidStop()})))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}getInputMediaStream(){return n(this,void 0,void 0,(function*(){return this.inputVideoStream}))}getActiveOutputMediaStream(){return this.outputMediaStream&&this.outputMediaStream.active?this.outputMediaStream:this.outputMediaStream=this.canvasOutput.captureStream(this.framerate)}setInputMediaStream(e){return n(this,void 0,void 0,(function*(){if(!e)return void this.stop();if(0===e.getVideoTracks().length)return void this.logger.error("No video tracks in input media stream, ignoring");this.inputVideoStream=e;const t=this.inputVideoStream.getVideoTracks()[0].getSettings();this.logger.info(`processing pipeline input stream settings ${t}`),this.canvasOutput.width=t.width,this.canvasOutput.height=t.height,this.videoInput.addEventListener("loadedmetadata",this.process),this.videoInput.srcObject=this.inputVideoStream,this.videoInput.setAttribute("playsinline","true");const i=new r.default(this.canvasInput);this.sourceBuffers.push(i),this.videoInput.load(),yield this.videoInput.play()}))}set processors(e){this.stages=e}get processors(){return this.stages}forEachObserver(e){for(const t of this.observers)setTimeout((()=>{e(t)}),0)}destroyInputMediaStreamAndBuffers(){if(this.inputVideoStream)for(const e of this.inputVideoStream.getTracks())e.stop();this.inputVideoStream=null;for(const e of this.sourceBuffers)e.destroy();this.sourceBuffers=[]}}},7673:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(543),o=i(8919);class s{constructor(e,t,i,n=new r.default){this.logger=e,this.device=t,this.processors=i,this.browserBehavior=n,this.observers=new Set,this.pipe=new o.default(this.logger,this.processors),this.pipe.addObserver(this)}get outputMediaStream(){return this.pipe.outputMediaStream}chooseNewInnerDevice(e){const t=new s(this.logger,e,this.processors,this.browserBehavior);return t.pipe=this.pipe,t}getInnerDevice(){return this.device}intrinsicDevice(){return n(this,void 0,void 0,(function*(){const e={};return this.device?"string"==typeof this.device?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e}))}transformStream(e){return n(this,void 0,void 0,(function*(){return yield this.pipe.setInputMediaStream(e),this.inputMediaStream=e,this.pipe.getActiveOutputMediaStream()}))}onOutputStreamDisconnect(){this.logger.info("DefaultVideoTransformDevice: detach stopping input media stream");const e=this.device&&this.device.id;if(this.pipe.stop(),!e&&this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop()}stop(){return n(this,void 0,void 0,(function*(){if(this.inputMediaStream)for(const e of this.inputMediaStream.getVideoTracks())e.stop();this.pipe.destroy(),this.inputMediaStream=null}))}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.add(e)}processingDidStart(){this.logger.info("video transform device processing started"),this.forEachObserver((e=>{e.processingDidStart&&e.processingDidStart()}))}processingLatencyTooHigh(e){this.forEachObserver((t=>{t.processingLatencyTooHigh&&t.processingLatencyTooHigh(e)}))}processingDidFailToStart(){this.logger.info("video transform device processing failed to start"),this.forEachObserver((e=>{e.processingDidFailToStart&&e.processingDidFailToStart()}))}processingDidStop(){this.logger.info("video transform device processing stopped"),this.forEachObserver((e=>{e.processingDidStop&&e.processingDidStop()}))}forEachObserver(e){for(const t of this.observers)setTimeout((()=>{e(t)}),0)}}t.default=s},2801:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{process(e){return i(this,void 0,void 0,(function*(){return e}))}destroy(){return i(this,void 0,void 0,(function*(){}))}}},60:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{}},1508:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e){this.ids=new Set(e)}add(e){this.ids.add(e)}array(){return Array.from(this.ids.values()).sort(((e,t)=>e-t))}contain(e){return this.ids.has(e)}empty(){return 0===this.ids.size}size(){return this.ids.size}equal(e){if(!e)return 0===this.ids.size;const t=this.array(),i=e.array();if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==i[e])return!1;return!0}clone(){return new i(this.array())}remove(e){this.ids.delete(e)}toJSON(){return this.array()}}t.default=i},1318:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(289),r=i(1508),o=i(6876);t.default=class{constructor(e){this.logger=e,this.currentIndex=null,this.indexForSubscribe=null,this.currentSubscribeAck=null,this.subscribeTrackToStreamMap=null,this.subscribeStreamToAttendeeMap=null,this.subscribeStreamToExternalUserIdMap=null,this.subscribeSsrcToStreamMap=null,this.streamToAttendeeMap=null,this.streamToExternalUserIdMap=null,this.videoStreamDescription=new o.default,this.videoStreamDescription.trackLabel="AmazonChimeExpressVideo",this.videoStreamDescription.streamId=2,this.videoStreamDescription.groupId=2}localStreamDescriptions(){return[this.videoStreamDescription.clone()]}convertBpsToKbps(e){return e>0&&e<1e3?1:Math.trunc(e/1e3)}remoteStreamDescriptions(){if(!this.currentIndex||!this.currentIndex.sources)return[];const e=[];return this.currentIndex.sources.forEach((t=>{const i=new o.default;i.attendeeId=t.attendeeId,i.groupId=t.groupId,i.streamId=t.streamId,i.maxBitrateKbps=t.maxBitrateKbps,i.avgBitrateKbps=this.convertBpsToKbps(t.avgBitrateBps),e.push(i)})),e}integrateUplinkPolicyDecision(e){if(e&&e.length){const t=e[0];this.videoStreamDescription.maxBitrateKbps=t.maxBitrate/1e3,this.videoStreamDescription.maxFrameRate=t.maxFramerate}}integrateIndexFrame(e){this.currentIndex=e;const t=new Map;let i=!1;for(const n of e.sources){if(!t.has(n.attendeeId)){t.set(n.attendeeId,n.groupId);continue}const e=t.get(n.attendeeId);e<n.groupId&&(this.logger.warn(`Old group ID ${e} found for attendee ID ${n.attendeeId}, replacing with newer group ID ${n.groupId}`),t.set(n.attendeeId,n.groupId)),i=!0}i&&(this.currentIndex.sources=this.currentIndex.sources.filter((e=>t.get(e.attendeeId)===e.groupId))),this.streamToAttendeeMap=null,this.streamToExternalUserIdMap=null}subscribeFrameSent(){this.indexForSubscribe=this.currentIndex}integrateSubscribeAckFrame(e){this.currentSubscribeAck=e,this.subscribeTrackToStreamMap=this.buildTrackToStreamMap(this.currentSubscribeAck),this.subscribeSsrcToStreamMap=this.buildSSRCToStreamMap(this.currentSubscribeAck),this.subscribeStreamToAttendeeMap=this.buildStreamToAttendeeMap(this.indexForSubscribe),this.subscribeStreamToExternalUserIdMap=this.buildStreamExternalUserIdMap(this.indexForSubscribe)}integrateBitratesFrame(e){if(this.currentIndex)for(const t of e.bitrates){const e=this.currentIndex.sources.find((e=>e.streamId===t.sourceStreamId));void 0!==e&&(e.avgBitrateBps=t.avgBitrateBps)}}allStreams(){const e=new r.default;if(this.currentIndex)for(const t of this.currentIndex.sources)e.add(t.streamId);return e}allVideoSendingSourcesExcludingSelf(e){const t=[],i=new Set;if(this.currentIndex&&this.currentIndex.sources&&this.currentIndex.sources.length)for(const r of this.currentIndex.sources){const{attendeeId:o,externalUserId:s,mediaType:a}=r;o!==e&&a===n.SdkStreamMediaType.VIDEO&&(i.has(o)||(t.push({attendee:{attendeeId:o,externalUserId:s}}),i.add(o)))}return t}streamSelectionUnderBandwidthConstraint(e,t,i,o){const s=new Set;if(this.currentIndex)for(const r of this.currentIndex.sources)r.attendeeId!==e&&r.mediaType===n.SdkStreamMediaType.VIDEO&&(t.has(r.attendeeId)||i.has(r.attendeeId)||s.add(r.attendeeId));const a=this.buildAttendeeToSortedStreamDescriptorMapExcludingSelf(e),l=new Map;let c=0;a.forEach(((e,t)=>{l.set(t,e[0]),c+=e[0].maxBitrateKbps})),c=this.trySelectHighBitrateForAttendees(a,t,c,o,l),this.trySelectHighBitrateForAttendees(a,s,c,o,l);const u=new r.default;for(const e of l.values())u.add(e.streamId);return u}highestQualityStreamFromEachGroupExcludingSelf(e){const t=new r.default;if(this.currentIndex){const i=new Map;for(const t of this.currentIndex.sources)t.attendeeId!==e&&t.mediaType===n.SdkStreamMediaType.VIDEO&&(!i.has(t.groupId)||t.maxBitrateKbps>i.get(t.groupId).maxBitrateKbps)&&i.set(t.groupId,t);for(const e of i.values())t.add(e.streamId)}return t}numberOfVideoPublishingParticipantsExcludingSelf(e){return this.highestQualityStreamFromEachGroupExcludingSelf(e).array().length}numberOfParticipants(){return this.currentIndex.numParticipants?this.currentIndex.numParticipants:-1}attendeeIdForTrack(e){const t=this.streamIdForTrack(e);if(void 0===t||!this.subscribeStreamToAttendeeMap)return this.logger.warn(`no attendee found for track ${e}`),"";return this.subscribeStreamToAttendeeMap.get(t)||(this.logger.info(`track ${e} (stream ${t}) does not correspond to a known attendee`),"")}externalUserIdForTrack(e){const t=this.streamIdForTrack(e);if(void 0===t||!this.subscribeStreamToExternalUserIdMap)return this.logger.warn(`no external user id found for track ${e}`),"";return this.subscribeStreamToExternalUserIdMap.get(t)||(this.logger.info(`track ${e} (stream ${t}) does not correspond to a known externalUserId`),"")}attendeeIdForStreamId(e){if(!this.streamToAttendeeMap){if(!this.currentIndex)return"";this.streamToAttendeeMap=this.buildStreamToAttendeeMap(this.currentIndex)}return this.streamToAttendeeMap.get(e)||(this.logger.info(`stream ${e}) does not correspond to a known attendee`),"")}groupIdForStreamId(e){for(const t of this.currentIndex.sources)if(t.streamId===e)return t.groupId;if(this.indexForSubscribe)for(const t of this.indexForSubscribe.sources)if(t.streamId===e)return t.groupId}StreamIdsInSameGroup(e,t){return this.groupIdForStreamId(e)===this.groupIdForStreamId(t)}streamIdForTrack(e){if(this.subscribeTrackToStreamMap)return this.subscribeTrackToStreamMap.get(e)}streamIdForSSRC(e){if(this.subscribeSsrcToStreamMap)return this.subscribeSsrcToStreamMap.get(e)}streamsPausedAtSource(){const e=new r.default;if(this.currentIndex)for(const t of this.currentIndex.pausedAtSourceIds)e.add(t);return e}buildTrackToStreamMap(e){const t=new Map;this.logger.debug((()=>`trackMap ${JSON.stringify(e.tracks)}`));for(const i of e.tracks)i.trackLabel.length>0&&i.streamId>0&&t.set(i.trackLabel,i.streamId);return t}buildSSRCToStreamMap(e){const t=new Map;this.logger.debug((()=>`ssrcMap ${JSON.stringify(e.tracks)}`));for(const i of e.tracks)i.trackLabel.length>0&&i.streamId>0&&t.set(i.ssrc,i.streamId);return t}buildStreamToAttendeeMap(e){const t=new Map;if(e)for(const i of e.sources)t.set(i.streamId,i.attendeeId);return t}buildStreamExternalUserIdMap(e){const t=new Map;if(e)for(const i of e.sources)i.externalUserId&&t.set(i.streamId,i.externalUserId);return t}trySelectHighBitrateForAttendees(e,t,i,n,r){for(const o of t){if(i>=n)break;if(e.has(o)){const t=e.get(o);for(const e of t.reverse())if(i-r.get(o).maxBitrateKbps+e.maxBitrateKbps<n){i=i-r.get(o).maxBitrateKbps+e.maxBitrateKbps,r.set(o,e);break}}}return i}buildAttendeeToSortedStreamDescriptorMapExcludingSelf(e){const t=new Map;if(this.currentIndex)for(const i of this.currentIndex.sources)i.attendeeId!==e&&i.mediaType===n.SdkStreamMediaType.VIDEO&&(t.has(i.attendeeId)?t.get(i.attendeeId).push(i):t.set(i.attendeeId,[i]));return t.forEach(((e,t)=>{e.sort(((e,t)=>e.maxBitrateKbps>t.maxBitrateKbps?1:e.maxBitrateKbps<t.maxBitrateKbps?-1:0))})),t}}},4242:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(289),r=i(1318),o=i(6876);class s extends r.default{constructor(e){super(e),this.streamIdToBitrateKbpsMap=new Map,this._localStreamInfos=[],this._lastBitRateMsgTime=Date.now()}localStreamDescriptions(){const e=[];return this._localStreamInfos.forEach((t=>{e.push(t.clone())})),e}integrateUplinkPolicyDecision(e){let t=!0,i=0;for(let n=0;n<e.length;n++){const r=e[n].maxBitrate/1e3,s=e[n].maxFramerate;if(t&&n!==this._localStreamInfos.length)0===this._localStreamInfos[i].maxBitrateKbps&&r>0&&(this._localStreamInfos[i].timeEnabled=Date.now()),this._localStreamInfos[i].maxBitrateKbps=r,this._localStreamInfos[i].maxFrameRate=s,this._localStreamInfos[i].disabledByUplinkPolicy=0===r,!0===this._localStreamInfos[i].disabledByUplinkPolicy&&(this._localStreamInfos[i].disabledByWebRTC=!1),i++;else{t=!1;const e=new o.default;e.maxBitrateKbps=r,e.maxFrameRate=s,e.disabledByUplinkPolicy=0===r,0!==r&&(e.timeEnabled=Date.now()),this._localStreamInfos.push(e),i++}}t&&this._localStreamInfos.splice(i)}integrateBitratesFrame(e){super.integrateBitratesFrame(e);const t=new Set,i=new Set(this.streamIdToBitrateKbpsMap.keys());for(const i of e.bitrates)t.add(i.sourceStreamId),this.streamIdToBitrateKbpsMap.set(i.sourceStreamId,this.convertBpsToKbps(i.avgBitrateBps));for(const e of i)t.has(e)||(this.streamIdToBitrateKbpsMap.get(e)===s.UNSEEN_STREAM_BITRATE?this.streamIdToBitrateKbpsMap.set(e,s.RECENTLY_INACTIVE_STREAM_BITRATE):this.streamIdToBitrateKbpsMap.set(e,s.NOT_SENDING_STREAM_BITRATE));for(let e=0;e<this._localStreamInfos.length;e++){this._localStreamInfos[e].disabledByWebRTC=!1;const t=this._localStreamInfos[e].streamId;this._localStreamInfos[e].disabledByUplinkPolicy||(this.streamIdToBitrateKbpsMap.has(t)?this.streamIdToBitrateKbpsMap.get(t)===s.NOT_SENDING_STREAM_BITRATE&&this._lastBitRateMsgTime-this._localStreamInfos[e].timeEnabled>s.BitratesMsgFrequencyMs&&(this._localStreamInfos[e].disabledByWebRTC=!0):this._lastBitRateMsgTime-this._localStreamInfos[e].timeEnabled>s.BitratesMsgFrequencyMs&&(this._localStreamInfos[e].disabledByWebRTC=!0))}this._lastBitRateMsgTime=Date.now(),this.logLocalStreamDescriptions()}logLocalStreamDescriptions(){let e="";for(const t of this._localStreamInfos)e+=`streamId=${t.streamId} maxBitrate=${t.maxBitrateKbps} disabledByWebRTC=${t.disabledByWebRTC} disabledByUplink=${t.disabledByUplinkPolicy}\n`;this.logger.debug((()=>e))}integrateIndexFrame(e){super.integrateIndexFrame(e);const t=new Set,i=new Set(this.streamIdToBitrateKbpsMap.keys());for(const e of this.currentIndex.sources)e.mediaType===n.SdkStreamMediaType.VIDEO&&(t.add(e.streamId),this.streamIdToBitrateKbpsMap.has(e.streamId)||this.streamIdToBitrateKbpsMap.set(e.streamId,s.UNSEEN_STREAM_BITRATE));for(const e of i)t.has(e)||this.streamIdToBitrateKbpsMap.delete(e)}integrateSubscribeAckFrame(e){if(super.integrateSubscribeAckFrame(e),!e.allocations||void 0===e.allocations)return;let t=0;for(const i of e.allocations){if(this._localStreamInfos.length<t+1){this.logger.info("simulcast: allocation has more than number of local streams");break}this._localStreamInfos[t].groupId=i.groupId,this._localStreamInfos[t].streamId=i.streamId,this.streamIdToBitrateKbpsMap.has(i.streamId)||this.streamIdToBitrateKbpsMap.set(i.streamId,s.UNSEEN_STREAM_BITRATE),t++}}}t.default=s,s.UNSEEN_STREAM_BITRATE=-2,s.RECENTLY_INACTIVE_STREAM_BITRATE=-1,s.NOT_SENDING_STREAM_BITRATE=0,s.BitratesMsgFrequencyMs=4e3},6876:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(289);class r{constructor(e,t,i,n,r){this.attendeeId="",this.groupId=0,this.streamId=0,this.ssrc=0,this.trackLabel="",this.maxBitrateKbps=0,this.avgBitrateKbps=0,this.maxFrameRate=0,this.timeEnabled=0,this.disabledByWebRTC=!1,this.disabledByUplinkPolicy=!1,this.attendeeId=e,this.groupId=t,this.streamId=i,this.maxBitrateKbps=n,this.avgBitrateKbps=r}clone(){const e=new r;return e.attendeeId=this.attendeeId,e.groupId=this.groupId,e.streamId=this.streamId,e.ssrc=this.ssrc,e.trackLabel=this.trackLabel,e.maxBitrateKbps=this.maxBitrateKbps,e.avgBitrateKbps=this.avgBitrateKbps,e.maxFrameRate=this.maxFrameRate,e.timeEnabled=this.timeEnabled,e.disabledByWebRTC=this.disabledByWebRTC,e.disabledByUplinkPolicy=this.disabledByUplinkPolicy,e}toStreamDescriptor(){const e=n.SdkStreamDescriptor.create();return e.mediaType=n.SdkStreamMediaType.VIDEO,e.trackLabel=this.trackLabel,e.attendeeId=this.attendeeId,e.streamId=this.streamId,e.groupId=this.groupId,e.framerate=this.maxFrameRate,e.maxBitrateKbps=this.disabledByUplinkPolicy||this.disabledByWebRTC?0:this.maxBitrateKbps,e.avgBitrateBps=this.avgBitrateKbps,e}}t.default=r},3327:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(543),o=i(214),s=i(7797),a=i(7804);class l{constructor(e,t,i,n){this.tileController=i,this.devicePixelRatioMonitor=n,this.tileState=new a.default,this.tileState.tileId=e,this.tileState.localTile=t,this.devicePixelRatioMonitor.registerObserver(this)}static connectVideoStreamToVideoElement(e,t,i){const o=i&&"environment"!==e.getVideoTracks()[0].getSettings().facingMode?"rotateY(180deg)":"";l.setVideoElementFlag(t,"disablePictureInPicture",i),l.setVideoElementFlag(t,"disableRemotePlayback",i),t.style.transform!==o&&(t.style.transform=o),t.hasAttribute("controls")&&t.removeAttribute("controls"),t.hasAttribute("autoplay")||t.setAttribute("autoplay","true"),t.hasAttribute("playsinline")||t.setAttribute("playsinline","true"),t.hasAttribute("muted")||(t.setAttribute("muted","true"),t.muted=!0),t.srcObject!==e&&(t.srcObject=e),(new r.default).requiresVideoElementWorkaround()&&s.default.nextTick((()=>n(this,void 0,void 0,(function*(){try{yield t.play()}catch(e){}}))))}static disconnectVideoStreamFromVideoElement(e,t){if(e)if(t)e.srcObject=null,e.style.transform="";else{if(!e.srcObject)return;e.pause(),e.style.transform="",l.setVideoElementFlag(e,"disablePictureInPicture",!1),l.setVideoElementFlag(e,"disableRemotePlayback",!1);const t=e.srcObject,i=t.getTracks();for(const e of i)e.stop(),t.removeTrack(e);(new r.default).requiresVideoElementWorkaround()?s.default.nextTick((()=>{e.srcObject=null})):e.srcObject=null}}destroy(){this.devicePixelRatioMonitor.removeObserver(this),this.tileState.boundVideoElement&&this.tileState.boundVideoElement.srcObject===this.tileState.boundVideoStream&&l.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,!1),this.tileState=new a.default}devicePixelRatioChanged(e){this.tileState.devicePixelRatio=e,this.sendTileStateUpdate()}id(){return this.tileState.tileId}state(){return this.tileState.clone()}stateRef(){return this.tileState}bindVideoStream(e,t,i,n,r,s,a){let l=!1;this.tileState.boundAttendeeId!==e&&(this.tileState.boundAttendeeId=e,new o.default(e).hasModality(o.default.MODALITY_CONTENT)&&(this.tileState.isContent=!0),l=!0),this.tileState.boundExternalUserId!==a&&(this.tileState.boundExternalUserId=a,l=!0),this.tileState.localTile!==t&&(this.tileState.localTile=t,l=!0),this.tileState.boundVideoStream!==i&&(this.tileState.boundVideoStream=i,l=!0),this.tileState.videoStreamContentWidth!==n&&(this.tileState.videoStreamContentWidth=n,l=!0),this.tileState.videoStreamContentHeight!==r&&(this.tileState.videoStreamContentHeight=r,l=!0),this.tileState.streamId!==s&&(this.tileState.streamId=s,l=!0),l&&this.sendTileStateUpdate()}bindVideoElement(e){let t=!1;this.tileState.boundVideoElement!==e&&(this.tileState.boundVideoElement=e,t=!0),null!==this.tileState.boundVideoElement?(this.tileState.videoElementCSSWidthPixels!==e.clientWidth&&(this.tileState.videoElementCSSWidthPixels=e.clientWidth,t=!0),this.tileState.videoElementCSSHeightPixels!==e.clientHeight&&(this.tileState.videoElementCSSHeightPixels=e.clientHeight,t=!0)):(this.tileState.videoElementCSSWidthPixels=null,this.tileState.videoElementCSSHeightPixels=null),t&&this.sendTileStateUpdate()}pause(){this.tileState.paused||(this.tileState.paused=!0,this.sendTileStateUpdate())}unpause(){this.tileState.paused&&(this.tileState.paused=!1,this.sendTileStateUpdate())}markPoorConnection(){return!this.tileState.poorConnection&&(this.tileState.poorConnection=!0,this.sendTileStateUpdate(),!0)}unmarkPoorConnection(){return!!this.tileState.poorConnection&&(this.tileState.poorConnection=!1,this.sendTileStateUpdate(),!0)}capture(){if(!this.tileState.active)return null;const e=document.createElement("canvas"),t=this.tileState.boundVideoElement;e.width=t.videoWidth||t.width,e.height=t.videoHeight||t.height;const i=e.getContext("2d");return i.drawImage(t,0,0,e.width,e.height),i.getImageData(0,0,e.width,e.height)}sendTileStateUpdate(){this.updateActiveState(),this.updateVideoStreamOnVideoElement(),this.updateVideoElementPhysicalPixels(),this.tileController.sendTileStateUpdate(this.state())}updateActiveState(){this.tileState.active=!(this.tileState.paused||this.tileState.poorConnection||!this.tileState.boundAttendeeId||!this.tileState.boundVideoElement||!this.tileState.boundVideoStream)}updateVideoElementPhysicalPixels(){"number"==typeof this.tileState.videoElementCSSWidthPixels&&"number"==typeof this.tileState.videoElementCSSHeightPixels?(this.tileState.videoElementPhysicalWidthPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSWidthPixels,this.tileState.videoElementPhysicalHeightPixels=this.tileState.devicePixelRatio*this.tileState.videoElementCSSHeightPixels):(this.tileState.videoElementPhysicalWidthPixels=null,this.tileState.videoElementPhysicalHeightPixels=null)}updateVideoStreamOnVideoElement(){this.tileState.active?l.connectVideoStreamToVideoElement(this.tileState.boundVideoStream,this.tileState.boundVideoElement,this.tileState.localTile):l.disconnectVideoStreamFromVideoElement(this.tileState.boundVideoElement,this.tileState.paused)}static setVideoElementFlag(e,t,i){t in e&&(e[t]=i)}}t.default=l},7804:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.tileId=null,this.localTile=!1,this.localTileStarted=!1,this.isContent=!1,this.active=!1,this.paused=!1,this.poorConnection=!1,this.boundAttendeeId=null,this.boundExternalUserId=null,this.boundVideoStream=null,this.boundVideoElement=null,this.nameplate=null,this.videoStreamContentWidth=null,this.videoStreamContentHeight=null,this.videoElementCSSWidthPixels=null,this.videoElementCSSHeightPixels=null,this.devicePixelRatio=0,this.videoElementPhysicalWidthPixels=null,this.videoElementPhysicalHeightPixels=null,this.streamId=null}clone(){const e=new i;return e.tileId=this.tileId,e.localTile=this.localTile,e.isContent=this.isContent,e.active=this.active,e.paused=this.paused,e.poorConnection=this.poorConnection,e.boundAttendeeId=this.boundAttendeeId,e.boundExternalUserId=this.boundExternalUserId,e.boundVideoStream=this.boundVideoStream,e.boundVideoElement=this.boundVideoElement,e.nameplate=this.nameplate,e.videoStreamContentWidth=this.videoStreamContentWidth,e.videoStreamContentHeight=this.videoStreamContentHeight,e.videoElementCSSWidthPixels=this.videoElementCSSWidthPixels,e.videoElementCSSHeightPixels=this.videoElementCSSHeightPixels,e.devicePixelRatio=this.devicePixelRatio,e.videoElementPhysicalWidthPixels=this.videoElementPhysicalWidthPixels,e.videoElementPhysicalHeightPixels=this.videoElementPhysicalHeightPixels,e.streamId=this.streamId,e}}t.default=i},2958:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(8236),o=i(9190),s=i(7086);t.default=class{constructor(e,t,i){this.tileFactory=e,this.audioVideoController=t,this.logger=i,this.tileMap=new Map,this.nextTileId=1,this.currentLocalTile=null,this.currentPausedTilesByIds=new Set}createDevicePixelRatioMonitorIfNeeded(){this.devicePixelRatioMonitor||(this.devicePixelRatioMonitor=new r.default(new o.default,this.logger))}discardDevicePixelRatioMonitorIfNotNeeded(){return n(this,void 0,void 0,(function*(){if(this.tileMap.size||!this.devicePixelRatioMonitor)return;const e=this.devicePixelRatioMonitor;return this.devicePixelRatioMonitor=void 0,e.destroy()}))}bindVideoElement(e,t){const i=this.getVideoTile(e);null!==i?i.bindVideoElement(t):this.logger.warn(`Ignoring video element binding for unknown tile id ${e}`)}unbindVideoElement(e){this.bindVideoElement(e,null)}startLocalVideoTile(){const e=this.findOrCreateLocalVideoTile();return this.currentLocalTile.stateRef().localTileStarted=!0,this.audioVideoController.update(),e.id()}stopLocalVideoTile(){this.currentLocalTile&&(this.currentLocalTile.stateRef().localTileStarted=!1,this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId),this.audioVideoController.update())}hasStartedLocalVideoTile(){return!(!this.currentLocalTile||!this.currentLocalTile.stateRef().localTileStarted)}removeLocalVideoTile(){this.currentLocalTile&&this.removeVideoTile(this.currentLocalTile.id())}getLocalVideoTile(){return this.currentLocalTile}pauseVideoTile(e){const t=this.getVideoTile(e);t&&(this.currentPausedTilesByIds.has(e)||(this.audioVideoController.pauseReceivingStream(t.stateRef().streamId),this.currentPausedTilesByIds.add(e)),t.pause())}unpauseVideoTile(e){const t=this.getVideoTile(e);t&&(this.currentPausedTilesByIds.has(e)&&(this.audioVideoController.resumeReceivingStream(t.stateRef().streamId),this.currentPausedTilesByIds.delete(e)),t.unpause())}getVideoTile(e){return this.tileMap.has(e)?this.tileMap.get(e):null}getVideoTileArea(e){const t=e.state();let i=0,n=0;return t.boundVideoElement&&(i=t.boundVideoElement.clientHeight*t.devicePixelRatio,n=t.boundVideoElement.clientWidth*t.devicePixelRatio),i*n}getAllRemoteVideoTiles(){const e=new Array;return this.tileMap.forEach(((t,i)=>{this.currentLocalTile&&i===this.currentLocalTile.id()||e.push(t)})),e}getAllVideoTiles(){return Array.from(this.tileMap.values())}addVideoTile(e=!1){const t=this.nextTileId;this.nextTileId+=1,this.createDevicePixelRatioMonitorIfNeeded();const i=this.tileFactory.makeTile(t,e,this,this.devicePixelRatioMonitor);return this.tileMap.set(t,i),i}removeVideoTile(e){if(!this.tileMap.has(e))return;const t=this.tileMap.get(e);this.currentLocalTile===t&&(this.currentLocalTile=null),t.destroy(),this.tileMap.delete(e),this.audioVideoController.forEachObserver((t=>{s.default.of(t.videoTileWasRemoved).map((i=>i.bind(t)(e)))})),this.discardDevicePixelRatioMonitorIfNotNeeded()}removeVideoTilesByAttendeeId(e){const t=[];for(const i of this.getAllVideoTiles()){const n=i.state();n.boundAttendeeId===e&&(this.removeVideoTile(n.tileId),t.push(n.tileId))}return t}removeAllVideoTiles(){const e=Array.from(this.tileMap.keys());for(const t of e)this.removeVideoTile(t)}sendTileStateUpdate(e){this.audioVideoController.forEachObserver((t=>{s.default.of(t.videoTileDidUpdate).map((i=>i.bind(t)(e)))}))}haveVideoTilesWithStreams(){for(const e of this.getAllVideoTiles())if(e.state().boundVideoStream)return!0;return!1}haveVideoTileForAttendeeId(e){for(const t of this.getAllVideoTiles())if(t.state().boundAttendeeId===e)return!0;return!1}captureVideoTile(e){const t=this.getVideoTile(e);return t?t.capture():null}findOrCreateLocalVideoTile(){return this.currentLocalTile||(this.currentLocalTile=this.addVideoTile(!0),this.currentLocalTile.bindVideoStream(this.audioVideoController.configuration.credentials.attendeeId,!0,null,null,null,null,this.audioVideoController.configuration.credentials.externalUserId)),this.currentLocalTile}}},4922:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(3327);t.default=class{makeTile(e,t,i,r){return new n.default(e,t,i,r)}}},9394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{}},4450:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(7086),r=i(7797),o=i(7606),s=i(5785),a=i(1133),l=i(9394);class c{constructor(e,t){this.selfAttendeeId=e,this.logger=t,this.numSenders=0,this.numParticipants=-1,this.newQualityMap=new Map,this.currentQualityMap=new Map,this.newActiveStreams=1,this.currentActiveStreams=1,this.lastUplinkBandwidthKbps=c.defaultUplinkBandwidthKbps,this.startTimeMs=0,this.lastUpdatedMs=Date.now(),this.videoIndex=null,this.currLocalDescriptions=[],this.nextLocalDescriptions=[],this.observerQueue=new Set,this.optimalParameters=new a.default(0,0,0,0,!0),this.parametersInEffect=new a.default(0,0,0,0,!0),this.lastUplinkBandwidthKbps=c.defaultUplinkBandwidthKbps,this.currentQualityMap=this.fillEncodingParamWithBitrates([300,0,1200]),this.newQualityMap=this.fillEncodingParamWithBitrates([300,0,1200])}updateConnectionMetric({uplinkKbps:e=0}){if(isNaN(e))return;0===this.startTimeMs&&(this.startTimeMs=Date.now()),Date.now()-this.startTimeMs<c.startupDurationMs?this.lastUplinkBandwidthKbps=c.defaultUplinkBandwidthKbps:this.lastUplinkBandwidthKbps=e,this.logger.debug((()=>`simulcast: uplink policy update metrics ${this.lastUplinkBandwidthKbps}`));let t=c.holdDownDurationMs;3===this.currentActiveStreams?t=2*c.holdDownDurationMs:(2===this.currentActiveStreams&&e<=c.kMidDisabledRate||1===this.currentActiveStreams&&e<=c.kHiDisabledRate)&&(t=c.holdDownDurationMs/2),Date.now()<this.lastUpdatedMs+t||(this.newQualityMap=this.calculateEncodingParameters(!1))}calculateEncodingParameters(e){const t=[new l.default,new l.default,new l.default];let i=0,n=0;if(0===this.currentActiveStreams?(i=this.lastUplinkBandwidthKbps+1,n=0):1===this.currentActiveStreams?(i=2400,n=c.kHiDisabledRate):2===this.currentActiveStreams?(i=1e3,n=c.kMidDisabledRate):(i=300,n=0),e||this.lastUplinkBandwidthKbps>=i||this.lastUplinkBandwidthKbps<=n){this.numParticipants>=0&&this.numParticipants<=2?(this.newActiveStreams=0,t[0].maxBitrateKbps=0,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=1200):this.numSenders<=4&&this.lastUplinkBandwidthKbps>=c.kHiDisabledRate?(this.newActiveStreams=1,t[0].maxBitrateKbps=300,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=1200):this.lastUplinkBandwidthKbps>=c.kMidDisabledRate?(this.newActiveStreams=2,t[0].maxBitrateKbps=this.lastUplinkBandwidthKbps>=350?200:150,t[1].maxBitrateKbps=this.numSenders<=6?600:350,t[2].maxBitrateKbps=0):(this.newActiveStreams=3,t[0].maxBitrateKbps=300,t[1].maxBitrateKbps=0,t[2].maxBitrateKbps=0);const e=t.map(((e,t,i)=>e.maxBitrateKbps));this.newQualityMap=this.fillEncodingParamWithBitrates(e),this.encodingParametersEqual()||this.logger.info(`simulcast: policy:calculateEncodingParameters bw:${this.lastUplinkBandwidthKbps} numSources:${this.numSenders} numClients:${this.numParticipants} newQualityMap: ${this.getQualityMapString(this.newQualityMap)}`)}return this.newQualityMap}chooseMediaTrackConstraints(){return{width:{ideal:1280},height:{ideal:768},frameRate:{ideal:15}}}chooseEncodingParameters(){return this.currentQualityMap=this.newQualityMap,this.currentActiveStreams=this.newActiveStreams,this.activeStreamsToPublish!==this.newActiveStreams&&(this.activeStreamsToPublish=this.newActiveStreams,this.publishEncodingSimulcastLayer()),this.currentQualityMap}updateIndex(e){const t=e.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,i=e.numberOfParticipants(),n=t!==this.numSenders,r=i>2&&this.numParticipants<=2||i<=2&&this.numParticipants>2;this.numSenders=t,this.numParticipants=i,this.optimalParameters=new a.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1),this.videoIndex=e,this.newQualityMap=this.calculateEncodingParameters(n||r)}wantsResubscribe(){let e=!this.encodingParametersEqual();this.nextLocalDescriptions=this.videoIndex.localStreamDescriptions();for(let t=0;t<this.nextLocalDescriptions.length;t++){const i=this.nextLocalDescriptions[t].streamId;if(0!==i&&i){const n=this.currLocalDescriptions.findIndex((e=>e.streamId===i));-1!==n&&this.nextLocalDescriptions[t].disabledByWebRTC!==this.currLocalDescriptions[n].disabledByWebRTC&&(e=!0)}}return e&&(this.lastUpdatedMs=Date.now()),this.currLocalDescriptions=this.nextLocalDescriptions,e}compareEncodingParameter(e,t){return JSON.stringify(e)===JSON.stringify(t)}encodingParametersEqual(){let e=!1;for(const t of s.default.NAME_ARR_ASCENDING)if(e=e||!this.compareEncodingParameter(this.newQualityMap.get(t),this.currentQualityMap.get(t)),e)break;return!e}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){return 1280}captureHeight(){return 768}captureFrameRate(){return 15}maxBandwidthKbps(){return 1400}setIdealMaxBandwidthKbps(e){}setHasBandwidthPriority(e){}fillEncodingParamWithBitrates(e){const t=new Map,i=s.default.NAME_ARR_ASCENDING,n=e;let r=4;for(let e=0;e<i.length;e++){const o=i[e];t.set(o,{rid:o,active:n[e]>0,scaleResolutionDownBy:r,maxBitrate:1e3*n[e]}),r/=2}return t}getQualityMapString(e){let t="";const i=this.videoIndex.localStreamDescriptions();return 3===i.length&&e.forEach((e=>{let n=!1;n="low"===e.rid?i[0].disabledByWebRTC:"mid"===e.rid?i[1].disabledByWebRTC:i[2].disabledByWebRTC,t+=`{ rid: ${e.rid} active:${e.active} disabledByWebRTC: ${n} maxBitrate:${e.maxBitrate}}`})),t}getEncodingSimulcastLayer(e){switch(e){case 0:return o.default.High;case 1:return o.default.LowAndHigh;case 2:return o.default.LowAndMedium;case 3:return o.default.Low}}publishEncodingSimulcastLayer(){const e=this.getEncodingSimulcastLayer(this.activeStreamsToPublish);this.forEachObserver((t=>{n.default.of(t.encodingSimulcastLayersDidChange).map((i=>i.bind(t)(e)))}))}addObserver(e){this.logger.info("adding simulcast uplink observer"),this.observerQueue.add(e)}removeObserver(e){this.logger.info("removing simulcast uplink observer"),this.observerQueue.delete(e)}forEachObserver(e){for(const t of this.observerQueue)r.default.nextTick((()=>{this.observerQueue.has(t)&&e(t)}))}}t.default=c,c.defaultUplinkBandwidthKbps=1200,c.startupDurationMs=6e3,c.holdDownDurationMs=4e3,c.defaultMaxFrameRate=15,c.kHiDisabledRate=700,c.kMidDisabledRate=240},4442:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1133);t.default=class{constructor(e){this.selfAttendeeId=e,this.numParticipants=0,this.idealMaxBandwidthKbps=1400,this.hasBandwidthPriority=!1,this.optimalParameters=new n.default(0,0,0,0,!1),this.parametersInEffect=new n.default(0,0,0,0,!1)}updateConnectionMetric(e){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(e){this.numParticipants=e.numberOfVideoPublishingParticipantsExcludingSelf(this.selfAttendeeId)+1,this.optimalParameters=new n.default(this.captureWidth(),this.captureHeight(),this.captureFrameRate(),this.maxBandwidthKbps(),!1)}wantsResubscribe(){return!this.parametersInEffect.equal(this.optimalParameters)}chooseCaptureAndEncodeParameters(){return this.parametersInEffect=this.optimalParameters.clone(),this.parametersInEffect.clone()}captureWidth(){let e=640;return this.numParticipants>4&&(e=320),e}captureHeight(){let e=384;return this.numParticipants>4&&(e=192),e}captureFrameRate(){return 15}maxBandwidthKbps(){if(this.hasBandwidthPriority)return Math.trunc(this.idealMaxBandwidthKbps);let e=0;return e=this.numParticipants<=2?this.idealMaxBandwidthKbps:this.numParticipants<=4?2*this.idealMaxBandwidthKbps/3:(544/11+14880/(11*this.numParticipants))/600*this.idealMaxBandwidthKbps,Math.trunc(e)}setIdealMaxBandwidthKbps(e){this.idealMaxBandwidthKbps=e}setHasBandwidthPriority(e){this.hasBandwidthPriority=e}}},657:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(1133);t.default=class{constructor(){}updateConnectionMetric(e){}chooseMediaTrackConstraints(){return{}}chooseEncodingParameters(){return new Map}updateIndex(e){}wantsResubscribe(){return!1}chooseCaptureAndEncodeParameters(){return new n.default(0,0,0,0,!1)}maxBandwidthKbps(){return 0}setIdealMaxBandwidthKbps(e){}setHasBandwidthPriority(e){}}},3928:(e,t)=>{"use strict";function i(e){return e.map((e=>"object"==typeof e?JSON.stringify(e):`${e}`)).join(" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.base=e}debug(...e){this.base.debug(i(e))}info(...e){this.base.info(i(e))}warn(...e){this.base.warn(i(e))}error(...e){this.base.error(i(e))}}},2497:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceFocusDeviceTransformer=void 0;const r=i(6035),o=i(4046),s=i(3928),a=i(8878),l=i(851);class c{constructor(e,{preload:t=!0,logger:i,fetchBehavior:n=c.defaultFetchBehavior()},r){this.spec=e,this.supported=!0,this.logger=i,this.vfLogger=i?new s.default(i):void 0,this.preload=t,this.fetchBehavior=n,this.spec=c.augmentSpec(this.spec),r&&(this.configuration=Promise.resolve(r))}static isSupported(e,t){const i={fetchBehavior:c.defaultFetchBehavior(),logger:(null==t?void 0:t.logger)?new s.default(t.logger):void 0};return r.VoiceFocus.isSupported(c.augmentSpec(e),i)}static create(e={},t={},i){return n(this,void 0,void 0,(function*(){const n=new c(e,t,i);return yield n.init(),n}))}static configure(e={},t={}){return n(this,void 0,void 0,(function*(){return new c(e,t,void 0).configure(!0)}))}getConfiguration(){return this.configuration}isSupported(){return this.supported}createTransformDevice(e,t){return n(this,void 0,void 0,(function*(){if(this.supported)try{const i=!0,[n,r]=yield this.allocateVoiceFocus(i);return new a.default(e,n,r,t)}catch(e){return}}))}static augmentSpec(e){return e&&(e.assetGroup||e.revisionID)?e:Object.assign(Object.assign({},e),{assetGroup:c.currentSDKAssetGroup()})}configure(e=!1){return n(this,void 0,void 0,(function*(){const t={fetchBehavior:this.fetchBehavior,preResolve:e,logger:this.vfLogger};return r.VoiceFocus.configure(this.spec,t)}))}init(){var e;return n(this,void 0,void 0,(function*(){this.configuration||(this.configuration=this.configure());const t=yield this.configuration;if(t.supported){this.pendingVoiceFocus=this.createVoiceFocus(t,this.preload);try{yield this.pendingVoiceFocus}catch(t){null===(e=this.logger)||void 0===e||e.error(`Unable to initialize Amazon Voice Focus: ${t}`),this.supported=!1}}else this.supported=!1}))}createVoiceFocus(e,t){return n(this,void 0,void 0,(function*(){const i=new l.default;return[yield r.VoiceFocus.init(e,{delegate:i,preload:t,logger:this.vfLogger}),i]}))}allocateVoiceFocus(e){return n(this,void 0,void 0,(function*(){if(!this.supported)throw new Error("Not supported.");if(this.pendingVoiceFocus){const e=this.pendingVoiceFocus;return this.pendingVoiceFocus=void 0,e}return this.createVoiceFocus(yield this.configuration,e)}))}static majorVersion(){return o.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|[1-9][0-9]*)/)[0]}static majorMinorVersion(){return o.default.sdkVersion.match(/^[1-9][0-9]*\.(?:0|(?:[1-9][0-9]*))\.(?:0|[1-9][0-9]*)/)[0]}static currentSDKAssetGroup(){const e=this.majorVersion();return e?`sdk-${e}`:"stable-v1"}static defaultFetchBehavior(){const e=c.majorMinorVersion()||"unknown",t=o.default.sdkUserAgentLowResolution;return{escapedQueryString:`sdk=${encodeURIComponent(e)}&ua=${encodeURIComponent(t)}`}}}t.VoiceFocusDeviceTransformer=c,t.default=c},8878:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(543);class o{constructor(e,t,i,n,o=!1,s,a=new r.default){this.device=e,this.voiceFocus=t,this.delegate=i,this.nodeOptions=n,this.failed=o,this.node=s,this.browserBehavior=a}getInnerDevice(){return this.device}mute(e){return n(this,void 0,void 0,(function*(){this.node&&(e?yield this.node.disable():yield this.node.enable())}))}stop(){return n(this,void 0,void 0,(function*(){this.node&&(this.node.disconnect(),yield this.node.stop())}))}chooseNewInnerDevice(e){return n(this,void 0,void 0,(function*(){return this.device!==e||("default"===(t=e)||t&&"object"==typeof t&&("deviceId"in t&&"default"===t.deviceId||"id"in t&&"default"===t.id))?new o(e,this.voiceFocus,this.delegate,this.nodeOptions,this.failed,this.node,this.browserBehavior):this;var t}))}intrinsicDevice(){return n(this,void 0,void 0,(function*(){if(this.failed)return this.device;const e={echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googNoiseSuppression2:!1};let t;return t=!this.nodeOptions||void 0===this.nodeOptions.agc||this.nodeOptions.agc.useBuiltInAGC,e.autoGainControl=t,e.googAutoGainControl=t,e.googAutoGainControl2=t,this.device?"string"==typeof this.device?(this.browserBehavior.requiresNoExactMediaStreamConstraints()?e.deviceId=this.device:e.deviceId={exact:this.device},e):this.device.id?this.device:Object.assign(Object.assign({},this.device),e):e}))}createAudioNode(e){var t,i;return n(this,void 0,void 0,(function*(){if((null===(t=this.node)||void 0===t?void 0:t.context)===e)return{start:this.node,end:this.node};const n=Object.assign({enabled:!0,agc:{useVoiceFocusAGC:!1}},this.nodeOptions);try{null===(i=this.node)||void 0===i||i.disconnect(),this.node=yield this.voiceFocus.createNode(e,n);return{start:this.node,end:this.node}}catch(e){throw this.failed=!0,this.delegate.onFallback(this,e),e}}))}addObserver(e){this.delegate.addObserver(e)}removeObserver(e){this.delegate.removeObserver(e)}}t.default=o},851:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.observers=new Set}addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}onFallback(e,t){var i;for(const n of this.observers)null===(i=n.voiceFocusFellBackToInnerStream)||void 0===i||i.call(n,e,t)}onCPUWarning(){var e;for(const t of this.observers)null===(e=t.voiceFocusInsufficientResources)||void 0===e||e.call(t)}}},9751:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t,i,n,r){this.logger=e,this.realtimeController=t,this.minVolumeDecibels=i,this.maxVolumeDecibels=n,this.selfAttendeeId=r,this.streamIdToAttendeeId={},this.streamIdToExternalUserId={},this.warnedAboutMissingStreamIdMapping={},this.attendeeIdToStreamId={},this.sessionReconnected=!1}onReconnect(){this.sessionReconnected=!0}sendRealtimeUpdatesForAudioStreamIdInfo(e){let t=0;for(const i of e.streams){const n=!!i.attendeeId,r=!!i.externalUserId,o=i.hasOwnProperty("muted"),s=!!i.dropped;if(n){this.attendeeIdToStreamId[i.attendeeId]&&this.attendeeIdToStreamId[i.attendeeId]<i.audioStreamId&&delete this.attendeeIdToStreamId[i.attendeeId],this.streamIdToAttendeeId[i.audioStreamId]=i.attendeeId;const n=r?i.externalUserId:i.attendeeId;this.streamIdToExternalUserId[i.audioStreamId]=n,this.attendeeIdToStreamId[i.attendeeId]=i.audioStreamId,this.realtimeController.realtimeSetAttendeeIdPresence(i.attendeeId,!0,n,!1,{attendeeIndex:t++,attendeesInFrame:e.streams.length})}if(o){const e=this.streamIdToAttendeeId[i.audioStreamId],t=this.streamIdToExternalUserId[i.audioStreamId];this.realtimeController.realtimeUpdateVolumeIndicator(e,null,i.muted,null,t)}if(!n&&!o){const n=this.streamIdToAttendeeId[i.audioStreamId];if(n){const r=this.streamIdToExternalUserId[i.audioStreamId];delete this.streamIdToAttendeeId[i.audioStreamId],delete this.streamIdToExternalUserId[i.audioStreamId],delete this.warnedAboutMissingStreamIdMapping[i.audioStreamId],this.attendeeIdToStreamId[n]===i.audioStreamId&&delete this.attendeeIdToStreamId[n];let o=!1;for(const e of Object.keys(this.streamIdToAttendeeId)){const t=parseInt(e);if(t>i.audioStreamId&&this.streamIdToAttendeeId[t]===n){o=!0;break}}o||this.realtimeController.realtimeSetAttendeeIdPresence(n,!1,r,s,{attendeeIndex:t++,attendeesInFrame:e.streams.length})}}}this.sessionReconnected&&(this.cleanUpState(e),this.sessionReconnected=!1)}cleanUpState(e){const t=Object.values(this.streamIdToAttendeeId),i=e.streams.map((e=>e.attendeeId)),n=t.filter((e=>!i.includes(e)));for(const[e,t]of n.entries()){const i=this.attendeeIdToStreamId[t],n=this.streamIdToExternalUserId[i];delete this.streamIdToAttendeeId[i],delete this.streamIdToExternalUserId[i],delete this.warnedAboutMissingStreamIdMapping[i],delete this.attendeeIdToStreamId[t],this.realtimeController.realtimeSetAttendeeIdPresence(t,!1,n,!1,{attendeeIndex:e,attendeesInFrame:t.length}),t===this.selfAttendeeId&&this.logger.warn("the volume indicator adapter cleans up the current attendee (presence = false) after reconnection")}}sendRealtimeUpdatesForAudioMetadata(e){let t=null,i=null;for(const n of e.attendeeStates){const e=this.attendeeIdForStreamId(n.audioStreamId);n.hasOwnProperty("volume")&&(null===t&&(t={}),null!==e&&(t[e]=this.normalizedVolume(n))),n.hasOwnProperty("signalStrength")&&(null===i&&(i={}),null!==e&&(i[e]=this.normalizedSignalStrength(n)))}this.applyRealtimeUpdatesForAudioMetadata(t,i)}normalizedVolume(e){const t=1-(-e.volume-this.maxVolumeDecibels)/(this.minVolumeDecibels-this.maxVolumeDecibels);return Math.min(Math.max(t,0),1)}normalizedSignalStrength(e){const t=e.signalStrength/i.MAX_SIGNAL_STRENGTH_LEVELS;return Math.min(Math.max(t,0),1)}applyRealtimeUpdatesForAudioMetadata(e,t){for(const n in this.streamIdToAttendeeId){const r=this.streamIdToAttendeeId[n],o=this.streamIdToExternalUserId[n];let s=null,a=null;null!==e&&(s=e.hasOwnProperty(r)?e[r]:i.IMPLICIT_VOLUME),null!==t&&(a=t.hasOwnProperty(r)?t[r]:i.IMPLICIT_SIGNAL_STRENGTH),null===s&&null===a||this.realtimeController.realtimeUpdateVolumeIndicator(r,s,null,a,o)}}attendeeIdForStreamId(e){if(0===e)return null;return this.streamIdToAttendeeId[e]||(this.warnedAboutMissingStreamIdMapping[e]||(this.warnedAboutMissingStreamIdMapping[e]=!0,this.logger.warn(`volume indicator stream id ${e} seen before being defined`)),null)}}t.default=i,i.MAX_SIGNAL_STRENGTH_LEVELS=2,i.IMPLICIT_VOLUME=0,i.IMPLICIT_SIGNAL_STRENGTH=1},7631:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(4046),r=i(7387);t.default=class{constructor(e){this.logger=e}create(e,t,i){this.connection=new WebSocket(i?e:n.default.urlWithVersion(e),t),this.connection.binaryType="arraybuffer"}send(e){if(!this.connection)return this.logger.error("WebSocket not yet created or already destroyed."),!1;try{return e instanceof Uint8Array?this.connection.send(e.buffer):this.connection.send(e),!0}catch(e){return this.logger.debug((()=>`send error: ${e.message}, websocket state=${r.default[this.readyState()]}`)),!1}}close(e,t){var i;null===(i=this.connection)||void 0===i||i.close(e,t)}destroy(){this.connection=void 0}addEventListener(e,t){this.connection?this.connection.addEventListener(e,t):this.logger.warn("Cannot add event listener with no WebSocket connection.")}readyState(){if(!this.connection)return r.default.None;switch(this.connection.readyState){case WebSocket.CONNECTING:return r.default.Connecting;case WebSocket.OPEN:return r.default.Open;case WebSocket.CLOSING:return r.default.Closing;case WebSocket.CLOSED:return r.default.Closed}}}},7387:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketReadyState=void 0,function(e){e[e.None=0]="None",e[e.Connecting=1]="Connecting",e[e.Open=2]="Open",e[e.Closing=3]="Closing",e[e.Closed=4]="Closed"}(i=t.WebSocketReadyState||(t.WebSocketReadyState={})),t.default=i},5995:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.decideModel=t.measureAndDecideExecutionApproach=void 0;const r=i(5021),o=i(9424),s={wasm:{noSupport:.07,inline:{c100:1,c50:.36,c20:.16,c10:.07},worker:{c100:.5,c50:.18,c20:.08,c10:.06}},simd:{noSupport:.1,inline:{c100:1,c50:.43,c20:.3,c10:.2},worker:{c100:.5,c50:.21,c20:.15,c10:.1}}};class a{constructor(e,t){this.fetchConfig=e,this.logger=t;const i=`${e.paths.workers}estimator-v1.js`;this.fetchBehavior={headers:e.headers,escapedQueryString:e.escapedQueryString},this.worker=r.loadWorker(i,"VoiceFocusEstimator",this.fetchBehavior,t)}roundtrip(e,t,i){return new Promise(((n,r)=>{this.worker.then((r=>{let o;o=e=>{const{message:s,key:a}=e.data;s===t&&a===i&&(r.removeEventListener("message",o),n(e.data))},r.addEventListener("message",o),r.postMessage(e)})).catch((e=>{var t;null===(t=this.logger)||void 0===t||t.error("Failed to load worker.",e),r(e)}))}))}supportsSIMD(e){const t="simd",i=e||`${this.fetchConfig.paths.wasm}simd-v1.wasm`,n={message:"supports-simd",fetchBehavior:this.fetchBehavior,path:i,key:t};return this.roundtrip(n,"simd-support",t).then((e=>e.supports))}measure(e,t){const i=`${this.fetchConfig.paths.wasm}bench-v1.wasm`,n=`${this.fetchConfig.paths.wasm}bench-v1_simd.wasm`,r=e?n:i,o=`bench:${e}`,s={message:"measure",fetchBehavior:this.fetchBehavior,budget:t,path:r,key:o};return this.roundtrip(s,"measurement",o).then((e=>{if(e.measurement)return e.measurement;throw new Error("Failed to measure.")}))}stop(){this.worker.then((e=>{var t;null===(t=this.logger)||void 0===t||t.debug("Stopping estimator worker."),e.terminate()})).catch((e=>{}))}}const l=(e,t,i,r)=>n(void 0,void 0,void 0,(function*(){const n={supportsSIMD:e,supportsSAB:o.supportsSharedArrayBuffer(globalThis,window,i),duration:-1};if(e)return null==i||i.info("Supports SIMD: true (force)"),n;const s=!r,l=r||new a(t,i);try{const t=!o.isOldChrome(window,i)&&(yield l.supportsSIMD());return null==i||i.info(`Supports SIMD: ${t} (force: ${e})`),n.supportsSIMD=t,n}finally{s&&l.stop()}}));t.measureAndDecideExecutionApproach=(e,t,i,r=s)=>n(void 0,void 0,void 0,(function*(){let c=e.executionPreference;const{usagePreference:u,variantPreference:d,simdPreference:h,estimatorBudget:f,executionQuantaPreference:p}=e;"interactivity"===u&&"inline"!==c&&(null==i||i.debug(`Overriding execution preference ${c} to reflect interactivity preference.`),c="inline");const m="force"===h,g="auto"!==d,v="auto"!==c;let b;try{b=g&&v?yield l(m,t,i):yield((e,t,i,r)=>n(void 0,void 0,void 0,(function*(){const n=new a(t,r);try{const o=yield l(e,t,r,n);if(o.supportsSIMD)try{return o.duration=yield n.measure(!0,i),null==r||r.info("SIMD timing:",o.duration),o}catch(e){null==r||r.warn("Failed SIMD estimation; falling back to non-SIMD."),o.supportsSIMD=!1}return o.duration=yield n.measure(!1,i),null==r||r.info("No-SIMD timing:",o.duration),o}catch(e){throw null==r||r.error("Could not feature check.",e),e}finally{n.stop()}})))(m,t,f,i)}catch(e){throw null==i||i.error("Could not load estimator.",e),new Error("Could not load Voice Focus estimator.")}return(({supportsSIMD:e,supportsSAB:t,duration:i,executionPreference:n="auto",simdPreference:r,variantPreference:a="auto",usagePreference:l,executionQuantaPreference:c=3},u=s,d)=>{const h="force"===r||"disable"!==r&&e,f=-1!==i,p=f?(h?2.5:2.63)/i:0,m=h?u.simd:u.wasm,g=f?((e,t)=>1===e?.6:"quality"===t?.65*e:.5*e)(c,l)*p:0,v=f?.7*p:0,b=e=>({supported:!1,reason:e});if(f){if(p<m.noSupport)return b(`Performance score ${p} worse than threshold ${m.noSupport}.`)}else if("auto"===n||"auto"===a)return b(`Missing explicit execution (${n}) or variant (${a}) preference, but no scoring performed.`);null==d||d.debug(`Bench duration ${i} yields inline score ${g} and worker score ${v}.`);const S=(e,t,i)=>({supported:!0,useSIMD:h,processor:e,executionApproach:t,variant:i,executionQuanta:"inline"===t?c:void 0}),y=(e,t,i)=>"auto"!==t?!f||e>i[t]?t:"failed":e>i.c100?"c100":e>i.c50?"c50":e>i.c20?"c20":e>i.c10?"c10":"failed",w=e=>{switch(e||"auto"){case"auto":{let e=w("inline"),t=w("worker");return null==d||d.debug(`Reducing auto preference: ${JSON.stringify(e)} vs ${JSON.stringify(t)}`),!1===e.supported||!1===t.supported?t:e.variant===t.variant||"c50"===e.variant?e:t}case"worker":return o.supportsSharedArrayBuffer(globalThis,window,d)?w("worker-sab"):w("worker-postMessage");case"inline":{const e=y(g,a,m.inline);return"failed"===e?b(`Performance score ${g} not sufficient for inline use with variant preference ${a}.`):S("voicefocus-inline-processor","inline",e)}case"worker-sab":{if(!t){const e="Requested worker-sab but no SharedArrayBuffer support.";return null==d||d.warn(e),{supported:!1,reason:e}}const e=y(v,a,m.worker);return"failed"===e?b(`Performance score ${v} not sufficient for worker use with variant preference ${a}.`):S("voicefocus-worker-sab-processor","worker-sab",e)}case"worker-postMessage":{const e=y(v,a,m.worker);return"failed"===e?b(`Performance score ${v} not sufficient for worker use.`):S("voicefocus-worker-postMessage-processor","worker-postMessage",e)}}};return w(n)})(Object.assign(Object.assign({},b),{simdPreference:h,executionPreference:c,variantPreference:d,usagePreference:u,executionQuantaPreference:p}),r,i)})),t.decideModel=({category:e,name:t,variant:i,simd:n,url:r})=>`${e}-${t}-${i}-v1${n?"_simd":""}`},623:(e,t)=>{"use strict";function i(e,t,i){if(!i)return fetch(e,t);const o=r(e,i),s=n(t,i);return fetch(o,s)}function n(e,t){return(null==t?void 0:t.headers)?e?Object.assign(Object.assign({},e),{headers:Object.assign(Object.assign({},e.headers||{}),t.headers)}):{headers:t.headers}:e}function r(e,t){if(!(null==t?void 0:t.escapedQueryString))return e;const i=-1!==e.lastIndexOf("?");return`${e}${i?"&":"?"}${t.escapedQueryString}`}Object.defineProperty(t,"__esModule",{value:!0}),t.isValidRevisionID=t.isValidAssetGroup=t.resolveURL=t.addQueryParams=t.withQueryString=t.withRequestHeaders=t.fetchWithBehavior=void 0,t.fetchWithBehavior=i,t.withRequestHeaders=n,t.withQueryString=r,t.addQueryParams=function(e,t){const i=Object.keys(t);if(!i.length)return e;const n=new URLSearchParams(null==e?void 0:e.escapedQueryString);for(const e of i)n.append(e,t[e]);return Object.assign(Object.assign({},e),{escapedQueryString:n.toString()})};const o={method:"HEAD",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"origin"};t.resolveURL=function(e,t){return i(e,o,t).then((t=>t.redirected?t.url:e))},t.isValidAssetGroup=function(e){return!!e&&/^[-.a-zA-Z0-9]+$/.test(e)},t.isValidRevisionID=function(e){return!!e&&/^[123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ]{22}$/.test(e)}},5021:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadWorker=void 0;const n=i(623),r={method:"GET",mode:"cors",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer"};t.loadWorker=(e,t,i,o)=>{null==o||o.debug(`Loading ${t} worker from ${e}.`);let s=!1;try{s=self.origin===new URL(e).origin}catch(e){null==o||o.error("Could not compare origins.",e)}if(s){const r=n.withQueryString(e,i);return Promise.resolve(new Worker(r,{name:t}))}return n.fetchWithBehavior(e,r,i).then((e=>{if(e.ok)return e.blob().then((e=>new Worker(window.URL.createObjectURL(e))));throw new Error("Fetch failed.")}))}},9424:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isOldChrome=t.supportsWASMStreaming=t.supportsSharedArrayBuffer=t.supportsWASM=t.supportsAudioWorklet=t.supportsWorker=t.supportsVoiceFocusWorker=t.supportsWASMPostMessage=t.isSafari=void 0;const r=i(5021);t.isSafari=(e=globalThis)=>{const t=e.navigator.userAgent,i=t.match(/Safari\//),n=t.match(/Chrom(?:e|ium)\//);return!(!i||n)},t.supportsWASMPostMessage=(e=globalThis)=>!t.isSafari(e),t.supportsVoiceFocusWorker=(e=globalThis,i,o)=>n(void 0,void 0,void 0,(function*(){if(!t.supportsWorker(e,o))return!1;const n=`${i.paths.workers}worker-v1.js`;try{const e=yield r.loadWorker(n,"VoiceFocusTestWorker",i,o);try{e.terminate()}catch(e){null==o||o.debug("Failed to terminate worker.",e)}return!0}catch(e){return null==o||o.info("Failed to fetch and instantiate test worker",e),!1}})),t.supportsWorker=(e=globalThis,t)=>{try{return!!e.Worker}catch(e){return null==t||t.info("Does not support Worker",e),!1}},t.supportsAudioWorklet=(e=globalThis,t)=>{try{return!!e.AudioWorklet&&!!e.AudioWorkletNode}catch(e){return null==t||t.info("Does not support Audio Worklet",e),!1}},t.supportsWASM=(e=globalThis,t)=>{try{return!(!e.WebAssembly||!e.WebAssembly.compile&&!e.WebAssembly.compileStreaming)}catch(e){return null==t||t.info("Does not support WASM",e),!1}},t.supportsSharedArrayBuffer=(e=globalThis,t=globalThis,i)=>{try{return!(!e.SharedArrayBuffer||!t.chrome&&!e.crossOriginIsolated)}catch(e){return null==i||i.info("Does not support SharedArrayBuffer."),!1}},t.supportsWASMStreaming=(e=globalThis,t)=>{var i;try{return!!(null===(i=e.WebAssembly)||void 0===i?void 0:i.compileStreaming)}catch(e){return null==t||t.info("Does not support WASM streaming compilation",e),!1}},t.isOldChrome=(e=globalThis,t)=>{try{if(!e.chrome)return!1}catch(e){}const i=e.navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)/);return i?parseInt(i[1],10)<90&&(null==t||t.debug(`Chrome ${i[1]} has incomplete SIMD support.`),!0):(null==t||t.debug("Unknown Chrome version."),!0)}},103:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceFocusAudioWorkletNode=void 0;class i extends("undefined"!=typeof globalThis&&globalThis.AudioWorkletNode||class{}){}t.VoiceFocusAudioWorkletNode=i},6035:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getAudioInput=t.createAudioContext=t.VoiceFocus=void 0;const r=i(5995),o=i(623),s=i(5021),a=i(9424),l=i(2633),c=i(1678),u=i(271),d={useVoiceFocusAGC:!1,useBuiltInAGC:!0},h="stable-v1",f="https://static.sdkassets.chime.aws/",p={processors:`${f}processors/`,workers:`${f}workers/`,wasm:`${f}wasm/`,models:`${f}wasm/`},m={latencyHint:0},g={channelCount:1,echoCancellation:!0,googEchoCancellation:!0,noiseSuppression:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googTypingNoiseDetection:!1},v=Object.assign(Object.assign({},g),{autoGainControl:!0,googAutoGainControl:!0,googAutoGainControl2:!0}),b=Object.assign(Object.assign({},g),{autoGainControl:!1,googAutoGainControl:!1,googAutoGainControl2:!1}),S={"voicefocus-worker-sab-processor":{file:"worklet-worker-sab-processor-v1.js",node:c.default},"voicefocus-worker-postMessage-processor":{file:"worklet-worker-postMessage-processor-v1.js",node:u.default},"voicefocus-inline-processor":{file:"worklet-inline-processor-v1.js",node:l.default}},y=(e,t)=>{if(void 0!==e&&!o.isValidAssetGroup(e))throw new Error(`Invalid asset group ${e}`);if(void 0!==t&&!o.isValidRevisionID(t))throw new Error(`Invalid revision ID ${t}`)},w=(e,t)=>`${t.models}${r.decideModel(e)}.wasm`;class k{constructor(e,t,i,n,r){this.processorURL=t,this.nodeConstructor=i,this.nodeOptions=n,this.executionQuanta=r,this.internal={worker:e,nodeOptions:n}}static isSupported(e,t){const{fetchBehavior:i,logger:n}=t||{};if("undefined"==typeof globalThis)return null==n||n.debug("Browser does not have globalThis."),Promise.resolve(!1);if(!a.supportsAudioWorklet(globalThis,n))return null==n||n.debug("Browser does not support Audio Worklet."),Promise.resolve(!1);if(!a.supportsWASM(globalThis,n))return null==n||n.debug("Browser does not support WASM."),Promise.resolve(!1);a.supportsWASMStreaming(globalThis,n)||null==n||n.debug("Browser does not support streaming WASM compilation.");const{assetGroup:r=h,revisionID:s,paths:l=p}=e||{};y(r,s);const c=s?{revisionID:s}:{assetGroup:r},u=o.addQueryParams(i,c),d=Object.assign(Object.assign({},u),{paths:l});return a.supportsVoiceFocusWorker(globalThis,d,n)}static mungeExecutionPreference(e,t){const i=void 0===e||"auto"===e;if(a.isSafari(globalThis)){if(i||"inline"===e)return"inline";if(!i)throw new Error(`Unsupported execution preference ${e}`)}if("worker-sab"===e&&!a.supportsSharedArrayBuffer(globalThis,globalThis,t))throw new Error(`Unsupported execution preference ${e}`);return e||"auto"}static configure(e,t){return n(this,void 0,void 0,(function*(){const{fetchBehavior:i,preResolve:n,logger:s}=t||{},{category:a="voicefocus",name:l="default",variant:c="auto",assetGroup:u=h,revisionID:d,simd:f="detect",executionPreference:m="auto",executionQuantaPreference:g,usagePreference:v="interactivity",estimatorBudget:b=100,paths:S=p,thresholds:k}=e||{};if(null==s||s.debug("Configuring Voice Focus with spec",e),void 0!==a&&"voicefocus"!==a)throw new Error(`Unrecognized category ${a}`);if(void 0!==l&&"default"!==l)throw new Error(`Unrecognized feature name ${l}`);if(void 0!==c&&!["auto","c100","c50","c20","c10"].includes(c))throw new Error(`Unrecognized feature variant ${c}`);if(void 0!==g&&![1,2,3].includes(g))throw new Error(`Unrecognized execution quanta preference ${g}`);if(y(u,d),void 0!==f&&!["detect","force","disable"].includes(f))throw new Error(`Unrecognized SIMD option ${f}`);if(void 0!==m&&!["auto","inline","worker","worker-sab","worker-postMessage"].includes(m))throw new Error(`Unrecognized execution preference ${m}`);if(void 0!==v&&!["quality","interactivity"].includes(v))throw new Error(`Unrecognized usage preference ${v}`);const C={executionPreference:this.mungeExecutionPreference(m,s),usagePreference:v,executionQuantaPreference:g,variantPreference:c,simdPreference:f,estimatorBudget:b},I=d?{revisionID:d}:{assetGroup:u},T=o.addQueryParams(i,I),E=Object.assign({paths:S},T),x=yield r.measureAndDecideExecutionApproach(C,E,s,k);if(!1===x.supported)return{supported:!1,reason:x.reason};null==s||s.info("Decided execution approach",x);const{useSIMD:M,processor:_,variant:A,executionQuanta:O}=x,P={category:a||"voicefocus",name:l||"default",variant:A,simd:M};if(n){const e=w(P,S);P.url=yield o.resolveURL(e,T)}return{fetchConfig:E,model:P,processor:_,executionQuanta:O,supported:!0}}))}static init(e,{delegate:t,preload:i=!0,logger:r}){return n(this,void 0,void 0,(function*(){if(!1===e.supported)throw new Error("Voice Focus not supported. Reason: "+e.reason);const{model:n,processor:o,fetchConfig:l,executionQuanta:c}=e,{simd:u}=n,{paths:d}=l;if("voicefocus-inline-processor"!==o&&"voicefocus-worker-postMessage-processor"!==o&&"voicefocus-worker-sab-processor"!==o)throw new Error(`Unknown processor ${o}`);const h=n.url||w(n,d);null==r||r.debug(`Using model URL ${h}.`);const f=`${d.wasm}audio_buffer-v1${u?"_simd":""}.wasm`,p=`${d.wasm}resampler-v1${u?"_simd":""}.wasm`,m=`${d.workers}worker-v1.js`,{file:g,node:v}=S[o],b=`${d.processors}${g}`,y=yield s.loadWorker(m,"VoiceFocusWorker",l,r);if(i){null==r||r.debug("Preloading",h);let e=a.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";y.postMessage({message:e,preload:!0,key:"model",fetchBehavior:l,path:h})}const C=new k(y,b,v,{processor:o,worker:y,audioBufferURL:f,resamplerURL:p,fetchBehavior:l,modelURL:h,delegate:t},c);return Promise.resolve(C)}))}createNode(e,t){var i;const{voiceFocusSampleRate:n=(16e3===e.sampleRate?16e3:48e3),enabled:r=!0,agc:s=d}=t||{},a={voiceFocusSampleRate:n,enabled:r,sendBufferCount:10,prefill:6,agc:s,executionQuanta:this.executionQuanta},l=o.withQueryString(this.processorURL,null===(i=this.nodeOptions)||void 0===i?void 0:i.fetchBehavior);return e.audioWorklet.addModule(l).then((()=>new this.nodeConstructor(e,Object.assign(Object.assign({},this.nodeOptions),{processorOptions:a}))))}applyToStream(e,t,i){return n(this,void 0,void 0,(function*(){const n=t.createMediaStreamSource(e),r=yield this.applyToSourceNode(n,t,i),o=t.createMediaStreamDestination();return r.connect(o),{node:r,source:n,destination:o,stream:o.stream}}))}applyToSourceNode(e,t,i){return n(this,void 0,void 0,(function*(){const n=yield this.createNode(t,i);return e.connect(n),n}))}}t.VoiceFocus=k,t.createAudioContext=(e=m)=>new(window.AudioContext||window.webkitAudioContext)(e),t.getAudioInput=(e,t,i)=>n(void 0,void 0,void 0,(function*(){var n,r;const{constraints:o,spec:s,delegate:a,preload:l=!0,options:c}=t,{logger:u}=i,h=yield k.configure(s,i);if(!h.supported)return null===(n=i.logger)||void 0===n||n.warn("Voice Focus not supported; returning standard stream."),window.navigator.mediaDevices.getUserMedia(o);const f=yield k.init(h,{delegate:a,preload:l,logger:u}),p=(null===(r=t.options)||void 0===r?void 0:r.agc)||d,m=yield window.navigator.mediaDevices.getUserMedia(((e,t)=>{let i;if(i=t.useBuiltInAGC?v:b,!e)return{audio:i};if(!e.audio)return e;if(e.video)throw new Error("Not adding Voice Focus to multi-device getUserMedia call.");return Object.assign(Object.assign({},e),{audio:!0===e.audio?i:Object.assign(Object.assign({},e.audio),i)})})(o,p));return f.applyToStream(m,e,c).then((e=>e.stream))}))},2633:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9424),o=i(103);class s extends o.VoiceFocusAudioWorkletNode{constructor(e,t){super(e,t.processor,t);const{modelURL:i,worker:n,fetchBehavior:o,logger:s}=t;this.logger=s,this.port.onmessage=this.onProcessorMessage.bind(this),s&&s.debug("VoiceFocusInlineNode:",i),this.worker=n,this.worker.onmessage=this.onWorkerMessage.bind(this);const a=r.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:a,key:"model",fetchBehavior:o,path:i})}onModuleBufferLoaded(e,t){this.port.postMessage({message:"module-buffer",buffer:e,key:t})}onModuleLoaded(e,t){this.port.postMessage({message:"module",module:e,key:t})}enable(){return n(this,void 0,void 0,(function*(){this.port.postMessage({message:"enable"})}))}disable(){return n(this,void 0,void 0,(function*(){this.port.postMessage({message:"disable"})}))}stop(){return n(this,void 0,void 0,(function*(){this.port.postMessage({message:"stop"}),this.disconnect()}))}onProcessorMessage(e){var t;"cpu"===e.data.message||null===(t=this.logger)||void 0===t||t.debug("Ignoring processor message.")}onWorkerMessage(e){const t=e.data;switch(t.message){case"module-buffer":if(!t.buffer||!t.key)return;this.onModuleBufferLoaded(t.buffer,t.key);break;case"module":if(!t.module||!t.key)return;this.onModuleLoaded(t.module,t.key);break;case"stopped":this.worker&&this.worker.terminate();break;default:return}}}t.default=s},271:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9424),o=i(103);class s extends o.VoiceFocusAudioWorkletNode{constructor(e,t){super(e,t.processor,t);const{modelURL:i,audioBufferURL:n,worker:o,fetchBehavior:s,delegate:a}=t;this.delegate=a,this.worker=o,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this),this.worker.postMessage({message:"init",approach:"postMessage",frames:16e3===e.sampleRate?160:480,enabled:t.processorOptions.enabled,agc:t.processorOptions.agc,fetchBehavior:s,model:i});const l=r.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:l,key:"buffer",fetchBehavior:s,path:n})}enable(){return n(this,void 0,void 0,(function*(){this.worker.postMessage({message:"enable"})}))}disable(){return n(this,void 0,void 0,(function*(){this.worker.postMessage({message:"disable"})}))}stop(){return n(this,void 0,void 0,(function*(){try{this.worker.postMessage({message:"stop"})}catch(e){}this.disconnect()}))}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":this.port.postMessage({message:"ready",shared:i.shared},i.shared?Object.values(i.shared):[]);break;case"data":if(!i.buffer)return;this.port.postMessage({message:"data",buffer:i.buffer},[i.buffer]);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":case"processing":this.port.postMessage(i);break;case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"data":if(!i.buffer)return;this.worker.postMessage({message:"data",buffer:i.buffer},[i.buffer]);break;case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i);break;default:return}}}t.default=s},1678:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(9424),o=i(103);class s extends o.VoiceFocusAudioWorkletNode{constructor(e,t){super(e,t.processor,t);const{modelURL:i,resamplerURL:n,worker:o,fetchBehavior:s,delegate:a}=t;this.delegate=a,this.worker=o,this.worker.onmessage=this.onWorkerMessage.bind(this),this.port.onmessage=this.onProcessorMessage.bind(this),this.worker.postMessage({message:"init",approach:"sab",frames:16e3===e.sampleRate?160:480,enabled:t.processorOptions.enabled,model:i});const l=r.supportsWASMPostMessage(globalThis)?"get-module":"get-module-buffer";this.worker.postMessage({message:l,key:"resampler",fetchBehavior:s,path:n})}enable(){return n(this,void 0,void 0,(function*(){this.state?(Atomics.store(this.state,1,1),Atomics.notify(this.state,0,1)):this.worker.postMessage({message:"enable"})}))}disable(){return n(this,void 0,void 0,(function*(){this.state?(Atomics.store(this.state,1,0),Atomics.notify(this.state,0,1)):this.worker.postMessage({message:"disable"})}))}stop(){return n(this,void 0,void 0,(function*(){if(this.state)Atomics.store(this.state,1,2),Atomics.notify(this.state,0,1);else try{this.worker.postMessage({message:"stop"})}catch(e){}this.disconnect()}))}onWorkerMessage(e){var t;const i=e.data;switch(i.message){case"ready":if(!i.shared)throw new Error("No shared state.");this.state=new Int32Array(i.shared.state),this.port.postMessage(i);break;case"stopped":this.worker.terminate();break;case"module-buffer":case"module":case"processing":this.port.postMessage(i);break;case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;default:return}}onProcessorMessage(e){var t;const i=e.data;switch(i.message){case"cpu":null===(t=this.delegate)||void 0===t||t.onCPUWarning();break;case"prepare-for-frames":this.worker.postMessage(i)}}}t.default=s},3631:(e,t,i)=>{"use strict";i.r(t),i.d(t,{BrowserInfo:()=>n,NodeInfo:()=>r,SearchBotDeviceInfo:()=>o,BotInfo:()=>s,ReactNativeInfo:()=>a,detect:()=>d,browserName:()=>f,parseUserAgent:()=>p,detectOS:()=>m,getNodeVersion:()=>g});var n=function(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"},r=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},o=function(e,t,i,n){this.name=e,this.version=t,this.os=i,this.bot=n,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},a=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},l=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],u=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d(e){return e?p(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new a:"undefined"!=typeof navigator?p(navigator.userAgent):g()}function h(e){return""!==e&&c.reduce((function(t,i){var n=i[0],r=i[1];if(t)return t;var o=r.exec(e);return!!o&&[n,o]}),!1)}function f(e){var t=h(e);return t?t[0]:null}function p(e){var t=h(e);if(!t)return null;var i=t[0],r=t[1];if("searchbot"===i)return new s;var a=r[1]&&r[1].split(/[._]/).slice(0,3);a?a.length<3&&(a=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<i;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n}(a,function(e){for(var t=[],i=0;i<e;i++)t.push("0");return t}(3-a.length))):a=[];var c=a.join("."),u=m(e),d=l.exec(e);return d&&d[1]?new o(i,c,u,d[1]):new n(i,c,u)}function m(e){for(var t=0,i=u.length;t<i;t++){var n=u[t],r=n[0];if(n[1].exec(e))return r}return null}function g(){return"undefined"!=typeof process&&process.version?new r(process.version.slice(1)):null}},8679:(e,t,i)=>{"use strict";var n=i(9864),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?s:a[e.$$typeof]||r}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=s;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,i,n){if("string"!=typeof i){if(p){var r=f(i);r&&r!==p&&e(t,r,n)}var s=u(i);d&&(s=s.concat(d(i)));for(var a=l(t),m=l(i),g=0;g<s.length;++g){var v=s[g];if(!(o[v]||n&&n[v]||m&&m[v]||a&&a[v])){var b=h(i,v);try{c(t,v,b)}catch(e){}}}}return t}},7418:e=>{"use strict";var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function r(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var s,a,l=r(e),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))i.call(s,u)&&(l[u]=s[u]);if(t){a=t(s);for(var d=0;d<a.length;d++)n.call(s,a[d])&&(l[a[d]]=s[a[d]])}}return l}},4779:(e,t,i)=>{var n=i(6173);e.exports=function e(t,i,r){return n(i)||(r=i||r,i=[]),r=r||{},t instanceof RegExp?function(e,t){var i=e.source.match(/\((?!\?)/g);if(i)for(var n=0;n<i.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(t,i):n(t)?function(t,i,n){for(var r=[],o=0;o<t.length;o++)r.push(e(t[o],i,n).source);return u(new RegExp("(?:"+r.join("|")+")",d(n)),i)}(t,i,r):function(e,t,i){return h(o(e,i),t,i)}(t,i,r)},e.exports.parse=o,e.exports.compile=function(e,t){return a(o(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=h;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var i,n=[],o=0,s=0,a="",u=t&&t.delimiter||"/";null!=(i=r.exec(e));){var d=i[0],h=i[1],f=i.index;if(a+=e.slice(s,f),s=f+d.length,h)a+=h[1];else{var p=e[s],m=i[2],g=i[3],v=i[4],b=i[5],S=i[6],y=i[7];a&&(n.push(a),a="");var w=null!=m&&null!=p&&p!==m,k="+"===S||"*"===S,C="?"===S||"*"===S,I=i[2]||u,T=v||b;n.push({name:g||o++,prefix:m||"",delimiter:I,optional:C,repeat:k,partial:w,asterisk:!!y,pattern:T?c(T):y?".*":"[^"+l(I)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&n.push(a),n}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var i=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(i[r]=new RegExp("^(?:"+e[r].pattern+")$",d(t)));return function(t,r){for(var o="",a=t||{},l=(r||{}).pretty?s:encodeURIComponent,c=0;c<e.length;c++){var u=e[c];if("string"!=typeof u){var d,h=a[u.name];if(null==h){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(n(h)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=l(h[f]),!i[c].test(d))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===f?u.prefix:u.delimiter)+d}}else{if(d=u.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(h),!i[c].test(d))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+d+'"');o+=u.prefix+d}}else o+=u}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function h(e,t,i){n(t)||(i=t||i,t=[]);for(var r=(i=i||{}).strict,o=!1!==i.end,s="",a=0;a<e.length;a++){var c=e[a];if("string"==typeof c)s+=l(c);else{var h=l(c.prefix),f="(?:"+c.pattern+")";t.push(c),c.repeat&&(f+="(?:"+h+f+")*"),s+=f=c.optional?c.partial?h+"("+f+")?":"(?:"+h+"("+f+"))?":h+"("+f+")"}}var p=l(i.delimiter||"/"),m=s.slice(-p.length)===p;return r||(s=(m?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=o?"$":r&&m?"":"(?="+p+"|$)",u(new RegExp("^"+s,d(i)),t)}},6173:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},2703:(e,t,i)=>{"use strict";var n=i(414);function r(){}function o(){}o.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,o,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var i={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:r};return i.PropTypes=i,i}},5697:(e,t,i)=>{e.exports=i(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2100:(e,t,i)=>{"use strict";e.exports=i(9482)},9482:(e,t,i)=>{"use strict";var n=t;function r(){n.Reader._configure(n.BufferReader),n.util._configure()}n.build="minimal",n.Writer=i(1173),n.BufferWriter=i(3155),n.Reader=i(1408),n.BufferReader=i(593),n.util=i(9693),n.rpc=i(5994),n.roots=i(5350),n.configure=r,n.Writer._configure(n.BufferWriter),r()},1408:(e,t,i)=>{"use strict";e.exports=l;var n,r=i(9693),o=r.LongBits,s=r.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var c,u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=r.Buffer?function(e){return(l.create=function(e){return r.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u,l.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,l.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e;var t=r.Long?"toLong":"toNumber";r.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},593:(e,t,i)=>{"use strict";e.exports=o;var n=i(1408);(o.prototype=Object.create(n.prototype)).constructor=o;var r=i(9693);function o(e){n.call(this,e)}r.Buffer&&(o.prototype._slice=r.Buffer.prototype.slice),o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},5350:e=>{"use strict";e.exports={}},5994:(e,t,i)=>{"use strict";t.Service=i(7948)},7948:(e,t,i)=>{"use strict";e.exports=r;var n=i(9693);function r(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(r.prototype=Object.create(n.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,i,r,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,i,r,o);if(a.rpcImpl)try{return a.rpcImpl(t,i[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,i){if(e)return a.emit("error",e,t),s(e);if(null!==i){if(!(i instanceof r))try{i=r[a.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",i,t),s(null,i)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(e,t,i)=>{"use strict";e.exports=r;var n=i(9693);function r(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var i=e>>>0,n=(e-i)/4294967296>>>0;return t&&(n=~n>>>0,i=~i>>>0,++i>4294967295&&(i=0,++n>4294967295&&(n=0))),new r(i,n)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(n.isString(e)){if(!n.Long)return r.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;r.fromHash=function(e){return e===s?o:new r((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},9693:function(e,t,i){"use strict";var n=t;function r(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;++r)void 0!==e[n[r]]&&i||(e[n[r]]=t[n[r]]);return e}function o(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&r(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=i(4537),n.base64=i(7419),n.EventEmitter=i(9211),n.float=i(945),n.inquire=i(7199),n.utf8=i(4997),n.pool=i(6662),n.LongBits=i(1945),n.global="undefined"!=typeof window&&window||void 0!==i.g&&i.g||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(n.global.process&&n.global.process.versions&&n.global.process.versions.node),n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var i=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&void 0!==this[e[i]]&&null!==this[e[i]])return e[i]}},n.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},1173:(e,t,i)=>{"use strict";e.exports=d;var n,r=i(9693),o=r.LongBits,s=r.base64,a=r.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function c(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(c,0,0),this.tail=this.head,this.states=null}function h(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function p(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function m(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}d.create=r.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d},d.alloc=function(e){return new r.Array(e)},r.Array!==Array&&(d.alloc=r.pool(d.alloc,r.Array.prototype.subarray)),d.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(p,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(p,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(p,t.length(),t)},d.prototype.bool=function(e){return this._push(h,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(r.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(r.float.writeDoubleLE,8,e)};var g=r.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var n=0;n<e.length;++n)t[i+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(r.isString(e)){var i=d.alloc(t=s.length(e));s.decode(e,i,0),e=i}return this.uint32(t)._push(g,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(h,1,0)},d.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(c,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(c,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},d._configure=function(e){n=e}},3155:(e,t,i)=>{"use strict";e.exports=s;var n=i(1173);(s.prototype=Object.create(n.prototype)).constructor=s;var r=i(9693),o=r.Buffer;function s(){n.call(this)}s.alloc=function(e){return(s.alloc=r._Buffer_allocUnsafe)(e)};var a=o&&o.prototype instanceof Uint8Array&&"set"===o.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var n=0;n<e.length;)t[i++]=e[n++]};function l(e,t,i){e.length<40?r.utf8.write(e,t,i):t.utf8Write(e,i)}s.prototype.bytes=function(e){r.isString(e)&&(e=r._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(a,t,e),this},s.prototype.string=function(e){var t=o.byteLength(e);return this.uint32(t),t&&this._push(l,t,e),this}},4448:(e,t,i)=>{"use strict";var n=i(7294),r=i(7418),o=i(3840);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(s(227));function a(e,t,i,n,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(e){this.onError(e)}}var l=!1,c=null,u=!1,d=null,h={onError:function(e){l=!0,c=e}};function f(e,t,i,n,r,o,s,u,d){l=!1,c=null,a.apply(h,arguments)}var p=null,m=null,g=null;function v(e,t,i){var n=e.type||"unknown-event";e.currentTarget=g(i),function(e,t,i,n,r,o,a,h,p){if(f.apply(this,arguments),l){if(!l)throw Error(s(198));var m=c;l=!1,c=null,u||(u=!0,d=m)}}(n,t,void 0,e),e.currentTarget=null}var b=null,S={};function y(){if(b)for(var e in S){var t=S[e],i=b.indexOf(e);if(!(-1<i))throw Error(s(96,e));if(!k[i]){if(!t.extractEvents)throw Error(s(97,e));for(var n in k[i]=t,i=t.eventTypes){var r=void 0,o=i[n],a=t,l=n;if(C.hasOwnProperty(l))throw Error(s(99,l));C[l]=o;var c=o.phasedRegistrationNames;if(c){for(r in c)c.hasOwnProperty(r)&&w(c[r],a,l);r=!0}else o.registrationName?(w(o.registrationName,a,l),r=!0):r=!1;if(!r)throw Error(s(98,n,e))}}}}function w(e,t,i){if(I[e])throw Error(s(100,e));I[e]=t,T[e]=t.eventTypes[i].dependencies}var k=[],C={},I={},T={};function E(e){var t,i=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];if(!S.hasOwnProperty(t)||S[t]!==n){if(S[t])throw Error(s(102,t));S[t]=n,i=!0}}i&&y()}var x=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),M=null,_=null,A=null;function O(e){if(e=m(e)){if("function"!=typeof M)throw Error(s(280));var t=e.stateNode;t&&(t=p(t),M(e.stateNode,e.type,t))}}function P(e){_?A?A.push(e):A=[e]:_=e}function D(){if(_){var e=_,t=A;if(A=_=null,O(e),t)for(e=0;e<t.length;e++)O(t[e])}}function R(e,t){return e(t)}function V(e,t,i,n,r){return e(t,i,n,r)}function N(){}var L=R,F=!1,B=!1;function U(){null===_&&null===A||(N(),D())}function j(e,t,i){if(B)return e(t,i);B=!0;try{return L(e,t,i)}finally{B=!1,U()}}var W=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$=Object.prototype.hasOwnProperty,z={},H={};function K(e,t,i,n,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new K(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new K(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new K(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new K(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new K(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new K(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new K(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new K(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new K(e,5,!1,e.toLowerCase(),null,!1)}));var q=/[\-:]([a-z])/g;function Q(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(q,Q);G[t]=new K(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(q,Q);G[t]=new K(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(q,Q);G[t]=new K(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new K(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new K("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new K(e,1,!1,e.toLowerCase(),null,!0)}));var J=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(e,t,i,n){var r=G.hasOwnProperty(t)?G[t]:null;(null!==r?0===r.type:!n&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,i,n){if(null==t||function(e,t,i,n){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,r,n)&&(i=null),n||null===r?function(e){return!!$.call(H,e)||!$.call(z,e)&&(W.test(e)?H[e]=!0:(z[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=null===i?3!==r.type&&"":i:(t=r.attributeName,n=r.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(r=r.type)||4===r&&!0===i?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}J.hasOwnProperty("ReactCurrentDispatcher")||(J.ReactCurrentDispatcher={current:null}),J.hasOwnProperty("ReactCurrentBatchConfig")||(J.ReactCurrentBatchConfig={suspense:null});var Y=/^(.*)[\\\/]/,Z="function"==typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ie=Z?Symbol.for("react.fragment"):60107,ne=Z?Symbol.for("react.strict_mode"):60108,re=Z?Symbol.for("react.profiler"):60114,oe=Z?Symbol.for("react.provider"):60109,se=Z?Symbol.for("react.context"):60110,ae=Z?Symbol.for("react.concurrent_mode"):60111,le=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,ue=Z?Symbol.for("react.suspense_list"):60120,de=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"==typeof Symbol&&Symbol.iterator;function me(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ge(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ie:return"Fragment";case te:return"Portal";case re:return"Profiler";case ne:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case se:return"Context.Consumer";case oe:return"Context.Provider";case le:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case de:return ge(e.type);case fe:return ge(e.render);case he:if(e=1===e._status?e._result:null)return ge(e)}return null}function ve(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var i="";break e;default:var n=e._debugOwner,r=e._debugSource,o=ge(e.type);i=null,n&&(i=ge(n.type)),n=o,o="",r?o=" (at "+r.fileName.replace(Y,"")+":"+r.lineNumber+")":i&&(o=" (created by "+i+")"),i="\n    in "+(n||"Unknown")+o}t+=i,e=e.return}while(e);return t}function be(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Se(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ye(e){e._valueTracker||(e._valueTracker=function(e){var t=Se(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var r=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Se(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function ke(e,t){var i=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function Ce(e,t){var i=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;i=be(null!=t.value?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ie(e,t){null!=(t=t.checked)&&X(e,"checked",t,!1)}function Te(e,t){Ie(e,t);var i=be(t.value),n=t.type;if(null!=i)"number"===n?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?xe(e,t.type,i):t.hasOwnProperty("defaultValue")&&xe(e,t.type,be(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ee(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function xe(e,t,i){"number"===t&&e.ownerDocument.activeElement===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function Me(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function _e(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+be(i),t=null,r=0;r<e.length;r++){if(e[r].value===i)return e[r].selected=!0,void(n&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Oe(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(s(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(s(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:be(i)}}function Pe(e,t){var i=be(t.value),n=be(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=n&&(e.defaultValue=""+n)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function Re(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Re(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ne,Le,Fe=(Le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((Ne=Ne||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ne.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,n){MSApp.execUnsafeLocalFunction((function(){return Le(e,t)}))}:Le);function Be(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}function Ue(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var je={animationend:Ue("Animation","AnimationEnd"),animationiteration:Ue("Animation","AnimationIteration"),animationstart:Ue("Animation","AnimationStart"),transitionend:Ue("Transition","TransitionEnd")},We={},$e={};function ze(e){if(We[e])return We[e];if(!je[e])return e;var t,i=je[e];for(t in i)if(i.hasOwnProperty(t)&&t in $e)return We[e]=i[t];return e}x&&($e=document.createElement("div").style,"AnimationEvent"in window||(delete je.animationend.animation,delete je.animationiteration.animation,delete je.animationstart.animation),"TransitionEvent"in window||delete je.transitionend.transition);var He=ze("animationend"),Ke=ze("animationiteration"),Ge=ze("animationstart"),qe=ze("transitionend"),Qe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"==typeof WeakMap?WeakMap:Map);function Xe(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function Ye(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function et(e){if(Ye(e)!==e)throw Error(s(188))}function tt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(s(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(n=r.return)){i=n;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===i)return et(r),e;if(o===n)return et(r),t;o=o.sibling}throw Error(s(188))}if(i.return!==n.return)i=r,n=o;else{for(var a=!1,l=r.child;l;){if(l===i){a=!0,i=r,n=o;break}if(l===n){a=!0,n=r,i=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===i){a=!0,i=o,n=r;break}if(l===n){a=!0,n=o,i=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(i.alternate!==n)throw Error(s(190))}if(3!==i.tag)throw Error(s(188));return i.stateNode.current===i?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(s(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function nt(e,t,i){Array.isArray(e)?e.forEach(t,i):e&&t.call(i,e)}var rt=null;function ot(e){if(e){var t=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)v(e,t[n],i[n]);else t&&v(e,t,i);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(rt=it(rt,e)),e=rt,rt=null,e){if(nt(e,ot),rt)throw Error(s(95));if(u)throw e=d,u=!1,d=null,e}}function at(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!x)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ct=[];function ut(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ct.length&&ct.push(e)}function dt(e,t,i,n){if(ct.length){var r=ct.pop();return r.topLevelType=e,r.eventSystemFlags=n,r.nativeEvent=t,r.targetInst=i,r}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:i,ancestors:[]}}function ht(e){var t=e.targetInst,i=t;do{if(!i){e.ancestors.push(i);break}var n=i;if(3===n.tag)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=3!==n.tag?null:n.stateNode.containerInfo}if(!n)break;5!==(t=i.tag)&&6!==t||e.ancestors.push(i),i=Mi(n)}while(i);for(i=0;i<e.ancestors.length;i++){t=e.ancestors[i];var r=at(e.nativeEvent);n=e.topLevelType;var o=e.nativeEvent,s=e.eventSystemFlags;0===i&&(s|=64);for(var a=null,l=0;l<k.length;l++){var c=k[l];c&&(c=c.extractEvents(n,t,o,r,s))&&(a=it(a,c))}st(a)}}function ft(e,t,i){if(!i.has(e)){switch(e){case"scroll":Gt(t,"scroll",!0);break;case"focus":case"blur":Gt(t,"focus",!0),Gt(t,"blur",!0),i.set("blur",null),i.set("focus",null);break;case"cancel":case"close":lt(e)&&Gt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qe.indexOf(e)&&Kt(e,t)}i.set(e,null)}}var pt,mt,gt,vt=!1,bt=[],St=null,yt=null,wt=null,kt=new Map,Ct=new Map,It=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Et="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function xt(e,t,i,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|i,nativeEvent:r,container:n}}function Mt(e,t){switch(e){case"focus":case"blur":St=null;break;case"dragenter":case"dragleave":yt=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function _t(e,t,i,n,r,o){return null===e||e.nativeEvent!==o?(e=xt(t,i,n,r,o),null!==t&&null!==(t=_i(t))&&mt(t),e):(e.eventSystemFlags|=n,e)}function At(e){var t=Mi(e.target);if(null!==t){var i=Ye(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=Ze(i)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){gt(i)}))}else if(3===t&&i.stateNode.hydrate)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var i=_i(t);return null!==i&&mt(i),e.blockedOn=t,!1}return!0}function Pt(e,t,i){Ot(e)&&i.delete(t)}function Dt(){for(vt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=_i(e.blockedOn))&&pt(e);break}var t=Xt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==St&&Ot(St)&&(St=null),null!==yt&&Ot(yt)&&(yt=null),null!==wt&&Ot(wt)&&(wt=null),kt.forEach(Pt),Ct.forEach(Pt)}function Rt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Dt)))}function Vt(e){function t(t){return Rt(t,e)}if(0<bt.length){Rt(bt[0],e);for(var i=1;i<bt.length;i++){var n=bt[i];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==St&&Rt(St,e),null!==yt&&Rt(yt,e),null!==wt&&Rt(wt,e),kt.forEach(t),Ct.forEach(t),i=0;i<It.length;i++)(n=It[i]).blockedOn===e&&(n.blockedOn=null);for(;0<It.length&&null===(i=It[0]).blockedOn;)At(i),null===i.blockedOn&&It.shift()}var Nt={},Lt=new Map,Ft=new Map,Bt=["abort","abort",He,"animationEnd",Ke,"animationIteration",Ge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",qe,"transitionEnd","waiting","waiting"];function Ut(e,t){for(var i=0;i<e.length;i+=2){var n=e[i],r=e[i+1],o="on"+(r[0].toUpperCase()+r.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[n],eventPriority:t},Ft.set(n,t),Lt.set(n,o),Nt[r]=o}}Ut("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ut("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ut(Bt,2);for(var jt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<jt.length;Wt++)Ft.set(jt[Wt],0);var $t=o.unstable_UserBlockingPriority,zt=o.unstable_runWithPriority,Ht=!0;function Kt(e,t){Gt(t,e,!1)}function Gt(e,t,i){var n=Ft.get(t);switch(void 0===n?2:n){case 0:n=qt.bind(null,t,1,e);break;case 1:n=Qt.bind(null,t,1,e);break;default:n=Jt.bind(null,t,1,e)}i?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function qt(e,t,i,n){F||N();var r=Jt,o=F;F=!0;try{V(r,e,t,i,n)}finally{(F=o)||U()}}function Qt(e,t,i,n){zt($t,Jt.bind(null,e,t,i,n))}function Jt(e,t,i,n){if(Ht)if(0<bt.length&&-1<Tt.indexOf(e))e=xt(null,e,t,i,n),bt.push(e);else{var r=Xt(e,t,i,n);if(null===r)Mt(e,n);else if(-1<Tt.indexOf(e))e=xt(r,e,t,i,n),bt.push(e);else if(!function(e,t,i,n,r){switch(t){case"focus":return St=_t(St,e,t,i,n,r),!0;case"dragenter":return yt=_t(yt,e,t,i,n,r),!0;case"mouseover":return wt=_t(wt,e,t,i,n,r),!0;case"pointerover":var o=r.pointerId;return kt.set(o,_t(kt.get(o)||null,e,t,i,n,r)),!0;case"gotpointercapture":return o=r.pointerId,Ct.set(o,_t(Ct.get(o)||null,e,t,i,n,r)),!0}return!1}(r,e,t,i,n)){Mt(e,n),e=dt(e,n,null,t);try{j(ht,e)}finally{ut(e)}}}}function Xt(e,t,i,n){if(null!==(i=Mi(i=at(n)))){var r=Ye(i);if(null===r)i=null;else{var o=r.tag;if(13===o){if(null!==(i=Ze(r)))return i;i=null}else if(3===o){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}e=dt(e,n,i,t);try{j(ht,e)}finally{ut(e)}return null}var Yt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zt=["Webkit","ms","Moz","O"];function ei(e,t,i){return null==t||"boolean"==typeof t||""===t?"":i||"number"!=typeof t||0===t||Yt.hasOwnProperty(e)&&Yt[e]?(""+t).trim():t+"px"}function ti(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var n=0===i.indexOf("--"),r=ei(i,t[i],n);"float"===i&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}Object.keys(Yt).forEach((function(e){Zt.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yt[t]=Yt[e]}))}));var ii=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ni(e,t){if(t){if(ii[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62,""))}}function ri(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oi="http://www.w3.org/1999/xhtml";function si(e,t){var i=Xe(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=T[t];for(var n=0;n<t.length;n++)ft(t[n],e,i)}function ai(){}function li(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var i,n=ci(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ci(n)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=li();t instanceof e.HTMLIFrameElement;){try{var i="string"==typeof t.contentWindow.location.href}catch(e){i=!1}if(!i)break;t=li((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pi="$?",mi="$!",gi=null,vi=null;function bi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Si(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var yi="function"==typeof setTimeout?setTimeout:void 0,wi="function"==typeof clearTimeout?clearTimeout:void 0;function ki(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||i===mi||i===pi){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),Ti="__reactInternalInstance$"+Ii,Ei="__reactEventHandlers$"+Ii,xi="__reactContainere$"+Ii;function Mi(e){var t=e[Ti];if(t)return t;for(var i=e.parentNode;i;){if(t=i[xi]||i[Ti]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=Ci(e);null!==e;){if(i=e[Ti])return i;e=Ci(e)}return t}i=(e=i).parentNode}return null}function _i(e){return!(e=e[Ti]||e[xi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ai(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Oi(e){return e[Ei]||null}function Pi(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Di(e,t){var i=e.stateNode;if(!i)return null;var n=p(i);if(!n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!=typeof i)throw Error(s(231,t,typeof i));return i}function Ri(e,t,i){(t=Di(e,i.dispatchConfig.phasedRegistrationNames[t]))&&(i._dispatchListeners=it(i._dispatchListeners,t),i._dispatchInstances=it(i._dispatchInstances,e))}function Vi(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,i=[];t;)i.push(t),t=Pi(t);for(t=i.length;0<t--;)Ri(i[t],"captured",e);for(t=0;t<i.length;t++)Ri(i[t],"bubbled",e)}}function Ni(e,t,i){e&&i&&i.dispatchConfig.registrationName&&(t=Di(e,i.dispatchConfig.registrationName))&&(i._dispatchListeners=it(i._dispatchListeners,t),i._dispatchInstances=it(i._dispatchInstances,e))}function Li(e){e&&e.dispatchConfig.registrationName&&Ni(e._targetInst,null,e)}function Fi(e){nt(e,Vi)}var Bi=null,Ui=null,ji=null;function Wi(){if(ji)return ji;var e,t,i=Ui,n=i.length,r="value"in Bi?Bi.value:Bi.textContent,o=r.length;for(e=0;e<n&&i[e]===r[e];e++);var s=n-e;for(t=1;t<=s&&i[n-t]===r[o-t];t++);return ji=r.slice(e,1<t?1-t:void 0)}function $i(){return!0}function zi(){return!1}function Hi(e,t,i,n){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=i,e=this.constructor.Interface)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(i):"target"===r?this.target=n:this[r]=i[r]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?$i:zi,this.isPropagationStopped=zi,this}function Ki(e,t,i,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,i,n),r}return new this(e,t,i,n)}function Gi(e){if(!(e instanceof this))throw Error(s(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function qi(e){e.eventPool=[],e.getPooled=Ki,e.release=Gi}r(Hi.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){this.isPersistent=$i},isPersistent:zi,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=zi,this._dispatchInstances=this._dispatchListeners=null}}),Hi.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Hi.extend=function(e){function t(){}function i(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var o=new t;return r(o,i.prototype),i.prototype=o,i.prototype.constructor=i,i.Interface=r({},n.Interface,e),i.extend=n.extend,qi(i),i},qi(Hi);var Qi=Hi.extend({data:null}),Ji=Hi.extend({data:null}),Xi=[9,13,27,32],Yi=x&&"CompositionEvent"in window,Zi=null;x&&"documentMode"in document&&(Zi=document.documentMode);var en=x&&"TextEvent"in window&&!Zi,tn=x&&(!Yi||Zi&&8<Zi&&11>=Zi),nn=String.fromCharCode(32),rn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},on=!1;function sn(e,t){switch(e){case"keyup":return-1!==Xi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function an(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ln=!1,cn={eventTypes:rn,extractEvents:function(e,t,i,n){var r;if(Yi)e:{switch(e){case"compositionstart":var o=rn.compositionStart;break e;case"compositionend":o=rn.compositionEnd;break e;case"compositionupdate":o=rn.compositionUpdate;break e}o=void 0}else ln?sn(e,i)&&(o=rn.compositionEnd):"keydown"===e&&229===i.keyCode&&(o=rn.compositionStart);return o?(tn&&"ko"!==i.locale&&(ln||o!==rn.compositionStart?o===rn.compositionEnd&&ln&&(r=Wi()):(Ui="value"in(Bi=n)?Bi.value:Bi.textContent,ln=!0)),o=Qi.getPooled(o,t,i,n),(r||null!==(r=an(i)))&&(o.data=r),Fi(o),r=o):r=null,(e=en?function(e,t){switch(e){case"compositionend":return an(t);case"keypress":return 32!==t.which?null:(on=!0,nn);case"textInput":return(e=t.data)===nn&&on?null:e;default:return null}}(e,i):function(e,t){if(ln)return"compositionend"===e||!Yi&&sn(e,t)?(e=Wi(),ji=Ui=Bi=null,ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tn&&"ko"!==t.locale?null:t.data}}(e,i))?((t=Ji.getPooled(rn.beforeInput,t,i,n)).data=e,Fi(t)):t=null,null===r?t:null===t?r:[r,t]}},un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!un[e.type]:"textarea"===t}var hn={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function fn(e,t,i){return(e=Hi.getPooled(hn.change,e,t,i)).type="change",P(i),Fi(e),e}var pn=null,mn=null;function gn(e){st(e)}function vn(e){if(we(Ai(e)))return e}function bn(e,t){if("change"===e)return t}var Sn=!1;function yn(){pn&&(pn.detachEvent("onpropertychange",wn),mn=pn=null)}function wn(e){if("value"===e.propertyName&&vn(mn))if(e=fn(mn,e,at(e)),F)st(e);else{F=!0;try{R(gn,e)}finally{F=!1,U()}}}function kn(e,t,i){"focus"===e?(yn(),mn=i,(pn=t).attachEvent("onpropertychange",wn)):"blur"===e&&yn()}function Cn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return vn(mn)}function In(e,t){if("click"===e)return vn(t)}function Tn(e,t){if("input"===e||"change"===e)return vn(t)}x&&(Sn=lt("input")&&(!document.documentMode||9<document.documentMode));var En={eventTypes:hn,_isInputEventSupported:Sn,extractEvents:function(e,t,i,n){var r=t?Ai(t):window,o=r.nodeName&&r.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===r.type)var s=bn;else if(dn(r))if(Sn)s=Tn;else{s=Cn;var a=kn}else(o=r.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(s=In);if(s&&(s=s(e,t)))return fn(s,i,n);a&&a(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&xe(r,"number",r.value)}},xn=Hi.extend({view:null,detail:null}),Mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mn[e])&&!!t[e]}function An(){return _n}var On=0,Pn=0,Dn=!1,Rn=!1,Vn=xn.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:An,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=On;return On=e.screenX,Dn?"mousemove"===e.type?e.screenX-t:0:(Dn=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Pn;return Pn=e.screenY,Rn?"mousemove"===e.type?e.screenY-t:0:(Rn=!0,0)}}),Nn=Vn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ln={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Fn={eventTypes:Ln,extractEvents:function(e,t,i,n,r){var o="mouseover"===e||"pointerover"===e,s="mouseout"===e||"pointerout"===e;if(o&&0==(32&r)&&(i.relatedTarget||i.fromElement)||!s&&!o)return null;if(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,s?(s=t,null!==(t=(t=i.relatedTarget||i.toElement)?Mi(t):null)&&(t!==Ye(t)||5!==t.tag&&6!==t.tag)&&(t=null)):s=null,s===t)return null;if("mouseout"===e||"mouseover"===e)var a=Vn,l=Ln.mouseLeave,c=Ln.mouseEnter,u="mouse";else"pointerout"!==e&&"pointerover"!==e||(a=Nn,l=Ln.pointerLeave,c=Ln.pointerEnter,u="pointer");if(e=null==s?o:Ai(s),o=null==t?o:Ai(t),(l=a.getPooled(l,s,i,n)).type=u+"leave",l.target=e,l.relatedTarget=o,(i=a.getPooled(c,t,i,n)).type=u+"enter",i.target=o,i.relatedTarget=e,u=t,(n=s)&&u)e:{for(c=u,s=0,e=a=n;e;e=Pi(e))s++;for(e=0,t=c;t;t=Pi(t))e++;for(;0<s-e;)a=Pi(a),s--;for(;0<e-s;)c=Pi(c),e--;for(;s--;){if(a===c||a===c.alternate)break e;a=Pi(a),c=Pi(c)}a=null}else a=null;for(c=a,a=[];n&&n!==c&&(null===(s=n.alternate)||s!==c);)a.push(n),n=Pi(n);for(n=[];u&&u!==c&&(null===(s=u.alternate)||s!==c);)n.push(u),u=Pi(u);for(u=0;u<a.length;u++)Ni(a[u],"bubbled",l);for(u=n.length;0<u--;)Ni(n[u],"captured",i);return 0==(64&r)?[l]:[l,i]}},Bn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Un=Object.prototype.hasOwnProperty;function jn(e,t){if(Bn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++)if(!Un.call(t,i[n])||!Bn(e[i[n]],t[i[n]]))return!1;return!0}var Wn=x&&"documentMode"in document&&11>=document.documentMode,$n={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zn=null,Hn=null,Kn=null,Gn=!1;function qn(e,t){var i=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Gn||null==zn||zn!==li(i)?null:(i="selectionStart"in(i=zn)&&fi(i)?{start:i.selectionStart,end:i.selectionEnd}:{anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},Kn&&jn(Kn,i)?null:(Kn=i,(e=Hi.getPooled($n.select,Hn,e,t)).type="select",e.target=zn,Fi(e),e))}var Qn={eventTypes:$n,extractEvents:function(e,t,i,n,r,o){if(!(o=!(r=o||(n.window===n?n.document:9===n.nodeType?n:n.ownerDocument)))){e:{r=Xe(r),o=T.onSelect;for(var s=0;s<o.length;s++)if(!r.has(o[s])){r=!1;break e}r=!0}o=!r}if(o)return null;switch(r=t?Ai(t):window,e){case"focus":(dn(r)||"true"===r.contentEditable)&&(zn=r,Hn=t,Kn=null);break;case"blur":Kn=Hn=zn=null;break;case"mousedown":Gn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Gn=!1,qn(i,n);case"selectionchange":if(Wn)break;case"keydown":case"keyup":return qn(i,n)}return null}},Jn=Hi.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Xn=Hi.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yn=xn.extend({relatedTarget:null});function Zn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ir=xn.extend({key:function(e){if(e.key){var t=er[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?tr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:An,charCode:function(e){return"keypress"===e.type?Zn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),nr=Vn.extend({dataTransfer:null}),rr=xn.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:An}),or=Hi.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sr=Vn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ar={eventTypes:Nt,extractEvents:function(e,t,i,n){var r=Lt.get(e);if(!r)return null;switch(e){case"keypress":if(0===Zn(i))return null;case"keydown":case"keyup":e=ir;break;case"blur":case"focus":e=Yn;break;case"click":if(2===i.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=nr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rr;break;case He:case Ke:case Ge:e=Jn;break;case qe:e=or;break;case"scroll":e=xn;break;case"wheel":e=sr;break;case"copy":case"cut":case"paste":e=Xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Nn;break;default:e=Hi}return Fi(t=e.getPooled(r,t,i,n)),t}};if(b)throw Error(s(101));b=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),y(),p=Oi,m=_i,g=Ai,E({SimpleEventPlugin:ar,EnterLeaveEventPlugin:Fn,ChangeEventPlugin:En,SelectEventPlugin:Qn,BeforeInputEventPlugin:cn});var lr=[],cr=-1;function ur(e){0>cr||(e.current=lr[cr],lr[cr]=null,cr--)}function dr(e,t){cr++,lr[cr]=e.current,e.current=t}var hr={},fr={current:hr},pr={current:!1},mr=hr;function gr(e,t){var i=e.type.contextTypes;if(!i)return hr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in i)o[r]=t[r];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function vr(e){return null!=e.childContextTypes}function br(){ur(pr),ur(fr)}function Sr(e,t,i){if(fr.current!==hr)throw Error(s(168));dr(fr,t),dr(pr,i)}function yr(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return i;for(var o in n=n.getChildContext())if(!(o in e))throw Error(s(108,ge(t)||"Unknown",o));return r({},i,{},n)}function wr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hr,mr=fr.current,dr(fr,e),dr(pr,pr.current),!0}function kr(e,t,i){var n=e.stateNode;if(!n)throw Error(s(169));i?(e=yr(e,t,mr),n.__reactInternalMemoizedMergedChildContext=e,ur(pr),ur(fr),dr(fr,e)):ur(pr),dr(pr,i)}var Cr=o.unstable_runWithPriority,Ir=o.unstable_scheduleCallback,Tr=o.unstable_cancelCallback,Er=o.unstable_requestPaint,xr=o.unstable_now,Mr=o.unstable_getCurrentPriorityLevel,_r=o.unstable_ImmediatePriority,Ar=o.unstable_UserBlockingPriority,Or=o.unstable_NormalPriority,Pr=o.unstable_LowPriority,Dr=o.unstable_IdlePriority,Rr={},Vr=o.unstable_shouldYield,Nr=void 0!==Er?Er:function(){},Lr=null,Fr=null,Br=!1,Ur=xr(),jr=1e4>Ur?xr:function(){return xr()-Ur};function Wr(){switch(Mr()){case _r:return 99;case Ar:return 98;case Or:return 97;case Pr:return 96;case Dr:return 95;default:throw Error(s(332))}}function $r(e){switch(e){case 99:return _r;case 98:return Ar;case 97:return Or;case 96:return Pr;case 95:return Dr;default:throw Error(s(332))}}function zr(e,t){return e=$r(e),Cr(e,t)}function Hr(e,t,i){return e=$r(e),Ir(e,t,i)}function Kr(e){return null===Lr?(Lr=[e],Fr=Ir(_r,qr)):Lr.push(e),Rr}function Gr(){if(null!==Fr){var e=Fr;Fr=null,Tr(e)}qr()}function qr(){if(!Br&&null!==Lr){Br=!0;var e=0;try{var t=Lr;zr(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),Lr=null}catch(t){throw null!==Lr&&(Lr=Lr.slice(e+1)),Ir(_r,Gr),t}finally{Br=!1}}}function Qr(e,t,i){return 1073741821-(1+((1073741821-e+t/10)/(i/=10)|0))*i}function Jr(e,t){if(e&&e.defaultProps)for(var i in t=r({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}var Xr={current:null},Yr=null,Zr=null,eo=null;function to(){eo=Zr=Yr=null}function io(e){var t=Xr.current;ur(Xr),e.type._context._currentValue=t}function no(e,t){for(;null!==e;){var i=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==i&&i.childExpirationTime<t&&(i.childExpirationTime=t);else{if(!(null!==i&&i.childExpirationTime<t))break;i.childExpirationTime=t}e=e.return}}function ro(e,t){Yr=e,eo=Zr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Ps=!0),e.firstContext=null)}function oo(e,t){if(eo!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(eo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Zr){if(null===Yr)throw Error(s(308));Zr=t,Yr.dependencies={expirationTime:0,firstContext:t,responders:null}}else Zr=Zr.next=t;return e._currentValue}var so=!1;function ao(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function co(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function uo(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function ho(e,t){var i=e.alternate;null!==i&&lo(i,e),null===(i=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function fo(e,t,i,n){var o=e.updateQueue;so=!1;var s=o.baseQueue,a=o.shared.pending;if(null!==a){if(null!==s){var l=s.next;s.next=a.next,a.next=l}s=a,o.shared.pending=null,null!==(l=e.alternate)&&null!==(l=l.updateQueue)&&(l.baseQueue=a)}if(null!==s){l=s.next;var c=o.baseState,u=0,d=null,h=null,f=null;if(null!==l)for(var p=l;;){if((a=p.expirationTime)<n){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(h=f=m,d=c):f=f.next=m,a>u&&(u=a)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),cl(a,p.suspenseConfig);e:{var g=e,v=p;switch(a=t,m=i,v.tag){case 1:if("function"==typeof(g=v.payload)){c=g.call(m,c,a);break e}c=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(a="function"==typeof(g=v.payload)?g.call(m,c,a):g))break e;c=r({},c,a);break e;case 2:so=!0}}null!==p.callback&&(e.effectTag|=32,null===(a=o.effects)?o.effects=[p]:a.push(p))}if(null===(p=p.next)||p===l){if(null===(a=o.shared.pending))break;p=s.next=a.next,a.next=l,o.baseQueue=s=a,o.shared.pending=null}}null===f?d=c:f.next=h,o.baseState=d,o.baseQueue=f,ul(u),e.expirationTime=u,e.memoizedState=c}}function po(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(null!==r){if(n.callback=null,n=r,r=i,"function"!=typeof n)throw Error(s(191,n));n.call(r)}}}var mo=J.ReactCurrentBatchConfig,go=(new n.Component).refs;function vo(e,t,i,n){i=null==(i=i(n,t=e.memoizedState))?t:r({},t,i),e.memoizedState=i,0===e.expirationTime&&(e.updateQueue.baseState=i)}var bo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ye(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternalFiber;var n=Ja(),r=mo.suspense;(r=co(n=Xa(n,e,r),r)).payload=t,null!=i&&(r.callback=i),uo(e,r),Ya(e,n)},enqueueReplaceState:function(e,t,i){e=e._reactInternalFiber;var n=Ja(),r=mo.suspense;(r=co(n=Xa(n,e,r),r)).tag=1,r.payload=t,null!=i&&(r.callback=i),uo(e,r),Ya(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var i=Ja(),n=mo.suspense;(n=co(i=Xa(i,e,n),n)).tag=2,null!=t&&(n.callback=t),uo(e,n),Ya(e,i)}};function So(e,t,i,n,r,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,s):!(t.prototype&&t.prototype.isPureReactComponent&&jn(i,n)&&jn(r,o))}function yo(e,t,i){var n=!1,r=hr,o=t.contextType;return"object"==typeof o&&null!==o?o=oo(o):(r=vr(t)?mr:fr.current,o=(n=null!=(n=t.contextTypes))?gr(e,r):hr),t=new t(i,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=bo,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function wo(e,t,i,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function ko(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=go,ao(e);var o=t.contextType;"object"==typeof o&&null!==o?r.context=oo(o):(o=vr(t)?mr:fr.current,r.context=gr(e,o)),fo(e,i,r,n),r.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(vo(e,t,o,i),r.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(t=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&bo.enqueueReplaceState(r,r.state,null),fo(e,i,r,n),r.state=e.memoizedState),"function"==typeof r.componentDidMount&&(e.effectTag|=4)}var Co=Array.isArray;function Io(e,t,i){if(null!==(e=i.ref)&&"function"!=typeof e&&"object"!=typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(s(309));var n=i.stateNode}if(!n)throw Error(s(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=n.refs;t===go&&(t=n.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!=typeof e)throw Error(s(284));if(!i._owner)throw Error(s(290,e))}return e}function To(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Eo(e){function t(t,i){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.effectTag=8}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Al(e,t)).index=0,e.sibling=null,e}function o(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.effectTag=2,i):n:(t.effectTag=2,i):i}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Dl(i,e.mode,n)).return=e,t):((t=r(t,i)).return=e,t)}function c(e,t,i,n){return null!==t&&t.elementType===i.type?((n=r(t,i.props)).ref=Io(e,t,i),n.return=e,n):((n=Ol(i.type,i.key,i.props,null,e.mode,n)).ref=Io(e,t,i),n.return=e,n)}function u(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Rl(i,e.mode,n)).return=e,t):((t=r(t,i.children||[])).return=e,t)}function d(e,t,i,n,o){return null===t||7!==t.tag?((t=Pl(i,e.mode,n,o)).return=e,t):((t=r(t,i)).return=e,t)}function h(e,t,i){if("string"==typeof t||"number"==typeof t)return(t=Dl(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case ee:return(i=Ol(t.type,t.key,t.props,null,e.mode,i)).ref=Io(e,null,t),i.return=e,i;case te:return(t=Rl(t,e.mode,i)).return=e,t}if(Co(t)||me(t))return(t=Pl(t,e.mode,i,null)).return=e,t;To(e,t)}return null}function f(e,t,i,n){var r=null!==t?t.key:null;if("string"==typeof i||"number"==typeof i)return null!==r?null:l(e,t,""+i,n);if("object"==typeof i&&null!==i){switch(i.$$typeof){case ee:return i.key===r?i.type===ie?d(e,t,i.props.children,n,r):c(e,t,i,n):null;case te:return i.key===r?u(e,t,i,n):null}if(Co(i)||me(i))return null!==r?null:d(e,t,i,n,null);To(e,i)}return null}function p(e,t,i,n,r){if("string"==typeof n||"number"==typeof n)return l(t,e=e.get(i)||null,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case ee:return e=e.get(null===n.key?i:n.key)||null,n.type===ie?d(t,e,n.props.children,r,n.key):c(t,e,n,r);case te:return u(t,e=e.get(null===n.key?i:n.key)||null,n,r)}if(Co(n)||me(n))return d(t,e=e.get(i)||null,n,r,null);To(t,n)}return null}function m(r,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(r,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return i(r,d),c;if(null===d){for(;m<a.length;m++)null!==(d=h(r,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return c}for(d=n(r,d);m<a.length;m++)null!==(g=p(d,r,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),c}function g(r,a,l,c){var u=me(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var S=f(r,m,b.value,c);if(null===S){null===m&&(m=v);break}e&&m&&null===S.alternate&&t(r,m),a=o(S,a,g),null===d?u=S:d.sibling=S,d=S,m=v}if(b.done)return i(r,m),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(r,b.value,c))&&(a=o(b,a,g),null===d?u=b:d.sibling=b,d=b);return u}for(m=n(r,m);!b.done;g++,b=l.next())null!==(b=p(m,r,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(r,e)})),u}return function(e,n,o,l){var c="object"==typeof o&&null!==o&&o.type===ie&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case ee:e:{for(u=o.key,c=n;null!==c;){if(c.key===u){if(7===c.tag){if(o.type===ie){i(e,c.sibling),(n=r(c,o.props.children)).return=e,e=n;break e}}else if(c.elementType===o.type){i(e,c.sibling),(n=r(c,o.props)).ref=Io(e,c,o),n.return=e,e=n;break e}i(e,c);break}t(e,c),c=c.sibling}o.type===ie?((n=Pl(o.props.children,e.mode,l,o.key)).return=e,e=n):((l=Ol(o.type,o.key,o.props,null,e.mode,l)).ref=Io(e,n,o),l.return=e,e=l)}return a(e);case te:e:{for(c=o.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===o.containerInfo&&n.stateNode.implementation===o.implementation){i(e,n.sibling),(n=r(n,o.children||[])).return=e,e=n;break e}i(e,n);break}t(e,n),n=n.sibling}(n=Rl(o,e.mode,l)).return=e,e=n}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==n&&6===n.tag?(i(e,n.sibling),(n=r(n,o)).return=e,e=n):(i(e,n),(n=Dl(o,e.mode,l)).return=e,e=n),a(e);if(Co(o))return m(e,n,o,l);if(me(o))return g(e,n,o,l);if(u&&To(e,o),void 0===o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return i(e,n)}}var xo=Eo(!0),Mo=Eo(!1),_o={},Ao={current:_o},Oo={current:_o},Po={current:_o};function Do(e){if(e===_o)throw Error(s(174));return e}function Ro(e,t){switch(dr(Po,t),dr(Oo,e),dr(Ao,_o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ve(null,"");break;default:t=Ve(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ur(Ao),dr(Ao,t)}function Vo(){ur(Ao),ur(Oo),ur(Po)}function No(e){Do(Po.current);var t=Do(Ao.current),i=Ve(t,e.type);t!==i&&(dr(Oo,e),dr(Ao,i))}function Lo(e){Oo.current===e&&(ur(Ao),ur(Oo))}var Fo={current:0};function Bo(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||i.data===pi||i.data===mi))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Uo(e,t){return{responder:e,props:t}}var jo=J.ReactCurrentDispatcher,Wo=J.ReactCurrentBatchConfig,$o=0,zo=null,Ho=null,Ko=null,Go=!1;function qo(){throw Error(s(321))}function Qo(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Bn(e[i],t[i]))return!1;return!0}function Jo(e,t,i,n,r,o){if($o=o,zo=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,jo.current=null===e||null===e.memoizedState?Ss:ys,e=i(n,r),t.expirationTime===$o){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(s(301));o+=1,Ko=Ho=null,t.updateQueue=null,jo.current=ws,e=i(n,r)}while(t.expirationTime===$o)}if(jo.current=bs,t=null!==Ho&&null!==Ho.next,$o=0,Ko=Ho=zo=null,Go=!1,t)throw Error(s(300));return e}function Xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ko?zo.memoizedState=Ko=e:Ko=Ko.next=e,Ko}function Yo(){if(null===Ho){var e=zo.alternate;e=null!==e?e.memoizedState:null}else e=Ho.next;var t=null===Ko?zo.memoizedState:Ko.next;if(null!==t)Ko=t,Ho=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Ho=e).memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},null===Ko?zo.memoizedState=Ko=e:Ko=Ko.next=e}return Ko}function Zo(e,t){return"function"==typeof t?t(e):t}function es(e){var t=Yo(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=Ho,r=n.baseQueue,o=i.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}n.baseQueue=r=o,i.pending=null}if(null!==r){r=r.next,n=n.baseState;var l=a=o=null,c=r;do{var u=c.expirationTime;if(u<$o){var d={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=d,o=n):l=l.next=d,u>zo.expirationTime&&(zo.expirationTime=u,ul(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),cl(u,c.suspenseConfig),n=c.eagerReducer===e?c.eagerState:e(n,c.action);c=c.next}while(null!==c&&c!==r);null===l?o=n:l.next=a,Bn(n,t.memoizedState)||(Ps=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,i.lastRenderedState=n}return[t.memoizedState,i.dispatch]}function ts(e){var t=Yo(),i=t.queue;if(null===i)throw Error(s(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,o=t.memoizedState;if(null!==r){i.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);Bn(o,t.memoizedState)||(Ps=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,n]}function is(e){var t=Xo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e}).dispatch=vs.bind(null,zo,e),[t.memoizedState,e]}function ns(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},null===(t=zo.updateQueue)?(t={lastEffect:null},zo.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function rs(){return Yo().memoizedState}function os(e,t,i,n){var r=Xo();zo.effectTag|=e,r.memoizedState=ns(1|t,i,void 0,void 0===n?null:n)}function ss(e,t,i,n){var r=Yo();n=void 0===n?null:n;var o=void 0;if(null!==Ho){var s=Ho.memoizedState;if(o=s.destroy,null!==n&&Qo(n,s.deps))return void ns(t,i,o,n)}zo.effectTag|=e,r.memoizedState=ns(1|t,i,o,n)}function as(e,t){return os(516,4,e,t)}function ls(e,t){return ss(516,4,e,t)}function cs(e,t){return ss(4,2,e,t)}function us(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ds(e,t,i){return i=null!=i?i.concat([e]):null,ss(4,2,us.bind(null,t,e),i)}function hs(){}function fs(e,t){return Xo().memoizedState=[e,void 0===t?null:t],e}function ps(e,t){var i=Yo();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Qo(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function ms(e,t){var i=Yo();t=void 0===t?null:t;var n=i.memoizedState;return null!==n&&null!==t&&Qo(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function gs(e,t,i){var n=Wr();zr(98>n?98:n,(function(){e(!0)})),zr(97<n?97:n,(function(){var n=Wo.suspense;Wo.suspense=void 0===t?null:t;try{e(!1),i()}finally{Wo.suspense=n}}))}function vs(e,t,i){var n=Ja(),r=mo.suspense;r={expirationTime:n=Xa(n,e,r),suspenseConfig:r,action:i,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?r.next=r:(r.next=o.next,o.next=r),t.pending=r,o=e.alternate,e===zo||null!==o&&o===zo)Go=!0,r.expirationTime=$o,zo.expirationTime=$o;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,i);if(r.eagerReducer=o,r.eagerState=a,Bn(a,s))return}catch(e){}Ya(e,n)}}var bs={readContext:oo,useCallback:qo,useContext:qo,useEffect:qo,useImperativeHandle:qo,useLayoutEffect:qo,useMemo:qo,useReducer:qo,useRef:qo,useState:qo,useDebugValue:qo,useResponder:qo,useDeferredValue:qo,useTransition:qo},Ss={readContext:oo,useCallback:fs,useContext:oo,useEffect:as,useImperativeHandle:function(e,t,i){return i=null!=i?i.concat([e]):null,os(4,2,us.bind(null,t,e),i)},useLayoutEffect:function(e,t){return os(4,2,e,t)},useMemo:function(e,t){var i=Xo();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=Xo();return t=void 0!==i?i(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=vs.bind(null,zo,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Xo().memoizedState=e},useState:is,useDebugValue:hs,useResponder:Uo,useDeferredValue:function(e,t){var i=is(e),n=i[0],r=i[1];return as((function(){var i=Wo.suspense;Wo.suspense=void 0===t?null:t;try{r(e)}finally{Wo.suspense=i}}),[e,t]),n},useTransition:function(e){var t=is(!1),i=t[0];return t=t[1],[fs(gs.bind(null,t,e),[t,e]),i]}},ys={readContext:oo,useCallback:ps,useContext:oo,useEffect:ls,useImperativeHandle:ds,useLayoutEffect:cs,useMemo:ms,useReducer:es,useRef:rs,useState:function(){return es(Zo)},useDebugValue:hs,useResponder:Uo,useDeferredValue:function(e,t){var i=es(Zo),n=i[0],r=i[1];return ls((function(){var i=Wo.suspense;Wo.suspense=void 0===t?null:t;try{r(e)}finally{Wo.suspense=i}}),[e,t]),n},useTransition:function(e){var t=es(Zo),i=t[0];return t=t[1],[ps(gs.bind(null,t,e),[t,e]),i]}},ws={readContext:oo,useCallback:ps,useContext:oo,useEffect:ls,useImperativeHandle:ds,useLayoutEffect:cs,useMemo:ms,useReducer:ts,useRef:rs,useState:function(){return ts(Zo)},useDebugValue:hs,useResponder:Uo,useDeferredValue:function(e,t){var i=ts(Zo),n=i[0],r=i[1];return ls((function(){var i=Wo.suspense;Wo.suspense=void 0===t?null:t;try{r(e)}finally{Wo.suspense=i}}),[e,t]),n},useTransition:function(e){var t=ts(Zo),i=t[0];return t=t[1],[ps(gs.bind(null,t,e),[t,e]),i]}},ks=null,Cs=null,Is=!1;function Ts(e,t){var i=Ml(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Es(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function xs(e){if(Is){var t=Cs;if(t){var i=t;if(!Es(e,t)){if(!(t=ki(i.nextSibling))||!Es(e,t))return e.effectTag=-1025&e.effectTag|2,Is=!1,void(ks=e);Ts(ks,i)}ks=e,Cs=ki(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Is=!1,ks=e}}function Ms(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ks=e}function _s(e){if(e!==ks)return!1;if(!Is)return Ms(e),Is=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Si(t,e.memoizedProps))for(t=Cs;t;)Ts(e,t),t=ki(t.nextSibling);if(Ms(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){Cs=ki(e.nextSibling);break e}t--}else"$"!==i&&i!==mi&&i!==pi||t++}e=e.nextSibling}Cs=null}}else Cs=ks?ki(e.stateNode.nextSibling):null;return!0}function As(){Cs=ks=null,Is=!1}var Os=J.ReactCurrentOwner,Ps=!1;function Ds(e,t,i,n){t.child=null===e?Mo(t,null,i,n):xo(t,e.child,i,n)}function Rs(e,t,i,n,r){i=i.render;var o=t.ref;return ro(t,r),n=Jo(e,t,i,n,o,r),null===e||Ps?(t.effectTag|=1,Ds(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Js(e,t,r))}function Vs(e,t,i,n,r,o){if(null===e){var s=i.type;return"function"!=typeof s||_l(s)||void 0!==s.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Ol(i.type,null,n,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ns(e,t,s,n,r,o))}return s=e.child,r<o&&(r=s.memoizedProps,(i=null!==(i=i.compare)?i:jn)(r,n)&&e.ref===t.ref)?Js(e,t,o):(t.effectTag|=1,(e=Al(s,n)).ref=t.ref,e.return=t,t.child=e)}function Ns(e,t,i,n,r,o){return null!==e&&jn(e.memoizedProps,n)&&e.ref===t.ref&&(Ps=!1,r<o)?(t.expirationTime=e.expirationTime,Js(e,t,o)):Fs(e,t,i,n,o)}function Ls(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.effectTag|=128)}function Fs(e,t,i,n,r){var o=vr(i)?mr:fr.current;return o=gr(t,o),ro(t,r),i=Jo(e,t,i,n,o,r),null===e||Ps?(t.effectTag|=1,Ds(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),Js(e,t,r))}function Bs(e,t,i,n,r){if(vr(i)){var o=!0;wr(t)}else o=!1;if(ro(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),yo(t,i,n),ko(t,i,n,r),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=i.contextType;c="object"==typeof c&&null!==c?oo(c):gr(t,c=vr(i)?mr:fr.current);var u=i.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||l!==c)&&wo(t,s,n,c),so=!1;var h=t.memoizedState;s.state=h,fo(t,n,s,r),l=t.memoizedState,a!==n||h!==l||pr.current||so?("function"==typeof u&&(vo(t,i,u,n),l=t.memoizedState),(a=so||So(t,i,a,n,h,l,c))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),n=!1)}else s=t.stateNode,lo(e,t),a=t.memoizedProps,s.props=t.type===t.elementType?a:Jr(t.type,a),l=s.context,c="object"==typeof(c=i.contextType)&&null!==c?oo(c):gr(t,c=vr(i)?mr:fr.current),(d="function"==typeof(u=i.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||l!==c)&&wo(t,s,n,c),so=!1,l=t.memoizedState,s.state=l,fo(t,n,s,r),h=t.memoizedState,a!==n||l!==h||pr.current||so?("function"==typeof u&&(vo(t,i,u,n),h=t.memoizedState),(u=so||So(t,i,a,n,l,h,c))?(d||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,h,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,h,c)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=h),s.props=n,s.state=h,s.context=c,n=u):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return Us(e,t,i,n,o,r)}function Us(e,t,i,n,r,o){Ls(e,t);var s=0!=(64&t.effectTag);if(!n&&!s)return r&&kr(t,i,!1),Js(e,t,o);n=t.stateNode,Os.current=t;var a=s&&"function"!=typeof i.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&s?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,a,o)):Ds(e,t,a,o),t.memoizedState=n.state,r&&kr(t,i,!0),t.child}function js(e){var t=e.stateNode;t.pendingContext?Sr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Sr(0,t.context,!1),Ro(e,t.containerInfo)}var Ws,$s,zs,Hs={dehydrated:null,retryTime:0};function Ks(e,t,i){var n,r=t.mode,o=t.pendingProps,s=Fo.current,a=!1;if((n=0!=(64&t.effectTag))||(n=0!=(2&s)&&(null===e||null!==e.memoizedState)),n?(a=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(s|=1),dr(Fo,1&s),null===e){if(void 0!==o.fallback&&xs(t),a){if(a=o.fallback,(o=Pl(null,r,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(i=Pl(a,r,i,null)).return=t,o.sibling=i,t.memoizedState=Hs,t.child=o,i}return r=o.children,t.memoizedState=null,t.child=Mo(t,null,r,i)}if(null!==e.memoizedState){if(r=(e=e.child).sibling,a){if(o=o.fallback,(i=Al(e,e.pendingProps)).return=t,0==(2&t.mode)&&(a=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(i.child=a;null!==a;)a.return=i,a=a.sibling;return(r=Al(r,o)).return=t,i.sibling=r,i.childExpirationTime=0,t.memoizedState=Hs,t.child=i,r}return i=xo(t,e.child,o.children,i),t.memoizedState=null,t.child=i}if(e=e.child,a){if(a=o.fallback,(o=Pl(null,r,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(i=Pl(a,r,i,null)).return=t,o.sibling=i,i.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Hs,t.child=o,i}return t.memoizedState=null,t.child=xo(t,e,o.children,i)}function Gs(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;null!==i&&i.expirationTime<t&&(i.expirationTime=t),no(e.return,t)}function qs(e,t,i,n,r,o){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailExpiration:0,tailMode:r,lastEffect:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailExpiration=0,s.tailMode=r,s.lastEffect=o)}function Qs(e,t,i){var n=t.pendingProps,r=n.revealOrder,o=n.tail;if(Ds(e,t,n.children,i),0!=(2&(n=Fo.current)))n=1&n|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gs(e,i);else if(19===e.tag)Gs(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(dr(Fo,n),0==(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;null!==i;)null!==(e=i.alternate)&&null===Bo(e)&&(r=i),i=i.sibling;null===(i=r)?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),qs(t,!1,r,i,o,t.lastEffect);break;case"backwards":for(i=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===Bo(e)){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}qs(t,!0,i,null,o,t.lastEffect);break;case"together":qs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Js(e,t,i){null!==e&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(0!==n&&ul(n),t.childExpirationTime<i)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(i=Al(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Al(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Xs(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ys(e,t,i){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vr(t.type)&&br(),null;case 3:return Vo(),ur(pr),ur(fr),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||!_s(t)||(t.effectTag|=4),null;case 5:Lo(t),i=Do(Po.current);var o=t.type;if(null!==e&&null!=t.stateNode)$s(e,t,o,n,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(null===t.stateNode)throw Error(s(166));return null}if(e=Do(Ao.current),_s(t)){n=t.stateNode,o=t.type;var a=t.memoizedProps;switch(n[Ti]=t,n[Ei]=a,o){case"iframe":case"object":case"embed":Kt("load",n);break;case"video":case"audio":for(e=0;e<Qe.length;e++)Kt(Qe[e],n);break;case"source":Kt("error",n);break;case"img":case"image":case"link":Kt("error",n),Kt("load",n);break;case"form":Kt("reset",n),Kt("submit",n);break;case"details":Kt("toggle",n);break;case"input":Ce(n,a),Kt("invalid",n),si(i,"onChange");break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Kt("invalid",n),si(i,"onChange");break;case"textarea":Oe(n,a),Kt("invalid",n),si(i,"onChange")}for(var l in ni(o,a),e=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"==typeof c?n.textContent!==c&&(e=["children",c]):"number"==typeof c&&n.textContent!==""+c&&(e=["children",""+c]):I.hasOwnProperty(l)&&null!=c&&si(i,l)}switch(o){case"input":ye(n),Ee(n,a,!0);break;case"textarea":ye(n),De(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=ai)}i=e,t.updateQueue=i,null!==i&&(t.effectTag|=4)}else{switch(l=9===i.nodeType?i:i.ownerDocument,e===oi&&(e=Re(o)),e===oi?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=l.createElement(o,{is:n.is}):(e=l.createElement(o),"select"===o&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,o),e[Ti]=t,e[Ei]=n,Ws(e,t),t.stateNode=e,l=ri(o,n),o){case"iframe":case"object":case"embed":Kt("load",e),c=n;break;case"video":case"audio":for(c=0;c<Qe.length;c++)Kt(Qe[c],e);c=n;break;case"source":Kt("error",e),c=n;break;case"img":case"image":case"link":Kt("error",e),Kt("load",e),c=n;break;case"form":Kt("reset",e),Kt("submit",e),c=n;break;case"details":Kt("toggle",e),c=n;break;case"input":Ce(e,n),c=ke(e,n),Kt("invalid",e),si(i,"onChange");break;case"option":c=Me(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},c=r({},n,{value:void 0}),Kt("invalid",e),si(i,"onChange");break;case"textarea":Oe(e,n),c=Ae(e,n),Kt("invalid",e),si(i,"onChange");break;default:c=n}ni(o,c);var u=c;for(a in u)if(u.hasOwnProperty(a)){var d=u[a];"style"===a?ti(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&Fe(e,d):"children"===a?"string"==typeof d?("textarea"!==o||""!==d)&&Be(e,d):"number"==typeof d&&Be(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(I.hasOwnProperty(a)?null!=d&&si(i,a):null!=d&&X(e,a,d,l))}switch(o){case"input":ye(e),Ee(e,n,!1);break;case"textarea":ye(e),De(e);break;case"option":null!=n.value&&e.setAttribute("value",""+be(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?_e(e,!!n.multiple,i,!1):null!=n.defaultValue&&_e(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof c.onClick&&(e.onclick=ai)}bi(o,n)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)zs(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(s(166));i=Do(Po.current),Do(Ao.current),_s(t)?(i=t.stateNode,n=t.memoizedProps,i[Ti]=t,i.nodeValue!==n&&(t.effectTag|=4)):((i=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[Ti]=t,t.stateNode=i)}return null;case 13:return ur(Fo),n=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=i,t):(i=null!==n,n=!1,null===e?void 0!==t.memoizedProps.fallback&&_s(t):(n=null!==(o=e.memoizedState),i||null===o||null!==(o=e.child.sibling)&&(null!==(a=t.firstEffect)?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),i&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Fo.current)?Oa===Ia&&(Oa=Ta):(Oa!==Ia&&Oa!==Ta||(Oa=Ea),0!==Na&&null!==Ma&&(Ll(Ma,Aa),Fl(Ma,Na)))),(i||n)&&(t.effectTag|=4),null);case 4:return Vo(),null;case 10:return io(t),null;case 19:if(ur(Fo),null===(n=t.memoizedState))return null;if(o=0!=(64&t.effectTag),null===(a=n.rendering)){if(o)Xs(n,!1);else if(Oa!==Ia||null!==e&&0!=(64&e.effectTag))for(a=t.child;null!==a;){if(null!==(e=Bo(a))){for(t.effectTag|=64,Xs(n,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;null!==n;)a=i,(o=n).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),n=n.sibling;return dr(Fo,1&Fo.current|2),t.child}a=a.sibling}}else{if(!o)if(null!==(e=Bo(a))){if(t.effectTag|=64,o=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.effectTag|=4),Xs(n,!0),null===n.tail&&"hidden"===n.tailMode&&!a.alternate)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*jr()-n.renderingStartTime>n.tailExpiration&&1<i&&(t.effectTag|=64,o=!0,Xs(n,!1),t.expirationTime=t.childExpirationTime=i-1);n.isBackwards?(a.sibling=t.child,t.child=a):(null!==(i=n.last)?i.sibling=a:t.child=a,n.last=a)}return null!==n.tail?(0===n.tailExpiration&&(n.tailExpiration=jr()+500),i=n.tail,n.rendering=i,n.tail=i.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=jr(),i.sibling=null,t=Fo.current,dr(Fo,o?1&t|2:1&t),i):null}throw Error(s(156,t.tag))}function Zs(e){switch(e.tag){case 1:vr(e.type)&&br();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Vo(),ur(pr),ur(fr),0!=(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return Lo(e),null;case 13:return ur(Fo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ur(Fo),null;case 4:return Vo(),null;case 10:return io(e),null;default:return null}}function ea(e,t){return{value:e,source:t,stack:ve(t)}}Ws=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},$s=function(e,t,i,n,o){var s=e.memoizedProps;if(s!==n){var a,l,c=t.stateNode;switch(Do(Ao.current),e=null,i){case"input":s=ke(c,s),n=ke(c,n),e=[];break;case"option":s=Me(c,s),n=Me(c,n),e=[];break;case"select":s=r({},s,{value:void 0}),n=r({},n,{value:void 0}),e=[];break;case"textarea":s=Ae(c,s),n=Ae(c,n),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(c.onclick=ai)}for(a in ni(i,n),i=null,s)if(!n.hasOwnProperty(a)&&s.hasOwnProperty(a)&&null!=s[a])if("style"===a)for(l in c=s[a])c.hasOwnProperty(l)&&(i||(i={}),i[l]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(I.hasOwnProperty(a)?e||(e=[]):(e=e||[]).push(a,null));for(a in n){var u=n[a];if(c=null!=s?s[a]:void 0,n.hasOwnProperty(a)&&u!==c&&(null!=u||null!=c))if("style"===a)if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(i||(i={}),i[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(i||(i={}),i[l]=u[l])}else i||(e||(e=[]),e.push(a,i)),i=u;else"dangerouslySetInnerHTML"===a?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(a,u)):"children"===a?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(a,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(I.hasOwnProperty(a)?(null!=u&&si(o,a),e||c===u||(e=[])):(e=e||[]).push(a,u))}i&&(e=e||[]).push("style",i),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},zs=function(e,t,i,n){i!==n&&(t.effectTag|=4)};var ta="function"==typeof WeakSet?WeakSet:Set;function ia(e,t){var i=t.source,n=t.stack;null===n&&null!==i&&(n=ve(i)),null!==i&&ge(i.type),t=t.value,null!==e&&1===e.tag&&ge(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function na(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){kl(e,t)}else t.current=null}function ra(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var i=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:Jr(t.type,i),n),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(s(163))}function oa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.destroy;i.destroy=void 0,void 0!==n&&n()}i=i.next}while(i!==t)}}function sa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function aa(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:return void sa(3,i);case 1:if(e=i.stateNode,4&i.effectTag)if(null===t)e.componentDidMount();else{var n=i.elementType===i.type?t.memoizedProps:Jr(i.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=i.updateQueue)&&po(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:case 1:e=i.child.stateNode}po(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.effectTag&&bi(i.type,i.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&Vt(i)))))}throw Error(s(163))}function la(e,t,i){switch("function"==typeof El&&El(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e.next;zr(97<i?97:i,(function(){var e=n;do{var i=e.destroy;if(void 0!==i){var r=t;try{i()}catch(e){kl(r,e)}}e=e.next}while(e!==n)}))}break;case 1:na(t),"function"==typeof(i=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){kl(e,t)}}(t,i);break;case 5:na(t);break;case 4:pa(e,t,i)}}function ca(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ca(t)}function ua(e){return 5===e.tag||3===e.tag||4===e.tag}function da(e){e:{for(var t=e.return;null!==t;){if(ua(t)){var i=t;break e}t=t.return}throw Error(s(160))}switch(t=i.stateNode,i.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(s(161))}16&i.effectTag&&(Be(t,""),i.effectTag&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||ua(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.effectTag)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.effectTag)){i=i.stateNode;break e}}n?ha(e,i,t):fa(e,i,t)}function ha(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!=(i=i._reactRootContainer)||null!==t.onclick||(t.onclick=ai));else if(4!==n&&null!==(e=e.child))for(ha(e,t,i),e=e.sibling;null!==e;)ha(e,t,i),e=e.sibling}function fa(e,t,i){var n=e.tag,r=5===n||6===n;if(r)e=r?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&null!==(e=e.child))for(fa(e,t,i),e=e.sibling;null!==e;)fa(e,t,i),e=e.sibling}function pa(e,t,i){for(var n,r,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(s(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var l=e,c=o,u=i,d=c;;)if(la(l,d,u),null!==d.child&&4!==d.tag)d.child.return=d,d=d.child;else{if(d===c)break e;for(;null===d.sibling;){if(null===d.return||d.return===c)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r?(l=n,c=o.stateNode,8===l.nodeType?l.parentNode.removeChild(c):l.removeChild(c)):n.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){n=o.stateNode.containerInfo,r=!0,o.child.return=o,o=o.child;continue}}else if(la(e,o,i),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function ma(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void oa(3,t);case 1:case 12:case 17:return;case 5:var i=t.stateNode;if(null!=i){var n=t.memoizedProps,r=null!==e?e.memoizedProps:n;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(i[Ei]=n,"input"===e&&"radio"===n.type&&null!=n.name&&Ie(i,n),ri(e,r),t=ri(e,n),r=0;r<o.length;r+=2){var a=o[r],l=o[r+1];"style"===a?ti(i,l):"dangerouslySetInnerHTML"===a?Fe(i,l):"children"===a?Be(i,l):X(i,a,l,t)}switch(e){case"input":Te(i,n);break;case"textarea":Pe(i,n);break;case"select":t=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!n.multiple,null!=(e=n.value)?_e(i,!!n.multiple,e,!1):t!==!!n.multiple&&(null!=n.defaultValue?_e(i,!!n.multiple,n.defaultValue,!0):_e(i,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Vt(t.containerInfo)));case 13:if(i=t,null===t.memoizedState?n=!1:(n=!0,i=t.child,Fa=jr()),null!==i)e:for(e=i;;){if(5===e.tag)o=e.stateNode,n?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,r=null!=(r=e.memoizedProps.style)&&r.hasOwnProperty("display")?r.display:null,o.style.display=ei("display",r));else if(6===e.tag)e.stateNode.nodeValue=n?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===i)break;for(;null===e.sibling;){if(null===e.return||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ga(t);case 19:return void ga(t)}throw Error(s(163))}function ga(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new ta),t.forEach((function(t){var n=Il.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}}var va="function"==typeof WeakMap?WeakMap:Map;function ba(e,t,i){(i=co(i,null)).tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){Ua||(Ua=!0,ja=n),ia(e,t)},i}function Sa(e,t,i){(i=co(i,null)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var r=t.value;i.payload=function(){return ia(e,t),n(r)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(i.callback=function(){"function"!=typeof n&&(null===Wa?Wa=new Set([this]):Wa.add(this),ia(e,t));var i=t.stack;this.componentDidCatch(t.value,{componentStack:null!==i?i:""})}),i}var ya,wa=Math.ceil,ka=J.ReactCurrentDispatcher,Ca=J.ReactCurrentOwner,Ia=0,Ta=3,Ea=4,xa=0,Ma=null,_a=null,Aa=0,Oa=Ia,Pa=null,Da=1073741823,Ra=1073741823,Va=null,Na=0,La=!1,Fa=0,Ba=null,Ua=!1,ja=null,Wa=null,$a=!1,za=null,Ha=90,Ka=null,Ga=0,qa=null,Qa=0;function Ja(){return 0!=(48&xa)?1073741821-(jr()/10|0):0!==Qa?Qa:Qa=1073741821-(jr()/10|0)}function Xa(e,t,i){if(0==(2&(t=t.mode)))return 1073741823;var n=Wr();if(0==(4&t))return 99===n?1073741823:1073741822;if(0!=(16&xa))return Aa;if(null!==i)e=Qr(e,0|i.timeoutMs||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=Qr(e,150,100);break;case 97:case 96:e=Qr(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==Ma&&e===Aa&&--e,e}function Ya(e,t){if(50<Ga)throw Ga=0,qa=null,Error(s(185));if(null!==(e=Za(e,t))){var i=Wr();1073741823===t?0!=(8&xa)&&0==(48&xa)?nl(e):(tl(e),0===xa&&Gr()):tl(e),0==(4&xa)||98!==i&&99!==i||(null===Ka?Ka=new Map([[e,t]]):(void 0===(i=Ka.get(e))||i>t)&&Ka.set(e,t))}}function Za(e,t){e.expirationTime<t&&(e.expirationTime=t);var i=e.alternate;null!==i&&i.expirationTime<t&&(i.expirationTime=t);var n=e.return,r=null;if(null===n&&3===e.tag)r=e.stateNode;else for(;null!==n;){if(i=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==i&&i.childExpirationTime<t&&(i.childExpirationTime=t),null===n.return&&3===n.tag){r=n.stateNode;break}n=n.return}return null!==r&&(Ma===r&&(ul(t),Oa===Ea&&Ll(r,Aa)),Fl(r,t)),r}function el(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Nl(e,t=e.firstPendingTime))return t;var i=e.lastPingedTime;return 2>=(e=i>(e=e.nextKnownPendingLevel)?i:e)&&t!==e?0:e}function tl(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Kr(nl.bind(null,e));else{var t=el(e),i=e.callbackNode;if(0===t)null!==i&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=Ja();if(n=1073741823===t?99:1===t||2===t?95:0>=(n=10*(1073741821-t)-10*(1073741821-n))?99:250>=n?98:5250>=n?97:95,null!==i){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=n)return;i!==Rr&&Tr(i)}e.callbackExpirationTime=t,e.callbackPriority=n,t=1073741823===t?Kr(nl.bind(null,e)):Hr(n,il.bind(null,e),{timeout:10*(1073741821-t)-jr()}),e.callbackNode=t}}}function il(e,t){if(Qa=0,t)return Bl(e,t=Ja()),tl(e),null;var i=el(e);if(0!==i){if(t=e.callbackNode,0!=(48&xa))throw Error(s(327));if(Sl(),e===Ma&&i===Aa||sl(e,i),null!==_a){var n=xa;xa|=16;for(var r=ll();;)try{hl();break}catch(t){al(e,t)}if(to(),xa=n,ka.current=r,1===Oa)throw t=Pa,sl(e,i),Ll(e,i),tl(e),t;if(null===_a)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=i,n=Oa,Ma=null,n){case Ia:case 1:throw Error(s(345));case 2:Bl(e,2<i?2:i);break;case Ta:if(Ll(e,i),i===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ml(r)),1073741823===Da&&10<(r=Fa+500-jr())){if(La){var o=e.lastPingedTime;if(0===o||o>=i){e.lastPingedTime=i,sl(e,i);break}}if(0!==(o=el(e))&&o!==i)break;if(0!==n&&n!==i){e.lastPingedTime=n;break}e.timeoutHandle=yi(gl.bind(null,e),r);break}gl(e);break;case Ea:if(Ll(e,i),i===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ml(r)),La&&(0===(r=e.lastPingedTime)||r>=i)){e.lastPingedTime=i,sl(e,i);break}if(0!==(r=el(e))&&r!==i)break;if(0!==n&&n!==i){e.lastPingedTime=n;break}if(1073741823!==Ra?n=10*(1073741821-Ra)-jr():1073741823===Da?n=0:(n=10*(1073741821-Da)-5e3,0>(n=(r=jr())-n)&&(n=0),(i=10*(1073741821-i)-r)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wa(n/1960))-n)&&(n=i)),10<n){e.timeoutHandle=yi(gl.bind(null,e),n);break}gl(e);break;case 5:if(1073741823!==Da&&null!==Va){o=Da;var a=Va;if(0>=(n=0|a.busyMinDurationMs)?n=0:(r=0|a.busyDelayMs,n=(o=jr()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=r?0:r+n-o),10<n){Ll(e,i),e.timeoutHandle=yi(gl.bind(null,e),n);break}}gl(e);break;default:throw Error(s(329))}if(tl(e),e.callbackNode===t)return il.bind(null,e)}}return null}function nl(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&xa))throw Error(s(327));if(Sl(),e===Ma&&t===Aa||sl(e,t),null!==_a){var i=xa;xa|=16;for(var n=ll();;)try{dl();break}catch(t){al(e,t)}if(to(),xa=i,ka.current=n,1===Oa)throw i=Pa,sl(e,t),Ll(e,t),tl(e),i;if(null!==_a)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ma=null,gl(e),tl(e)}return null}function rl(e,t){var i=xa;xa|=1;try{return e(t)}finally{0===(xa=i)&&Gr()}}function ol(e,t){var i=xa;xa&=-2,xa|=8;try{return e(t)}finally{0===(xa=i)&&Gr()}}function sl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,wi(i)),null!==_a)for(i=_a.return;null!==i;){var n=i;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&br();break;case 3:Vo(),ur(pr),ur(fr);break;case 5:Lo(n);break;case 4:Vo();break;case 13:case 19:ur(Fo);break;case 10:io(n)}i=i.return}Ma=e,_a=Al(e.current,null),Aa=t,Oa=Ia,Pa=null,Ra=Da=1073741823,Va=null,Na=0,La=!1}function al(e,t){for(;;){try{if(to(),jo.current=bs,Go)for(var i=zo.memoizedState;null!==i;){var n=i.queue;null!==n&&(n.pending=null),i=i.next}if($o=0,Ko=Ho=zo=null,Go=!1,null===_a||null===_a.return)return Oa=1,Pa=t,_a=null;e:{var r=e,o=_a.return,s=_a,a=t;if(t=Aa,s.effectTag|=2048,s.firstEffect=s.lastEffect=null,null!==a&&"object"==typeof a&&"function"==typeof a.then){var l=a;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.expirationTime=c.expirationTime):(s.updateQueue=null,s.memoizedState=null)}var u=0!=(1&Fo.current),d=o;do{var h;if(h=13===d.tag){var f=d.memoizedState;if(null!==f)h=null!==f.dehydrated;else{var p=d.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!u)}}if(h){var m=d.updateQueue;if(null===m){var g=new Set;g.add(l),d.updateQueue=g}else m.add(l);if(0==(2&d.mode)){if(d.effectTag|=64,s.effectTag&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=co(1073741823,null);v.tag=2,uo(s,v)}s.expirationTime=1073741823;break e}a=void 0,s=t;var b=r.pingCache;if(null===b?(b=r.pingCache=new va,a=new Set,b.set(l,a)):void 0===(a=b.get(l))&&(a=new Set,b.set(l,a)),!a.has(s)){a.add(s);var S=Cl.bind(null,r,l,s);l.then(S,S)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);a=Error((ge(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ve(s))}5!==Oa&&(Oa=2),a=ea(a,s),d=o;do{switch(d.tag){case 3:l=a,d.effectTag|=4096,d.expirationTime=t,ho(d,ba(d,l,t));break e;case 1:l=a;var y=d.type,w=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof y.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Wa||!Wa.has(w)))){d.effectTag|=4096,d.expirationTime=t,ho(d,Sa(d,l,t));break e}}d=d.return}while(null!==d)}_a=pl(_a)}catch(e){t=e;continue}break}}function ll(){var e=ka.current;return ka.current=bs,null===e?bs:e}function cl(e,t){e<Da&&2<e&&(Da=e),null!==t&&e<Ra&&2<e&&(Ra=e,Va=t)}function ul(e){e>Na&&(Na=e)}function dl(){for(;null!==_a;)_a=fl(_a)}function hl(){for(;null!==_a&&!Vr();)_a=fl(_a)}function fl(e){var t=ya(e.alternate,e,Aa);return e.memoizedProps=e.pendingProps,null===t&&(t=pl(e)),Ca.current=null,t}function pl(e){_a=e;do{var t=_a.alternate;if(e=_a.return,0==(2048&_a.effectTag)){if(t=Ys(t,_a,Aa),1===Aa||1!==_a.childExpirationTime){for(var i=0,n=_a.child;null!==n;){var r=n.expirationTime,o=n.childExpirationTime;r>i&&(i=r),o>i&&(i=o),n=n.sibling}_a.childExpirationTime=i}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=_a.firstEffect),null!==_a.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=_a.firstEffect),e.lastEffect=_a.lastEffect),1<_a.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=_a:e.firstEffect=_a,e.lastEffect=_a))}else{if(null!==(t=Zs(_a)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=_a.sibling))return t;_a=e}while(null!==_a);return Oa===Ia&&(Oa=5),null}function ml(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function gl(e){var t=Wr();return zr(99,vl.bind(null,e,t)),null}function vl(e,t){do{Sl()}while(null!==za);if(0!=(48&xa))throw Error(s(327));var i=e.finishedWork,n=e.finishedExpirationTime;if(null===i)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,i===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=ml(i);if(e.firstPendingTime=r,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ma&&(_a=Ma=null,Aa=0),1<i.effectTag?null!==i.lastEffect?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,null!==r){var o=xa;xa|=32,Ca.current=null,gi=Ht;var a=hi();if(fi(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{var c=(l=(l=a.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(c&&0!==c.rangeCount){l=c.anchorNode;var u=c.anchorOffset,d=c.focusNode;c=c.focusOffset;try{l.nodeType,d.nodeType}catch(e){l=null;break e}var h=0,f=-1,p=-1,m=0,g=0,v=a,b=null;t:for(;;){for(var S;v!==l||0!==u&&3!==v.nodeType||(f=h+u),v!==d||0!==c&&3!==v.nodeType||(p=h+c),3===v.nodeType&&(h+=v.nodeValue.length),null!==(S=v.firstChild);)b=v,v=S;for(;;){if(v===a)break t;if(b===l&&++m===u&&(f=h),b===d&&++g===c&&(p=h),null!==(S=v.nextSibling))break;b=(v=b).parentNode}v=S}l=-1===f||-1===p?null:{start:f,end:p}}else l=null}l=l||{start:0,end:0}}else l=null;vi={activeElementDetached:null,focusedElem:a,selectionRange:l},Ht=!1,Ba=r;do{try{bl()}catch(e){if(null===Ba)throw Error(s(330));kl(Ba,e),Ba=Ba.nextEffect}}while(null!==Ba);Ba=r;do{try{for(a=e,l=t;null!==Ba;){var y=Ba.effectTag;if(16&y&&Be(Ba.stateNode,""),128&y){var w=Ba.alternate;if(null!==w){var k=w.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&y){case 2:da(Ba),Ba.effectTag&=-3;break;case 6:da(Ba),Ba.effectTag&=-3,ma(Ba.alternate,Ba);break;case 1024:Ba.effectTag&=-1025;break;case 1028:Ba.effectTag&=-1025,ma(Ba.alternate,Ba);break;case 4:ma(Ba.alternate,Ba);break;case 8:pa(a,u=Ba,l),ca(u)}Ba=Ba.nextEffect}}catch(e){if(null===Ba)throw Error(s(330));kl(Ba,e),Ba=Ba.nextEffect}}while(null!==Ba);if(k=vi,w=hi(),y=k.focusedElem,l=k.selectionRange,w!==y&&y&&y.ownerDocument&&di(y.ownerDocument.documentElement,y)){null!==l&&fi(y)&&(w=l.start,void 0===(k=l.end)&&(k=w),"selectionStart"in y?(y.selectionStart=w,y.selectionEnd=Math.min(k,y.value.length)):(k=(w=y.ownerDocument||document)&&w.defaultView||window).getSelection&&(k=k.getSelection(),u=y.textContent.length,a=Math.min(l.start,u),l=void 0===l.end?a:Math.min(l.end,u),!k.extend&&a>l&&(u=l,l=a,a=u),u=ui(y,a),d=ui(y,l),u&&d&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==d.node||k.focusOffset!==d.offset)&&((w=w.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),a>l?(k.addRange(w),k.extend(d.node,d.offset)):(w.setEnd(d.node,d.offset),k.addRange(w))))),w=[];for(k=y;k=k.parentNode;)1===k.nodeType&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof y.focus&&y.focus(),y=0;y<w.length;y++)(k=w[y]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Ht=!!gi,vi=gi=null,e.current=i,Ba=r;do{try{for(y=e;null!==Ba;){var C=Ba.effectTag;if(36&C&&aa(y,Ba.alternate,Ba),128&C){w=void 0;var I=Ba.ref;if(null!==I){var T=Ba.stateNode;Ba.tag,w=T,"function"==typeof I?I(w):I.current=w}}Ba=Ba.nextEffect}}catch(e){if(null===Ba)throw Error(s(330));kl(Ba,e),Ba=Ba.nextEffect}}while(null!==Ba);Ba=null,Nr(),xa=o}else e.current=i;if($a)$a=!1,za=e,Ha=t;else for(Ba=r;null!==Ba;)t=Ba.nextEffect,Ba.nextEffect=null,Ba=t;if(0===(t=e.firstPendingTime)&&(Wa=null),1073741823===t?e===qa?Ga++:(Ga=0,qa=e):Ga=0,"function"==typeof Tl&&Tl(i.stateNode,n),tl(e),Ua)throw Ua=!1,e=ja,ja=null,e;return 0!=(8&xa)||Gr(),null}function bl(){for(;null!==Ba;){var e=Ba.effectTag;0!=(256&e)&&ra(Ba.alternate,Ba),0==(512&e)||$a||($a=!0,Hr(97,(function(){return Sl(),null}))),Ba=Ba.nextEffect}}function Sl(){if(90!==Ha){var e=97<Ha?97:Ha;return Ha=90,zr(e,yl)}}function yl(){if(null===za)return!1;var e=za;if(za=null,0!=(48&xa))throw Error(s(331));var t=xa;for(xa|=32,e=e.current.firstEffect;null!==e;){try{var i=e;if(0!=(512&i.effectTag))switch(i.tag){case 0:case 11:case 15:case 22:oa(5,i),sa(5,i)}}catch(t){if(null===e)throw Error(s(330));kl(e,t)}i=e.nextEffect,e.nextEffect=null,e=i}return xa=t,Gr(),!0}function wl(e,t,i){uo(e,t=ba(e,t=ea(i,t),1073741823)),null!==(e=Za(e,1073741823))&&tl(e)}function kl(e,t){if(3===e.tag)wl(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){wl(i,e,t);break}if(1===i.tag){var n=i.stateNode;if("function"==typeof i.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Wa||!Wa.has(n))){uo(i,e=Sa(i,e=ea(t,e),1073741823)),null!==(i=Za(i,1073741823))&&tl(i);break}}i=i.return}}function Cl(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),Ma===e&&Aa===i?Oa===Ea||Oa===Ta&&1073741823===Da&&jr()-Fa<500?sl(e,Aa):La=!0:Nl(e,i)&&(0!==(t=e.lastPingedTime)&&t<i||(e.lastPingedTime=i,tl(e)))}function Il(e,t){var i=e.stateNode;null!==i&&i.delete(t),0==(t=0)&&(t=Xa(t=Ja(),e,null)),null!==(e=Za(e,t))&&tl(e)}ya=function(e,t,i){var n=t.expirationTime;if(null!==e){var r=t.pendingProps;if(e.memoizedProps!==r||pr.current)Ps=!0;else{if(n<i){switch(Ps=!1,t.tag){case 3:js(t),As();break;case 5:if(No(t),4&t.mode&&1!==i&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:vr(t.type)&&wr(t);break;case 4:Ro(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,r=t.type._context,dr(Xr,r._currentValue),r._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=i?Ks(e,t,i):(dr(Fo,1&Fo.current),null!==(t=Js(e,t,i))?t.sibling:null);dr(Fo,1&Fo.current);break;case 19:if(n=t.childExpirationTime>=i,0!=(64&e.effectTag)){if(n)return Qs(e,t,i);t.effectTag|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null),dr(Fo,Fo.current),!n)return null}return Js(e,t,i)}Ps=!1}}else Ps=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=gr(t,fr.current),ro(t,i),r=Jo(null,t,n,e,r,i),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(n)){var o=!0;wr(t)}else o=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ao(t);var a=n.getDerivedStateFromProps;"function"==typeof a&&vo(t,n,a,e),r.updater=bo,t.stateNode=r,r._reactInternalFiber=t,ko(t,n,e,i),t=Us(null,t,n,!0,o,i)}else t.tag=0,Ds(null,t,r,i),t=t.child;return t;case 16:e:{if(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(r),1!==r._status)throw r._result;switch(r=r._result,t.type=r,o=t.tag=function(e){if("function"==typeof e)return _l(e)?1:0;if(null!=e){if((e=e.$$typeof)===le)return 11;if(e===de)return 14}return 2}(r),e=Jr(r,e),o){case 0:t=Fs(null,t,r,e,i);break e;case 1:t=Bs(null,t,r,e,i);break e;case 11:t=Rs(null,t,r,e,i);break e;case 14:t=Vs(null,t,r,Jr(r.type,e),n,i);break e}throw Error(s(306,r,""))}return t;case 0:return n=t.type,r=t.pendingProps,Fs(e,t,n,r=t.elementType===n?r:Jr(n,r),i);case 1:return n=t.type,r=t.pendingProps,Bs(e,t,n,r=t.elementType===n?r:Jr(n,r),i);case 3:if(js(t),n=t.updateQueue,null===e||null===n)throw Error(s(282));if(n=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,lo(e,t),fo(t,n,null,i),(n=t.memoizedState.element)===r)As(),t=Js(e,t,i);else{if((r=t.stateNode.hydrate)&&(Cs=ki(t.stateNode.containerInfo.firstChild),ks=t,r=Is=!0),r)for(i=Mo(t,null,n,i),t.child=i;i;)i.effectTag=-3&i.effectTag|1024,i=i.sibling;else Ds(e,t,n,i),As();t=t.child}return t;case 5:return No(t),null===e&&xs(t),n=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,Si(n,r)?a=null:null!==o&&Si(n,o)&&(t.effectTag|=16),Ls(e,t),4&t.mode&&1!==i&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ds(e,t,a,i),t=t.child),t;case 6:return null===e&&xs(t),null;case 13:return Ks(e,t,i);case 4:return Ro(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=xo(t,null,n,i):Ds(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,Rs(e,t,n,r=t.elementType===n?r:Jr(n,r),i);case 7:return Ds(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,i),t.child;case 10:e:{n=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value;var l=t.type._context;if(dr(Xr,l._currentValue),l._currentValue=o,null!==a)if(l=a.value,0==(o=Bn(l,o)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,o):1073741823))){if(a.children===r.children&&!pr.current){t=Js(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===n&&0!=(u.observedBits&o)){1===l.tag&&((u=co(i,null)).tag=2,uo(l,u)),l.expirationTime<i&&(l.expirationTime=i),null!==(u=l.alternate)&&u.expirationTime<i&&(u.expirationTime=i),no(l.return,i),c.expirationTime<i&&(c.expirationTime=i);break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Ds(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=(o=t.pendingProps).children,ro(t,i),n=n(r=oo(r,o.unstable_observedBits)),t.effectTag|=1,Ds(e,t,n,i),t.child;case 14:return o=Jr(r=t.type,t.pendingProps),Vs(e,t,r,o=Jr(r.type,o),n,i);case 15:return Ns(e,t,t.type,t.pendingProps,n,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:Jr(n,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,vr(n)?(e=!0,wr(t)):e=!1,ro(t,i),yo(t,n,r),ko(t,n,r,i),Us(null,t,n,!0,e,i);case 19:return Qs(e,t,i)}throw Error(s(156,t.tag))};var Tl=null,El=null;function xl(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ml(e,t,i,n){return new xl(e,t,i,n)}function _l(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Al(e,t){var i=e.alternate;return null===i?((i=Ml(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.effectTag=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childExpirationTime=e.childExpirationTime,i.expirationTime=e.expirationTime,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ol(e,t,i,n,r,o){var a=2;if(n=e,"function"==typeof e)_l(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ie:return Pl(i.children,r,o,t);case ae:a=8,r|=7;break;case ne:a=8,r|=1;break;case re:return(e=Ml(12,i,t,8|r)).elementType=re,e.type=re,e.expirationTime=o,e;case ce:return(e=Ml(13,i,t,r)).type=ce,e.elementType=ce,e.expirationTime=o,e;case ue:return(e=Ml(19,i,t,r)).elementType=ue,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case oe:a=10;break e;case se:a=9;break e;case le:a=11;break e;case de:a=14;break e;case he:a=16,n=null;break e;case fe:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ml(a,i,t,r)).elementType=e,t.type=n,t.expirationTime=o,t}function Pl(e,t,i,n){return(e=Ml(7,e,n,t)).expirationTime=i,e}function Dl(e,t,i){return(e=Ml(6,e,null,t)).expirationTime=i,e}function Rl(e,t,i){return(t=Ml(4,null!==e.children?e.children:[],e.key,t)).expirationTime=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,i){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Nl(e,t){var i=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==i&&i>=t&&e<=t}function Ll(e,t){var i=e.firstSuspendedTime,n=e.lastSuspendedTime;i<t&&(e.firstSuspendedTime=t),(n>t||0===i)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Fl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var i=e.firstSuspendedTime;0!==i&&(t>=i?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Bl(e,t){var i=e.lastExpiredTime;(0===i||i>t)&&(e.lastExpiredTime=t)}function Ul(e,t,i,n){var r=t.current,o=Ja(),a=mo.suspense;o=Xa(o,r,a);e:if(i){t:{if(Ye(i=i._reactInternalFiber)!==i||1!==i.tag)throw Error(s(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(vr(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===i.tag){var c=i.type;if(vr(c)){i=yr(i,c,l);break e}}i=l}else i=hr;return null===t.context?t.context=i:t.pendingContext=i,(t=co(o,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),uo(r,t),Ya(r,o),o}function jl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function $l(e,t){Wl(e,t),(e=e.alternate)&&Wl(e,t)}function zl(e,t,i){var n=new Vl(e,t,i=null!=i&&!0===i.hydrate),r=Ml(3,null,null,2===t?7:1===t?3:0);n.current=r,r.stateNode=n,ao(r),e[xi]=n.current,i&&0!==t&&function(e,t){var i=Xe(t);Tt.forEach((function(e){ft(e,t,i)})),Et.forEach((function(e){ft(e,t,i)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=n}function Hl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kl(e,t,i,n,r){var o=i._reactRootContainer;if(o){var s=o._internalRoot;if("function"==typeof r){var a=r;r=function(){var e=jl(s);a.call(e)}}Ul(t,s,e,r)}else{if(o=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new zl(e,0,t?{hydrate:!0}:void 0)}(i,n),s=o._internalRoot,"function"==typeof r){var l=r;r=function(){var e=jl(s);l.call(e)}}ol((function(){Ul(t,s,e,r)}))}return jl(s)}function Gl(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}function ql(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Hl(t))throw Error(s(200));return Gl(e,t,null,i)}zl.prototype.render=function(e){Ul(e,this._internalRoot,null,null)},zl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ul(null,e,null,(function(){t[xi]=null}))},pt=function(e){if(13===e.tag){var t=Qr(Ja(),150,100);Ya(e,t),$l(e,t)}},mt=function(e){13===e.tag&&(Ya(e,3),$l(e,3))},gt=function(e){if(13===e.tag){var t=Ja();Ya(e,t=Xa(t,e,null)),$l(e,t)}},M=function(e,t,i){switch(t){case"input":if(Te(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=Oi(n);if(!r)throw Error(s(90));we(n),Te(n,r)}}}break;case"textarea":Pe(e,i);break;case"select":null!=(t=i.value)&&_e(e,!!i.multiple,t,!1)}},R=rl,V=function(e,t,i,n,r){var o=xa;xa|=4;try{return zr(98,e.bind(null,t,i,n,r))}finally{0===(xa=o)&&Gr()}},N=function(){0==(49&xa)&&(function(){if(null!==Ka){var e=Ka;Ka=null,e.forEach((function(e,t){Bl(t,e),tl(t)})),Gr()}}(),Sl())},L=function(e,t){var i=xa;xa|=2;try{return e(t)}finally{0===(xa=i)&&Gr()}};var Ql={Events:[_i,Ai,Oi,E,C,Fi,function(e){nt(e,Li)},P,D,Jt,st,Sl,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;!function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var i=t.inject(e);Tl=function(e){try{t.onCommitFiberRoot(i,e,void 0,64==(64&e.current.effectTag))}catch(e){}},El=function(e){try{t.onCommitFiberUnmount(i,e)}catch(e){}}}catch(e){}}(r({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=tt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Mi,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ql,t.createPortal=ql,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return null===(e=tt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&xa))throw Error(s(187));var i=xa;xa|=1;try{return zr(99,e.bind(null,t))}finally{xa=i,Gr()}},t.hydrate=function(e,t,i){if(!Hl(t))throw Error(s(200));return Kl(null,e,t,!0,i)},t.render=function(e,t,i){if(!Hl(t))throw Error(s(200));return Kl(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!Hl(e))throw Error(s(40));return!!e._reactRootContainer&&(ol((function(){Kl(null,null,e,!1,(function(){e._reactRootContainer=null,e[xi]=null}))})),!0)},t.unstable_batchedUpdates=rl,t.unstable_createPortal=function(e,t){return ql(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Hl(i))throw Error(s(200));if(null==e||void 0===e._reactInternalFiber)throw Error(s(38));return Kl(e,t,i,!1,n)},t.version="16.14.0"},3935:(e,t,i)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=i(4448)},9921:(e,t)=>{"use strict";var i="function"==typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,r=i?Symbol.for("react.portal"):60106,o=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,u=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,v=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,S=i?Symbol.for("react.responder"):60118,y=i?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case d:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case r:return t}}}function k(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=r,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return k(e)||w(e)===u},t.isConcurrentMode=k,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===o},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===d||e===a||e===s||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===b||e.$$typeof===S||e.$$typeof===y||e.$$typeof===v)},t.typeOf=w},9864:(e,t,i)=>{"use strict";e.exports=i(9921)},2408:(e,t,i)=>{"use strict";var n=i(7418),r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,d=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S={};function y(e,t,i){this.props=e,this.context=t,this.refs=S,this.updater=i||b}function w(){}function k(e,t,i){this.props=e,this.context=t,this.refs=S,this.updater=i||b}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=y.prototype;var C=k.prototype=new w;C.constructor=k,n(C,y.prototype),C.isPureReactComponent=!0;var I={current:null},T=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,i){var n,r={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)T.call(t,n)&&!E.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:o,type:e,key:s,ref:a,props:r,_owner:I.current}}function M(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var _=/\/+/g,A=[];function O(e,t,i,n){if(A.length){var r=A.pop();return r.result=e,r.keyPrefix=t,r.func=i,r.context=n,r.count=0,r}return{result:e,keyPrefix:t,func:i,context:n,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function D(e,t,i,n){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var a=!1;if(null===e)a=!0;else switch(r){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case o:case s:a=!0}}if(a)return i(n,e,""===t?"."+V(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=t+V(r=e[l],l);a+=D(r,c,i,n)}else if("function"==typeof(c=null===e||"object"!=typeof e?null:"function"==typeof(c=g&&e[g]||e["@@iterator"])?c:null))for(e=c.call(e),l=0;!(r=e.next()).done;)a+=D(r=r.value,c=t+V(r,l++),i,n);else if("object"===r)throw i=""+e,Error(v(31,"[object Object]"===i?"object with keys {"+Object.keys(e).join(", ")+"}":i,""));return a}function R(e,t,i){return null==e?0:D(e,"",t,i)}function V(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,i){var n=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,n,i,(function(e){return e})):null!=e&&(M(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(_,"$&/")+"/")+i)),n.push(e))}function F(e,t,i,n,r){var o="";null!=i&&(o=(""+i).replace(_,"$&/")+"/"),R(e,L,t=O(t,o,n,r)),P(t)}var B={current:null};function U(){var e=B.current;if(null===e)throw Error(v(321));return e}var j={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:function(e,t,i){if(null==e)return e;var n=[];return F(e,n,null,t,i),n},forEach:function(e,t,i){if(null==e)return e;R(e,N,t=O(null,null,t,i)),P(t)},count:function(e){return R(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!M(e))throw Error(v(143));return e}},t.Component=y,t.Fragment=a,t.Profiler=c,t.PureComponent=k,t.StrictMode=l,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,i){if(null==e)throw Error(v(267,e));var r=n({},e.props),s=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)T.call(t,u)&&!E.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=i;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:o,type:e.type,key:s,ref:a,props:r,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return U().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,i){return U().useReducer(e,t,i)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},7294:(e,t,i)=>{"use strict";e.exports=i(2408)},53:(e,t)=>{"use strict";var i,n,r,o,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var a=null,l=null,c=function(){if(null!==a)try{var e=t.unstable_now();a(!0,e),a=null}catch(e){throw setTimeout(c,0),e}},u=Date.now();t.unstable_now=function(){return Date.now()-u},i=function(e){null!==a?setTimeout(i,0,e):(a=e,setTimeout(c,0))},n=function(e,t){l=setTimeout(e,t)},r=function(){clearTimeout(l)},o=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,h=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var g=h.now();t.unstable_now=function(){return h.now()-g}}var v=!1,b=null,S=-1,y=5,w=0;o=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):y=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,C=k.port2;k.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();w=e+y;try{b(!0,e)?C.postMessage(null):(v=!1,b=null)}catch(e){throw C.postMessage(null),e}}else v=!1},i=function(e){b=e,v||(v=!0,C.postMessage(null))},n=function(e,i){S=f((function(){e(t.unstable_now())}),i)},r=function(){p(S),S=-1}}function I(e,t){var i=e.length;e.push(t);e:for(;;){var n=i-1>>>1,r=e[n];if(!(void 0!==r&&0<x(r,t)))break e;e[n]=t,e[i]=r,i=n}}function T(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,r=e.length;n<r;){var o=2*(n+1)-1,s=e[o],a=o+1,l=e[a];if(void 0!==s&&0>x(s,i))void 0!==l&&0>x(l,s)?(e[n]=l,e[a]=i,n=a):(e[n]=s,e[o]=i,n=o);else{if(!(void 0!==l&&0>x(l,i)))break e;e[n]=l,e[a]=i,n=a}}}return t}return null}function x(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}var M=[],_=[],A=1,O=null,P=3,D=!1,R=!1,V=!1;function N(e){for(var t=T(_);null!==t;){if(null===t.callback)E(_);else{if(!(t.startTime<=e))break;E(_),t.sortIndex=t.expirationTime,I(M,t)}t=T(_)}}function L(e){if(V=!1,N(e),!R)if(null!==T(M))R=!0,i(F);else{var t=T(_);null!==t&&n(L,t.startTime-e)}}function F(e,i){R=!1,V&&(V=!1,r()),D=!0;var s=P;try{for(N(i),O=T(M);null!==O&&(!(O.expirationTime>i)||e&&!o());){var a=O.callback;if(null!==a){O.callback=null,P=O.priorityLevel;var l=a(O.expirationTime<=i);i=t.unstable_now(),"function"==typeof l?O.callback=l:O===T(M)&&E(M),N(i)}else E(M);O=T(M)}if(null!==O)var c=!0;else{var u=T(_);null!==u&&n(L,u.startTime-i),c=!1}return c}finally{O=null,P=s,D=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){R||D||(R=!0,i(F))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return T(M)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var i=P;P=t;try{return e()}finally{P=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=P;P=e;try{return t()}finally{P=i}},t.unstable_scheduleCallback=function(e,o,s){var a=t.unstable_now();if("object"==typeof s&&null!==s){var l=s.delay;l="number"==typeof l&&0<l?a+l:a,s="number"==typeof s.timeout?s.timeout:B(e)}else s=B(e),l=a;return e={id:A++,callback:o,priorityLevel:e,startTime:l,expirationTime:s=l+s,sortIndex:-1},l>a?(e.sortIndex=l,I(_,e),null===T(M)&&e===T(_)&&(V?r():V=!0,n(L,l-a))):(e.sortIndex=s,I(M,e),R||D||(R=!0,i(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();N(e);var i=T(M);return i!==O&&null!==O&&null!==i&&null!==i.callback&&i.startTime<=e&&i.expirationTime<O.expirationTime||o()},t.unstable_wrapCallback=function(e){var t=P;return function(){var i=P;P=t;try{return e.apply(this,arguments)}finally{P=i}}}},3840:(e,t,i)=>{"use strict";e.exports=i(53)},6774:e=>{e.exports=function(e,t,i,n){var r=i?i.call(n,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],d=t[c];if(!1===(r=i?i.call(n,u,d,c):void 0)||void 0===r&&u!==d)return!1}return!0}},3774:function(e,t){!function(e){"use strict";function t(e,t,i,n){var r,o=!1,s=0;function a(){r&&clearTimeout(r)}function l(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=this,h=Date.now()-s;function f(){s=Date.now(),i.apply(d,c)}function p(){r=void 0}o||(n&&!r&&f(),a(),void 0===n&&h>e?f():!0!==t&&(r=setTimeout(n?p:f,void 0===n?e-h:e)))}return"boolean"!=typeof t&&(n=i,i=t,t=void 0),l.cancel=function(){a(),o=!0},l}e.debounce=function(e,i,n){return void 0===n?t(e,i,!1):t(e,n,!1!==i)},e.throttle=t,Object.defineProperty(e,"__esModule",{value:!0})}(t)},2238:function(e,t,i){var n;!function(r,o){"use strict";var s="function",a="undefined",l="object",c="string",u="model",d="name",h="type",f="vendor",p="version",m="architecture",g="console",v="mobile",b="tablet",S="smarttv",y="wearable",w="embedded",k={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return typeof e===c&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===c?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),typeof t===a?e:e.substring(0,255)}},C={rgx:function(e,t){for(var i,n,r,a,c,u,d=0;d<t.length&&!c;){var h=t[d],f=t[d+1];for(i=n=0;i<h.length&&!c;)if(c=h[i++].exec(e))for(r=0;r<f.length;r++)u=c[++n],typeof(a=f[r])===l&&a.length>0?2==a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3==a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):o:this[a[0]]=u?a[1].call(this,u,a[2]):o:4==a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):o):this[a]=u||o;d+=2}},str:function(e,t){for(var i in t)if(typeof t[i]===l&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(k.has(t[i][n],e))return"?"===i?o:i}else if(k.has(t[i],e))return"?"===i?o:i;return e}},I={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},T={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[d,p],[/opios[\/\s]+([\w\.]+)/i],[p,[d,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[p,[d,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[p,[d,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],p],[/focus\/([\w\.]+)/i],[p,[d,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[p,[d,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[p,[d,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[d,p],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[d],[/;fbav\/([\w\.]+);/i],[p,[d,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[d,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[d,p],[/\bgsa\/([\w\.]+)\s.*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[p,[d,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],p],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[p,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[p,d],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[p,C.str,I.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],p],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[p,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,k.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[u,[f,"Samsung"],[h,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[u,[f,"Samsung"],[h,v]],[/\((ip(?:hone|od)[\s\w]*);/i],[u,[f,"Apple"],[h,v]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,"Apple"],[h,b]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[u,[f,"Huawei"],[h,b]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[u,[f,"Huawei"],[h,v]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[u,/_/g," "],[f,"Xiaomi"],[h,v]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[u,/_/g," "],[f,"Xiaomi"],[h,b]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[u,[f,"OPPO"],[h,v]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[u,[f,"Vivo"],[h,v]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[u,[f,"Realme"],[h,v]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[u,[f,"Motorola"],[h,v]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[u,[f,"Motorola"],[h,b]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[u,[f,"LG"],[h,b]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[u,[f,"LG"],[h,v]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[u,[f,"Lenovo"],[h,b]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[u,/_/g," "],[f,"Nokia"],[h,v]],[/droid.+;\s(pixel\sc)[\s)]/i],[u,[f,"Google"],[h,b]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[u,[f,"Google"],[h,v]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,"Sony"],[h,v]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[u,"Xperia Tablet"],[f,"Sony"],[h,b]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[u,[f,"OnePlus"],[h,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[u,[f,"Amazon"],[h,b]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[u,"Fire Phone"],[f,"Amazon"],[h,v]],[/\((playbook);[\w\s\),;-]+(rim)/i],[u,f,[h,b]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[u,[f,"BlackBerry"],[h,v]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[u,[f,"ASUS"],[h,b]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[u,[f,"ASUS"],[h,v]],[/(nexus\s9)/i],[u,[f,"HTC"],[h,b]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[f,[u,/_/g," "],[h,v]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[u,[f,"Acer"],[h,b]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[u,[f,"Meizu"],[h,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[f,u,[h,v]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[f,u,[h,b]],[/\s(surface\sduo)\s/i],[u,[f,"Microsoft"],[h,b]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[u,[f,"Fairphone"],[h,v]],[/\s(u304aa)\sbuild/i],[u,[f,"AT&T"],[h,v]],[/sie-(\w*)/i],[u,[f,"Siemens"],[h,v]],[/[;\/]\s?(rct\w+)\sbuild/i],[u,[f,"RCA"],[h,b]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[u,[f,"Dell"],[h,b]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[u,[f,"Verizon"],[h,b]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[u,[f,"Barnes & Noble"],[h,b]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[u,[f,"NuVision"],[h,b]],[/;\s(k88)\sbuild/i],[u,[f,"ZTE"],[h,b]],[/;\s(nx\d{3}j)\sbuild/i],[u,[f,"ZTE"],[h,v]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[u,[f,"Swiss"],[h,v]],[/[;\/]\s?(zur\d{3})\sbuild/i],[u,[f,"Swiss"],[h,b]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[u,[f,"Zeki"],[h,b]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[f,"Dragon Touch"],u,[h,b]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[u,[f,"Insignia"],[h,b]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[u,[f,"NextBook"],[h,b]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[f,"Voice"],u,[h,v]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[f,"LvTel"],u,[h,v]],[/;\s(ph-1)\s/i],[u,[f,"Essential"],[h,v]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[u,[f,"Envizen"],[h,b]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[u,[f,"MachSpeed"],[h,b]],[/[;\/]\s?tu_(1491)\sbuild/i],[u,[f,"Rotor"],[h,b]],[/(shield[\w\s]+)\sbuild/i],[u,[f,"Nvidia"],[h,b]],[/(sprint)\s(\w+)/i],[f,u,[h,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,"Microsoft"],[h,v]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,"Zebra"],[h,b]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,"Zebra"],[h,v]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[f,u,[h,g]],[/droid.+;\s(shield)\sbuild/i],[u,[f,"Nvidia"],[h,g]],[/(playstation\s[345portablevi]+)/i],[u,[f,"Sony"],[h,g]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[u,[f,"Microsoft"],[h,g]],[/smart-tv.+(samsung)/i],[f,[h,S]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,"Samsung"],[h,S]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[f,"LG"],[h,S]],[/(apple)\s?tv/i],[f,[u,"Apple TV"],[h,S]],[/crkey/i],[[u,"Chromecast"],[f,"Google"],[h,S]],[/droid.+aft([\w])(\sbuild\/|\))/i],[u,[f,"Amazon"],[h,S]],[/\(dtv[\);].+(aquos)/i],[u,[f,"Sharp"],[h,S]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[f,k.trim],[u,k.trim],[h,S]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[h,S]],[/((pebble))app\/[\d\.]+\s/i],[f,u,[h,y]],[/droid.+;\s(glass)\s\d/i],[u,[f,"Google"],[h,y]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[u,[f,"Zebra"],[h,y]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[f,[h,w]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[u,[h,v]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[u,[h,b]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[h,k.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[u,[f,"Generic"]],[/(phone)/i],[[h,v]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,p],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[d,[p,C.str,I.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[p,C.str,I.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[d,p],[/(sunos)\s?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[d,p]]},E=function(e,t){if("object"==typeof e&&(t=e,e=o),!(this instanceof E))return new E(e,t).getResult();var i=e||(void 0!==r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),n=t?k.extend(T,t):T;return this.getBrowser=function(){var e={name:o,version:o};return C.rgx.call(e,i,n.browser),e.major=k.major(e.version),e},this.getCPU=function(){var e={architecture:o};return C.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return C.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:o,version:o};return C.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:o,version:o};return C.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===c&&e.length>255?k.trim(e,255):e,this},this.setUA(i),this};E.VERSION="0.7.28",E.BROWSER={NAME:d,MAJOR:"major",VERSION:p},E.CPU={ARCHITECTURE:m},E.DEVICE={MODEL:u,VENDOR:f,TYPE:h,CONSOLE:g,MOBILE:v,SMARTTV:S,TABLET:b,WEARABLE:y,EMBEDDED:w},E.ENGINE={NAME:d,VERSION:p},E.OS={NAME:d,VERSION:p},typeof t!==a?(e.exports&&(t=e.exports=E),t.UAParser=E):(n=function(){return E}.call(t,i,t,e))===o||(e.exports=n);var x=void 0!==r&&(r.jQuery||r.Zepto);if(x&&!x.ua){var M=new E;x.ua=M.getResult(),x.ua.get=function(){return M.getUA()},x.ua.set=function(e){M.setUA(e);var t=M.getResult();for(var i in t)x.ua[i]=t[i]}}}("object"==typeof window?window:this)},5877:(e,t,i)=>{var n=i(3570),r=i(1171),o=r;o.v1=n,o.v4=r,e.exports=o},5327:e=>{for(var t=[],i=0;i<256;++i)t[i]=(i+256).toString(16).substr(1);e.exports=function(e,i){var n=i||0,r=t;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},5217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var i=new Uint8Array(16);e.exports=function(){return t(i),i}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},3570:(e,t,i)=>{var n,r,o=i(5217),s=i(5327),a=0,l=0;e.exports=function(e,t,i){var c=t&&i||0,u=t||[],d=(e=e||{}).node||n,h=void 0!==e.clockseq?e.clockseq:r;if(null==d||null==h){var f=o();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==h&&(h=r=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:l+1,g=p-a+(m-l)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,l=m,r=h;var v=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;u[c++]=v>>>24&255,u[c++]=v>>>16&255,u[c++]=v>>>8&255,u[c++]=255&v;var b=p/4294967296*1e4&268435455;u[c++]=b>>>8&255,u[c++]=255&b,u[c++]=b>>>24&15|16,u[c++]=b>>>16&255,u[c++]=h>>>8|128,u[c++]=255&h;for(var S=0;S<6;++S)u[c+S]=d[S];return t||s(u)}},1171:(e,t,i)=>{var n=i(5217),r=i(5327);e.exports=function(e,t,i){var o=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||r(s)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(i.exports,i,i.exports,__webpack_require__),i.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var i in t)__webpack_require__.o(t,i)&&!__webpack_require__.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__);var e=__webpack_require__(7294),t=__webpack_require__(3935);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var r=__webpack_require__(5697),o=__webpack_require__.n(r);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s.apply(this,arguments)}function a(e){return"/"===e.charAt(0)}function l(e,t){for(var i=t,n=i+1,r=e.length;n<r;i+=1,n+=1)e[i]=e[n];e.pop()}const c=function(e,t){if(!e)throw new Error("Invariant failed")};function u(e){return"/"===e.charAt(0)?e:"/"+e}function d(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function h(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function f(e){var t=e.pathname,i=e.search,n=e.hash,r=t||"/";return i&&"?"!==i&&(r+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(r+="#"===n.charAt(0)?n:"#"+n),r}function p(e,t,i,n){var r;"string"==typeof e?(r=function(e){var t=e||"/",i="",n="",r=t.indexOf("#");-1!==r&&(n=t.substr(r),t=t.substr(0,r));var o=t.indexOf("?");return-1!==o&&(i=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===i?"":i,hash:"#"===n?"":n}}(e),r.state=t):(void 0===(r=s({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return i&&(r.key=i),n?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=function(e,t){void 0===t&&(t="");var i,n=e&&e.split("/")||[],r=t&&t.split("/")||[],o=e&&a(e),s=t&&a(t),c=o||s;if(e&&a(e)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";if(r.length){var u=r[r.length-1];i="."===u||".."===u||""===u}else i=!1;for(var d=0,h=r.length;h>=0;h--){var f=r[h];"."===f?l(r,h):".."===f?(l(r,h),d++):d&&(l(r,h),d--)}if(!c)for(;d--;d)r.unshift("..");!c||""===r[0]||r[0]&&a(r[0])||r.unshift("");var p=r.join("/");return i&&"/"!==p.substr(-1)&&(p+="/"),p}(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function m(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,i,n,r){if(null!=e){var o="function"==typeof e?e(t,i):e;"string"==typeof o?"function"==typeof n?n(o,r):r(!0):r(!1!==o)}else r(!0)},appendListener:function(e){var i=!0;function n(){i&&e.apply(void 0,arguments)}return t.push(n),function(){i=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,i)}))}}}var g=!("undefined"==typeof window||!window.document||!window.document.createElement);function v(e,t){t(window.confirm(e))}var b="popstate",S="hashchange";function y(){try{return window.history.state||{}}catch(e){return{}}}function w(e){void 0===e&&(e={}),g||c(!1);var t,i=window.history,n=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,r=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,l=void 0!==a&&a,w=o.getUserConfirmation,k=void 0===w?v:w,C=o.keyLength,I=void 0===C?6:C,T=e.basename?h(u(e.basename)):"";function E(e){var t=e||{},i=t.key,n=t.state,r=window.location,o=r.pathname+r.search+r.hash;return T&&(o=d(o,T)),p(o,n,i)}function x(){return Math.random().toString(36).substr(2,I)}var M=m();function _(e){s(j,e),j.length=i.length,M.notifyListeners(j.location,j.action)}function A(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||D(E(e.state))}function O(){D(E(y()))}var P=!1;function D(e){P?(P=!1,_()):M.confirmTransitionTo(e,"POP",k,(function(t){t?_({action:"POP",location:e}):function(e){var t=j.location,i=V.indexOf(t.key);-1===i&&(i=0);var n=V.indexOf(e.key);-1===n&&(n=0);var r=i-n;r&&(P=!0,L(r))}(e)}))}var R=E(y()),V=[R.key];function N(e){return T+f(e)}function L(e){i.go(e)}var F=0;function B(e){1===(F+=e)&&1===e?(window.addEventListener(b,A),r&&window.addEventListener(S,O)):0===F&&(window.removeEventListener(b,A),r&&window.removeEventListener(S,O))}var U=!1,j={length:i.length,action:"POP",location:R,createHref:N,push:function(e,t){var r="PUSH",o=p(e,t,x(),j.location);M.confirmTransitionTo(o,r,k,(function(e){if(e){var t=N(o),s=o.key,a=o.state;if(n)if(i.pushState({key:s,state:a},null,t),l)window.location.href=t;else{var c=V.indexOf(j.location.key),u=V.slice(0,c+1);u.push(o.key),V=u,_({action:r,location:o})}else window.location.href=t}}))},replace:function(e,t){var r="REPLACE",o=p(e,t,x(),j.location);M.confirmTransitionTo(o,r,k,(function(e){if(e){var t=N(o),s=o.key,a=o.state;if(n)if(i.replaceState({key:s,state:a},null,t),l)window.location.replace(t);else{var c=V.indexOf(j.location.key);-1!==c&&(V[c]=o.key),_({action:r,location:o})}else window.location.replace(t)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=M.setPrompt(e);return U||(B(1),U=!0),function(){return U&&(U=!1,B(-1)),t()}},listen:function(e){var t=M.appendListener(e);return B(1),function(){B(-1),t()}}};return j}var k=1073741823,C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:{};function I(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(i,n){e=i,t.forEach((function(t){return t(e,n)}))}}}var T=e.createContext||function(t,i){var r,s,a,l="__create-react-context-"+((C[a="__global_unique_id__"]=(C[a]||0)+1)+"__"),c=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=I(t.props.value),t}n(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[l]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,n=this.props.value,r=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)?(t="function"==typeof i?i(n,r):k,0!=(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(e.Component);c.childContextTypes=((r={})[l]=o().object.isRequired,r);var u=function(e){function i(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,i){0!=((0|t.observedBits)&i)&&t.setState({value:t.getValue()})},t}n(i,e);var r=i.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?k:t},r.componentDidMount=function(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?k:e},r.componentWillUnmount=function(){this.context[l]&&this.context[l].off(this.onUpdate)},r.getValue=function(){return this.context[l]?this.context[l].get():t},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},i}(e.Component);return u.contextTypes=((s={})[l]=o().object,s),{Provider:c,Consumer:u}};const E=T;var x=__webpack_require__(4779),M=__webpack_require__.n(x),_=__webpack_require__(9864);function A(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}var O=__webpack_require__(8679),P=__webpack_require__.n(O),D=function(e){var t=E();return t.displayName=e,t},R=D("Router-History"),V=function(e){var t=E();return t.displayName=e,t},N=V("Router"),L=function(t){function i(e){var i;return(i=t.call(this,e)||this).state={location:e.history.location},i._isMounted=!1,i._pendingLocation=null,e.staticContext||(i.unlisten=e.history.listen((function(e){i._isMounted?i.setState({location:e}):i._pendingLocation=e}))),i}n(i,t),i.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=i.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return e.createElement(N.Provider,{value:{history:this.props.history,location:this.state.location,match:i.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},e.createElement(R.Provider,{children:this.props.children||null,value:this.props.history}))},i}(e.Component);e.Component,e.Component;var F={},B=0;function U(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var i=t,n=i.path,r=i.exact,o=void 0!==r&&r,s=i.strict,a=void 0!==s&&s,l=i.sensitive,c=void 0!==l&&l;return[].concat(n).reduce((function(t,i){if(!i&&""!==i)return null;if(t)return t;var n=function(e,t){var i=""+t.end+t.strict+t.sensitive,n=F[i]||(F[i]={});if(n[e])return n[e];var r=[],o={regexp:M()(e,r,t),keys:r};return B<1e4&&(n[e]=o,B++),o}(i,{end:o,strict:a,sensitive:c}),r=n.regexp,s=n.keys,l=r.exec(e);if(!l)return null;var u=l[0],d=l.slice(1),h=e===u;return o&&!h?null:{path:i,url:"/"===i&&""===u?"/":u,isExact:h,params:s.reduce((function(e,t,i){return e[t.name]=d[i],e}),{})}}),null)}var j=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.render=function(){var t=this;return e.createElement(N.Consumer,null,(function(i){i||c(!1);var n=t.props.location||i.location,r=s({},i,{location:n,match:t.props.computedMatch?t.props.computedMatch:t.props.path?U(n.pathname,t.props):i.match}),o=t.props,a=o.children,l=o.component,u=o.render;return Array.isArray(a)&&0===a.length&&(a=null),e.createElement(N.Provider,{value:r},r.match?a?"function"==typeof a?a(r):a:l?e.createElement(l,r):u?u(r):null:"function"==typeof a?a(r):null)}))},i}(e.Component);e.Component;var W=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.render=function(){var t=this;return e.createElement(N.Consumer,null,(function(i){i||c(!1);var n,r,o=t.props.location||i.location;return e.Children.forEach(t.props.children,(function(t){if(null==r&&e.isValidElement(t)){n=t;var a=t.props.path||t.props.from;r=a?U(o.pathname,s({},t.props,{path:a})):i.match}})),r?e.cloneElement(n,{location:o,computedMatch:r}):null}))},i}(e.Component),$=e.useContext;function z(){return $(R)}var H=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).history=w(e.props),e}return n(i,t),i.prototype.render=function(){return e.createElement(L,{history:this.history,children:this.props.children})},i}(e.Component);e.Component;var K=function(e,t){return"function"==typeof e?e(t):e},G=function(e,t){return"string"==typeof e?p(e,null,null,t):e},q=function(e){return e},Q=e.forwardRef;void 0===Q&&(Q=q);var J=Q((function(t,i){var n=t.innerRef,r=t.navigate,o=t.onClick,a=A(t,["innerRef","navigate","onClick"]),l=a.target,c=s({},a,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||l&&"_self"!==l||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return c.ref=q!==Q&&i||n,e.createElement("a",c)})),X=Q((function(t,i){var n=t.component,r=void 0===n?J:n,o=t.replace,a=t.to,l=t.innerRef,u=A(t,["component","replace","to","innerRef"]);return e.createElement(N.Consumer,null,(function(t){t||c(!1);var n=t.history,d=G(K(a,t.location),t.location),h=d?n.createHref(d):"",f=s({},u,{href:h,navigate:function(){var e=K(a,t.location);(o?n.replace:n.push)(e)}});return q!==Q?f.ref=i||l:f.innerRef=l,e.createElement(r,f)}))})),Y=function(e){return e},Z=e.forwardRef;void 0===Z&&(Z=Y),Z((function(t,i){var n=t["aria-current"],r=void 0===n?"page":n,o=t.activeClassName,a=void 0===o?"active":o,l=t.activeStyle,u=t.className,d=t.exact,h=t.isActive,f=t.location,p=t.sensitive,m=t.strict,g=t.style,v=t.to,b=t.innerRef,S=A(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return e.createElement(N.Consumer,null,(function(t){t||c(!1);var n=f||t.location,o=G(K(v,n),n),y=o.pathname,w=y&&y.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),k=w?U(n.pathname,{path:w,exact:d,sensitive:p,strict:m}):null,C=!!(h?h(k,n):k),I=C?function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((function(e){return e})).join(" ")}(u,a):u,T=C?s({},g,{},l):g,E=s({"aria-current":C&&r||null,className:I,style:T,to:o},S);return Y!==Z?E.ref=i||b:E.innerRef=b,e.createElement(X,E)}))}));var ee,te=__webpack_require__(3204);!function(e){e.UNSET="UNSET",e.IN_PROGRESS="IN_PROGRESS",e.GRANTED="GRANTED",e.DENIED="DENIED"}(ee||(ee={}));const ie=[location.protocol,"//",location.host,location.pathname.replace(/\/*$/,"/")].join("");class ne{constructor(){this.meetingSession=null,this.audioVideo=null,this.selfVideo=null,this.attendeeVideo=null,this.configuration=null,this.meetingId=null,this.attendeeName=null,this.region=null,this.selectedAudioInputDevice=null,this.selectedAudioInputDeviceObservers=[],this.selectedAudioOutputDevice=null,this.selectedAudioOutputDeviceObservers=[],this.selectedVideoInputDevice=null,this.selectedVideoInputDeviceObservers=[],this.audioInputDevices=null,this.audioOutputDevices=null,this.videoInputDevices=null,this.devicePermissions=ee.UNSET,this.devicePermissionsObservers=[],this.audioVideoCallbacks=[],this.devicesUpdatedCallbacks=[],this.selectAudioInputDevice=async e=>{var t;try{await(null===(t=this.audioVideo)||void 0===t?void 0:t.chooseAudioInputDevice(e)),this.selectedAudioInputDevice=e,this.publishSelectedAudioInputDeviceChange()}catch(e){console.error(`Error setting audio input - ${e}`)}},this.selectAudioOutputDevice=async e=>{var t;try{await(null===(t=this.audioVideo)||void 0===t?void 0:t.chooseAudioOutputDevice(e)),this.selectedAudioOutputDevice=e,this.publishSelectedAudioOutputDeviceChange()}catch(e){console.error(`Error setting audio output - ${e}`)}},this.selectVideoInputDevice=async e=>{var t,i;try{null===e?(await(null===(t=this.audioVideo)||void 0===t?void 0:t.chooseVideoInputDevice(null)),this.selectedVideoInputDevice=null):(await(null===(i=this.audioVideo)||void 0===i?void 0:i.chooseVideoInputDevice(e)),this.selectedVideoInputDevice=e),this.publishSelectedVideoInputDeviceChange()}catch(e){console.error(`Error setting video input - ${e}`)}},this.subscribeToAudioVideo=e=>{this.audioVideoCallbacks.push(e)},this.unsubscribeToAudioVideo=e=>{this.audioVideoCallbacks=this.audioVideoCallbacks.filter((t=>t!==e))},this.publishAudioVideoUpdate=()=>{this.audioVideoCallbacks.forEach((e=>{e(this.audioVideo)}))},this.subscribeToDevicePermissionUpdate=e=>{this.devicePermissionsObservers.push(e)},this.unSubscribeFromDevicePermissionUpdate=e=>{this.devicePermissionsObservers=this.devicePermissionsObservers.filter((t=>t!==e))},this.notifyDevicePermissionChange=()=>{for(let e=0;e<this.devicePermissionsObservers.length;e+=1)(0,this.devicePermissionsObservers[e])(this.devicePermissions)},this.subscribeToSelectedAudioInputDeviceChange=e=>{this.selectedAudioInputDeviceObservers.push(e)},this.unsubscribeFromSelectedAudioInputDeviceChange=e=>{this.selectedAudioInputDeviceObservers=this.selectedAudioInputDeviceObservers.filter((t=>t!==e))},this.publishSelectedAudioInputDeviceChange=()=>{for(let e=0;e<this.selectedAudioInputDeviceObservers.length;e+=1)(0,this.selectedAudioInputDeviceObservers[e])(this.selectedAudioInputDevice)},this.subscribeToSelectedVideoInputDeviceChange=e=>{this.selectedVideoInputDeviceObservers.push(e)},this.unsubscribeFromSelectedVideoInputDeviceChange=e=>{this.selectedVideoInputDeviceObservers=this.selectedVideoInputDeviceObservers.filter((t=>t!==e))},this.publishSelectedVideoInputDeviceChange=()=>{for(let e=0;e<this.selectedVideoInputDeviceObservers.length;e+=1)(0,this.selectedVideoInputDeviceObservers[e])(this.selectedVideoInputDevice)},this.subscribeToSelectedAudioOutputDeviceChange=e=>{this.selectedAudioOutputDeviceObservers.push(e)},this.unsubscribeFromSelectedAudioOutputDeviceChange=e=>{this.selectedAudioOutputDeviceObservers=this.selectedAudioOutputDeviceObservers.filter((t=>t!==e))},this.publishSelectedAudioOutputDeviceChange=()=>{for(let e=0;e<this.selectedAudioOutputDeviceObservers.length;e+=1)(0,this.selectedAudioOutputDeviceObservers[e])(this.selectedAudioOutputDevice)}}initializeMeetingManager(){this.meetingSession=null,this.audioVideo=null,this.configuration=null,this.meetingId=null,this.attendeeName=null,this.region=null,this.selectedAudioInputDevice=null,this.selectedAudioInputDeviceObservers=[],this.selectedAudioOutputDevice=null,this.selectedAudioOutputDeviceObservers=[],this.selectedVideoInputDevice=null,this.selectedVideoInputDeviceObservers=[],this.audioInputDevices=[],this.audioOutputDevices=[],this.videoInputDevices=[]}async authenticate(e,t,i){this.meetingId=e,this.attendeeName=t,this.region=i;const n=(await this.joinMeeting(e,t,i)).JoinInfo;return this.configuration=new te.NHh(n.Meeting,n.Attendee),await this.initializeMeetingSession(this.configuration),n.Meeting}async joinMeeting(e,t,i){const n=await fetch(`${ie}join?title=${encodeURIComponent(e)}&name=${encodeURIComponent(t)}&region=${encodeURIComponent(i)}`,{method:"POST"}),r=await n.json();if(r.error)throw new Error(`Server error: ${r.error}`);return r}async initializeMeetingSession(e){let t;t="localhost"===location.hostname||"127.0.0.1"===location.hostname||"0.0.0.0"===location.hostname?new te.kwN("SDK",te.ini.WARN):new te.FEK("SDK",e,ne.LOGGER_BATCH_SIZE,ne.LOGGER_INTERVAL_MS,`${ie}logs`,te.ini.INFO);const i=new te.NEK(t,{enableWebAudio:!1});this.meetingSession=new te.ykv(e,t,i),this.audioVideo=this.meetingSession.audioVideo,this.audioVideo.addDeviceChangeObserver(this),this.setupDeviceLabelTrigger(),await this.listAndSelectDevices(),this.publishAudioVideoUpdate()}async updateDeviceLists(){var e,t,i;this.audioInputDevices=await(null===(e=this.audioVideo)||void 0===e?void 0:e.listAudioInputDevices())||[],this.videoInputDevices=await(null===(t=this.audioVideo)||void 0===t?void 0:t.listVideoInputDevices())||[],this.audioOutputDevices=await(null===(i=this.audioVideo)||void 0===i?void 0:i.listAudioOutputDevices())||[]}setupDeviceLabelTrigger(){var e;null===(e=this.audioVideo)||void 0===e||e.setDeviceLabelTrigger((async()=>(this.devicePermissions=ee.IN_PROGRESS,this.notifyDevicePermissionChange(),await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})))),this.devicePermissions=ee.GRANTED,this.notifyDevicePermissionChange()}async join(){var e;await this.listAndSelectDevices(),null===(e=this.audioVideo)||void 0===e||e.start()}async endMeeting(){this.meetingId&&await fetch(`${ie}end?title=${encodeURIComponent(this.meetingId)}`,{method:"POST"}),this.leaveMeeting()}async leaveMeeting(){var e,t,i,n,r;await(null===(e=this.audioVideo)||void 0===e?void 0:e.stopLocalVideoTile()),await(null===(t=this.audioVideo)||void 0===t?void 0:t.chooseVideoInputDevice(null)),null===(i=this.audioVideo)||void 0===i||i.unbindAudioElement(),await(null===(n=this.audioVideo)||void 0===n?void 0:n.chooseAudioInputDevice(null)),null===(r=this.audioVideo)||void 0===r||r.stop(),this.initializeMeetingManager(),this.publishAudioVideoUpdate()}async listAndSelectDevices(){var e,t,i;await this.updateDeviceLists(),!this.selectedAudioInputDevice&&this.audioInputDevices&&this.audioInputDevices.length&&(this.selectedAudioInputDevice=this.audioInputDevices[0].deviceId,await(null===(e=this.audioVideo)||void 0===e?void 0:e.chooseAudioInputDevice(this.audioInputDevices[0].deviceId)),this.publishSelectedAudioInputDeviceChange()),!this.selectedAudioOutputDevice&&this.audioOutputDevices&&this.audioOutputDevices.length&&(this.selectedAudioOutputDevice=this.audioOutputDevices[0].deviceId,await(null===(t=this.audioVideo)||void 0===t?void 0:t.chooseAudioOutputDevice(this.audioOutputDevices[0].deviceId)),this.publishSelectedAudioOutputDeviceChange()),!this.selectedVideoInputDevice&&this.videoInputDevices&&this.videoInputDevices.length&&(this.selectedVideoInputDevice=this.videoInputDevices[0].deviceId,await(null===(i=this.audioVideo)||void 0===i?void 0:i.chooseVideoInputDevice(this.videoInputDevices[0].deviceId)),this.publishSelectedVideoInputDeviceChange())}addObserver(e){this.audioVideo?this.audioVideo.addObserver(e):console.log("AudioVideo not initialized. Cannot add observer")}removeObserver(e){this.audioVideo?this.audioVideo.removeObserver(e):console.log("AudioVideo not initialized. Cannot remove observer")}async getAttendeeInfo(e){if(!this.meetingId)return;const t=`${ie}attendee?title=${encodeURIComponent(this.meetingId)}&attendee=${encodeURIComponent(e)}`;try{const e=await fetch(t,{method:"GET"});if(!e.ok)throw new Error("Invalid server response");const i=await e.json(),{AttendeeId:n,Name:r}=i.AttendeeInfo;return{id:n,name:r}}catch(e){return console.log(`Error fetching attendee: ${e.message}`),null}}audioInputsChanged(e){e.forEach((e=>{}))}audioOutputsChanged(e){}videoInputsChanged(e){}}ne.LOGGER_BATCH_SIZE=85,ne.LOGGER_INTERVAL_MS=1150;const re=ne,oe=(0,e.createContext)(null),se=({children:t})=>{const i=Se(),[n,r]=(0,e.useState)(null);return(0,e.useEffect)((()=>{function e(e){r(e)}return i.subscribeToAudioVideo(e),()=>i.unsubscribeToAudioVideo(e)}),[]),e.createElement(oe.Provider,{value:n},t)},ae=()=>(0,e.useContext)(oe),le=e.createContext({}),ce=({children:t})=>{const i=Se(),n=ae(),r=(0,e.useRef)({}),[o,s]=(0,e.useState)({});return(0,e.useEffect)((()=>{if(!n)return;const e=async(e,t)=>{if(!t)return delete r.current[e],void s((t=>{const{[e]:i,...n}=t;return{...n}}));const n=new te.hUf(e).base();if(n!==e)return;if(r.current[e])return;const o=await i.getAttendeeInfo(n);o&&(r.current[n]=o,s((e=>({...e,[n]:o}))))};return n.realtimeSubscribeToAttendeeIdPresence(e),()=>{s({}),n.realtimeUnsubscribeToAttendeeIdPresence(e)}}),[n]),e.createElement(le.Provider,{value:o},t)};function ue(){return(0,e.useContext)(le)}const de=(0,e.createContext)(null),he=({children:t})=>{const i=Se(),n=ae(),[r,o]=(0,e.useState)([]),[s,a]=(0,e.useState)(i.selectedAudioInputDevice);(0,e.useEffect)((()=>{const e=e=>{a(e)};return i.subscribeToSelectedAudioInputDeviceChange(e),()=>{i.unsubscribeFromSelectedAudioInputDeviceChange(e)}}),[i]),(0,e.useEffect)((()=>{let e=!0;const t={audioInputsChanged:e=>{console.log("AudioInputProvider - audio inputs updated"),o(e)}};return async function(){if(!n)return;const i=await n.listAudioInputDevices();e&&(o(i),n.addDeviceChangeObserver(t))}(),()=>{e=!1,null==n||n.removeDeviceChangeObserver(t)}}),[n]);const l=(0,e.useMemo)((()=>({devices:r,selectedDevice:s})),[r,s]);return e.createElement(de.Provider,{value:l},t)},fe=(0,e.createContext)(null),pe=({children:t})=>{const i=ae(),[n,r]=(0,e.useState)([]),o=Se(),[s,a]=(0,e.useState)(o.selectedAudioOutputDevice);(0,e.useEffect)((()=>{const e=e=>{a(e)};return o.subscribeToSelectedAudioOutputDeviceChange(e),()=>{o.unsubscribeFromSelectedAudioOutputDeviceChange(e)}}),[o]),(0,e.useEffect)((()=>{let e=!0;const t={audioOutputsChanged:e=>{r(e)}};return async function(){if(!i)return;const n=await i.listAudioOutputDevices();e&&(r(n),i.addDeviceChangeObserver(t))}(),()=>{e=!1,null==i||i.removeDeviceChangeObserver(t)}}),[i]);const l=(0,e.useMemo)((()=>({devices:n,selectedDevice:s})),[n,s]);return e.createElement(fe.Provider,{value:l},t)},me=(0,e.createContext)(null),ge=({children:t})=>{const i=ae(),[n,r]=(0,e.useState)([]),o=Se(),[s,a]=(0,e.useState)(o.selectedVideoInputDevice);(0,e.useEffect)((()=>{const e=e=>{a(e)};return o.subscribeToSelectedVideoInputDeviceChange(e),()=>{o.unsubscribeFromSelectedVideoInputDeviceChange(e)}}),[o]),(0,e.useEffect)((()=>{let e=!0;const t={videoInputsChanged:e=>{r(e)}};return async function(){if(!i)return;const n=await i.listVideoInputDevices();e&&(r(n),i.addDeviceChangeObserver(t))}(),()=>{e=!1,null==i||i.removeDeviceChangeObserver(t)}}),[i]);const l=(0,e.useMemo)((()=>({devices:n,selectedDevice:s})),[n,s]);return e.createElement(me.Provider,{value:l},t)},ve=({children:t})=>e.createElement(he,null,e.createElement(pe,null,e.createElement(ge,null,t))),be=(0,e.createContext)(null),Se=()=>{const t=(0,e.useContext)(be);if(!t)throw new Error("useMeetingManager must be used within MeetingProvider");return t},ye=({children:t})=>{const[i]=(0,e.useState)((()=>new re));return e.createElement(be.Provider,{value:i},e.createElement(se,null,e.createElement(ve,null,e.createElement(ce,null,t))))},we=e.createContext({errorMessage:"",updateErrorMessage:e=>{}});function ke(){return we}function Ce({children:t}){const[i,n]=(0,e.useState)(""),r=ke(),o={errorMessage:i,updateErrorMessage:e=>{n(e)}};return e.createElement(r.Provider,{value:o},t)}var Ie=__webpack_require__(6774),Te=__webpack_require__.n(Ie);const Ee=function(e){function t(e,n,l,c,h){for(var f,p,m,g,y,k=0,C=0,I=0,T=0,E=0,P=0,R=m=f=0,N=0,L=0,F=0,B=0,U=l.length,j=U-1,W="",$="",z="",H="";N<U;){if(p=l.charCodeAt(N),N===j&&0!==C+T+I+k&&(0!==C&&(p=47===C?10:47),T=I=k=0,U++,j++),0===C+T+I+k){if(N===j&&(0<L&&(W=W.replace(d,"")),0<W.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:W+=l.charAt(N)}p=59}switch(p){case 123:for(f=(W=W.trim()).charCodeAt(0),m=1,B=++N;N<U;){switch(p=l.charCodeAt(N)){case 123:m++;break;case 125:m--;break;case 47:switch(p=l.charCodeAt(N+1)){case 42:case 47:e:{for(R=N+1;R<j;++R)switch(l.charCodeAt(R)){case 47:if(42===p&&42===l.charCodeAt(R-1)&&N+2!==R){N=R+1;break e}break;case 10:if(47===p){N=R+1;break e}}N=R}}break;case 91:p++;case 40:p++;case 34:case 39:for(;N++<j&&l.charCodeAt(N)!==p;);}if(0===m)break;N++}if(m=l.substring(B,N),0===f&&(f=(W=W.replace(u,"").trim()).charCodeAt(0)),64===f){switch(0<L&&(W=W.replace(d,"")),p=W.charCodeAt(1)){case 100:case 109:case 115:case 45:L=n;break;default:L=O}if(B=(m=t(n,L,m,p,h+1)).length,0<D&&(y=a(3,m,L=i(O,W,F),n,M,x,B,p,h,c),W=L.join(""),void 0!==y&&0===(B=(m=y.trim()).length)&&(p=0,m="")),0<B)switch(p){case 115:W=W.replace(w,s);case 100:case 109:case 45:m=W+"{"+m+"}";break;case 107:m=(W=W.replace(v,"$1 $2"))+"{"+m+"}",m=1===A||2===A&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=W+m,112===c&&($+=m,m="")}else m=""}else m=t(n,i(n,W,F),m,c,h+1);z+=m,m=F=L=R=f=0,W="",p=l.charCodeAt(++N);break;case 125:case 59:if(1<(B=(W=(0<L?W.replace(d,""):W).trim()).length))switch(0===R&&(f=W.charCodeAt(0),45===f||96<f&&123>f)&&(B=(W=W.replace(" ",":")).length),0<D&&void 0!==(y=a(1,W,n,e,M,x,$.length,c,h,c))&&0===(B=(W=y.trim()).length)&&(W="\0\0"),f=W.charCodeAt(0),p=W.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){H+=W+l.charAt(N);break}default:58!==W.charCodeAt(B-1)&&($+=r(W,f,p,W.charCodeAt(2)))}F=L=R=f=0,W="",p=l.charCodeAt(++N)}}switch(p){case 13:case 10:47===C?C=0:0===1+f&&107!==c&&0<W.length&&(L=1,W+="\0"),0<D*V&&a(0,W,n,e,M,x,$.length,c,h,c),x=1,M++;break;case 59:case 125:if(0===C+T+I+k){x++;break}default:switch(x++,g=l.charAt(N),p){case 9:case 32:if(0===T+k+C)switch(E){case 44:case 58:case 9:case 32:g="";break;default:32!==p&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===T+C+k&&(L=F=1,g="\f"+g);break;case 108:if(0===T+C+k+_&&0<R)switch(N-R){case 2:112===E&&58===l.charCodeAt(N-3)&&(_=E);case 8:111===P&&(_=P)}break;case 58:0===T+C+k&&(R=N);break;case 44:0===C+I+T+k&&(L=1,g+="\r");break;case 34:case 39:0===C&&(T=T===p?0:0===T?p:T);break;case 91:0===T+C+I&&k++;break;case 93:0===T+C+I&&k--;break;case 41:0===T+C+k&&I--;break;case 40:0===T+C+k&&(0===f&&(2*E+3*P==533||(f=1)),I++);break;case 64:0===C+I+T+k+R+m&&(m=1);break;case 42:case 47:if(!(0<T+k+I))switch(C){case 0:switch(2*p+3*l.charCodeAt(N+1)){case 235:C=47;break;case 220:B=N,C=42}break;case 42:47===p&&42===E&&B+2!==N&&(33===l.charCodeAt(B+2)&&($+=l.substring(B,N+1)),g="",C=0)}}0===C&&(W+=g)}P=E,E=p,N++}if(0<(B=$.length)){if(L=n,0<D&&void 0!==(y=a(2,$,L,e,M,x,B,c,h,c))&&0===($=y).length)return H+$+z;if($=L.join(",")+"{"+$+"}",0!=A*_){switch(2!==A||o($,2)||(_=0),_){case 111:$=$.replace(S,":-moz-$1")+$;break;case 112:$=$.replace(b,"::-webkit-input-$1")+$.replace(b,"::-moz-$1")+$.replace(b,":-ms-input-$1")+$}_=0}}return H+$+z}function i(e,t,i){var r=t.trim().split(m);t=r;var o=r.length,s=e.length;switch(s){case 0:case 1:var a=0;for(e=0===s?"":e[0]+" ";a<o;++a)t[a]=n(e,t[a],i).trim();break;default:var l=a=0;for(t=[];a<o;++a)for(var c=0;c<s;++c)t[l++]=n(e[c]+" ",r[a],i).trim()}return t}function n(e,t,i){var n=t.charCodeAt(0);switch(33>n&&(n=(t=t.trim()).charCodeAt(0)),n){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*i&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,i,n){var s=e+";",a=2*t+3*i+4*n;if(944===a){e=s.indexOf(":",9)+1;var l=s.substring(e,s.length-1).trim();return l=s.substring(0,e).trim()+l+";",1===A||2===A&&o(l,1)?"-webkit-"+l+l:l}if(0===A||2===A&&!o(s,1))return s;switch(a){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:if(45===s.charCodeAt(8))return"-webkit-"+s+s;if(0<s.indexOf("image-set(",11))return s.replace(E,"$1-webkit-$2")+s;break;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return f.test(s)?s.replace(h,":-webkit-")+s.replace(h,":-moz-")+s:s;case 1e3:switch(t=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=s.replace(y,"tb");break;case 232:l=s.replace(y,"tb-rl");break;case 220:l=s.replace(y,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(t=(s=e).length-10,a=(l=(33===s.charCodeAt(t)?s.substring(0,t):s).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return l=s.replace("-items",""),"-webkit-"+s+"-webkit-box-"+l+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(C,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(C,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,i,n).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===i+n&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+s}return s}function o(e,t){var i=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?i:10);return i=e.substring(i+1,e.length-1),R(2!==t?n:n.replace(I,"$1"),i,t)}function s(e,t){var i=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return i!==t+";"?i.replace(k," or ($1)").substring(4):"("+t+")"}function a(e,t,i,n,r,o,s,a,l,u){for(var d,h=0,f=t;h<D;++h)switch(d=P[h].call(c,e,f,i,n,r,o,s,a,l,u)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==t)return f}function l(e){return void 0!==(e=e.prefix)&&(R=null,e?"function"!=typeof e?A=1:(A=2,R=e):A=0),l}function c(e,i){var n=e;if(33>n.charCodeAt(0)&&(n=n.trim()),n=[n],0<D){var r=a(-1,i,n,n,M,x,0,0,0,0);void 0!==r&&"string"==typeof r&&(i=r)}var o=t(O,n,i,0,0);return 0<D&&void 0!==(r=a(-2,o,n,n,M,x,o.length,0,0,0))&&(o=r),_=0,x=M=1,o}var u=/^\0+/g,d=/[\0\r\f]/g,h=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,v=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,S=/:(read-only)/g,y=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,C=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,x=1,M=1,_=0,A=1,O=[],P=[],D=0,R=null,V=0;return c.use=function e(t){switch(t){case void 0:case null:D=P.length=0;break;default:if("function"==typeof t)P[D++]=t;else if("object"==typeof t)for(var i=0,n=t.length;i<n;++i)e(t[i]);else V=0|!!t}return e},c.set=l,void 0!==e&&l(e),c},xe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var Me=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const _e=(Ae=function(e){return Me.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91},Oe={},function(e){return void 0===Oe[e]&&(Oe[e]=Ae(e)),Oe[e]});var Ae,Oe;function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}var De=function(e,t){for(var i=[e[0]],n=0,r=t.length;n<r;n+=1)i.push(t[n],e[n+1]);return i},Re=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,_.typeOf)(e)},Ve=Object.freeze([]),Ne=Object.freeze({});function Le(e){return"function"==typeof e}function Fe(e){return e.displayName||e.name||"Component"}function Be(e){return e&&"string"==typeof e.styledComponentId}var Ue="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",je="undefined"!=typeof window&&"HTMLElement"in window,We=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY);function $e(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(i.length>0?" Args: "+i.join(", "):""))}var ze=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,i=0;i<e;i++)t+=this.groupSizes[i];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var i=this.groupSizes,n=i.length,r=n;e>=r;)(r<<=1)<0&&$e(16,""+e);this.groupSizes=new Uint32Array(r),this.groupSizes.set(i),this.length=r;for(var o=n;o<r;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=0,l=t.length;a<l;a++)this.tag.insertRule(s,t[a])&&(this.groupSizes[e]++,s++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],i=this.indexOfGroup(e),n=i+t;this.groupSizes[e]=0;for(var r=i;r<n;r++)this.tag.deleteRule(i)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var i=this.groupSizes[e],n=this.indexOfGroup(e),r=n+i,o=n;o<r;o++)t+=this.tag.getRule(o)+"/*!sc*/\n";return t},e}(),He=new Map,Ke=new Map,Ge=1,qe=function(e){if(He.has(e))return He.get(e);for(;Ke.has(Ge);)Ge++;var t=Ge++;return He.set(e,t),Ke.set(t,e),t},Qe=function(e){return Ke.get(e)},Je=function(e,t){He.set(e,t),Ke.set(t,e)},Xe="style["+Ue+'][data-styled-version="5.3.0"]',Ye=new RegExp("^"+Ue+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Ze=function(e,t,i){for(var n,r=i.split(","),o=0,s=r.length;o<s;o++)(n=r[o])&&e.registerName(t,n)},et=function(e,t){for(var i=t.innerHTML.split("/*!sc*/\n"),n=[],r=0,o=i.length;r<o;r++){var s=i[r].trim();if(s){var a=s.match(Ye);if(a){var l=0|parseInt(a[1],10),c=a[2];0!==l&&(Je(c,l),Ze(e,c,a[3]),e.getTag().insertRules(l,n)),n.length=0}else n.push(s)}}},tt=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},it=function(e){var t=document.head,i=e||t,n=document.createElement("style"),r=function(e){for(var t=e.childNodes,i=t.length;i>=0;i--){var n=t[i];if(n&&1===n.nodeType&&n.hasAttribute(Ue))return n}}(i),o=void 0!==r?r.nextSibling:null;n.setAttribute(Ue,"active"),n.setAttribute("data-styled-version","5.3.0");var s=tt();return s&&n.setAttribute("nonce",s),i.insertBefore(n,o),n},nt=function(){function e(e){var t=this.element=it(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,i=0,n=t.length;i<n;i++){var r=t[i];if(r.ownerNode===e)return r}$e(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),rt=function(){function e(e){var t=this.element=it(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var i=document.createTextNode(t),n=this.nodes[e];return this.element.insertBefore(i,n||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),ot=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),st=je,at={isServer:!je,useCSSOMInjection:!We},lt=function(){function e(e,t,i){void 0===e&&(e=Ne),void 0===t&&(t={}),this.options=Pe({},at,{},e),this.gs=t,this.names=new Map(i),!this.options.isServer&&je&&st&&(st=!1,function(e){for(var t=document.querySelectorAll(Xe),i=0,n=t.length;i<n;i++){var r=t[i];r&&"active"!==r.getAttribute(Ue)&&(et(e,r),r.parentNode&&r.parentNode.removeChild(r))}}(this))}e.registerId=function(e){return qe(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,i){return void 0===i&&(i=!0),new e(Pe({},this.options,{},t),this.gs,i&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(i=(t=this.options).isServer,n=t.useCSSOMInjection,r=t.target,e=i?new ot(r):n?new nt(r):new rt(r),new ze(e)));var e,t,i,n,r},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(qe(e),this.names.has(e))this.names.get(e).add(t);else{var i=new Set;i.add(t),this.names.set(e,i)}},t.insertRules=function(e,t,i){this.registerName(e,t),this.getTag().insertRules(qe(e),i)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(qe(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),i=t.length,n="",r=0;r<i;r++){var o=Qe(r);if(void 0!==o){var s=e.names.get(o),a=t.getGroup(r);if(void 0!==s&&0!==a.length){var l=Ue+".g"+r+'[id="'+o+'"]',c="";void 0!==s&&s.forEach((function(e){e.length>0&&(c+=e+",")})),n+=""+a+l+'{content:"'+c+'"}/*!sc*/\n'}}}return n}(this)},e}(),ct=/(a)(d)/gi,ut=function(e){return String.fromCharCode(e+(e>25?39:97))};function dt(e){var t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=ut(t%52)+i;return(ut(t%52)+i).replace(ct,"$1-$2")}var ht=function(e,t){for(var i=t.length;i;)e=33*e^t.charCodeAt(--i);return e},ft=function(e){return ht(5381,e)};function pt(e){for(var t=0;t<e.length;t+=1){var i=e[t];if(Le(i)&&!Be(i))return!1}return!0}var mt=ft("5.3.0"),gt=function(){function e(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&pt(e),this.componentId=t,this.baseHash=ht(mt,t),this.baseStyle=i,lt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,i){var n=this.componentId,r=[];if(this.baseStyle&&r.push(this.baseStyle.generateAndInjectStyles(e,t,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(n,this.staticRulesId))r.push(this.staticRulesId);else{var o=Dt(this.rules,e,t,i).join(""),s=dt(ht(this.baseHash,o.length)>>>0);if(!t.hasNameForId(n,s)){var a=i(o,"."+s,void 0,n);t.insertRules(n,s,a)}r.push(s),this.staticRulesId=s}else{for(var l=this.rules.length,c=ht(this.baseHash,i.hash),u="",d=0;d<l;d++){var h=this.rules[d];if("string"==typeof h)u+=h;else if(h){var f=Dt(h,e,t,i),p=Array.isArray(f)?f.join(""):f;c=ht(c,p+d),u+=p}}if(u){var m=dt(c>>>0);if(!t.hasNameForId(n,m)){var g=i(u,"."+m,void 0,n);t.insertRules(n,m,g)}r.push(m)}}return r.join(" ")},e}(),vt=/^\s*\/\/.*$/gm,bt=[":","[",".","#"];function St(e){var t,i,n,r,o=void 0===e?Ne:e,s=o.options,a=void 0===s?Ne:s,l=o.plugins,c=void 0===l?Ve:l,u=new Ee(a),d=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(i,n,r,o,s,a,l,c,u,d){switch(i){case 1:if(0===u&&64===n.charCodeAt(0))return e(n+";"),"";break;case 2:if(0===c)return n+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(r[0]+n),"";default:return n+(0===d?"/*|*/":"")}case-2:n.split("/*|*/}").forEach(t)}}}((function(e){d.push(e)})),f=function(e,n,o){return 0===n&&-1!==bt.indexOf(o[i.length])||o.match(r)?e:"."+t};function p(e,o,s,a){void 0===a&&(a="&");var l=e.replace(vt,""),c=o&&s?s+" "+o+" { "+l+" }":l;return t=a,i=o,n=new RegExp("\\"+i+"\\b","g"),r=new RegExp("(\\"+i+"\\b){2,}"),u(s||!o?"":o,c)}return u.use([].concat(c,[function(e,t,r){2===e&&r.length&&r[0].lastIndexOf(i)>0&&(r[0]=r[0].replace(n,f))},h,function(e){if(-2===e){var t=d;return d=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||$e(15),ht(e,t.name)}),5381).toString():"",p}var yt=e.createContext(),wt=(yt.Consumer,e.createContext()),kt=(wt.Consumer,new lt),Ct=St();function It(){return(0,e.useContext)(yt)||kt}function Tt(t){var i=(0,e.useState)(t.stylisPlugins),n=i[0],r=i[1],o=It(),s=(0,e.useMemo)((function(){var e=o;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),a=(0,e.useMemo)((function(){return St({options:{prefix:!t.disableVendorPrefixes},plugins:n})}),[t.disableVendorPrefixes,n]);return(0,e.useEffect)((function(){Te()(n,t.stylisPlugins)||r(t.stylisPlugins)}),[t.stylisPlugins]),e.createElement(yt.Provider,{value:s},e.createElement(wt.Provider,{value:a},t.children))}var Et=function(){function e(e,t){var i=this;this.inject=function(e,t){void 0===t&&(t=Ct);var n=i.name+t.hash;e.hasNameForId(i.id,n)||e.insertRules(i.id,n,t(i.rules,n,"@keyframes"))},this.toString=function(){return $e(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=Ct),this.name+e.hash},e}(),xt=/([A-Z])/,Mt=/([A-Z])/g,_t=/^ms-/,At=function(e){return"-"+e.toLowerCase()};function Ot(e){return xt.test(e)?e.replace(Mt,At).replace(_t,"-ms-"):e}var Pt=function(e){return null==e||!1===e||""===e};function Dt(e,t,i,n){if(Array.isArray(e)){for(var r,o=[],s=0,a=e.length;s<a;s+=1)""!==(r=Dt(e[s],t,i,n))&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));return o}return Pt(e)?"":Be(e)?"."+e.styledComponentId:Le(e)?"function"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!t?e:Dt(e(t),t,i,n):e instanceof Et?i?(e.inject(i,n),e.getName(n)):e:Re(e)?function e(t,i){var n,r,o=[];for(var s in t)t.hasOwnProperty(s)&&!Pt(t[s])&&(Re(t[s])?o.push.apply(o,e(t[s],s)):Le(t[s])?o.push(Ot(s)+":",t[s],";"):o.push(Ot(s)+": "+(n=s,(null==(r=t[s])||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||n in xe?String(r).trim():r+"px")+";")));return i?[i+" {"].concat(o,["}"]):o}(e):e.toString();var l}function Rt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Le(e)||Re(e)?Dt(De(Ve,[e].concat(i))):0===i.length&&1===e.length&&"string"==typeof e[0]?e:Dt(De(e,i))}new Set;var Vt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Nt=/(^-|-$)/g;function Lt(e){return e.replace(Vt,"-").replace(Nt,"")}var Ft=function(e){return dt(ft(e)>>>0)};function Bt(e){return"string"==typeof e&&!0}var Ut=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},jt=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Wt(e,t,i){var n=e[i];Ut(t)&&Ut(n)?$t(n,t):e[i]=t}function $t(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var r=0,o=i;r<o.length;r++){var s=o[r];if(Ut(s))for(var a in s)jt(a)&&Wt(e,s[a],a)}return e}var zt=e.createContext();zt.Consumer;var Ht={};function Kt(t,i,n){var r=Be(t),o=!Bt(t),s=i.attrs,a=void 0===s?Ve:s,l=i.componentId,c=void 0===l?function(e,t){var i="string"!=typeof e?"sc":Lt(e);Ht[i]=(Ht[i]||0)+1;var n=i+"-"+Ft("5.3.0"+i+Ht[i]);return t?t+"-"+n:n}(i.displayName,i.parentComponentId):l,u=i.displayName,d=void 0===u?function(e){return Bt(e)?"styled."+e:"Styled("+Fe(e)+")"}(t):u,h=i.displayName&&i.componentId?Lt(i.displayName)+"-"+i.componentId:i.componentId||c,f=r&&t.attrs?Array.prototype.concat(t.attrs,a).filter(Boolean):a,p=i.shouldForwardProp;r&&t.shouldForwardProp&&(p=i.shouldForwardProp?function(e,n,r){return t.shouldForwardProp(e,n,r)&&i.shouldForwardProp(e,n,r)}:t.shouldForwardProp);var m,g=new gt(n,h,r?t.componentStyle:void 0),v=g.isStatic&&0===a.length,b=function(t,i){return function(t,i,n,r){var o=t.attrs,s=t.componentStyle,a=t.defaultProps,l=t.foldedComponentIds,c=t.shouldForwardProp,u=t.styledComponentId,d=t.target,h=function(e,t,i){void 0===e&&(e=Ne);var n=Pe({},t,{theme:e}),r={};return i.forEach((function(e){var t,i,o,s=e;for(t in Le(s)&&(s=s(n)),s)n[t]=r[t]="className"===t?(i=r[t],o=s[t],i&&o?i+" "+o:i||o):s[t]})),[n,r]}(function(e,t,i){return void 0===i&&(i=Ne),e.theme!==i.theme&&e.theme||t||i.theme}(i,(0,e.useContext)(zt),a)||Ne,i,o),f=h[0],p=h[1],m=function(t,i,n,r){var o=It(),s=(0,e.useContext)(wt)||Ct;return i?t.generateAndInjectStyles(Ne,o,s):t.generateAndInjectStyles(n,o,s)}(s,r,f),g=n,v=p.$as||i.$as||p.as||i.as||d,b=Bt(v),S=p!==i?Pe({},i,{},p):i,y={};for(var w in S)"$"!==w[0]&&"as"!==w&&("forwardedAs"===w?y.as=S[w]:(c?c(w,_e,v):!b||_e(w))&&(y[w]=S[w]));return i.style&&p.style!==i.style&&(y.style=Pe({},i.style,{},p.style)),y.className=Array.prototype.concat(l,u,m!==u?m:null,i.className,p.className).filter(Boolean).join(" "),y.ref=g,(0,e.createElement)(v,y)}(m,t,i,v)};return b.displayName=d,(m=e.forwardRef(b)).attrs=f,m.componentStyle=g,m.displayName=d,m.shouldForwardProp=p,m.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Ve,m.styledComponentId=h,m.target=r?t.target:t,m.withComponent=function(e){var t=i.componentId,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(i,["componentId"]),o=t&&t+"-"+(Bt(e)?e:Lt(Fe(e)));return Kt(e,Pe({},r,{attrs:f,componentId:o}),n)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?$t({},t.defaultProps,e):e}}),m.toString=function(){return"."+m.styledComponentId},o&&P()(m,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var Gt,qt=function(e){return function e(t,i,n){if(void 0===n&&(n=Ne),!(0,_.isValidElementType)(i))return $e(1,String(i));var r=function(){return t(i,n,Rt.apply(void 0,arguments))};return r.withConfig=function(r){return e(t,i,Pe({},n,{},r))},r.attrs=function(r){return e(t,i,Pe({},n,{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r}(Kt,e)};function Qt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=Rt.apply(void 0,[e].concat(i)).join(""),o=Ft(r);return new Et(o,r)}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){qt[e]=qt(e)})),Gt=function(e,t){this.rules=e,this.componentId=t,this.isStatic=pt(e),lt.registerId(this.componentId+1)}.prototype,Gt.createStyles=function(e,t,i,n){var r=n(Dt(this.rules,t,i,n).join(""),""),o=this.componentId+e;i.insertRules(o,o,r)},Gt.removeStyles=function(e,t){t.clearRules(this.componentId+e)},Gt.renderStyles=function(e,t,i,n){e>2&&lt.registerId(this.componentId+e),this.removeStyles(e,i),this.createStyles(e,t,i,n)},function(){var t=function(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString(),i=tt();return"<style "+[i&&'nonce="'+i+'"',Ue+'="true"','data-styled-version="5.3.0"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?$e(2):t._emitSheetCSS()},this.getStyleElement=function(){var i;if(t.sealed)return $e(2);var n=((i={})[Ue]="",i["data-styled-version"]="5.3.0",i.dangerouslySetInnerHTML={__html:t.instance.toString()},i),r=tt();return r&&(n.nonce=r),[e.createElement("style",Pe({},n,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new lt({isServer:!0}),this.sealed=!1}.prototype;t.collectStyles=function(t){return this.sealed?$e(2):e.createElement(Tt,{sheet:this.instance},t)},t.interleaveWithNodeStream=function(e){return $e(3)}}();const Jt=qt,Xt=window.location.href.includes("/Prod")?"/Prod/":"/",Yt={HOME:`${Xt}`,DEVICE:`${Xt}devices`,MEETING:`${Xt}meeting`};var Zt;!function(e){e[e.Loading=0]="Loading",e[e.Succeeded=1]="Succeeded",e[e.Failed=2]="Failed",e[e.Ended=3]="Ended"}(Zt||(Zt={}));const ei=(0,e.createContext)({meetingStatus:Zt.Loading,updateMeetingStatus:e=>{}});function ti(t){const i=Se(),n=ae(),[r,o]=(0,e.useState)(Zt.Loading),s=null==i?void 0:i.meetingId,{children:a}=t,l=z();(0,e.useEffect)((()=>{if(!n)return;const e={videoTileDidUpdate:e=>{e.boundAttendeeId&&(null==e?void 0:e.boundAttendeeId)&&(null==e?void 0:e.tileId)&&o(Zt.Succeeded)},audioVideoDidStart:()=>{console.log("Observer audioVideoDidStart")},videoTileWasRemoved:e=>{o(Zt.Succeeded)},audioVideoDidStop:e=>{const t=e.statusCode();t===te.GVf.Left?console.log("You left the session"):t===te.GVf.AudioCallEnded?(console.log("The session has ended"),l.push(Yt.HOME)):console.log("Observer audioVideoDidStop, Stopped with a session status code: ",t)}};return o(Zt.Succeeded),n.addObserver(e),()=>{o(Zt.Ended),n.removeObserver(e)}}),[s]);const c={meetingStatus:r,updateMeetingStatus:e=>{o(e)}};return e.createElement(ei.Provider,{value:c},a)}function ii(){return(0,e.useContext)(ei)}var ni=__webpack_require__(7418),ri=__webpack_require__.n(ni),oi=function(e,t){var i=ri()({},e,t);for(var n in e){var r;e[n]&&"object"==typeof t[n]&&ri()(i,((r={})[n]=ri()(e[n],t[n]),r))}return i},si={breakpoints:[40,52,64].map((function(e){return e+"em"}))},ai=function(e){return"@media screen and (min-width: "+e+")"},li=function(e,t){return ci(t,e,e)},ci=function(e,t,i,n,r){for(t=t&&t.split?t.split("."):[t],n=0;n<t.length;n++)e=e?e[t[n]]:r;return e===r?i:e},ui=function e(t){var i={},n=function(e){var n,r,o={},s=!1,a=e.theme&&e.theme.disableStyledSystemCache;for(var l in e)if(t[l]){var c=t[l],u=e[l],d=ci(e.theme,c.scale,c.defaults);if("object"!=typeof u)ri()(o,c(u,d,e));else{if(i.breakpoints=!a&&i.breakpoints||ci(e.theme,"breakpoints",si.breakpoints),Array.isArray(u)){i.media=!a&&i.media||[null].concat(i.breakpoints.map(ai)),o=oi(o,di(i.media,c,d,u,e));continue}null!==u&&(o=oi(o,hi(i.breakpoints,c,d,u,e)),s=!0)}}return s&&(n=o,r={},Object.keys(n).sort((function(e,t){return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})})).forEach((function(e){r[e]=n[e]})),o=r),o};n.config=t,n.propNames=Object.keys(t),n.cache=i;var r=Object.keys(t).filter((function(e){return"config"!==e}));return r.length>1&&r.forEach((function(i){var r;n[i]=e(((r={})[i]=t[i],r))})),n},di=function(e,t,i,n,r){var o={};return n.slice(0,e.length).forEach((function(n,s){var a,l=e[s],c=t(n,i,r);l?ri()(o,((a={})[l]=ri()({},o[l],c),a)):ri()(o,c)})),o},hi=function(e,t,i,n,r){var o={};for(var s in n){var a=e[s],l=t(n[s],i,r);if(a){var c,u=ai(a);ri()(o,((c={})[u]=ri()({},o[u],l),c))}else ri()(o,l)}return o},fi=function(e){var t=e.properties,i=e.property,n=e.scale,r=e.transform,o=void 0===r?li:r,s=e.defaultScale;t=t||[i];var a=function(e,i,n){var r={},s=o(e,i,n);if(null!==s)return t.forEach((function(e){r[e]=s})),r};return a.scale=n,a.defaults=s,a},pi=function(e){void 0===e&&(e={});var t={};return Object.keys(e).forEach((function(i){var n=e[i];t[i]=!0!==n?"function"!=typeof n?fi(n):n:fi({property:i,scale:i})})),ui(t)};const mi=pi({width:{property:"width",scale:"sizes",transform:function(e,t){return ci(t,e,!function(e){return"number"==typeof e&&!isNaN(e)}(e)||e>1?e:100*e+"%")}},height:{property:"height",scale:"sizes"},minWidth:{property:"minWidth",scale:"sizes"},minHeight:{property:"minHeight",scale:"sizes"},maxWidth:{property:"maxWidth",scale:"sizes"},maxHeight:{property:"maxHeight",scale:"sizes"},size:{properties:["width","height"],scale:"sizes"},overflow:!0,overflowX:!0,overflowY:!0,display:!0,verticalAlign:!0});var gi={color:{property:"color",scale:"colors"},backgroundColor:{property:"backgroundColor",scale:"colors"},opacity:!0};gi.bg=gi.backgroundColor;const vi=pi(gi),bi=pi({fontFamily:{property:"fontFamily",scale:"fonts"},fontSize:{property:"fontSize",scale:"fontSizes",defaultScale:[12,14,16,20,24,32,48,64,72]},fontWeight:{property:"fontWeight",scale:"fontWeights"},lineHeight:{property:"lineHeight",scale:"lineHeights"},letterSpacing:{property:"letterSpacing",scale:"letterSpacings"},textAlign:!0,fontStyle:!0}),Si=pi({alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:!0,flex:!0,flexGrow:!0,flexShrink:!0,flexBasis:!0,justifySelf:!0,alignSelf:!0,order:!0});var yi={space:[0,4,8,16,32,64,128,256,512]};const wi=pi({gridGap:{property:"gridGap",scale:"space",defaultScale:yi.space},gridColumnGap:{property:"gridColumnGap",scale:"space",defaultScale:yi.space},gridRowGap:{property:"gridRowGap",scale:"space",defaultScale:yi.space},gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridAutoRows:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0});const ki=pi({border:{property:"border",scale:"borders"},borderWidth:{property:"borderWidth",scale:"borderWidths"},borderStyle:{property:"borderStyle",scale:"borderStyles"},borderColor:{property:"borderColor",scale:"colors"},borderRadius:{property:"borderRadius",scale:"radii"},borderTop:{property:"borderTop",scale:"borders"},borderTopLeftRadius:{property:"borderTopLeftRadius",scale:"radii"},borderTopRightRadius:{property:"borderTopRightRadius",scale:"radii"},borderRight:{property:"borderRight",scale:"borders"},borderBottom:{property:"borderBottom",scale:"borders"},borderBottomLeftRadius:{property:"borderBottomLeftRadius",scale:"radii"},borderBottomRightRadius:{property:"borderBottomRightRadius",scale:"radii"},borderLeft:{property:"borderLeft",scale:"borders"},borderX:{properties:["borderLeft","borderRight"],scale:"borders"},borderY:{properties:["borderTop","borderBottom"],scale:"borders"},borderTopWidth:{property:"borderTopWidth",scale:"borderWidths"},borderTopColor:{property:"borderTopColor",scale:"colors"},borderTopStyle:{property:"borderTopStyle",scale:"borderStyles"},borderBottomWidth:{property:"borderBottomWidth",scale:"borderWidths"},borderBottomColor:{property:"borderBottomColor",scale:"colors"},borderBottomStyle:{property:"borderBottomStyle",scale:"borderStyles"},borderLeftWidth:{property:"borderLeftWidth",scale:"borderWidths"},borderLeftColor:{property:"borderLeftColor",scale:"colors"},borderLeftStyle:{property:"borderLeftStyle",scale:"borderStyles"},borderRightWidth:{property:"borderRightWidth",scale:"borderWidths"},borderRightColor:{property:"borderRightColor",scale:"colors"},borderRightStyle:{property:"borderRightStyle",scale:"borderStyles"}});var Ci={background:!0,backgroundImage:!0,backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0};Ci.bgImage=Ci.backgroundImage,Ci.bgSize=Ci.backgroundSize,Ci.bgPosition=Ci.backgroundPosition,Ci.bgRepeat=Ci.backgroundRepeat;const Ii=pi(Ci);var Ti={space:[0,4,8,16,32,64,128,256,512]};const Ei=pi({position:!0,zIndex:{property:"zIndex",scale:"zIndices"},top:{property:"top",scale:"space",defaultScale:Ti.space},right:{property:"right",scale:"space",defaultScale:Ti.space},bottom:{property:"bottom",scale:"space",defaultScale:Ti.space},left:{property:"left",scale:"space",defaultScale:Ti.space}});var xi={space:[0,4,8,16,32,64,128,256,512]},Mi=function(e){return"number"==typeof e&&!isNaN(e)},_i=function(e,t){if(!Mi(e))return ci(t,e,e);var i=e<0,n=Math.abs(e),r=ci(t,n,n);return Mi(r)?r*(i?-1:1):i?"-"+r:r},Ai={};Ai.margin={margin:{property:"margin",scale:"space",transform:_i,defaultScale:xi.space},marginTop:{property:"marginTop",scale:"space",transform:_i,defaultScale:xi.space},marginRight:{property:"marginRight",scale:"space",transform:_i,defaultScale:xi.space},marginBottom:{property:"marginBottom",scale:"space",transform:_i,defaultScale:xi.space},marginLeft:{property:"marginLeft",scale:"space",transform:_i,defaultScale:xi.space},marginX:{properties:["marginLeft","marginRight"],scale:"space",transform:_i,defaultScale:xi.space},marginY:{properties:["marginTop","marginBottom"],scale:"space",transform:_i,defaultScale:xi.space}},Ai.margin.m=Ai.margin.margin,Ai.margin.mt=Ai.margin.marginTop,Ai.margin.mr=Ai.margin.marginRight,Ai.margin.mb=Ai.margin.marginBottom,Ai.margin.ml=Ai.margin.marginLeft,Ai.margin.mx=Ai.margin.marginX,Ai.margin.my=Ai.margin.marginY,Ai.padding={padding:{property:"padding",scale:"space",defaultScale:xi.space},paddingTop:{property:"paddingTop",scale:"space",defaultScale:xi.space},paddingRight:{property:"paddingRight",scale:"space",defaultScale:xi.space},paddingBottom:{property:"paddingBottom",scale:"space",defaultScale:xi.space},paddingLeft:{property:"paddingLeft",scale:"space",defaultScale:xi.space},paddingX:{properties:["paddingLeft","paddingRight"],scale:"space",defaultScale:xi.space},paddingY:{properties:["paddingTop","paddingBottom"],scale:"space",defaultScale:xi.space}},Ai.padding.p=Ai.padding.padding,Ai.padding.pt=Ai.padding.paddingTop,Ai.padding.pr=Ai.padding.paddingRight,Ai.padding.pb=Ai.padding.paddingBottom,Ai.padding.pl=Ai.padding.paddingLeft,Ai.padding.px=Ai.padding.paddingX,Ai.padding.py=Ai.padding.paddingY;var Oi=function(){for(var e={},t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];i.forEach((function(t){t&&t.config&&ri()(e,t.config)}));var r=ui(e);return r}(pi(Ai.margin),pi(Ai.padding));function Pi(){return Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Pi.apply(this,arguments)}pi({boxShadow:{property:"boxShadow",scale:"shadows"},textShadow:{property:"textShadow",scale:"shadows"}});var Di=function(e,t,i,n,r){for(t=t&&t.split?t.split("."):[t],n=0;n<t.length;n++)e=e?e[t[n]]:r;return e===r?i:e},Ri=[40,52,64].map((function(e){return e+"em"})),Vi={space:[0,4,8,16,32,64,128,256,512],fontSizes:[12,14,16,20,24,32,48,64,72]},Ni={bg:"backgroundColor",m:"margin",mt:"marginTop",mr:"marginRight",mb:"marginBottom",ml:"marginLeft",mx:"marginX",my:"marginY",p:"padding",pt:"paddingTop",pr:"paddingRight",pb:"paddingBottom",pl:"paddingLeft",px:"paddingX",py:"paddingY"},Li={marginX:["marginLeft","marginRight"],marginY:["marginTop","marginBottom"],paddingX:["paddingLeft","paddingRight"],paddingY:["paddingTop","paddingBottom"],size:["width","height"]},Fi={color:"colors",backgroundColor:"colors",borderColor:"colors",margin:"space",marginTop:"space",marginRight:"space",marginBottom:"space",marginLeft:"space",marginX:"space",marginY:"space",padding:"space",paddingTop:"space",paddingRight:"space",paddingBottom:"space",paddingLeft:"space",paddingX:"space",paddingY:"space",top:"space",right:"space",bottom:"space",left:"space",gridGap:"space",gridColumnGap:"space",gridRowGap:"space",gap:"space",columnGap:"space",rowGap:"space",fontFamily:"fonts",fontSize:"fontSizes",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",border:"borders",borderTop:"borders",borderRight:"borders",borderBottom:"borders",borderLeft:"borders",borderWidth:"borderWidths",borderStyle:"borderStyles",borderRadius:"radii",borderTopRightRadius:"radii",borderTopLeftRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",borderTopWidth:"borderWidths",borderTopColor:"colors",borderTopStyle:"borderStyles",borderBottomWidth:"borderWidths",borderBottomColor:"colors",borderBottomStyle:"borderStyles",borderLeftWidth:"borderWidths",borderLeftColor:"colors",borderLeftStyle:"borderStyles",borderRightWidth:"borderWidths",borderRightColor:"colors",borderRightStyle:"borderStyles",outlineColor:"colors",boxShadow:"shadows",textShadow:"shadows",zIndex:"zIndices",width:"sizes",minWidth:"sizes",maxWidth:"sizes",height:"sizes",minHeight:"sizes",maxHeight:"sizes",flexBasis:"sizes",size:"sizes",fill:"colors",stroke:"colors"},Bi=function(e,t){if("number"!=typeof t||t>=0)return Di(e,t,t);var i=Math.abs(t),n=Di(e,i,i);return"string"==typeof n?"-"+n:-1*n},Ui=["margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","top","bottom","left","right"].reduce((function(e,t){var i;return Pi({},e,((i={})[t]=Bi,i))}),{});const ji=function e(t){return function(i){void 0===i&&(i={});var n=Pi({},Vi,{},i.theme||i),r={},o=function(e){return function(t){var i={},n=Di(t,"breakpoints",Ri),r=[null].concat(n.map((function(e){return"@media screen and (min-width: "+e+")"})));for(var o in e){var s="function"==typeof e[o]?e[o](t):e[o];if(null!=s)if(Array.isArray(s))for(var a=0;a<s.slice(0,r.length).length;a++){var l=r[a];l?(i[l]=i[l]||{},null!=s[a]&&(i[l][o]=s[a])):i[o]=s[a]}else i[o]=s}return i}}("function"==typeof t?t(n):t)(n);for(var s in o){var a=o[s],l="function"==typeof a?a(n):a;if("variant"!==s)if(l&&"object"==typeof l)r[s]=e(l)(n);else{var c=Di(Ni,s,s),u=Di(Fi,c),d=Di(n,u,Di(n,c,{})),h=Di(Ui,c,Di)(d,l,l);if(Li[c])for(var f=Li[c],p=0;p<f.length;p++)r[f[p]]=h;else r[c]=h}else r=Pi({},r,{},e(Di(n,l))(n))}return r}};var Wi=function(e){var t,i,n=e.scale,r=e.prop,o=void 0===r?"variant":r,s=e.variants,a=void 0===s?{}:s,l=e.key;i=Object.keys(a).length?function(e,t,i){return ji(ci(t,e,null))(i.theme)}:function(e,t){return ci(t,e,null)},i.scale=n||l,i.defaults=a;var c=((t={})[o]=i,t);return ui(c)};Wi({key:"buttons"}),Wi({key:"textStyles",prop:"textStyle"}),Wi({key:"colorStyles",prop:"colors"}),mi.width,mi.height,mi.minWidth,mi.minHeight,mi.maxWidth,mi.maxHeight,mi.size,mi.verticalAlign,mi.display,mi.overflow,mi.overflowX,mi.overflowY,vi.opacity,bi.fontSize,bi.fontFamily,bi.fontWeight,bi.lineHeight,bi.textAlign,bi.fontStyle,bi.letterSpacing,Si.alignItems,Si.alignContent,Si.justifyItems,Si.justifyContent,Si.flexWrap,Si.flexDirection,Si.flex,Si.flexGrow,Si.flexShrink,Si.flexBasis,Si.justifySelf,Si.alignSelf,Si.order,wi.gridGap,wi.gridColumnGap,wi.gridRowGap,wi.gridColumn,wi.gridRow,wi.gridAutoFlow,wi.gridAutoColumns,wi.gridAutoRows,wi.gridTemplateColumns,wi.gridTemplateRows,wi.gridTemplateAreas,wi.gridArea,ki.borderWidth,ki.borderStyle,ki.borderColor,ki.borderTop,ki.borderRight,ki.borderBottom,ki.borderLeft,ki.borderRadius,Ii.backgroundImage,Ii.backgroundSize,Ii.backgroundPosition,Ii.backgroundRepeat,Ei.zIndex,Ei.top,Ei.right,Ei.bottom,Ei.left;const $i=({css:e})=>e?`${e};`:"",zi=e=>Oi(e),Hi=Jt.label`
  color: #3f4149;
  font-size: 0.875rem;
  line-height: 1.43;

  ${zi}
  ${$i}
`,Ki=(0,e.forwardRef)(((t,i)=>{const{className:n,tag:r,...o}=t;return e.createElement(Hi,Object.assign({as:r,"data-testid":"label",className:n||""},o),t.children)})),Gi=Ki,qi=(e,t=1)=>{var i;if(!(e=>/^#[0-9A-F]{6}$/i.test(e))(e))return!1;const[n,r,o]=null===(i=e.match(/\w\w/g))||void 0===i?void 0:i.map((e=>parseInt(e,16)));return`rgba(${n}, ${r}, ${o}, ${t||1})`},Qi=Jt.select`
  background-color: #ffffff;
  border: 0.03125rem solid #d4d5d8;
  border-radius: 0.25rem;
  box-shadow: 0 0.0625rem 0.0625rem 0 ${qi("#000000",.1)};
  color: #3f4149;
  font-size: 0.875rem;
  line-height: 1.43;
  height: 2rem;
  letter-spacing: -0.005625rem;
  padding: 0.375rem 0.5rem;
  transition: box-shadow .05s ease-in;

  &:focus,
  &[aria-invalid="true"]:focus {
    border: solid 0.03125rem #5d96ff;
    box-shadow: 0 0 0 0.125rem #88b2ff;
    outline: none;
  }

  &[aria-invalid="true"] {
    border: 0.03125rem solid #9E3319;
    box-shadow: 0 0 0 0.125rem #FF927C;
  }
`,Ji=(0,e.forwardRef)(((t,i)=>e.createElement(Qi,Object.assign({className:"Select","data-testid":"select",ref:i},t),t.options.map((({value:t,label:i})=>e.createElement("option",{key:t,value:t},i))))));Ji.displayName="Select";const Xi=Ji;var Yi=__webpack_require__(5877);const Zi=function(){const[t]=(0,e.useState)((()=>(0,Yi.v4)()));return t},en=Rt`
  &.FormField-Input,
  &.FormField-Select,
  &.FormField-Textarea {
    display: flex;
    flex-direction: column;

    label {
      display: block;
      margin-bottom: .5rem;
    }

    input, select {
      width: 100%;
    }
  }

  &.FormField-Checkbox {
    display: grid;
    grid-template-columns: 1.5rem 1fr;
    grid-template-rows: auto;
    gap: 0px 0.5rem;

    .Checkbox {
      grid-column: 1;
      grid-row: 1;
    }

    .Checkbox-label {
      line-height: 1.3;
      grid-column: 2;
    }

    .helpText {
      grid-row: 2;
      grid-column: 1/3;
    }
  }

  &.FormField-RadioGroup {
    flex-direction: column;

    .Radio-wrapper {
      display: block;
      margin-bottom: 0.5rem;
      padding-left: 0.125rem;
      display: grid;
      grid-template-columns: 1.5rem 1fr;
      grid-template-rows: auto;

      align-items: center;
    }

    .Radio-label {
      margin-left: 1rem;
      position: relative;
      bottom: -0.5px;
    }
  }
`,tn={stack:en,horizontal:Rt`

  @media(max-width: 599px) {
    ${en};
  }

  @media (min-width: 600px)  {
    &.FormField-Input,
    &.FormField-Select,
    &.FormField-Textarea,
    &.FormField-Checkbox {
      display: grid;
      grid-template-columns: 30% 1fr;
      grid-template-rows: auto;
      gap: 0px 0.5rem;
      align-items: center;

      input {
        width: 100%;
      }

      .helpText {
        grid-column: 2;
      }
    }

    &.FormField-RadioGroup {
    flex-wrap: wrap;

    fieldset {
      width: 100%;
    }

    .Radio-wrapper {
      display: grid;
      grid-template-columns: 30% 1fr;
      grid-template-rows: auto;
      gap: 0px 0.5rem;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .Radio {
      grid-column: 2;
      grid-row: 1;
      margin-top: -4px;
    }

    .Radio-label {
      grid-column: 1;
      padding-right: 1rem;
      margin-left: 0;
    }

    .helpText {
      width: 100%;
    }
  }
}
`,"input-only":Rt`
  &.FormField-Input,
  &.FormField-Select,
  &.FormField-Textarea {
    display: flex;
    flex-direction: column;

    input {
      width: 100%;
    }
  }

  &.FormField-Checkbox {
    display: flex;
    flex-wrap: wrap;
    align-items: center;

    .Checkbox {
      order: 1;
    }

    .Checkbox-label {
      order: 2;
      padding-left: 1rem;
    }

    .helpText {
      width: 100%;
      order: 3;
    }
  }

  &.FormField-RadioGroup {
    flex-direction: column;

    .Radio-wrapper {
      display: block;
      margin-bottom: 0.5rem;
    }

    .Radio-label {
      margin-left: 1rem;
    }
  }
`},nn=Jt.div`
  display: flex;
  margin-bottom: 1rem;
  position: relative;

  fieldset {
    margin: 0;
    border: none;
    padding: 0;
  }

  .helpText {
    font-size: 0.65rem;
    margin-top: 0.5rem;
    color: ${e=>e.error?"#C52000":"#3f4149"};
  }

  legend {
    font-size: 0.875rem;
    color: #3f4149;
    margin-bottom: 0.5rem;
  }

  ${e=>!!e.layout&&tn[e.layout]}

  ${zi}
  ${$i}
`,rn=(0,e.forwardRef)(((t,i)=>{const{field:n,label:r,layout:o="stack",errorText:s,fieldProps:a,infoText:l,error:c,onChange:u,value:d,checked:h,options:f,className:p,...m}=t,{displayName:g}=n,v=Zi(),b=Zi();let S=c&&s||l;return e.createElement(nn,Object.assign({layout:o,error:c,className:`FormField-${n.displayName} ${p||""}`,"data-testid":"form-field"},m),"input-only"===o&&"Checkbox"!==g?null:"RadioGroup"!==n.displayName&&e.createElement(Gi,{htmlFor:v,className:`${g}-label`},r),"RadioGroup"===n.displayName?e.createElement("fieldset",{"aria-describedby":S&&b,"aria-invalid":c},r&&e.createElement("legend",null,r),e.createElement(n,Object.assign({options:f,ref:i,id:v,onChange:u,value:d},a))):e.createElement(n,Object.assign({options:f,"aria-label":"input-only"===o&&r||null,"aria-describedby":S&&b,"aria-invalid":c,ref:i,id:v,onChange:u,value:d,checked:h},a)),S&&e.createElement("span",{className:"helpText",id:b},S))})),on=Jt.div`
  margin-bottom: 1.5rem;
`,sn=({onChange:t,label:i,devices:n})=>{const[r,o]=(0,e.useState)(""),s=n.map((e=>({value:e.deviceId,label:e.label})));return(0,e.useEffect)((()=>{n.length&&!r&&o(n[0].deviceId)}),[n,r]),e.createElement(on,null,e.createElement(rn,{field:Xi,options:s,onChange:async function(e){const i=e.target.value;o(i),t(i)},value:r,label:i}))},an=Jt.video`
  width: 100%;
  height: auto;
  border-radius: 0.1875rem;
  background-color: #1c1c1c;
`,ln=()=>{const t=Se(),i=ae(),{devices:n}=(()=>{const t=(0,e.useContext)(me);if(!t)throw new Error("useVideoInputs must be used within VideoInputProvider");let{devices:i}=t;const{selectedDevice:n}=t;return{devices:i,selectedDevice:n}})(),r=(0,e.useRef)(null);return(0,e.useEffect)((()=>{if(i)return r.current&&i.startVideoPreviewForVideoInput(r.current),()=>{r.current&&i.stopVideoPreviewForVideoInput(r.current)}}),[i]),e.createElement("div",null,e.createElement("h2",null,"Video"),e.createElement(sn,{label:"Camera source",onChange:async function(e){t.selectVideoInputDevice(e)},devices:n}),e.createElement(Ki,{style:{display:"block",marginBottom:".5rem"}},"Video preview"),e.createElement(an,{ref:r}))},cn=()=>{const t=Se(),{devices:i}=(()=>{const t=(0,e.useContext)(de);if(!t)throw new Error("useAudioInputs must be used within AudioInputProvider");let{devices:i}=t;const{selectedDevice:n}=t;return{devices:i,selectedDevice:n}})();return e.createElement("div",null,e.createElement("h2",null,"Audio"),e.createElement(sn,{label:"Microphone source",onChange:async function(e){t.selectAudioInputDevice(e)},devices:i}))},un=()=>{const t=Se(),{devices:i}=(()=>{const t=(0,e.useContext)(fe);if(!t)throw new Error("useAudioOutputs must be used within AudioOutputProvider");return t})(),[n,r]=(0,e.useState)("");return(0,e.useEffect)((()=>{i.length&&!n&&r(i[0].deviceId)}),[n,i]),e.createElement("div",null,e.createElement(sn,{label:"Speaker source",devices:i,onChange:async function(e){r(e),t.selectAudioOutputDevice(e)}}))},dn=Jt.div`
  padding: 0 3rem 0 0;
  border-right: 0.125rem solid #e6e6e6;

  @media (max-width: 900px) {
    padding: 2rem 0 2rem 0;
    border-right: unset;
  }
`,hn=Jt.div`
  padding: 0 0 0 3rem;

  @media (max-width: 900px) {
    padding: 0;
  }
`,fn=Jt.div`
  position: relative;
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 65rem;
  height: auto;

  > * {
    flex-basis: auto;
  }

  @media (min-width: 900px) {
    flex-direction: row;
    padding: 2.5rem 0 6rem 0;

    > * {
      flex-basis: 50%;
    }

    @media (max-height: 800px) {
      padding: 2rem 0 2rem;
    }
  }
`,pn=()=>e.createElement(fn,null,e.createElement(dn,null,e.createElement(cn,null),e.createElement(un,null)),e.createElement(hn,null,e.createElement(ln,null))),mn=Jt.button`
  border-radius: 0.25rem;
  font-size: 0.875rem;
  padding: 0.5rem 1rem;
  border-color: transparent;
  transition: background-color 0.1s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background-color: #327aff;
  color: #ffffff;
  border: 0.03125rem solid #0042bb;
  box-shadow: 0 0.09375rem 0.0625rem 0 ${qi("#1b1c20",.15)};

  &:hover {
    cursor: pointer;
    background-color: #004ddb;
    border: 0.03125rem solid #0042bb;
    color: #ffffff;
  }

  &:focus {
    outline: none;
    background-color: #004ddb;
    border: 0.03125rem solid #0042bb;
    color: #ffffff;
  }

  &:active {
    background-color: #0042bb;
    border: 0.03125rem solid #0042bb;
    color: #ffffff;
  }

  .icon {
    width: 1.5rem;
    height: 1.5rem;
    margin-right: 0.25rem;
  }

  ${zi}
  ${$i}
`,gn=(0,e.forwardRef)(((t,i)=>e.createElement(mn,Object.assign({},t,{className:t.className||"",as:t.tag,ref:i,"aria-label":t.label,"data-testid":"button"}),t.icon&&e.createElement("span",{className:"icon","data-testid":"button-icon"},t.icon),e.createElement("span",{className:"label","data-testid":"button-label"},t.label)))),vn=Rt`
  display: flex;
  width: 100%;
  height: 100%;
`,bn={"fill-space":vn,"fill-space-centered":Rt`
  ${vn};
  align-items: center;
  justify-content: center;
`,"equal-columns":Rt`
  display: flex;
  flex-direction: row;
  height: 100%;
  align-items: stretch;

  > * {
    flex-grow: 1;
    flex-basis: 50%;
  }
`,stack:Rt`
  display: flex;
  flex-direction: column;
  align-items: center;

  > * {
    width: 100%;
  }
`},Sn=Jt.div`
  align-items: ${e=>e.alignItems||"stretch"};
  display: ${e=>e.container?"flex":"block"};
  flex: ${e=>e.flex||""};
  flex-basis: ${e=>e.flexBasis||"auto"};
  flex-direction: ${e=>e.flexDirection||"row"};
  flex-grow: ${e=>e.flexGrow||""};
  flex-shrink: ${e=>e.flexShrink||1};
  flex-wrap: ${e=>e.flexWrap||"nowrap"};
  justify-content: ${e=>e.justifyContent||"flex-start"};

  // layout variants
  ${e=>!!e.layout&&bn[e.layout]}

  ${zi}
  ${$i}
`,yn=({children:t,className:i,tag:n,...r})=>e.createElement(Sn,Object.assign({},r,{as:n,"data-testid":"flex",className:i||""}),t),wn=yn,kn=Qt`
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
`,Cn=Qt`
  0% {
    opacity: 0;
    transform: translateY(4rem) scale(0.4);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
`,In={medium:"35rem",large:"50rem",fullscreen:"98vw"},Tn={medium:"94vh",large:"94vh",fullscreen:"96vh"},En=Jt.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: ${qi("#7d818b",.9)};
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 20;
  overflow-x: hidden;
  animation: ${kn} .25s ease 0s forwards;
  will-change: opacity;

  > section {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: center;
    border-radius: 0.25rem;
    color: #3f4149;
    background-color: #ffffff;
    width: ${e=>In[e.size||"medium"]};
    box-shadow: 0 0.75rem 1.875rem 0 ${qi("#000000",.15)};
    max-width: ${e=>"fullscreen"===e.size?In[e.size]:"90vw"};
    height: ${e=>"fullscreen"===e.size?Tn[e.size]:"auto"};
    max-height: ${e=>Tn[e.size||"medium"]};
    will-change: transform, opacity;
    animation: ${Cn} .15s ease 0s forwards;

    @media only screen and (max-height: 25rem) {
      position: absolute;
      top: 2rem;
      height: auto;
      max-height: none;
    }
  }
`,xn=Jt.header`
  padding: 1rem 1.5rem;

  .closeButton {
    position: absolute;
    right: 1.55rem;
    top: 1rem;
  }

  .title {
    padding-right: 2rem;
    margin: 0;
    font-size: 1.5625rem;
    font-weight: normal;
  }
`,Mn=Jt.div`
  padding: 0 1.5rem;
  flex-grow: 1;
  overflow-y: auto;
`,_n=Jt.footer`
  padding: 1.5rem;
  border-top: 1px solid #d4d5d8;
  display: flex;
  flex-direction: row-reverse;
  justify-content: space-between;

  div:first-child {
    display: flex;
    flex-direction: row-reverse;
  }

  button + button {
    margin: 0 0.5rem 0 0;
  }

  @media(max-width: 35rem) {
    flex-direction: column;

    button {
      width: 100%;
    }

    div:first-child {
      display: flex;
      flex-direction: column;
    }

    button + button,
    div + div {
      margin: 0.5rem 0 0;
    }
  }
`,An=({children:i,rootId:n})=>{let r,o;const[s,a]=(0,e.useState)();return(0,e.useEffect)((()=>(n&&(r=document.getElementById(n)),r?a(r):(o=document.createElement("div"),document.body.appendChild(o),a(o)),()=>{o&&o.remove()})),[n]),s?(0,t.createPortal)(i,s):null},On=(0,e.createContext)({onClose(){},labelID:""}),Pn=()=>(0,e.useContext)(On),Dn=On,Rn=t=>{const{size:i="medium",onClose:n,children:r,rootId:o}=t,s=Zi(),a=(0,e.useRef)(null),l=(0,e.useRef)(null),c={onClose:n,labelID:s};return function(t,i){const n=e=>{(e=>!!t.current&&!t.current.contains(e.target))(e)&&i(e)};(0,e.useEffect)((()=>(document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)})))}(l,n),(0,e.useEffect)((()=>{const e=document.activeElement;return()=>!!e&&e.focus()}),[]),e.createElement(An,{rootId:o},e.createElement(Dn.Provider,{value:c},e.createElement(En,Object.assign({},t,{size:i,ref:a,"data-testid":"modal"}),e.createElement("section",{"aria-modal":!0,ref:l,role:"dialog",tabIndex:0,"aria-labelledby":s},r))))},Vn=({children:t})=>e.createElement(Mn,{"data-testid":"modalBody"},t),Nn=({as:t="div",title:i})=>{const n=Pn();return e.createElement(xn,null,e.createElement(t,{className:"title",id:n.labelID},i))},Ln=({closesModal:t,...i})=>e.createElement(gn,Object.assign({},i)),Fn=({primaryButtons:t,secondaryButtons:i})=>{const n=Pn(),r=t=>e.cloneElement(t,{onClick:()=>{t.props.onClick&&t.props.onClick(),t.props.closesModal&&n.onClose()},key:t.props.label}),o=e=>!e||e instanceof Array&&0===e.length?e:e instanceof Array?e.map(r):r(e);return e.createElement(_n,{"data-testid":"modalButtonGroup"},e.createElement("div",null,o(t)),i&&e.createElement("div",null,o(i)))},Bn=Jt.p`
  color: '#616672',
  fontSize: '14px',
  margin: '0 0 0.5rem',
`,Un=()=>{const t=Se(),i=z(),[n,r]=(0,e.useState)(!1),[o,s]=(0,e.useState)(""),a=(null==t?void 0:t.meetingId)||"",l=null==t?void 0:t.attendeeName;return e.createElement(e.Fragment,null,e.createElement(yn,{container:!0,alignItems:"center",flexDirection:"column"},e.createElement(gn,{variant:"primary",label:n?"Loading...":"Join meeting",onClick:async()=>{r(!0);try{await t.join(),r(!1),i.push(`${Yt.MEETING}/${a}`)}catch(e){r(!1),s(e.message)}}}),e.createElement(Gi,{style:{margin:".75rem 0 0 0"}},"Joining meeting ",e.createElement("b",null,a)," as ",e.createElement("b",null,l))),o&&e.createElement(Rn,{size:"medium",onClose:()=>s("")},e.createElement(Nn,{title:`Unable to join meeting: ${a}`}),e.createElement(Vn,null,e.createElement(Bn,null,"There was an issue finding that meeting. The meeting may have already ended, or your authorization may have expired.")),e.createElement(Fn,{primaryButtons:[e.createElement(Ln,{variant:"secondary",label:"Cancel",closesModal:!0})]})))},jn=Jt.main`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100%;
  max-width: 85rem;
  padding: 1rem;
  margin: auto;

  @media (max-width: 760px) {
    border-right: unset;
    align-items: unset;
    justify-content: unset;
  }
`,Wn=()=>{const{meetingStatus:t}=ii(),i=Se(),n=null==i?void 0:i.meetingId,r=z();return(0,e.useEffect)((()=>{t!==Zt.Ended&&t!==Zt.Failed&&n||(i.leaveMeeting(),r.push(Yt.HOME))})),e.createElement(jn,null,e.createElement("h1",null,"Device settings"),e.createElement(pn,null),e.createElement(Un,null))};var $n;!function(e){e[e.Normal=1e3]="Normal",e[e.EmptyCloseFrame=1005]="EmptyCloseFrame"}($n||($n={}));const zn=$n;class Hn{constructor(e,t,i,n,r){this.url=e,this.protocols=t,this.binaryType=i,this.webSocketFactory=n,this.backoff=r,this.callbacks=new Map,this.timeoutScheduler=null,this.webSocket=null}async close(e,t,i){if(null===this.webSocket)return Promise.reject(new Error("closed"));this.willCloseWebSocket();const n=this.webSocket;return this.webSocket=null,n.close(e,t,i)}async open(e){return null!==this.webSocket?Promise.reject(new Error("opened")):(this.webSocket=this.webSocketFactory.create(this.url,this.protocols,this.binaryType),this.webSocket.addEventListener("close",(t=>{if(Hn.normalClosureCodes.indexOf(t.code)<=-1)try{const t=this.backoff.nextBackoffAmountMs();this.timeoutScheduler=new te.dh0(t),this.timeoutScheduler.start((()=>{this.timeoutScheduler.stop(),this.open(e).catch((e=>{this.dispatchEvent(new CustomEvent("reconnect_error",{detail:e}))})).then((()=>{}))})),this.dispatchEvent(new CustomEvent("reconnect"))}catch(e){this.dispatchEvent(t)}else this.dispatchEvent(t);this.webSocket=null})),this.webSocket.addEventListener("message",(e=>{this.dispatchEvent(e)})),this.webSocket.addEventListener("open",(e=>{this.didOpenWebSocket(),this.dispatchEvent(e)})),this.webSocket.open(e).catch((e=>{throw this.webSocket=null,e})))}send(e){if(null===this.webSocket)throw new Error("closed");this.webSocket.send(e)}dispatchEvent(e){return te.wSh.of(this.callbacks.get(e.type)).map((t=>t.forEach((t=>t(e))))),e.defaultPrevented}addEventListener(e,t){te.wSh.of(this.callbacks.get(e)).defaulting(new Set).map((e=>e.add(t))).map((t=>this.callbacks.set(e,t)))}removeEventListener(e,t){te.wSh.of(this.callbacks.get(e)).map((e=>e.delete(t)))}didOpenWebSocket(){te.wSh.of(this.timeoutScheduler).map((e=>e.stop())),this.backoff.reset(),this.timeoutScheduler=null}willCloseWebSocket(){this.didOpenWebSocket()}}Hn.normalClosureCodes=Array.of(zn.Normal,zn.EmptyCloseFrame);class Kn{constructor(e){this.webSocket=e}get url(){return this.webSocket.url}get onopen(){return this.webSocket.onopen}set onopen(e){this.webSocket.onopen=e}get onerror(){return this.webSocket.onerror}set onerror(e){this.webSocket.onerror=e}get onclose(){return this.webSocket.onclose}set onclose(e){this.webSocket.onclose=e}get onmessage(){return this.webSocket.onmessage}set onmessage(e){this.webSocket.onmessage=e}addEventListener(e,t,i){this.webSocket.addEventListener(e,t,i)}removeEventListener(e,t,i){this.webSocket.removeEventListener(e,t,i)}dispatchEvent(e){return this.webSocket.dispatchEvent(e)}send(e){this.webSocket.send(e)}close(e,t){this.webSocket.close(e,t)}}class Gn{create(e,t,i){const n=new WebSocket(te._4L.urlWithVersion(e),t);return void 0!==i&&(n.binaryType=i),new Kn(n)}}class qn{constructor(e){this.webSocket=e,this.callbacks=new Map}get url(){return this.webSocket.url}async open(e){const t=new Promise(((e,t)=>{this.webSocket.onclose=e=>{this.dispatchEvent(e)},this.webSocket.onmessage=e=>{this.dispatchEvent(e)},this.webSocket.onopen=t=>{this.dispatchEvent(t),e(t)},this.webSocket.onerror=e=>{this.dispatchEvent(e),t(e)}}));return this.withTimeout(t,e)}async close(e,t,i){const n=new Promise(((e,n)=>{this.webSocket.onclose=t=>{this.dispatchEvent(t),e(t)},this.webSocket.onerror=e=>{this.dispatchEvent(e),n(e)},this.webSocket.close(t,i)}));return this.withTimeout(n,e)}send(e){this.webSocket.send(e)}onMessage(e){return this.addEventListener("message",e),this}onClose(e){return this.addEventListener("close",e),this}dispatchEvent(e){return te.wSh.of(this.callbacks.get(e.type)).map((t=>t.forEach((t=>t(e))))),e.defaultPrevented}addEventListener(e,t){te.wSh.of(this.callbacks.get(e)).defaulting(new Set).map((e=>e.add(t))).map((t=>this.callbacks.set(e,t)))}removeEventListener(e,t){te.wSh.of(this.callbacks.get(e)).map((e=>e.delete(t)))}async withTimeout(e,t){const i=new Promise(((e,i)=>{new te.dh0(t).start((()=>{i(new Error("Promise timed out after "+t+"ms"))}))}));return Promise.race([e,i])}}class Qn{constructor(e){this.webSocketFactory=e}create(e,t,i){return new qn(this.webSocketFactory.create(e,t,i))}}class Jn{constructor(e,t){this.websocket=null,this.messageUpdateCallbacks=[],this.startWsStabilizer=()=>{const e={message:"ping",data:JSON.stringify({type:"ping"})};this.wsStabilizer=setInterval((()=>{var t;try{null===(t=this.websocket)||void 0===t||t.send(JSON.stringify(e))}catch(e){console.error(`Error sending ping message: ${e}`),this.stopWsStabilizer()}}),6e4)},this.stopWsStabilizer=()=>{this.wsStabilizer||console.log("No active Websocket to stop!"),clearInterval(this.wsStabilizer)},this.sendVideoMessaging=async()=>{if(!this.attendeeId||!this.meetingId)throw new Error("meetingId and attendeeId are required to send video messaging");const e=`wss://1ft9bu028h.execute-api.us-east-1.amazonaws.com/Prod?meetingId=${this.meetingId}&attendeeId=${this.attendeeId}`;this.websocket=new Hn(e,[],"arraybuffer",new Qn(new Gn),new te.QcA(1e3,0,1e4)),this.websocket.addEventListener("open",(()=>{this.startWsStabilizer()})),await this.websocket.open(Jn.WEB_SOCKET_TIMEOUT_MS),this.websocket.addEventListener("message",(e=>{try{const t=JSON.parse(e.data);if("ping"===t.type)return;this.publishMessageUpdate({type:t.type,payload:t.payload})}catch(e){console.log("Error:",e)}})),window.addEventListener("beforeunload",(()=>{var e;this.stopWsStabilizer(),console.debug("Closing websocket."),null===(e=this.websocket)||void 0===e||e.close(500,1e3,"Unload").then((()=>{console.debug("Closed websocket.")}))}))},this.sendMessage=e=>{if(!this.websocket)return void console.error("No websocket");const t={message:"sendmessage",data:JSON.stringify(e)};try{this.websocket.send(JSON.stringify(t))}catch(e){console.error(`Error sending message: ${e}`)}},this.subscribeToMessageUpdate=e=>{this.messageUpdateCallbacks.push(e)},this.unsubscribeFromMessageUpdate=e=>{const t=this.messageUpdateCallbacks.indexOf(e);-1!==t&&this.messageUpdateCallbacks.splice(t,1)},this.publishMessageUpdate=e=>{for(let t=0;t<this.messageUpdateCallbacks.length;t+=1)(0,this.messageUpdateCallbacks[t])(e)},this.meetingId=e,this.attendeeId=t}}Jn.WEB_SOCKET_TIMEOUT_MS=1e4;const Xn=(0,e.createContext)(null);function Yn(){const t=(0,e.useContext)(Xn);if(void 0===t)throw new Error("useVideoSendingService must be used within a VideoSendingProvider");return t}const Zn=({children:t})=>{var i,n;const r=Se(),o=r.meetingId,s=null===(n=null===(i=r.configuration)||void 0===i?void 0:i.credentials)||void 0===n?void 0:n.attendeeId,[a]=(0,e.useState)((()=>new Jn(o,s)));return e.createElement(Xn.Provider,{value:a},t)};var er;!function(e){e.START_VIDEO="start-video",e.STOP_VIDEO="stop-video"}(er||(er={}));const tr=(0,e.createContext)(null),ir=({children:t})=>{var i,n;const r=Se(),o=ae(),[s,a]=(0,e.useState)("disabled"),l=Yn(),c=null===(n=null===(i=null==r?void 0:r.configuration)||void 0===i?void 0:i.credentials)||void 0===n?void 0:n.attendeeId,[u,d]=(0,e.useState)(""),h=null==r?void 0:r.meetingId,f=r.attendeeName,p=(0,e.useCallback)((async e=>{if("enabled"!==s&&r.selectedVideoInputDevice){if("disabled"===s){if(await(null==o?void 0:o.chooseVideoInputDevice(null==r?void 0:r.selectedVideoInputDevice)),!e)throw new Error("No video preview element");{console.log("Start preview before getting remote command"),null==o||o.startVideoPreviewForVideoInput(e),d(`${f} - preview`),a("pending");const t={meetingId:h,attendeeId:c};null==l||l.sendMessage({type:er.START_VIDEO,payload:t})}}}else{null==o||o.stopLocalVideoTile(),e&&(null==o||o.stopVideoPreviewForVideoInput(e)),a("disabled"),d("");const t={meetingId:h,attendeeId:c};null==l||l.sendMessage({type:er.STOP_VIDEO,payload:t})}}),[o,s,r.selectedVideoInputDevice]),m=(0,e.useMemo)((()=>({isLocalVideoEnabled:s,setIsLocalVideoEnabled:a,nameplate:u,setNameplate:d,toggleVideo:p})),[s,a,u,d,p]);return e.createElement(tr.Provider,{value:m},t)},nr=()=>{const t=(0,e.useContext)(tr);if(!t)throw new Error("useLocalVideoContext must be used within a LocalVideoToggleProvider");return t};var rr={prefix:"fas",iconName:"microphone",icon:[352,512,[],"f130","M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"]},or={prefix:"fas",iconName:"microphone-slash",icon:[640,512,[],"f131","M633.82 458.1l-157.8-121.96C488.61 312.13 496 285.01 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67V96c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.77c11.66-1.6 22.85-4.54 33.67-8.31l-50.11-38.73c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"]},sr={prefix:"fas",iconName:"power-off",icon:[512,512,[],"f011","M400 54.1c63 45 104 118.6 104 201.9 0 136.8-110.8 247.7-247.5 248C120 504.3 8.2 393 8 256.4 7.9 173.1 48.9 99.3 111.8 54.2c11.7-8.3 28-4.8 35 7.7L162.6 90c5.9 10.5 3.1 23.8-6.6 31-41.5 30.8-68 79.6-68 134.9-.1 92.3 74.5 168.1 168 168.1 91.6 0 168.6-74.2 168-169.1-.3-51.8-24.7-101.8-68.1-134-9.7-7.2-12.4-20.5-6.5-30.9l15.8-28.1c7-12.4 23.2-16.1 34.8-7.8zM296 264V24c0-13.3-10.7-24-24-24h-32c-13.3 0-24 10.7-24 24v240c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24z"]},ar={prefix:"fas",iconName:"sign-out-alt",icon:[512,512,[],"f2f5","M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"]},lr={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"]},cr={prefix:"fas",iconName:"video",icon:[576,512,[],"f03d","M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"]},ur={prefix:"fas",iconName:"video-slash",icon:[640,512,[],"f4e2","M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"]},dr={prefix:"fas",iconName:"volume-mute",icon:[512,512,[],"f6a9","M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"]},hr={prefix:"fas",iconName:"volume-up",icon:[576,512,[],"f028","M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"]};function fr(e){return fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(e)}function pr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mr(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gr(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){mr(e,t,i[t])}))}return e}function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var br=function(){},Sr={},yr={},wr={mark:br,measure:br};try{"undefined"!=typeof window&&(Sr=window),"undefined"!=typeof document&&(yr=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&(wr=performance)}catch(e){}var kr=(Sr.navigator||{}).userAgent,Cr=void 0===kr?"":kr,Ir=Sr,Tr=yr,Er=wr,xr=(Ir.document,!!Tr.documentElement&&!!Tr.head&&"function"==typeof Tr.addEventListener&&"function"==typeof Tr.createElement),Mr=(~Cr.indexOf("MSIE")||Cr.indexOf("Trident/"),"svg-inline--fa"),_r=[1,2,3,4,5,6,7,8,9,10],Ar=_r.concat([11,12,13,14,15,16,17,18,19,20]),Or={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Pr=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Or.GROUP,Or.SWAP_OPACITY,Or.PRIMARY,Or.SECONDARY].concat(_r.map((function(e){return"".concat(e,"x")}))).concat(Ar.map((function(e){return"w-".concat(e)}))),Ir.FontAwesomeConfig||{});Tr&&"function"==typeof Tr.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=vr(e,2),i=t[0],n=t[1],r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Tr.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(i));null!=r&&(Pr[n]=r)}));var Dr=gr({},{familyPrefix:"fa",replacementClass:Mr,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Pr);Dr.autoReplaceSvg||(Dr.observeMutations=!1);var Rr=gr({},Dr);Ir.FontAwesomeConfig=Rr;var Vr=Ir||{};Vr.___FONT_AWESOME___||(Vr.___FONT_AWESOME___={}),Vr.___FONT_AWESOME___.styles||(Vr.___FONT_AWESOME___.styles={}),Vr.___FONT_AWESOME___.hooks||(Vr.___FONT_AWESOME___.hooks={}),Vr.___FONT_AWESOME___.shims||(Vr.___FONT_AWESOME___.shims=[]);var Nr=Vr.___FONT_AWESOME___,Lr=[];xr&&((Tr.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Tr.readyState)||Tr.addEventListener("DOMContentLoaded",(function e(){Tr.removeEventListener("DOMContentLoaded",e),Lr.map((function(e){return e()}))})));var Fr,Br="pending",Ur="settled",jr="fulfilled",Wr="rejected",$r=function(){},zr=void 0!==__webpack_require__.g&&void 0!==__webpack_require__.g.process&&"function"==typeof __webpack_require__.g.process.emit,Hr="undefined"==typeof setImmediate?setTimeout:setImmediate,Kr=[];function Gr(){for(var e=0;e<Kr.length;e++)Kr[e][0](Kr[e][1]);Kr=[],Fr=!1}function qr(e,t){Kr.push([e,t]),Fr||(Fr=!0,Hr(Gr,0))}function Qr(e){var t=e.owner,i=t._state,n=t._data,r=e[i],o=e.then;if("function"==typeof r){i=jr;try{n=r(n)}catch(e){Zr(o,e)}}Jr(o,n)||(i===jr&&Xr(o,n),i===Wr&&Zr(o,n))}function Jr(e,t){var i;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"===fr(t))){var n=t.then;if("function"==typeof n)return n.call(t,(function(n){i||(i=!0,t===n?Yr(e,n):Xr(e,n))}),(function(t){i||(i=!0,Zr(e,t))})),!0}}catch(t){return i||Zr(e,t),!0}return!1}function Xr(e,t){e!==t&&Jr(e,t)||Yr(e,t)}function Yr(e,t){e._state===Br&&(e._state=Ur,e._data=t,qr(to,e))}function Zr(e,t){e._state===Br&&(e._state=Ur,e._data=t,qr(io,e))}function eo(e){e._then=e._then.forEach(Qr)}function to(e){e._state=jr,eo(e)}function io(e){e._state=Wr,eo(e),!e._handled&&zr&&__webpack_require__.g.process.emit("unhandledRejection",e._data,e)}function no(e){__webpack_require__.g.process.emit("rejectionHandled",e)}function ro(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof ro==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function i(e){Zr(t,e)}try{e((function(e){Xr(t,e)}),i)}catch(e){i(e)}}(e,this)}ro.prototype={constructor:ro,_state:Br,_then:null,_data:void 0,_handled:!1,then:function(e,t){var i={owner:this,then:new this.constructor($r),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===Wr&&zr&&qr(no,this)),this._state===jr||this._state===Wr?qr(Qr,i):this._then.push(i),i.then},catch:function(e){return this.then(null,e)}},ro.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new ro((function(t,i){var n=[],r=0;function o(e){return r++,function(i){n[e]=i,--r||t(n)}}for(var s,a=0;a<e.length;a++)(s=e[a])&&"function"==typeof s.then?s.then(o(a),i):n[a]=s;r||t(n)}))},ro.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new ro((function(t,i){for(var n,r=0;r<e.length;r++)(n=e[r])&&"function"==typeof n.then?n.then(t,i):t(n)}))},ro.resolve=function(e){return e&&"object"===fr(e)&&e.constructor===ro?e:new ro((function(t){t(e)}))},ro.reject=function(e){return new ro((function(t,i){i(e)}))};var oo={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function so(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function ao(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function lo(e){return Object.keys(e||{}).reduce((function(t,i){return t+"".concat(i,": ").concat(e[i],";")}),"")}function co(e){return e.size!==oo.size||e.x!==oo.x||e.y!==oo.y||e.rotate!==oo.rotate||e.flipX||e.flipY}function uo(e){var t=e.transform,i=e.containerWidth,n=e.iconWidth,r={transform:"translate(".concat(i/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),s="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(o," ").concat(s," ").concat(a)},path:{transform:"translate(".concat(n/2*-1," -256)")}}}var ho={x:0,y:0,width:"100%",height:"100%"};function fo(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function po(e){var t=e.icons,i=t.main,n=t.mask,r=e.prefix,o=e.iconName,s=e.transform,a=e.symbol,l=e.title,c=e.maskId,u=e.titleId,d=e.extra,h=e.watchable,f=void 0!==h&&h,p=n.found?n:i,m=p.width,g=p.height,v="fak"===r,b=v?"":"fa-w-".concat(Math.ceil(m/g*16)),S=[Rr.replacementClass,o?"".concat(Rr.familyPrefix,"-").concat(o):"",b].filter((function(e){return-1===d.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(d.classes).join(" "),y={children:[],attributes:gr({},d.attributes,{"data-prefix":r,"data-icon":o,class:S,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},w=v&&!~d.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(y.attributes["data-fa-i2svg"]=""),l&&y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||so())},children:[l]});var k=gr({},y,{prefix:r,iconName:o,main:i,mask:n,maskId:c,transform:s,symbol:a,styles:gr({},w,d.styles)}),C=n.found&&i.found?function(e){var t,i=e.children,n=e.attributes,r=e.main,o=e.mask,s=e.maskId,a=e.transform,l=r.width,c=r.icon,u=o.width,d=o.icon,h=uo({transform:a,containerWidth:u,iconWidth:l}),f={tag:"rect",attributes:gr({},ho,{fill:"white"})},p=c.children?{children:c.children.map(fo)}:{},m={tag:"g",attributes:gr({},h.inner),children:[fo(gr({tag:c.tag,attributes:gr({},c.attributes,h.path)},p))]},g={tag:"g",attributes:gr({},h.outer),children:[m]},v="mask-".concat(s||so()),b="clip-".concat(s||so()),S={tag:"mask",attributes:gr({},ho,{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,g]},y={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:(t=d,"g"===t.tag?t.children:[t])},S]};return i.push(y,{tag:"rect",attributes:gr({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(v,")")},ho)}),{children:i,attributes:n}}(k):function(e){var t=e.children,i=e.attributes,n=e.main,r=e.transform,o=lo(e.styles);if(o.length>0&&(i.style=o),co(r)){var s=uo({transform:r,containerWidth:n.width,iconWidth:n.width});t.push({tag:"g",attributes:gr({},s.outer),children:[{tag:"g",attributes:gr({},s.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:gr({},n.icon.attributes,s.path)}]}]})}else t.push(n.icon);return{children:t,attributes:i}}(k),I=C.children,T=C.attributes;return k.children=I,k.attributes=T,a?function(e){var t=e.prefix,i=e.iconName,n=e.children,r=e.attributes,o=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:gr({},r,{id:!0===o?"".concat(t,"-").concat(Rr.familyPrefix,"-").concat(i):o}),children:n}]}]}(k):function(e){var t=e.children,i=e.main,n=e.mask,r=e.attributes,o=e.styles,s=e.transform;if(co(s)&&i.found&&!n.found){var a={x:i.width/i.height/2,y:.5};r.style=lo(gr({},o,{"transform-origin":"".concat(a.x+s.x/16,"em ").concat(a.y+s.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}(k)}var mo=(Rr.measurePerformance&&Er&&Er.mark&&Er.measure,function(e,t,i,n){var r,o,s,a=Object.keys(e),l=a.length,c=void 0!==n?function(e,t){return function(i,n,r,o){return e.call(t,i,n,r,o)}}(t,n):t;for(void 0===i?(r=1,s=e[a[0]]):(r=0,s=i);r<l;r++)s=c(s,e[o=a[r]],o,e);return s});function go(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.skipHooks,r=void 0!==n&&n,o=Object.keys(t).reduce((function(e,i){var n=t[i];return n.icon?e[n.iconName]=n.icon:e[i]=n,e}),{});"function"!=typeof Nr.hooks.addPack||r?Nr.styles[e]=gr({},Nr.styles[e]||{},o):Nr.hooks.addPack(e,o),"fas"===e&&go("fa",t)}var vo=Nr.styles,bo=Nr.shims,So=function(){var e=function(e){return mo(vo,(function(t,i,n){return t[n]=mo(i,e,{}),t}),{})};e((function(e,t,i){return t[3]&&(e[t[3]]=i),e})),e((function(e,t,i){var n=t[2];return e[i]=i,n.forEach((function(t){e[t]=i})),e}));var t="far"in vo;mo(bo,(function(e,i){var n=i[0],r=i[1],o=i[2];return"far"!==r||t||(r="fas"),e[n]={prefix:r,iconName:o},e}),{})};function yo(e,t,i){if(e&&e[t]&&e[t][i])return{prefix:t,iconName:i,icon:e[t][i]}}function wo(e){var t=e.tag,i=e.attributes,n=void 0===i?{}:i,r=e.children,o=void 0===r?[]:r;return"string"==typeof e?ao(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,i){return t+"".concat(i,'="').concat(ao(e[i]),'" ')}),"").trim()}(n),">").concat(o.map(wo).join(""),"</").concat(t,">")}So(),Nr.styles;function ko(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}ko.prototype=Object.create(Error.prototype),ko.prototype.constructor=ko;var Co={fill:"currentColor"},Io={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},To=(gr({},Co,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),gr({},Io,{attributeName:"opacity"}));function Eo(e){var t=e[0],i=e[1],n=vr(e.slice(4),1)[0];return{found:!0,width:t,height:i,icon:Array.isArray(n)?{tag:"g",attributes:{class:"".concat(Rr.familyPrefix,"-").concat(Or.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Rr.familyPrefix,"-").concat(Or.SECONDARY),fill:"currentColor",d:n[0]}},{tag:"path",attributes:{class:"".concat(Rr.familyPrefix,"-").concat(Or.PRIMARY),fill:"currentColor",d:n[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:n}}}}gr({},Co,{cx:"256",cy:"364",r:"28"}),gr({},Io,{attributeName:"r",values:"28;14;28;28;14;28;"}),gr({},To,{values:"1;0;1;1;0;1;"}),gr({},Co,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),gr({},To,{values:"1;0;0;0;0;1;"}),gr({},Co,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),gr({},To,{values:"0;0;1;1;0;0;"}),Nr.styles,Nr.styles;var xo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,i;return t=e,i=[{key:"add",value:function(){for(var e=this,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(t){e.definitions[t]=gr({},e.definitions[t]||{},r[t]),go(t,r[t]),So()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var i=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(i).map((function(t){var n=i[t],r=n.prefix,o=n.iconName,s=n.icon;e[r]||(e[r]={}),e[r][o]=s})),e}}],i&&pr(t.prototype,i),e}();function Mo(){Rr.autoAddCss&&!Do&&(function(e){if(e&&xr){var t=Tr.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var i=Tr.head.childNodes,n=null,r=i.length-1;r>-1;r--){var o=i[r],s=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(s)>-1&&(n=o)}Tr.head.insertBefore(t,n)}}(function(){var e="fa",t=Mr,i=Rr.familyPrefix,n=Rr.replacementClass,r='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(i!==e||n!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),s=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");r=r.replace(o,".".concat(i,"-")).replace(s,"--".concat(i,"-")).replace(a,".".concat(n))}return r}()),Do=!0)}function _o(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return wo(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(xr){var t=Tr.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Ao(e){var t=e.prefix,i=void 0===t?"fa":t,n=e.iconName;if(n)return yo(Po.definitions,i,n)||yo(Nr.styles,i,n)}var Oo,Po=new xo,Do=!1,Ro={transform:function(e){return function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var i=t.toLowerCase().split("-"),n=i[0],r=i.slice(1).join("-");if(n&&"h"===r)return e.flipX=!0,e;if(n&&"v"===r)return e.flipY=!0,e;if(r=parseFloat(r),isNaN(r))return e;switch(n){case"grow":e.size=e.size+r;break;case"shrink":e.size=e.size-r;break;case"left":e.x=e.x-r;break;case"right":e.x=e.x+r;break;case"up":e.y=e.y-r;break;case"down":e.y=e.y+r;break;case"rotate":e.rotate=e.rotate+r}return e}),t):t}(e)}},Vo=(Oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,n=void 0===i?oo:i,r=t.symbol,o=void 0!==r&&r,s=t.mask,a=void 0===s?null:s,l=t.maskId,c=void 0===l?null:l,u=t.title,d=void 0===u?null:u,h=t.titleId,f=void 0===h?null:h,p=t.classes,m=void 0===p?[]:p,g=t.attributes,v=void 0===g?{}:g,b=t.styles,S=void 0===b?{}:b;if(e){var y=e.prefix,w=e.iconName,k=e.icon;return _o(gr({type:"icon"},e),(function(){return Mo(),Rr.autoA11y&&(d?v["aria-labelledby"]="".concat(Rr.replacementClass,"-title-").concat(f||so()):(v["aria-hidden"]="true",v.focusable="false")),po({icons:{main:Eo(k),mask:a?Eo(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:y,iconName:w,transform:gr({},oo,n),symbol:o,title:d,maskId:c,titleId:f,extra:{attributes:v,styles:S,classes:m}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:Ao(e||{}),n=t.mask;return n&&(n=(n||{}).icon?n:Ao(n||{})),Oo(i,gr({},t,{mask:n}))});function No(e){return No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},No(e)}function Lo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Fo(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Bo(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(i),!0).forEach((function(t){Lo(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Fo(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Uo(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function jo(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Wo(e){return t=e,(t-=0)==t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function $o(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var i,n=t.indexOf(":"),r=Wo(t.slice(0,n)),o=t.slice(n+1).trim();return r.startsWith("webkit")?e[(i=r,i.charAt(0).toUpperCase()+i.slice(1))]=o:e[r]=o,e}),{})}var zo=!1;try{zo=!0}catch(e){}function Ho(e){return Ro.icon?Ro.icon(e):null===e?null:"object"===No(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"==typeof e?{prefix:"fas",iconName:e}:void 0}function Ko(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Lo({},e,t):{}}function Go(e){var t=e.forwardedRef,i=Uo(e,["forwardedRef"]),n=i.icon,r=i.mask,o=i.symbol,s=i.className,a=i.title,l=i.titleId,c=Ho(n),u=Ko("classes",[].concat(jo(function(e){var t,i=e.spin,n=e.pulse,r=e.fixedWidth,o=e.inverse,s=e.border,a=e.listItem,l=e.flip,c=e.size,u=e.rotation,d=e.pull,h=(Lo(t={"fa-spin":i,"fa-pulse":n,"fa-fw":r,"fa-inverse":o,"fa-border":s,"fa-li":a,"fa-flip-horizontal":"horizontal"===l||"both"===l,"fa-flip-vertical":"vertical"===l||"both"===l},"fa-".concat(c),null!=c),Lo(t,"fa-rotate-".concat(u),null!=u&&0!==u),Lo(t,"fa-pull-".concat(d),null!=d),Lo(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(h).map((function(e){return h[e]?e:null})).filter((function(e){return e}))}(i)),jo(s.split(" ")))),d=Ko("transform","string"==typeof i.transform?Ro.transform(i.transform):i.transform),h=Ko("mask",Ho(r)),f=Vo(c,Bo({},u,{},d,{},h,{symbol:o,title:a,titleId:l}));if(!f)return function(){var e;!zo&&console&&"function"==typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var p=f.abstract,m={ref:t};return Object.keys(i).forEach((function(e){Go.defaultProps.hasOwnProperty(e)||(m[e]=i[e])})),qo(p[0],m)}Go.displayName="FontAwesomeIcon",Go.propTypes={border:o().bool,className:o().string,mask:o().oneOfType([o().object,o().array,o().string]),fixedWidth:o().bool,inverse:o().bool,flip:o().oneOf(["horizontal","vertical","both"]),icon:o().oneOfType([o().object,o().array,o().string]),listItem:o().bool,pull:o().oneOf(["right","left"]),pulse:o().bool,rotation:o().oneOf([0,90,180,270]),size:o().oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:o().bool,symbol:o().oneOfType([o().bool,o().string]),title:o().string,transform:o().oneOfType([o().string,o().object]),swapOpacity:o().bool},Go.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var qo=function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof i)return i;var r=(i.children||[]).map((function(i){return e(t,i)})),o=Object.keys(i.attributes||{}).reduce((function(e,t){var n=i.attributes[t];switch(t){case"class":e.attrs.className=n,delete i.attributes.class;break;case"style":e.attrs.style=$o(n);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=n:e.attrs[Wo(t)]=n}return e}),{attrs:{}}),s=n.style,a=void 0===s?{}:s,l=Uo(n,["style"]);return o.attrs.style=Bo({},o.attrs.style,{},a),t.apply(void 0,[i.tag,Bo({},o.attrs,{},l)].concat(jo(r)))}.bind(null,e.createElement);const Qo=(0,e.forwardRef)(((t,i)=>{const{icon:n,...r}=t;return e.createElement("button",Object.assign({ref:i},r),e.createElement(Go,{icon:n,border:!0}))})),Jo=Qo,Xo=Jt.div`
  padding: 0.5rem 1rem;
`,Yo=({children:t})=>e.createElement(Xo,null,t),Zo=()=>{const t=ae(),[i,n]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=e=>{n(e)};return null==t||t.realtimeSubscribeToMuteAndUnmuteLocalAudio(e),()=>{null==t||t.realtimeUnsubscribeToMuteAndUnmuteLocalAudio(e)}}),[]),e.createElement(Yo,null,e.createElement(Jo,{icon:i?or:rr,onClick:async()=>{i?null==t||t.realtimeUnmuteLocalAudio():null==t||t.realtimeMuteLocalAudio()}}))},es=Rt`
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`,ts=Jt.div`
  width: 100%;
  background: #1b1c20;
  position: relative;
  display: inline-block;
  margin: 1%;
  vertical-align: top;

  &:before {
    content: '';
    display: block;
    padding-top: 56.25%;
  }

  &:after {
    content: '';
    position: absolute;
    box-shadow: 0 1rem 2.5rem 0 #000000;
    opacity: 0;
    transition: opacity 0.2s ease-in;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  &:hover:after {
    opacity: 0.3;
  }

  video {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
  }

  .icon {
    width: 1.5rem;
    height: 1.5rem;
    display: inline-block;
    background-color: papayawhip; /* TODO: figure out what this is supposed to be */
    margin-right: 0.5rem;
    flex: 0 0 1.5rem;
  }

  .nameplate {
    backdrop-filter: blur(20px);
    background-color: rgba(46, 47, 52, 0.85);
    border-radius: 0.25rem;
    bottom: 0.5rem;
    color: #ffffff;
    left: 0.5rem;
    max-width: calc(100% - 2rem);
    padding: 0.5rem;
    position: absolute;

    div {
      ${es};
      display: flex;
      align-items: center;
    }

    .text {
      font-size: 0.875rem;
      ${es};
      margin: 0;
    }
  }

  ${zi}
  ${$i}
`,is=({tag:t,className:i,nameplate:n,videoEl:r,...o})=>e.createElement(ts,Object.assign({as:t,className:i||"","data-testid":"video-tile"},o),e.createElement("video",{ref:r,className:"video"}),e.createElement("header",{className:"nameplate"},e.createElement("div",null,e.createElement("p",{className:"text"},n)))),ns=({style:t,videoEl:i,nameplate:n})=>{const r=ae();return(0,e.useEffect)((()=>{r&&r.addObserver({videoTileDidUpdate:e=>{e.boundAttendeeId&&e.localTile&&e.tileId&&i.current&&r.bindVideoElement(e.tileId,i.current)}})}),[r]),e.createElement(is,{videoEl:i,nameplate:n,style:t})},rs=()=>{const t=Se(),i=ae(),{isLocalVideoEnabled:n,toggleVideo:r,nameplate:o,setNameplate:s}=nr(),a=(0,e.useRef)(null),l=(()=>{const{meetingStatus:t}=ii(),i=Yn(),[n,r]=(0,e.useState)(!1),{setIsLocalVideoEnabled:o}=nr();return(0,e.useEffect)((()=>{if(t!==Zt.Succeeded)return;console.log("Setting up listeners for remote commands");const e=async e=>{const{type:t}=e;t===er.START_VIDEO?(console.log("Remote start share video"),r(!0),o("enabled")):t===er.STOP_VIDEO&&(console.log("Remote stop share video"),r(!1))};return null==i||i.subscribeToMessageUpdate(e),()=>null==i?void 0:i.unsubscribeFromMessageUpdate(e)}),[t,i]),n})(),c=t.attendeeName;return(0,e.useEffect)((()=>{i&&(l&&"disabled"!==n&&(a.current&&i.stopVideoPreviewForVideoInput(a.current),(async()=>{await i.chooseVideoInputDevice(t.selectedVideoInputDevice),i.startLocalVideoTile(),s(c)})()),l||"enabled"!==n||(i.stopLocalVideoTile(),(async()=>{if(await i.chooseVideoInputDevice(t.selectedVideoInputDevice),!a.current)throw new Error("No video preview element to show preview!");i.startVideoPreviewForVideoInput(a.current),s(`${c} - preview`)})()))}),[i,l]),e.createElement(e.Fragment,null,e.createElement(Yo,null,e.createElement(Jo,{icon:"enabled"===n?cr:"disabled"===n?ur:lr,disabled:"pending"===n,onClick:()=>r(a.current)})),e.createElement(ns,{nameplate:o,videoEl:a,style:{width:"20rem",position:"absolute",top:"3.5rem",background:"#1c1c1c"}}))},os=()=>{const t=ae(),[i,n]=(0,e.useState)(!0),r=(0,e.useRef)(null);return(0,e.useEffect)((()=>{if(t)return r.current&&t.bindAudioElement(r.current),()=>{t.unbindAudioElement()}}),[r,t]),e.createElement(e.Fragment,null,e.createElement(Yo,null,e.createElement(Jo,{icon:i?hr:dr,onClick:()=>{r.current&&(n(!i),i?null==t||t.unbindAudioElement():null==t||t.bindAudioElement(r.current))}})),e.createElement("audio",{ref:r,style:{display:"none"}}))},ss=Jt.p`
  color: '#616672',
  fontSize: '14px',
  margin: '0 0 0.5rem',
`,as=()=>{const t=Se(),i=z(),[n,r]=(0,e.useState)(!1),{updateMeetingStatus:o}=ii(),s=Yn(),a=()=>{r(!n)},l=()=>{var e;try{null===(e=null==s?void 0:s.websocket)||void 0===e||e.close(1e4),console.log("Closing web socket")}catch(e){console.error(`Unable to send close message on messaging socket: ${e}`)}};return e.createElement(e.Fragment,null,e.createElement(Yo,null,e.createElement(Jo,{icon:ar,onClick:async()=>{await(null==t?void 0:t.leaveMeeting()),l(),i.push(Yt.HOME)}}),e.createElement(Jo,{icon:sr,onClick:a})),n&&e.createElement(Rn,{size:"medium",onClose:a,rootId:"modal-root"},e.createElement(Nn,{title:"End Meeting"}),e.createElement(Vn,null,e.createElement(ss,null,"Are you sure you want to end the meeting for everyone? The meeting cannot be used after ending it.")),e.createElement(Fn,{primaryButtons:[e.createElement(Ln,{onClick:async()=>{await(null==t?void 0:t.endMeeting()),o(Zt.Ended),l(),i.push(Yt.HOME)},variant:"primary",label:"End meeting for all",closesModal:!0}),e.createElement(Ln,{variant:"secondary",label:"Cancel",closesModal:!0})]})))},ls=()=>{const t=Se(),i=null==t?void 0:t.meetingId,n=null==t?void 0:t.region;return(()=>{const t=Yn(),{meetingStatus:i}=ii();(0,e.useEffect)((()=>{i===Zt.Succeeded&&(async()=>{await(null==t?void 0:t.sendVideoMessaging())})()}),[i])})(),e.createElement("div",{className:"MeetingControlContainer",style:{display:"flex"}},e.createElement("p",null,`${i} (${n})`),e.createElement(Zo,null),e.createElement(rs,null),e.createElement(os,null),e.createElement(as,null))},cs=Jt.div`
  display: flex;

  .attendee-name {
    flex-grow: 1;
  }

  .active-speaker-status {
    width: 3rem;
  }

  p {
    margin: 1rem;
  }
`,us=t=>{const{id:i,name:n,isActiveSpeaker:r}=t,{muted:o}=function(t){const[i,n]=(0,e.useState)(0),[r,o]=(0,e.useState)(!1),[s,a]=(0,e.useState)(0),l=ae();return(0,e.useEffect)((()=>{if(l)return l.realtimeSubscribeToVolumeIndicator(t,((e,t,i,r)=>{null!==t&&n(Math.round(100*t)),null!==i&&o(i),null!==r&&a(Math.round(100*r))})),()=>{l.realtimeUnsubscribeFromVolumeIndicator(t)}}),[l,t]),{volume:i,muted:r,signalStrength:s}}(i);return e.createElement(cs,null,e.createElement("p",{className:"attendee-name"},n),e.createElement("p",null,o?"muted":"not muted"),e.createElement("p",{className:"active-speaker-status"},r?"speaking":""))},ds=Jt.div`
  border: 1px solid;
  display: inline-flex;
  flex-direction: column;
  position: absolute;
  right: 1rem;
  top: 3.5rem;
`,hs=()=>{const t=ue(),i=function(){const[t,i]=(0,e.useState)([]),n=ae();return(0,e.useEffect)((()=>{if(!n)return;const e=e=>{i(e)};return n.subscribeToActiveSpeakerDetector(new te.SvZ,e),()=>{n.unsubscribeFromActiveSpeakerDetector(e)}}),[n]),t}(),n=Object.values(t).map((t=>{const{id:n,name:r}=t;return e.createElement(us,{key:n,id:n,name:r,isActiveSpeaker:i.includes(n)})}));return e.createElement(ds,null,n)},fs={1:"grid-template: 1fr / 1fr;","1.slim":"grid-template: repeat(3,1fr) / 1fr;","1.r1by2":"grid-template: repeat(3,1fr) / 1fr;","1.r21by9":"grid-template: 1fr / 3fr 1fr;","1.r29by9":"grid-template: 1fr / 2fr 1fr;","1.r36by9":"grid-template: 1fr / 1fr 1fr;",2:"grid-template: 1fr / repeat(2,1fr);","2.slim":"grid-template: repeat(3,1fr) / 1fr;","2.r1by2":"grid-template: repeat(3,1fr) / 1fr;","2.r2by3":"grid-template: repeat(2,1fr) / 1fr;","2.r1by1":"grid-template: repeat(2,1fr) / 1fr;","2.r4by3":"grid-template: repeat(2,1fr) / repeat(2,1fr);","2.r3by2":"grid-template: repeat(2,1fr) / repeat(2,1fr);","2.r16by9":"grid-template: 4fr 3fr / repeat(2,1fr);","2.r21by9":"grid-template: 5fr 1fr / repeat(2,1fr)","2.r29by9":"grid-template: 1fr / repeat(2,1fr)","2.r36by9":"grid-template: 1fr / repeat(2,2fr) 1fr;",3:"grid-template: repeat(2,1fr) / repeat(2,1fr);","3.slim":"grid-template: repeat(3,1fr) / 1fr;","3.r1by2":"grid-template: repeat(3,1fr) / 1fr;","3.r2by3":"grid-template: repeat(3,1fr) / 1fr;","3.r4by3":"grid-template: repeat(2,1fr) / repeat(2,1fr);","3.r21by9":"grid-template: 2fr 1fr / repeat(3,1fr);","3.r29by9":"grid-template: 4fr 1fr / repeat(3,1fr);","3.r36by9":"grid-template: 4fr 1fr / repeat(3,1fr);",4:"grid-template: repeat(2,1fr) / repeat(2,1fr);","4.slim":"grid-template: repeat(4,1fr) / 1fr;","4.r1by2":"grid-template: repeat(3,1fr) / repeat(2,1fr);","4.r2by3":"grid-template: repeat(2,3fr) 2fr / repeat(2,1fr);","4.r1by1":"grid-template: repeat(2,2fr) 1fr / repeat(2,1fr);","4.r4by3":"grid-template: repeat(2,4fr) 1fr / repeat(2,1fr);","4.r21by9":"grid-template: repeat(2,1fr) / repeat(3,1fr);","4.r29by9":"grid-template: 2fr 2fr / repeat(3,1fr);","4.r36by9":"grid-template: 2fr 1fr / repeat(4,1fr);",5:"grid-template: repeat(2,1fr) / repeat(3,1fr);","5.slim":"grid-template: repeat(5,1fr) / 1fr;","5.r1by2":"grid-template: repeat(4,1fr) / repeat(2,1fr);","5.r2by3":"grid-template: repeat(3,1fr) / repeat(2,1fr);","5.r1by1":"grid-template: repeat(3,1fr) / repeat(2,1fr);","5.r4by3":"grid-template: repeat(3,1fr) / repeat(2,1fr);","5.r3by2":"grid-template: repeat(3,1fr) / repeat(2,1fr);","5.r16by9":"grid-template: repeat(2,6fr) 1fr / repeat(3,1fr);","5.r21by9":"grid-template: repeat(2,1fr) / repeat(4,1fr);","5.r29by9":"grid-template: repeat(2,1fr) / repeat(4,1fr);","5.r36by9":"grid-template: 2fr 1fr / repeat(5,1fr);",6:"grid-template: repeat(3,1fr) / repeat(3,1fr);","6.slim":"grid-template: repeat(4,1fr) / repeat(2,1fr);","6.r1by2":"grid-template: repeat(4,1fr) / repeat(2,1fr);","6.r2by3":"grid-template: repeat(4,1fr) / repeat(2,1fr);","6.r1by1":"grid-template: repeat(3,1fr) / repeat(2,1fr);","6.r4by3":"grid-template: repeat(3,1fr) / repeat(2,1fr);","6.r21by9":"grid-template: repeat(2,1fr) / repeat(3,1fr);","6.r16by9":"grid-template: repeat(2,7fr) 1fr / repeat(3,1fr);","6.r29by9":"grid-template: repeat(2,1fr) / repeat(4,1fr);","6.r36by9":"grid-template: repeat(2,1fr) / repeat(5,1fr);",7:"grid-template: repeat(3,1fr) / repeat(3,1fr);","7.slim":"grid-template: repeat(4,1fr) / repeat(2,1fr);","7.r1by2":"grid-template: repeat(4,1fr) / repeat(2,1fr);","7.r2by3":"grid-template: repeat(4,1fr) / repeat(2,1fr);","7.r1by1":"grid-template: repeat(3,1fr) / repeat(3,1fr);","7.r4by3":"grid-template: repeat(3,1fr) / repeat(3,1fr);","7.r16by9":"grid-template: repeat(2,4fr) 1fr/ repeat(4,1fr);","7.r21by9":"grid-template: repeat(2,3fr) / repeat(4,1fr);","7.r29by9":"grid-template: repeat(2,1fr) / repeat(4,1fr);","7.r36by9":"grid-template: repeat(2,1fr) / repeat(5,1fr);",8:"grid-template: repeat(3,1fr) / repeat(3,1fr);","8.slim":"grid-template: repeat(5,10fr) 1fr / repeat(2,1fr);","8.r1by2":"grid-template: repeat(4,1fr) / repeat(2,1fr);","8.r2by3":"grid-template: repeat(4,1fr) / repeat(2,1fr);","8.r1by1":"grid-template: repeat(3,1fr) / repeat(3,1fr);","8.r4by3":"grid-template: repeat(3,1fr) / repeat(3,1fr);","8.r16by9":"grid-template: repeat(2,3fr) 1fr / repeat(4,1fr);","8.r21by9":"grid-template: repeat(2,1fr) / repeat(4,1fr);","8.r29by9":"grid-template: repeat(2,1fr) / repeat(4,1fr);","8.r36by9":"grid-template: repeat(2,4fr) / repeat(5,1fr);",9:"grid-template: repeat(3,1fr) / repeat(3,1fr);","9.slim":"grid-template: repeat(5,1fr) / repeat(2,1fr);","9.r1by2":"grid-template: repeat(5,1fr) / repeat(2,1fr);","9.r2by3":"grid-template: repeat(4,1fr) / repeat(3,1fr);","9.r1by1":"grid-template: repeat(3,1fr) / repeat(3,1fr);","9.r4by3":"grid-template: repeat(3,1fr) / repeat(3,1fr);","9.r16by9":"grid-template: repeat(3,1fr) / repeat(4,1fr);","9.r21by9":"grid-template: repeat(2,6fr) 1fr / repeat(5,1fr);","9.r29by9":"grid-template: repeat(2,1fr) / repeat(5,1fr);","9.r36by9":"grid-template: repeat(2,1fr) / repeat(5,1fr);",10:"grid-template: repeat(4,1fr) / repeat(3,1fr);","10.slim":"grid-template: repeat(5,1fr) / repeat(2,1fr);","10.r1by2":"grid-template: repeat(5,1fr) / repeat(2,1fr);","10.r2by3":"grid-template: repeat(5,1fr) / repeat(2,1fr);","10.r1by1":"grid-template: repeat(4,1fr) / repeat(3,1fr);","10.r4by3":"grid-template: repeat(4,1fr) / repeat(3,1fr);","10.r3by2":"grid-template: repeat(3,6fr) 1fr / repeat(4,1fr);","10.r16by9":"grid-template: repeat(3,1fr) / repeat(4,1fr);","10.r21by9":"grid-template: repeat(2,6fr) 1fr / repeat(5,1fr);","10.r29by9":"grid-template: repeat(2,1fr) / repeat(5,1fr);","10.r36by9":"grid-template: repeat(2,1fr) / repeat(5,1fr);",11:"grid-template: repeat(4,1fr) / repeat(3,1fr);","11.slim":"grid-template: repeat(6,1fr) / repeat(2,1fr);","11.r1by2":"grid-template: repeat(6,1fr) / repeat(2,1fr);","11.r2by3":"grid-template: repeat(4,5fr) 1fr / repeat(3,1fr);","11.r1by1":"grid-template: repeat(4,1fr) / repeat(3,1fr);","11.r4by3":"grid-template: repeat(4,1fr) / repeat(3,1fr);","11.r3by2":"grid-template: repeat(3,5fr) 1fr / repeat(4,1fr);","11.r16by9":"grid-template: repeat(3,7fr) / repeat(4,1fr);","11.r21by9":"grid-template: repeat(3,1fr) / repeat(5,1fr);","11.r29by9":"grid-template: repeat(2,10fr) 1fr / repeat(6,1fr);","11.r36by9":"grid-template: repeat(2,1fr) / repeat(6,1fr);",12:"grid-template: repeat(4,1fr) / repeat(3,1fr);","12.slim":"grid-template: repeat(6,1fr) / repeat(2,1fr);","12.r1by2":"grid-template: repeat(6,1fr) / repeat(2,1fr);","12.r2by3":"grid-template: repeat(4,1fr) / repeat(3,1fr);","12.r1by1":"grid-template: repeat(4,1fr) / repeat(3,1fr);","12.r4by3":"grid-template: repeat(4,1fr) / repeat(3,1fr);","12.r3by2":"grid-template: repeat(3,1fr) / repeat(4,1fr);","12.r16by9":"grid-template: repeat(3,1fr) / repeat(4,1fr);","12.r21by9":"grid-template: repeat(3,1fr) / repeat(5,1fr);","12.r29by9":"grid-template: repeat(2,4fr) 2fr / repeat(6,1fr);","12.r36by9":"grid-template: repeat(2,4fr) / repeat(6,1fr);",13:"grid-template: repeat(4,1fr) / repeat(4,1fr);","13.slim":"grid-template: repeat(7,1fr) / repeat(2,1fr);","13.r1by2":"grid-template: repeat(7,1fr) / repeat(2,1fr);","13.r2by3":"grid-template: repeat(5,6fr) / repeat(3,6fr);","13.r1by1":"grid-template: repeat(4,1fr) / repeat(4,1fr);","13.r4by3":"grid-template: repeat(4,1fr) / repeat(4,1fr);","13.r21by9":"grid-template: repeat(3,1fr) / repeat(5,1fr);","13.r29by9":"grid-template: repeat(3,1fr) / repeat(6,1fr);","13.r36by9":"grid-template: repeat(2,1fr) / repeat(7,1fr);",14:"grid-template: repeat(4,1fr) / repeat(4,1fr);","14.slim":"grid-template: repeat(7,1fr) / repeat(2,1fr);","14.r1by2":"grid-template: repeat(7,1fr) / repeat(2,1fr);","14.r2by3":"grid-template: repeat(5,1fr) / repeat(3,1fr);","14.r1by1":"grid-template: repeat(5,1fr) / repeat(3,1fr);","14.r4by3":"grid-template: repeat(2,1fr) / repeat(2,1fr);","14.r16by9":"grid-template: repeat(3,1fr) / repeat(5,1fr);","14.r21by9":"grid-template: repeat(3,1fr) / repeat(5,1fr);","14.r29by9":"grid-template: repeat(3,1fr) / repeat(6,1fr);","14.r36by9":"grid-template: repeat(2,1fr) / repeat(7,1fr);",15:"grid-template: repeat(5,1fr) / repeat(3,1fr);","15.slim":"grid-template: repeat(8,1fr) / repeat(2,1fr);","15.r1by2":"grid-template: repeat(5,1fr) / repeat(3,1fr);","15.r2by3":"grid-template: repeat(5,1fr) / repeat(3,1fr);","15.r1by1":"grid-template: repeat(5,1fr) / repeat(3,1fr);","15.r3by2":"grid-template: repeat(4,1fr) / repeat(4,1fr);","15.r4by3":"grid-template: repeat(4,1fr) / repeat(4,1fr);","15.r16by9":"grid-template: repeat(3,1fr) / repeat(5,1fr);","15.r21by9":"grid-template: repeat(3,1fr) / repeat(5,1fr);","15.r29by9":"grid-template: repeat(3,1fr) / repeat(6,1fr);","15.r36by9":"grid-template: repeat(2,1fr) / repeat(8,1fr);",16:"grid-template: repeat(4,1fr) / repeat(4,1fr);","16.slim":"grid-template: repeat(8,1fr) / repeat(2,1fr);","16.r1by2":"grid-template: repeat(6,1fr) / repeat(3,1fr);","16.r2by3":"grid-template: repeat(6,1fr) / repeat(3,1fr);","16.r1by1":"grid-template: repeat(4,5fr) 1fr / repeat(4,1fr);","16.r4by3":"grid-template: repeat(4,2fr) 1fr / repeat(4,1fr);","16.r16by9":"grid-template: repeat(4,1fr) / repeat(5,1fr);","16.r21by9":"grid-template: repeat(3,1fr) / repeat(6,1fr);","16.r29by9":"grid-template: repeat(3,1fr) / repeat(7,1fr);","16.r36by9":"grid-template: repeat(3,1fr) / repeat(7,1fr);"},ps=Jt.div`
  display: grid;
  height: 100%;
  width: 100%;

  ${({size:e,ratio:t})=>`\n    ${fs[e]}\n    ${fs[`${e}.${t}`]||""}\n  `}
`;var ms=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var i=-1;return e.some((function(e,n){return e[0]===t&&(i=n,!0)})),i}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var i=e(this.__entries__,t),n=this.__entries__[i];return n&&n[1]},t.prototype.set=function(t,i){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=i:this.__entries__.push([t,i])},t.prototype.delete=function(t){var i=this.__entries__,n=e(i,t);~n&&i.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];e.call(t,r[1],r[0])}},t}()}(),gs="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,vs=void 0!==__webpack_require__.g&&__webpack_require__.g.Math===Math?__webpack_require__.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),bs="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(vs):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},Ss=["top","right","bottom","left","width","height","size","weight"],ys="undefined"!=typeof MutationObserver,ws=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var i=!1,n=!1,r=0;function o(){i&&(i=!1,e()),n&&a()}function s(){bs(o)}function a(){var e=Date.now();if(i){if(e-r<2)return;n=!0}else i=!0,n=!1,setTimeout(s,20);r=e}return a}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,i=t.indexOf(e);~i&&t.splice(i,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){gs&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ys?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){gs&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,i=void 0===t?"":t;Ss.some((function(e){return!!~i.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),ks=function(e,t){for(var i=0,n=Object.keys(t);i<n.length;i++){var r=n[i];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},Cs=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||vs},Is=_s(0,0,0,0);function Ts(e){return parseFloat(e)||0}function Es(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce((function(t,i){return t+Ts(e["border-"+i+"-width"])}),0)}var xs="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Cs(e).SVGGraphicsElement}:function(e){return e instanceof Cs(e).SVGElement&&"function"==typeof e.getBBox};function Ms(e){return gs?xs(e)?function(e){var t=e.getBBox();return _s(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return Is;var n=Cs(e).getComputedStyle(e),r=function(e){for(var t={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var r=n[i],o=e["padding-"+r];t[r]=Ts(o)}return t}(n),o=r.left+r.right,s=r.top+r.bottom,a=Ts(n.width),l=Ts(n.height);if("border-box"===n.boxSizing&&(Math.round(a+o)!==t&&(a-=Es(n,"left","right")+o),Math.round(l+s)!==i&&(l-=Es(n,"top","bottom")+s)),!function(e){return e===Cs(e).document.documentElement}(e)){var c=Math.round(a+o)-t,u=Math.round(l+s)-i;1!==Math.abs(c)&&(a-=c),1!==Math.abs(u)&&(l-=u)}return _s(r.left,r.top,a,l)}(e):Is}function _s(e,t,i,n){return{x:e,y:t,width:i,height:n}}var As=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=_s(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Ms(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Os=function(e,t){var i=function(e){var t=e.x,i=e.y,n=e.width,r=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return ks(s,{x:t,y:i,width:n,height:r,top:i,right:t+n,bottom:r+i,left:t}),s}(t);ks(this,{target:e,contentRect:i})},Ps=function(){function e(e,t,i){if(this.activeObservations_=[],this.observations_=new ms,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Cs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new As(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Cs(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Os(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Ds="undefined"!=typeof WeakMap?new WeakMap:new ms,Rs=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=ws.getInstance(),n=new Ps(t,i,this);Ds.set(this,n)};["observe","unobserve","disconnect"].forEach((function(e){Rs.prototype[e]=function(){var t;return(t=Ds.get(this))[e].apply(t,arguments)}}));const Vs=void 0!==vs.ResizeObserver?vs.ResizeObserver:Rs;var Ns=__webpack_require__(3774);function Ls(e,t){const i=t/e;return i>4?"r36by9":i>29/9?"r29by9":i>21/9?"r21by9":i>16/9?"r16by9":i>1.5?"r3by2":i>4/3?"r4by3":i>1?"r1by1":i>2/3?"r2by3":i>.5?"r1by2":"slim"}const Fs=({size:t,children:i,...n})=>{const r=(0,e.createRef)(),o=(t=>{const[i,n]=(0,e.useState)(null);return(0,e.useLayoutEffect)((()=>{if(!t.current)return;const{height:e,width:i}=t.current.getBoundingClientRect();n(Ls(e,i))}),[]),(0,e.useEffect)((()=>{if(!t.current)return;const e=(0,Ns.debounce)(50,(e=>{const{height:t,width:i}=e[0].contentRect;n(Ls(t,i))})),i=new Vs(e);return i.observe(t.current),()=>i.disconnect()}),[]),i})(r);return e.createElement(ps,Object.assign({ref:r},n,{size:t,ratio:o,"data-testid":"video-grid"}),i)},Bs=Rt`
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`,Us=Jt.div`
  width: 100%;
  position: relative;
  display: ${e=>e.enabled?"inline-block":"none"};
  vertical-align: top;
  top: 12rem;

  &:before {
    content: '';
    display: block;
    padding-top: 56.25%;
  }

  &:after {
    content: '';
    position: absolute;
    box-shadow: 0 1rem 2.5rem 0 #000000;
    opacity: 0;
    transition: opacity 0.2s ease-in;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  &:hover:after {
    opacity: 0.3;
  }

  video {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
  }

  .nameplate {
    backdrop-filter: blur(20px);
    background-color: rgba(46, 47, 52, 0.85);
    border-radius: 0.25rem;
    bottom: 0.5rem;
    color: #ffffff;
    left: 0.5rem;
    max-width: calc(100% - 2rem);
    padding: 0.5rem;
    position: absolute;

    div {
      ${Bs};
      display: flex;
      align-items: center;
    }

    .text {
      font-size: 0.875rem;
      ${Bs};
      margin: 0;
    }
  }

  ${zi}
  ${$i}
`,js=({tag:t,className:i,videoEleRef:n,attendeeName:r,...o})=>e.createElement(Us,Object.assign({as:t,className:i||""},o),e.createElement("video",{ref:n}),e.createElement("header",{className:"nameplate"},e.createElement("div",null,e.createElement("p",{className:"text"},r)))),Ws=()=>{const t=ue(),i={},n=[],[r,o]=(0,e.useState)({}),s=ae();(0,e.useEffect)((()=>{if(!s)return;const e={videoTileDidUpdate:e=>{const{boundAttendeeId:t,localTile:r,isContent:a,tileId:l}=e;if(!t||r||a||!l)return;const c=(e=>{for(let t=0;t<16;t++)if(i[t]===e)return t;for(let t=0;t<16;t++)if(!(t in i))return i[t]=e,t;throw new Error("no tiles are available")})(l);s.bindVideoElement(l,n[c]),o((e=>({...e,[c]:{boundAttendeeId:t}})))},videoTileWasRemoved:e=>{const t=(e=>{for(let t=0;t<16;t++)if(i[t]===e)return delete i[t],t;return 16})(e);o((e=>({...e,[t]:null})))}};return s.addObserver(e),()=>{s.removeObserver(e)}}),[s]);const a=Object.keys(r).reduce(((e,t)=>e+(r[t]?1:0)),0);return e.createElement("div",null,e.createElement(Fs,{size:a},Array.from(Array(16).keys()).map(((i,o)=>{const s=r&&r[o];let a;return s&&t&&(a=t[s.boundAttendeeId]),e.createElement(js,{key:i,enabled:!!s,attendeeName:null==a?void 0:a.name,videoEleRef:(0,e.useCallback)((e=>{e&&(n[o]=e)}),[])})}))))},$s=()=>{const{meetingStatus:t}=ii(),i=Se(),n=null==i?void 0:i.meetingId,r=z();return(0,e.useEffect)((()=>{t!==Zt.Ended&&t!==Zt.Failed&&n||(i.leaveMeeting(),r.push(Yt.HOME))})),e.createElement(ti,null,e.createElement(Zn,null,e.createElement(ir,null,e.createElement(ls,null),e.createElement(hs,null),e.createElement(Ws,null))))},zs=Jt.input`
  align-items: center;
  display: flex;
  letter-spacing: -0.005625rem;
  transition: box-shadow .05s ease-in;
  background-color: #ffffff;
  border: 0.03125rem solid #d4d5d8;
  border-radius: 0.25rem;
  box-shadow: 0 0.0625rem 0.0625rem 0 ${qi("#000000",.1)};
  color: #3f4149;
  font-size: 0.875rem;
  line-height: 1.43;

  &::placeholder {
    color: #989da5;
  }

  &:focus,
  &[aria-invalid="true"]:focus {
    border:solid 0.03125rem #5d96ff;
    box-shadow: 0 0 0 0.125rem #88b2ff;
    outline: none;
  }

  &[aria-invalid="true"] {
    border: 0.03125rem solid #9E3319;
    box-shadow: 0 0 0 0.125rem #FF927C;
  }
`,Hs=(0,e.forwardRef)(((t,i)=>{const{className:n,sizing:r,type:o,onChange:s,...a}=t;return e.createElement(zs,Object.assign({},a,{type:o||"text",ref:i,className:"Input",onChange:e=>s(e),"data-testid":"input"}))}));Hs.displayName="Input";const Ks=Hs,Gs=()=>e.createElement(Go,{icon:lr,spin:!0}),qs=Jt.div`
  display: block;
  min-height: 100%;
  margin: auto;
  padding: 1rem;

  @media (min-width: 600px) and (min-height: 600px) {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
`,Qs=Jt.p`
  color: '#616672',
  fontSize: '14px',
  margin: '0 0 0.5rem',
`,Js=()=>{const t=Se(),[i,n]=(0,e.useState)(""),[r,o]=(0,e.useState)(""),[s,a]=(0,e.useState)(!1),{errorMessage:l,updateErrorMessage:c}=(0,e.useContext)(ke()),u=z();return e.createElement(qs,null,e.createElement("form",null,e.createElement("h1",null,"Join a meeting"),e.createElement(rn,{field:Ks,label:"Meeting Id",value:i,fieldProps:{name:"meetingId",placeholder:"Enter Meeting Id"},onChange:e=>n(e.target.value)}),e.createElement(rn,{field:Ks,label:"Name",value:r,fieldProps:{name:"inputName",placeholder:"Enter Your Name"},onChange:e=>o(e.target.value)}),e.createElement(wn,{container:!0,layout:"fill-space-centered",style:{marginTop:"2.5rem"}},s?e.createElement(Gs,null):e.createElement(gn,{variant:"primary",label:"Continue",onClick:async e=>{e.preventDefault(),a(!0);try{const e=await(null==t?void 0:t.authenticate(i,r,"us-east-1"));console.log("Join meeting info ",e),u.push(Yt.DEVICE)}catch(e){c(e.message)}}})),l&&e.createElement(Rn,{size:"medium",onClose:()=>{c(""),n(""),o(""),a(!1)}},e.createElement(Nn,{title:`Unable to join meeting: ${i}`}),e.createElement(Vn,null,e.createElement(Qs,null,"There was an issue finding that meeting. The meeting may have already ended, or your authorization may have expired.")),e.createElement(Fn,{primaryButtons:[e.createElement(Ln,{variant:"secondary",label:"Cancel",closesModal:!0})]}))))},Xs=()=>e.createElement(H,null,e.createElement(Ce,null,e.createElement(ye,null,e.createElement(W,null,e.createElement(j,{path:Yt.HOME,exact:!0,component:Js}),e.createElement(j,{path:Yt.DEVICE,component:Wn}),e.createElement(j,{path:Yt.MEETING,component:$s})))));window.addEventListener("load",(()=>{t.render(e.createElement(Xs,null),document.getElementById("root"))}))})(),app_meeting=__webpack_exports__})();